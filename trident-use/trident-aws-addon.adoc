---
sidebar: sidebar 
permalink: trident-use/trident-aws-addon.html 
keywords: Trident add-on, Trident EKS add-on, Trident AWS EKS add-on, integrate Trident, Trident 
summary: 将Trident EKS 插件添加到 Kubernetes 集群。 
---
= 在 EKS 集群上配置Trident EKS 插件
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NetApp Trident简化了 Kubernetes 中Amazon FSx for NetApp ONTAP存储管理，使您的开发人员和管理员能够专注于应用程序部署。  NetApp Trident EKS 插件包含最新的安全补丁和错误修复，并经过 AWS 验证，可与 Amazon EKS 配合使用。  EKS 插件使您能够持续确保您的 Amazon EKS 集群安全稳定，并减少安装、配置和更新插件所需的工作量。



== 前提条件

在为 AWS EKS 配置Trident插件之前，请确保您已具备以下条件：

* 具有使用插件权限的 Amazon EKS 集群账户。参考link:https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html["Amazon EKS 附加组件"^]。
* AWS 对 AWS Marketplace 的权限：
`"aws-marketplace:ViewSubscriptions",
"aws-marketplace:Subscribe",
"aws-marketplace:Unsubscribe`
* AMI 类型：Amazon Linux 2 (AL2_x86_64) 或 Amazon Linux 2 Arm (AL2_ARM_64)
* 节点类型：AMD 或ARM
* 现有的Amazon FSx for NetApp ONTAP文件系统




== 步骤

. 请务必创建 IAM 角色和 AWS 密钥，以使 EKS pod 能够访问 AWS 资源。有关说明，请参阅link:../trident-use/trident-fsx-iam-role.html["创建 IAM 角色和 AWS Secret"^]。
. 在 EKS Kubernetes 集群上，导航到“附加组件”选项卡。
+
image::../media/aws-eks-01.png[aws eks 01]

. 前往 *AWS Marketplace 插件*，然后选择 _storage_ 类别。
+
image::../media/aws-eks-02.png[aws eks 02]

. 找到 * NetApp Trident*，选中Trident插件的复选框，然后单击 *下一步*。
. 选择所需的插件版本。
+
image::../media/aws-eks-03.png[aws eks 03]

. 配置所需的附加组件设置。
+
image::../media/aws-eks-04.png[aws eks 04]

. 如果您使用的是 IRSA（服务帐户的 IAM 角色），请参阅其他配置步骤。link:https://docs.netapp.com/us-en/trident/trident-use/trident-fsx-install-trident.html#enable-the-trident-add-on-for-aws["此处"] 。
. 选择“*创建*”。
. 确认插件状态为_Active_。
+
image::../media/aws-eks-05.png[aws eks 05]

. 运行以下命令以验证Trident是否已正确安装在集群上：
+
[listing]
----
kubectl get pods -n trident
----
. 继续进行设置并配置存储后端。有关信息，请参阅link:../trident-use/trident-fsx-storage-backend.html["配置存储后端"^]。




== 使用 CLI 安装/卸载Trident EKS 插件

.使用 CLI 安装NetApp Trident EKS 插件：
以下示例命令安装Trident EKS 插件：
`eksctl create addon --cluster clusterName --name netapp_trident-operator --version v25.6.0-eksbuild.1` （另有专用版本）

.使用 CLI 卸载NetApp Trident EKS 插件：
以下命令卸载Trident EKS 插件：

[listing]
----
eksctl delete addon --cluster K8s-arm --name netapp_trident-operator
----