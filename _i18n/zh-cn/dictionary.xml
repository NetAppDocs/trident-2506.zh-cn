<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="paragraph-title">开始之前</block>
  <block id="09b3e69fece0c8fed98cbfa4f60560d0" category="paragraph">确保 AWS 会话令牌过期时间足以满足任何长时间运行的 S3 备份操作。如果在备份操作期间令牌过期，则操作可能会失败。</block>
  <block id="5eb831e0d78e65bcd3dba1b12bc07037" category="inline-link">AWS API 文档</block>
  <block id="acc296a904bd0d4d976a52cfe9fe9b8c" category="list-text">请参阅<block ref="718365c4473e4015a2556ceb49bc6d0e" category="inline-link-rx"></block>有关检查当前会话令牌过期时间的更多信息。</block>
  <block id="47700faecc8b055ea48413402a7add11" category="inline-link">AWS IAM 文档</block>
  <block id="40a9530583ad3747ca30675858b0a6cd" category="list-text">请参阅<block ref="101809cc7793764f39e2d5fc223ea04c" category="inline-link-rx"></block>有关 AWS 资源凭证的更多信息。</block>
  <block id="782b4a6bf31d7d564f002ed80e56a970" category="doc">数据移动超时注释</block>
  <block id="2cf4114566459ea3b3a5ac507cb86fd9" category="paragraph">在备份和恢复操作期间，您可以使用注解<block ref="f49fa3f76b2a4fcdf04dff369d417d84" prefix=" " category="inline-code"></block>配置数据传输操作的超时时间。此注解指定数据移动器在超时之前应等待特定操作完成的最长时间（以秒为单位）。在网络问题或其他因素可能导致数据传输操作停滞的情况下，它尤其有用。它有助于检测和处理停滞的操作，而不是为整个过程设置一个通用的超时时间。例如，如果由于网络问题导致恢复卷数据没有进展，则操作将根据指定的持续时间超时。</block>
  <block id="c2b7f24f4ddbaedb4e3d9e19f77eebac" category="paragraph">您可以在 YAML 文件中使用此注解，如下所示：</block>
  <block id="14a0e26cbe187a4754f8b523ffba6073" category="paragraph">在这个例子中，注解失败了。<block ref="ec2a2895b09b6030ec8cc1b3c43ddc4d" prefix=" " category="inline-code"></block>如果在恢复操作中 2 秒内没有进展，则执行操作。</block>
  <block id="c49aaf233c16f1193a8d683c17866eea" category="admonition">如果注解值小于或等于 0，则操作将立即失败。</block>
  <block id="5ac5b84505fffb8149e9d0cb84ddedbe" category="admonition">在恢复操作期间，任何<block ref="890b633d48ac6398f14ae722463da08b" prefix=" " category="inline-code"></block>为虚拟机 (VM) 创建的配置文件无法恢复。</block>
  <block id="acb14ba5b70eb330a1d4de9c6b7a325d" category="inline-link-macro">配置虚拟化</block>
  <block id="cedf2576eebff15fc6b30d5a7109eb6b" category="doc">恢复和故障转移操作期间的命名空间注释和标签</block>
  <block id="131ff34387be167411ffda7d60b577e7" category="paragraph">在恢复和故障转移操作期间，目标命名空间中的标签和注释将与源命名空间中的标签和注释相匹配。源命名空间中不存在的目标命名空间中的标签或注释将被添加，并且任何已存在的标签或注释都将被覆盖以匹配源命名空间中的值。仅存在于目标命名空间中的标签或注释保持不变。</block>
  <block id="20f40e0b9308901dac07ce8a8efb3350" category="inline-link">OpenShift 安全上下文约束文档</block>
  <block id="2c9ccd5e8999c2c36f29069165f327c3" category="admonition">如果您使用 Red Hat OpenShift，请务必注意命名空间注释在 OpenShift 环境中的重要作用。命名空间注释确保恢复的 pod 遵守 OpenShift 安全上下文约束 (SCC) 定义的适当权限和安全配置，并且可以访问卷而不会出现权限问题。欲了解更多信息，请参阅<block ref="f3121e004cef0b92f500227025367589" category="inline-link-rx"></block>。</block>
  <block id="6c83555d4261acb08ebbc5f24823dc7b" category="paragraph">您可以通过设置 Kubernetes 环境变量来防止目标命名空间中的特定注解被覆盖。<block ref="1580ff61f204e9d56cd5324c7e9221ba" prefix=" " category="inline-code"></block>在执行恢复或故障转移操作之前。例如：</block>
  <block id="8238f7162d9219360737b28886d1e81e" category="inline-link-macro">配置AutoSupport和命名空间过滤选项</block>
  <block id="f674ee7017be04f3990c16ce1e52c071" category="admonition">执行恢复或故障转移操作时，任何命名空间注释和标签都将生效。<block ref="22416353aff9ef4322e1ee858f418ae4" prefix=" " category="inline-code"></block> 和<block ref="8028cf835d9b72ff2d6f835934c25568" prefix=" " category="inline-code"></block> 不参与恢复或故障转移操作。确保在初始 Helm 安装期间配置这些设置。欲了解更多信息，请参阅 <block ref="be04583f34cff5b6411cf18afbc58993" category="inline-link-macro-rx"></block>。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="section-title">示例</block>
  <block id="1280c48f074ec68fd2281266662c9a3f" category="paragraph">以下示例展示了源命名空间和目标命名空间，每个命名空间都有不同的注释和标签。您可以查看操作前后目标命名空间的状态，以及目标命名空间中的注释和标签是如何组合或覆盖的。</block>
  <block id="2cfe257f724ed59a07ab01918c828fb5" category="section-title">在恢复或故障转移操作之前</block>
  <block id="c972cd959174c84d137520d91c011446" category="paragraph">下表说明了恢复或故障转移操作之前示例源命名空间和目标命名空间的状态：</block>
  <block id="b3ba0fe968ce39dcfc6fe8cc0f1b02da" category="cell">命名空间</block>
  <block id="933e469cb306a0ea9faabd3e4235d3be" category="cell">标注</block>
  <block id="3ad6cb6100190c8f81e99fd52debf7ef" category="cell">标签</block>
  <block id="86a2c974d76e381c7efd2206939722b7" category="cell">命名空间 ns-1（源）</block>
  <block id="278dbe8403d8ebf0d4ec8f723ca24aa6" category="list-text">annotation.one/key: "updatedvalue"</block>
  <block id="7217e7166d38adddcd72b9b1c9359148" category="list-text">annotation.two/key: "true"</block>
  <block id="a03c56a353af6ece3297a5fcad5250f2" category="list-text">环境=生产</block>
  <block id="d1642f369aa9d43205cf91975f1359d4" category="list-text">合规性=HIPAA</block>
  <block id="fc10b995e3d1c13cbae652922eba0bb6" category="list-text">名称=ns-1</block>
  <block id="58e6b4eeb688a71c985d2593769d2fda" category="cell">命名空间 ns-2（目标）</block>
  <block id="f0e6f2ec2d0d1aa7012e3b32889c034c" category="list-text">annotation.one/key: "true"</block>
  <block id="1e678090acf06eb2bf74c38dee9d3317" category="list-text">annotation.three/key: "false"</block>
  <block id="ebbaf450aa5330e33917a8de9157e099" category="list-text">角色=数据库</block>
  <block id="46c40b68ab6fcc817f5134602b1985e3" category="section-title">恢复操作后</block>
  <block id="15d6567aa33ad00e352de9164a741b8b" category="paragraph">下表说明了恢复或故障转移操作后示例目标命名空间的状态。有些键已被添加，有些键已被覆盖，并且<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>标签已更新，以匹配目标命名空间：</block>
  <block id="a8306d4d1af4239dba9a6bcfd799eba7" category="list-text">名称=ns-2</block>
  <block id="a5085953f7b15a312b4e12827abc66e5" category="list-text">（可选）如果您只需要选择应用程序中的某些资源进行恢复，请添加筛选条件，以包含或排除带有特定标签的资源：</block>
  <block id="4a0207b6a74b63dcaaa4d58fe75ec431" category="list-text">*resourceFilter.resourceSelectionCriteria*：（筛选时必需）使用<block ref="f4d72a64acd8929c0cc9ed96a7a336cc" prefix=" " category="inline-code"></block>或者<block ref="843f2812f595e7ec7c5036e89fde02d6" prefix=" " category="inline-code"></block>包含或排除 resourceMatchers 中定义的资源。添加以下 resourceMatchers 参数以定义要包含或排除的资源：</block>
  <block id="1eb6c79d30a4cb086ad406cb25fec350" category="list-text">*resourceFilter.resourceMatchers*：resourceMatcher 对象数组。如果在该数组中定义多个元素，则它们之间按 OR 运算匹配，每个元素内的字段（组、种类、版本）之间按 AND 运算匹配。</block>
  <block id="be16b6e14200639734fb9694e3c0f655" category="list-text">*resourceMatchers[].group*: (_可选_) 要筛选的资源组。</block>
  <block id="2162d9f0c97d87c37f838ea27ecb393a" category="list-text">*resourceMatchers[].kind*: (_可选_) 要筛选的资源类型。</block>
  <block id="862dca1a77422225d13abda4b7bf539b" category="list-text">*resourceMatchers[].version*: (_可选_) 要筛选的资源版本。</block>
  <block id="f5d1dcaf86934b4541162f010db1d3e1" category="list-text">*resourceMatchers[].names*: (_可选_) 要过滤的资源的 Kubernetes 元数据.name 字段中的名称。</block>
  <block id="19c69b04e9f9adb29979cc0ff90625b2" category="list-text">*resourceMatchers[].namespaces*: (_可选_) 要过滤的资源的 Kubernetes 元数据.name 字段中的命名空间。</block>
  <block id="d9348d075dc7b3c91cff99d56dfc327b" category="inline-link">Kubernetes 文档</block>
  <block id="cb4354b08a6a88b3c12671390a85c520" category="list-text">*resourceMatchers[].labelSelectors*: (_可选_) 资源的 Kubernetes 元数据.name 字段中的标签选择器字符串，如在以下位置定义：<block ref="d4ce3da8407a7d8e148bb1287288e778" category="inline-link-rx"></block> 。例如：<block ref="6ea45baf659f1f35e51c8dc9005eac03" prefix=" " category="inline-code"></block> 。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例如：</block>
  <block id="00d3f03654bed141c3478449f1760762" category="paragraph">确保 AWS 会话令牌的过期时间足以满足任何长时间运行的 S3 恢复操作。如果在恢复操作期间令牌过期，则操作可能会失败。</block>
  <block id="40d95260a6bcacc40a23df4576b97ec8" category="section-title">Trident博客</block>
  <block id="4d1a32c0e466ff9011c60655b98dbf71" category="inline-link-macro">使用 Amazon EKS 插件为 FSx for ONTAP自动配置Trident后端</block>
  <block id="324844cd8fa64fd82920fe6f11dc588d" category="list-text">2025年5月9日：<block ref="86b6d8d044348a051fe7477baf34debb" category="inline-link-macro-rx"></block></block>
  <block id="4bdb23ea513714e3ddde2986c05c669f" category="inline-link-macro">增强数据一致性：使用Trident在 OpenShift 虚拟化中使用卷组快照</block>
  <block id="299fb00578f305c7fc8cabf601fd1c80" category="list-text">2025年8月19日：<block ref="e5b6bdace6eea699ef0d8738f7d6c354" category="inline-link-macro-rx"></block></block>
  <block id="607ed18429282657fb3f6b377df32f8c" category="inline-link-macro">NetApp Trident与Google Cloud NetApp Volumes for SMB 协议</block>
  <block id="55b94ed9b78fb336b981481557e7d219" category="list-text">2025年4月15日：<block ref="1d74efb61b1c97b9032a1222a24185b1" category="inline-link-macro-rx"></block></block>
  <block id="38873c8c72328929e064d07375c3bb64" category="inline-link-macro">利用Trident 25.02 的光纤通道协议实现 Kubernetes 上的持久存储</block>
  <block id="c6fc47f295f8e48564562b41d6234e74" category="list-text">2025年4月14日：<block ref="519219109d85923b9dfc4c314bbb8b20" category="inline-link-macro-rx"></block></block>
  <block id="ee031d295c711ed3119e4ca1bf2829b1" category="inline-link-macro">释放NetApp ASA r2 系统在 Kubernetes 块存储方面的强大功能</block>
  <block id="f752aa3cc1916f79a2806e72dfc8b4b5" category="list-text">2025年4月14日：<block ref="e28ddf0afaf73832b19731c7248b6de5" category="inline-link-macro-rx"></block></block>
  <block id="e828b47619f791883b7abff60a3529bc" category="inline-link-macro">使用新的认证操作员简化 Red Hat OpenShift 上的Trident安装</block>
  <block id="02062222c04c114bc7fc20acf792eca9" category="list-text">2025年3月31日：<block ref="20f7b4cad613435492a1b3cb3c26a028" category="inline-link-macro-rx"></block></block>
  <block id="7259adf488b8a65d6f49febc93ff44f1" category="inline-link-macro">使用Google Cloud NetApp Volumes为 SMB 配置Trident</block>
  <block id="1759bd5240df424d309ad71c96b867f8" category="list-text">2025年3月27日：<block ref="90bc67f83290246dad8f0bc76fd49c2c" category="inline-link-macro-rx"></block></block>
  <block id="897b6a6a21c73524107071aff80ed94e" category="inline-link-macro">解锁无缝的 iSCSI 存储集成：AWS ROSA 集群上的 FSxN 指南</block>
  <block id="b6bbcc8be7319fca806d894645c63253" category="list-text">2025年3月5日：<block ref="c5953f971a0752feeb8ffbf7d9258789" category="inline-link-macro-rx"></block></block>
  <block id="469a8897f90d7e07ede75ff9b199e586" category="inline-link-macro">使用Trident、GKE 和Google Cloud NetApp Volumes部署云身份</block>
  <block id="cb2e2f8e2789874710f34e485efc824e" category="list-text">2025年2月27日：<block ref="46c84c372fb557e16383c0494f1255f5" category="inline-link-macro-rx"></block></block>
  <block id="6dc79a8e11fda729083bb4e518de411f" category="inline-link-macro">Trident引入光纤通道支持</block>
  <block id="869493e7a782c2bac6bf8778d6bf749e" category="list-text">2024年12月12日：<block ref="5c3a9e150bc491524071eb191093dabe" category="inline-link-macro-rx"></block></block>
  <block id="afd55df73a814282b1a34c79040d709a" category="inline-link-macro">Trident 25.01：通过新功能和增强功能增强 Kubernetes 存储体验</block>
  <block id="13c401b1f27132099b945b95025ca748" category="list-text">2024年11月26日：<block ref="4a1bf3162dde1793089483cf7682fb86" category="inline-link-macro-rx"></block></block>
  <block id="0d5eeacaefc73b7986c8f85945c72129" category="inline-link-macro">NetApp Trident与Google Cloud NetApp Volumes</block>
  <block id="a21cecd213989d401167ec6cfba8d998" category="list-text">2024年11月11日：<block ref="daed3e0cfbeb06368e36167c5fc4f468" category="inline-link-macro-rx"></block></block>
  <block id="02104a16ef3fcf06a78872f4f5aea5d2" category="inline-link-macro">使用Trident在 AWS 上将Amazon FSx for NetApp ONTAP与 Red Hat OpenShift 服务 (ROSA) 结合使用</block>
  <block id="e2218d0205cdf02ed15039a9eb215920" category="list-text">2024年10月29日：<block ref="ecf88162cd631914aa447c7edeaa2e6e" category="inline-link-macro-rx"></block></block>
  <block id="e7eb7f68cb5a04d95a6152e9d6ab37ec" category="inline-link-macro">使用 ROSA 上的 OpenShift 虚拟化和Amazon FSx for NetApp ONTAP实时迁移虚拟机</block>
  <block id="96788723465bd45962aba2ba495bac79" category="list-text">2024年10月29日：<block ref="231a583c773a423673d617a1071353b9" category="inline-link-macro-rx"></block></block>
  <block id="c5b6456f211505596899eb36c3ee09e4" category="inline-link-macro">使用 NVMe/TCP 在 Amazon EKS 上为现代容器化应用程序使用ONTAP存储</block>
  <block id="3373d53eb859a1fef914c3f5ca7b306d" category="list-text">2024年7月8日：<block ref="0549a17fef857ef2806f9656f7495ac5" category="inline-link-macro-rx"></block></block>
  <block id="782250194e3b8d07e3c01ee076d7abd9" category="inline-link-macro">使用Google Cloud NetApp Volumes Flex 和Astra Trident实现 Kubernetes 无缝存储</block>
  <block id="1c3ec9ce23b462e81e392f144f8c6527" category="list-text">2024年7月1日：<block ref="48908e9b9a4cb59db7244b631bf66632" category="inline-link-macro-rx"></block></block>
  <block id="c0575ecf088b36655f7a582773399ba0" category="inline-link-macro">ONTAP作为 OpenShift 中集成映像注册表的后端存储</block>
  <block id="fa465e5731c44ee6dc77398eecb4493d" category="list-text">2024年6月11日：<block ref="99a2855a4f47b1b3fc2dd744ecb3c177" category="inline-link-macro-rx"></block></block>
  <block id="351257ff03e16ff522106900a9f35e9e" category="inline-link-macro">使用NetApp Trident Protect 进行 OpenShift 虚拟化灾难恢复</block>
  <block id="cc48e904c9802b69a8760ed8f894b251" category="list-text">2025年5月16日：<block ref="a57e639cf15650353686ed7219eb274b" category="inline-link-macro-rx"></block></block>
  <block id="8f18e786e2a2dd5d70390afe4c75e024" category="inline-link-macro">Trident Protect 升级：Kubernetes 复制保护与灾难恢复</block>
  <block id="ae7986fef0bfa9c9a4f730ee6bb5e0ac" category="list-text">2025年4月3日：<block ref="4ca932fa6234c864106756a287da48ac" category="inline-link-macro-rx"></block></block>
  <block id="a706b02fe1ef4870ecc8b588cbe37989" category="inline-link-macro">OpenShift虚拟化虚拟机的崩溃一致性备份和恢复操作</block>
  <block id="938cab8cf5785dfe0cd9ba76b4cae8f0" category="list-text">2025年3月13日：<block ref="94b3904630a42c759a6ceb844d104a7a" category="inline-link-macro-rx"></block></block>
  <block id="20e2f4e6733d3ac5dd3cfb83506a2882" category="inline-link-macro">将 GitOps 模式扩展到使用NetApp Trident进行应用程序数据保护</block>
  <block id="ccd722b2b8950bc9aa2b92826dcc4664" category="list-text">2025年3月11日：<block ref="751073ae4d07c4adc8a15e872b137421" category="inline-link-macro-rx"></block></block>
  <block id="bc057a27d4d8047073d6f5fa802c9c2b" category="inline-link-macro">Trident 25.02：通过激动人心的新功能提升 Red Hat OpenShift 体验</block>
  <block id="fb68b473f5b70bc40e206ef882be4c63" category="list-text">2025年3月3日：<block ref="ce0fc75766d0530b76aaabf87dc1b463" category="inline-link-macro-rx"></block></block>
  <block id="17c5eeb01739643b5aef94fe18b6c849" category="summary">您可以使用版本选择器在最新版本和前四个版本之间导航，或者使用下面的链接。</block>
  <block id="ba09ee47d11962c1ccd13d7e1f10e6c5" category="doc">早期版本的文档</block>
  <block id="472039bf3422ff2697dba6fc9fdd57d8" category="inline-link-macro">Trident支持生命周期</block>
  <block id="a3148578e6ffde89485954832ff9be37" category="paragraph">如果您运行的不是Trident 25.06 版本，则可以根据以下信息获取先前版本的文档：<block ref="6d47e9235a19453f00cf246917b9e162" category="inline-link-macro-rx"></block> 。</block>
  <block id="a1862e00d8111386cdf238bd23bb97db" category="inline-link">Trident25.02</block>
  <block id="25bdd2f6eb0ca7663bf4152396a74a09" category="list-text"><block ref="25bdd2f6eb0ca7663bf4152396a74a09" category="inline-link-rx"></block></block>
  <block id="41ee1e1e674f49a8e3c78fc5517b1b83" category="inline-link">Trident24.10</block>
  <block id="330905133ec61fb32dbdb0593cf466a2" category="list-text"><block ref="330905133ec61fb32dbdb0593cf466a2" category="inline-link-rx"></block></block>
  <block id="c45d9c1b397ff706a7a39c069930c677" category="inline-link">Trident24.06</block>
  <block id="d0fd12656eeec63fe137c83181c17c0b" category="list-text"><block ref="d0fd12656eeec63fe137c83181c17c0b" category="inline-link-rx"></block></block>
  <block id="45d1e500370372fc7e76e110b5aff92d" category="inline-link">Trident24.02</block>
  <block id="b735f50352c31f80267e7a6fc57ce804" category="list-text"><block ref="b735f50352c31f80267e7a6fc57ce804" category="inline-link-rx"></block></block>
  <block id="b4dfeb42b5c9816777494eeb7a772461" category="inline-link">Trident23.10</block>
  <block id="55cad0455da7cf59434d9f8ff225c39b" category="list-text"><block ref="55cad0455da7cf59434d9f8ff225c39b" category="inline-link-rx"></block></block>
  <block id="8806d0d5f26e8a704b5d26c076c531bd" category="inline-link">Trident23.07</block>
  <block id="9c74a4e8266dd7e50d12a159c32d6b10" category="list-text"><block ref="9c74a4e8266dd7e50d12a159c32d6b10" category="inline-link-rx"></block></block>
  <block id="3a4e6f76b26aa8878f5798aba052777c" category="inline-link">Trident23.04</block>
  <block id="5bff8eb1dea519dd15a076031fa9f288" category="list-text"><block ref="5bff8eb1dea519dd15a076031fa9f288" category="inline-link-rx"></block></block>
  <block id="5382f4fbc3622ef143d9ddbe033351ab" category="inline-link">Trident23.01</block>
  <block id="a9425b076f0cf301dc3a2d77e67816ca" category="list-text"><block ref="a9425b076f0cf301dc3a2d77e67816ca" category="inline-link-rx"></block></block>
  <block id="2e0d64f2a4b164112beaf0506070ad85" category="inline-link">Trident22.10</block>
  <block id="e4c5c8d195d27f073639195f80da50a2" category="list-text"><block ref="e4c5c8d195d27f073639195f80da50a2" category="inline-link-rx"></block></block>
  <block id="c48696f9d5a5a881f7f2f08fd40ce424" category="summary">查找有关Trident 的安装、配置、升级和故障排除的常见问题解答。</block>
  <block id="af2a4d2810d86aa0169c117f82682f9a" category="doc">常见问题解答</block>
  <block id="96ab491ef73d5db0cd15f55e1552cc22" category="section-title">一般性问题</block>
  <block id="d9aca3de44ae0828dd89d53663e6e4c8" category="section-title">Trident 的发布频率如何？</block>
  <block id="d68e1eab03012de1cfe733b0e5a56e0a" category="paragraph">从 24.02 版本开始， Trident每四个月发布一次：二月、六月和十月。</block>
  <block id="0f7d5cbd339fb02ad7b6d2052778b76c" category="section-title">Trident是否支持特定版本 Kubernetes 中发布的所有功能？</block>
  <block id="0393f24e9d90badf5195c5d59c8cab27" category="paragraph">Trident通常不支持 Kubernetes 中的 alpha 功能。  Trident可能会在 Kubernetes beta 版本之后的两个Trident版本中支持 beta 功能。</block>
  <block id="c05993771d3f4855968becac69b33f44" category="section-title">Trident 的运行是否依赖于其他NetApp产品？</block>
  <block id="206d5ff7336a8540d7a581ba45c5f83f" category="paragraph">Trident不依赖于其他NetApp软件产品，它可以作为独立应用程序运行。但是，您应该使用NetApp后端存储设备。</block>
  <block id="95bcf2f0f55536798451f058ec6640a9" category="section-title">如何获取完整的Trident配置详情？</block>
  <block id="67323698ba39f83a63a92758f63e8080" category="paragraph">使用<block ref="fed7609223e8cae53e079facb24f3426" prefix=" " category="inline-code"></block>命令以获取有关您的Trident配置的更多信息。</block>
  <block id="d29b114bc457427dcaea77aacc90fe8a" category="section-title">我能否获取有关Trident如何配置存储的指标？</block>
  <block id="b4f83b03956523a39e8bbbd0895f0f29" category="inline-link-macro">Cloud Insights</block>
  <block id="61d2a329cdb6694d83cd5fbf5dc02f7a" category="paragraph">是可用于收集有关Trident操作的信息的 Prometheus 端点，例如管理的后端数量、已配置的卷数量、消耗的字节数等等。您还可以使用<block ref="7a2477b8055ecdaa4bd473b0556bcb2a" category="inline-link-macro-rx"></block>用于监测和分析。</block>
  <block id="9bdccce3d8a96585da41b41f9a8a35ea" category="section-title">使用Trident作为 CSI 配置器时，用户体验是否会发生变化？</block>
  <block id="09c8fb7656ad21dac196205f70094681" category="paragraph">不，用户体验和功能方面没有任何变化。使用的配置程序名称是<block ref="08044207e9f63bb0fd474dab347a776c" prefix=" " category="inline-code"></block>。如果您想使用当前和未来版本提供的所有新功能，建议使用此方法安装Trident 。</block>
  <block id="804e1070c55dcfc75cbde5cbcb86c3ba" category="section-title">在 Kubernetes 集群上安装和使用Trident</block>
  <block id="df316d84e969d52af02710ec31df7055" category="section-title">Trident是否支持从私有注册表进行离线安装？</block>
  <block id="5e05991e14fd9934a724121da40f5b98" category="inline-link-macro">了解Trident安装</block>
  <block id="d55b9ba8a4efff113044f9efe0557e0c" category="paragraph">是的， Trident可以离线安装。参考<block ref="ed3eb8298d3a91b1400b1be26865f5ec" category="inline-link-macro-rx"></block>。</block>
  <block id="75ac7954ef399713139c894c431e4116" category="section-title">我可以远程安装Trident吗？</block>
  <block id="cab0813b2ef0c2dc3e0c17505f73a2f2" category="paragraph">是Trident 18.10 及更高版本支持从任何具备以下功能的机器进行远程安装：<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>访问集群。后<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>访问权限已验证（例如，发起一次访问）<block ref="1513e62b9eb7bbfc46c1be1a91a2ab76" prefix=" " category="inline-code"></block>从远程机器发出命令进行验证），按照安装说明进行操作。</block>
  <block id="50434308d8b9fc89f708232cb5e9cf87" category="section-title">我可以使用Trident配置高可用性吗？</block>
  <block id="d4a0a879bb58dfc0d2dd69374d278afe" category="paragraph">Trident以 Kubernetes Deployment（ReplicaSet）的形式安装，只有一个实例，因此它内置了高可用性 (HA)。您不应该增加 Deployment 中的副本数量。如果安装了Trident 的节点丢失或 pod 无法访问，Kubernetes 会自动将 pod 重新部署到集群中的健康节点。  Trident仅用于控制平面，因此如果重新部署Trident，当前已安装的 pod 不会受到影响。</block>
  <block id="b23db7e049824adf28d5d2d6839ee268" category="section-title">Trident是否需要访问 kube-system 命名空间？</block>
  <block id="685a0ffaaa9ec81b2c31846cbf192282" category="paragraph">Trident从 Kubernetes API 服务器读取信息，以确定应用程序何时请求新的 PVC，因此它需要访问 kube-system。</block>
  <block id="0df447334013f5ccae9c82a00df9508a" category="section-title">Trident使用哪些角色和权限？</block>
  <block id="3c70f31b6cfd2fccfef3e715c4c4cabb" category="inline-link-macro">自定义 tridentctl 安装</block>
  <block id="3d939b5d63f5846e5d71053999d3972e" category="paragraph">Trident安装程序会创建一个 Kubernetes ClusterRole，该角色对 Kubernetes 集群的 PersistentVolume、PersistentVolumeClaim、StorageClass 和 Secret 资源具有特定的访问权限。参考<block ref="ddc7df443077796093efdaf5a64d03cd" category="inline-link-macro-rx"></block>。</block>
  <block id="8b1b2eab4c453e6c69faf86b91b46898" category="section-title">我可以在本地生成Trident安装时使用的确切清单文件吗？</block>
  <block id="b633901fb93d2b4cb35254a9764dd626" category="paragraph">如有需要，您可以在本地生成和修改Trident安装时使用的确切清单文件。参考<block ref="ddc7df443077796093efdaf5a64d03cd" category="inline-link-macro-rx"></block>。</block>
  <block id="176cc68bd86878bb1bde4c3e72b4c315" category="section-title">我可以为两个独立的 Kubernetes 集群中的两个独立的Trident实例共享同一个ONTAP后端 SVM 吗？</block>
  <block id="14151311f8b442ecc7db1533868dccd9" category="paragraph">虽然不建议这样做，但您可以为两个Trident实例使用同一个后端 SVM。安装期间为每个实例指定唯一的卷名称和/或指定唯一的<block ref="641b2675465e765661450709e2351a8e" prefix=" " category="inline-code"></block>参数<block ref="57a3822fdb39e72cdc47d89fd04ce467" prefix=" " category="inline-code"></block>文件。这是为了确保两个实例不会使用同一个FlexVol volume。</block>
  <block id="55c5d3092c2cf2c38eb0a708eefb8486" category="section-title">是否可以在 ContainerLinux（原 CoreOS）下安装Trident ？</block>
  <block id="ed71f481574b61f58ec3289a77e224fa" category="paragraph">Trident实际上就是一个 Kubernetes pod，可以安装在任何运行 Kubernetes 的地方。</block>
  <block id="42fb91822adc98aa7764157cc987363a" category="section-title">Trident可以与NetApp Cloud Volumes ONTAP一起使用吗？</block>
  <block id="c8e65f25ae4e876dc9b834240dd90ae1" category="paragraph">是的， Trident在 AWS、Google Cloud 和 Azure 上均受支持。</block>
  <block id="563c8f675c158ed1e8fb653c2a5b0d16" category="section-title">Trident是否与 Cloud Volumes Services 兼容？</block>
  <block id="2d0bdf474b915de478abc990596c76bd" category="paragraph">是的， Trident支持 Azure 中的Azure NetApp Files服务以及 GCP 中的Cloud Volumes Service。</block>
  <block id="92d1656d06303733c5e1398fb273a17e" category="section-title">故障排除和支持</block>
  <block id="adb6af04aac45867d68bb2c3bc1e7b0d" category="section-title">NetApp是否支持Trident？</block>
  <block id="2dcb58c8d0e9bfa26fd8a13a709eed09" category="paragraph">虽然Trident是开源且免费提供的，但只要您的NetApp后端受支持， NetApp就会完全支持它。</block>
  <block id="a3d907947129a58ee6f9e23074840c8f" category="section-title">我该如何提交支持申请？</block>
  <block id="0265687df6c09d532b03477776c6d075" category="paragraph">如需提出援助申请，请执行以下操作之一：</block>
  <block id="5dab8cca21a0ff4e72d4e2a1ee5156ea" category="list-text">请联系您的支持客户经理，获取帮助以提交工单。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="a13956d424374973d31e5883b8bf8b6a" category="list-text">请联系我们提交支持案例。<block ref="116f7ad90a3c7441981f82d8f8fba4d5" category="inline-link-rx"></block> 。</block>
  <block id="3e77e87e5ee8fb4f6f910f4cf0594fc2" category="section-title">如何生成支持日志包？</block>
  <block id="7938aed248d09a5120eaf414e6c1d574" category="paragraph">您可以通过运行以下命令来创建支持包<block ref="7466d048454007a33a6e078578c48a86" prefix=" " category="inline-code"></block>。除了捆绑包中捕获的日志外，还要捕获 kubelet 日志，以诊断 Kubernetes 端的挂载问题。获取 kubelet 日志的说明因 Kubernetes 的安装方式而异。</block>
  <block id="2c3543f339dc749a508ed5e5e5aaae23" category="section-title">如果我需要提出新功能请求，该怎么办？</block>
  <block id="42bfc6e3acd67192d42135138102a1de" category="inline-link">Trident Github</block>
  <block id="c2146fea25aea76bae1b5853f60a2f87" category="paragraph">创建问题<block ref="47273b71915582ec6db59ad21099cfb9" category="inline-link-rx"></block>并在问题的主题和描述中注明 *RFE*。</block>
  <block id="0aa1d7a95d75c0faa8302a803356b7b7" category="section-title">我应该在哪里提交缺陷报告？</block>
  <block id="f976373ae689e994b60c082fe0210016" category="paragraph">创建问题<block ref="47273b71915582ec6db59ad21099cfb9" category="inline-link-rx"></block>。请务必提供与问题相关的所有必要信息和日志。</block>
  <block id="e3c42f7edef4d44b3a12f0876d080b65" category="section-title">如果我对Trident有个需要澄清的简短问题，该怎么办？这里有社区或论坛吗？</block>
  <block id="a7cfd917113a9ee9c1e789887d1d809f" category="inline-link-macro">Discord 频道</block>
  <block id="5249e7d2220ef48adc4e11f3ae5e102a" category="paragraph">如果您有任何疑问、问题或请求，请通过我们的Trident联系我们。<block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block>或者 GitHub。</block>
  <block id="85fb3cc3c008776a14e8adea3419b79d" category="section-title">我的存储系统密码已更改， Trident无法再工作，我该如何恢复？</block>
  <block id="a988578d4c176cf950a2211099db7d92" category="paragraph">使用以下方式更新后端密码<block ref="00a81aa9b1d406861879017de885e0fb" prefix=" " category="inline-code"></block>。代替<block ref="3d9fd17a5232cc24eeeaec2b07af5417" prefix=" " category="inline-code"></block>例如，请使用您的后端名称，并且<block ref="27ab7e8dbd45daf638f3144d4891ef3b" prefix=" " category="inline-code"></block>通往正确路径<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件。</block>
  <block id="590f1c54e9cee50de3f69ae3604e432e" category="section-title">Trident找不到我的Kubernetes节点。我该如何解决这个问题？</block>
  <block id="b114148f5ef97af6ffb82c1edfaa1775" category="paragraph">Trident找不到 Kubernetes 节点可能有以下两种情况。这可能是由于 Kubernetes 内部的网络问题或 DNS 问题引起的。在每个 Kubernetes 节点上运行的Trident节点守护程序集必须能够与Trident控制器通信，以便将节点注册到Trident。如果在Trident安装后发生了网络变更，则只有在向集群中添加新的 Kubernetes 节点时才会遇到此问题。</block>
  <block id="bcd549c9f0199c5b8d0b55f782bff9e8" category="section-title">如果Trident舱被摧毁，我会丢失数据吗？</block>
  <block id="8cb93d7a514e5569b46cba45dedc7daf" category="paragraph">即使Trident舱被摧毁，数据也不会丢失。 Trident元数据存储在 CRD 对象中。所有由Trident提供的PV都将正常运行。</block>
  <block id="c2147118d3a3e64452475171765d47d0" category="section-title">升级版Trident</block>
  <block id="3de05f78e401869f4630ec8cabf339df" category="section-title">我可以直接从旧版本升级到新版本（跳过几个版本）吗？</block>
  <block id="aa11aafa4155b6c4a3e62b5b9c8abc7b" category="paragraph">NetApp支持将Trident从一个主要版本升级到下一个紧邻的主要版本。您可以从 18.xx 版本升级到 19.xx 版本，从 19.xx 版本升级到 20.xx 版本，依此类推。在生产环境部署之前，应该在实验室环境中测试升级。</block>
  <block id="0399b9e6348e554937a4d65efc97a1b8" category="section-title">是否可以将Trident降级到之前的版本？</block>
  <block id="e651aace307e5b2d6047fa19dd9ebc49" category="inline-link-macro">卸载Trident</block>
  <block id="c8d8623e1862e33460131e0b358e25c4" category="paragraph">如果您需要修复升级后发现的错误、依赖项问题或升级失败/不完整，您应该<block ref="e618ba4d3d6ecf34e3de22934d88cfd8" category="inline-link-macro-rx"></block>然后按照该版本的具体说明重新安装早期版本。这是降级到早期版本的唯一推荐方法。</block>
  <block id="ba9c59aa9d07b25e124dcf6ca88d689a" category="section-title">管理后端和卷</block>
  <block id="c14fd2bf15bccb33c362aafa6a463f49" category="section-title">我是否需要在ONTAP后端定义文件中同时定义 ManagementLIF 和 DataLIF？</block>
  <block id="7279808725b91afce38762e4e1a8108b" category="paragraph">管理层 LIF 是强制性的。  DataLIF 各不相同：</block>
  <block id="25edde63e4922bb316018c25888e64a6" category="inline-link-macro">ONTAP选择性 LUN 地图</block>
  <block id="eb89f16d07a93fa10a31ec6309045fe9" category="inline-link-macro">ONTAP SAN 配置选项和示例</block>
  <block id="bdee9022b73039d7d36eb214d473b6a5" category="list-text">ONTAP SAN：不要指定用于 iSCSI。Trident的使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的 iSCI LIF。如果出现以下情况，则会生成警告：<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>已明确定义。参考 <block ref="823b6e1f172888081aece7b5cdeb0e03" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="7d8058d93ec1d95c673d83bf303326ff" category="inline-link-macro">ONTAP NAS 配置选项和示例</block>
  <block id="adfb1f23733ff9ee458d139c1df9f86f" category="list-text">ONTAP NAS： NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供， Trident将从 SVM 获取 dataLIF。您可以指定一个完全限定域名 (FQDN) 用于 NFS 挂载操作，从而创建轮询 DNS 以在多个 dataLIF 之间进行负载均衡。请参阅<block ref="879dc93198c7c5e8ce7148b6d1205d73" category="inline-link-macro-rx"></block>详情请见</block>
  <block id="931fb9ef9e2f0b2e60b412c93e32bdb2" category="section-title">Trident能否为ONTAP后端配置CHAP？</block>
  <block id="6a7447005192022403df540c4a76b8df" category="paragraph">是Trident支持ONTAP后端的双向 CHAP。这需要设置<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block>在您的后端配置中。</block>
  <block id="e04360e9c1c0a231ee50fb6bc2440ab0" category="section-title">如何使用Trident管理导出策略？</block>
  <block id="0f719cc4fb105f34258976d892e8bfe9" category="paragraph">从 20.04 版本开始， Trident可以动态创建和管理导出策略。这样，存储管理员就可以在其后端配置中提供一个或多个 CIDR 块，并让Trident将落入这些范围内的节点 IP 添加到它创建的导出策略中。通过这种方式， Trident可以自动管理给定 CIDR 内 IP 地址的节点的规则添加和删除。</block>
  <block id="565b6e5803bd2aeffbb1b529ae150998" category="section-title">IPv6 地址可以用于管理和数据 LIF 吗？</block>
  <block id="d9e938c59af9d6ebf3b10c2ba625470e" category="paragraph">Trident支持为以下设备定义 IPv6 地址：</block>
  <block id="a24e915be64ce870d285c6e28a6df3f5" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block>和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>适用于ONTAP NAS 后端。</block>
  <block id="fb250da700173f245f4c10d2970cfba8" category="list-text"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block>适用于ONTAP SAN 后端。您无法指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>基于ONTAP SAN 后端。</block>
  <block id="c92ee98f27fea35d4b40d8e58cff3e23" category="paragraph">必须使用标志安装Trident 。<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> （为了<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装），<block ref="fdb7cb8f657426e7c409bfd6d1a36ce4" prefix=" " category="inline-code"></block> （对于Trident操作员），或<block ref="b63589bf34442180f04a6b46488afa6d" prefix=" " category="inline-code"></block>（用于 Helm 安装）使其能够通过 IPv6 运行。</block>
  <block id="4c0e813a0bfed033d75bbfd8b18f556c" category="section-title">是否可以在后端更新管理 LIF？</block>
  <block id="66d8fee83a94421ca416a2bdb33703b4" category="paragraph">是的，可以使用以下方式更新后端管理 LIF：<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>命令。</block>
  <block id="4464ed822c0b46fd0bb406f3addad477" category="section-title">是否可以在后端更新 DataLIF？</block>
  <block id="6299c4ccad2894e1fc64eb6059df19b8" category="paragraph">您可以更新 DataLIF<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>仅有的。</block>
  <block id="b0ebe39ab16d0aea1148ebc2abc3e6d7" category="section-title">我可以在Trident for Kubernetes 中创建多个后端吗？</block>
  <block id="9d813dd9dc4f8a97f4735e4e7780283c" category="paragraph">Trident可以同时支持多个后端，既可以使用相同的驱动程序，也可以使用不同的驱动程序。</block>
  <block id="dc7c8edffb370f5f952a2787e0381ad6" category="section-title">Trident是如何存储后端凭证的？</block>
  <block id="3b5102f815723b1b94a1969ac254470a" category="paragraph">Trident将后端凭据存储为 Kubernetes Secrets。</block>
  <block id="c68b08bc6f1bd9bc3f8b4d3e4e81ca78" category="section-title">Trident是如何选择特定后端的？</block>
  <block id="c6e9fbb586ad55ddf4bbda9814c6adc9" category="paragraph">如果后端属性无法用于自动为类选择合适的连接池，则<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>和<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>参数用于选择一组特定的池子。</block>
  <block id="1facd0eb6221a85a854aa93123529773" category="section-title">如何确保Trident不会从特定的后端进行配置？</block>
  <block id="8fd7e30f04618e679c684df3dd0bebeb" category="paragraph">这<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>该参数用于筛选Trident用于配置的池集，并将删除任何匹配的池。</block>
  <block id="64eb982f45f5cfa602f8a3e7d69f000d" category="section-title">如果存在多个同类型的后端， Trident如何选择使用哪个后端？</block>
  <block id="c5864ef434aa44689b2af37a1e9af5c7" category="paragraph">如果配置了多个相同类型的后端， Trident会根据配置中的参数选择合适的后端。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>。例如，如果存在多个 ontap-nas 驱动程序后端， Trident会尝试匹配参数。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>结合并匹配一个能够满足所列要求的后端<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>和<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>。如果存在多个后端与请求匹配， Trident会随机选择其中一个。</block>
  <block id="d458942a0a2872de7232f879c70d5c72" category="section-title">Trident是否支持与Element/ SolidFire的双向CHAP协议？</block>
  <block id="b127099c71415d532da3a26ed73eb041" category="paragraph">是</block>
  <block id="c92811de6c03f5ad483962308676ecf1" category="section-title">Trident如何在ONTAP卷上部署 Qtree？单个卷上最多可以部署多少个 Qtree？</block>
  <block id="c45e7f5f358ba554413458272da37266" category="paragraph">这<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序在同一个FlexVol volume中最多可创建 200 个 Qtree（可在 50 到 300 之间配置），每个集群节点最多可创建 100,000 个 Qtree，每个集群最多可创建 240 万个 Qtree。当你进入一个新的<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>如果由经济型驱动程序提供服务，则该驱动程序会查看是否已存在可以为新的 Qtree 提供服务的FlexVol volume。如果不存在可以为 Qtree 提供服务的FlexVol volume，则会创建一个新的FlexVol volume。</block>
  <block id="abbdd4298bb3e525fd172b2bbe5a451c" category="section-title">如何为ONTAP NAS 上配置的卷设置 Unix 权限？</block>
  <block id="e516c194a6ef04e00986e6105285f3a6" category="paragraph">您可以通过在后端定义文件中设置参数，为Trident提供的卷设置 Unix 权限。</block>
  <block id="094ef47e6456d60b656401b0f2bbfcbd" category="section-title">在配置卷时，如何配置一组明确的ONTAP NFS 挂载选项？</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="389f296dbf77d0f86dfe8a06d526c127" category="paragraph">默认情况下， Trident不会为 Kubernetes 设置任何挂载选项。要在 Kubernetes 存储类中指定挂载选项，请按照给出的示例进行操作。<block ref="29e04d8356a523f6fc836193630ad63e" category="inline-link-macro-rx"></block> 。</block>
  <block id="ae6bc3659bb0be0a7d9f98a63775b7c2" category="section-title">如何将已配置的卷设置为特定的导出策略？</block>
  <block id="700a2008fea63d02c24b85f2f75d357e" category="paragraph">要允许相应的主机访问卷，请使用以下方法：<block ref="647ce4e5394e2e595e46b4fc50a628e9" prefix=" " category="inline-code"></block>在后端定义文件中配置的参数。</block>
  <block id="99c8f2d04c19fdc0a232b7482cfee080" category="section-title">如何使用Trident和ONTAP设置卷加密？</block>
  <block id="73b2a012b43089e1665c476788027e1c" category="inline-link-macro">Trident如何与 NVE 和 NAE 协同工作</block>
  <block id="cbf898bcb5d9e5595fd3bc81ec6e29ad" category="paragraph">您可以使用后端定义文件中的加密参数，对Trident提供的卷设置加密。更多信息，请参阅：<block ref="419c27d13476c7b2e51e83cf6c88459f" category="inline-link-macro-rx"></block></block>
  <block id="ec2427ac714a740c73f10dfde2363075" category="section-title">通过Trident为ONTAP实现 QoS 的最佳方法是什么？</block>
  <block id="f412d672b51ea3c57812ebf3be0ddccb" category="paragraph">使用<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>为ONTAP实现 QoS。</block>
  <block id="540b44f12eb5cca80bd7e9128aeede6c" category="section-title">如何在Trident中指定精简配置或厚配置？</block>
  <block id="0d97afe7a571dc39db1c810013844332" category="paragraph">ONTAP驱动程序支持精简配置或厚配置。 ONTAP驱动程序默认采用精简配置。如果需要厚配置，则应配置后端定义文件或<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>。如果两者都已配置，<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>优先考虑。为ONTAP配置以下内容：</block>
  <block id="2d0384de8b72e53c3476a478a5d4ec53" category="list-text">在<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>，设置<block ref="b713baf75bcf13859037b5274d27d4b8" prefix=" " category="inline-code"></block>属性为厚。</block>
  <block id="3764067c4b14276efb241c511c8b0cc2" category="list-text">在后端定义文件中，通过设置启用厚卷<block ref="f78b8fc8b3b9f77533234c7f4a240613" prefix=" " category="inline-code"></block>作为体积。</block>
  <block id="d4391b26a81fead46afc74243c4029aa" category="section-title">如何确保即使我不小心删除了PVC，正在使用的卷也不会被删除？</block>
  <block id="e58a684cd1a44d4879defbb2ec06b9a4" category="paragraph">从 Kubernetes 1.10 版本开始，PVC 保护功能会自动启用。</block>
  <block id="37a1da11b0f4b3ebef0df195d2fbccd5" category="section-title">我可以种植由Trident生产的NFS PVC吗？</block>
  <block id="e99a58cb2fd51c2db5c9598c04a5f53c" category="paragraph">是您可以膨胀由Trident制造的 PVC。请注意，卷自动增长是ONTAP 的一项功能，不适用于Trident。</block>
  <block id="3319194e0ba07a6aa327aefa1ab1e41f" category="section-title">我可以在SnapMirror数据保护 (DP) 模式或离线模式下导入卷吗？</block>
  <block id="0b10afe39923054016a71caf423fdec6" category="paragraph">如果外部卷处于 DP 模式或离线，则卷导入失败。您收到以下错误信息：</block>
  <block id="eed67b2d196c61d9c6cf4a50878ba446" category="section-title">如何将资源配额转换为NetApp集群？</block>
  <block id="c15d8f156ba84321c880b1bbe78dc0c7" category="paragraph">只要NetApp存储有足够的容量，Kubernetes 存储资源配额就应该能够正常工作。当NetApp存储由于容量不足而无法满足 Kubernetes 配额设置时， Trident会尝试进行配置，但会出错。</block>
  <block id="08ec89166861e10bdf4e2bf3bcb7a150" category="section-title">我可以使用Trident创建卷快照吗？</block>
  <block id="64f5059234f21b014e1c442be4f03052" category="paragraph">是Trident支持创建按需卷快照和从快照创建持久卷。要从快照创建 PV，请确保<block ref="e7b29a25284a6f582881023fdc0cbe93" prefix=" " category="inline-code"></block>功能门已启用。</block>
  <block id="669e09edc60383401e0adf3ce0cefcf3" category="section-title">支持Trident卷快照的驱动程序有哪些？</block>
  <block id="804a6c22698fe4782c44f1e8d446964e" category="paragraph">截至今日，我们的产品已提供按需快照支持。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ， 和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>后端驱动程序。</block>
  <block id="54b8b99690e4f103a6d2f9967cadcd72" category="section-title">如何对通过Trident ONTAP配置的卷进行快照备份？</block>
  <block id="0bdcd128fab544a7df404bc496a4126e" category="paragraph">这可以在以下平台找到：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ， 和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>司机。您还可以指定一个<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>对于<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>FlexVol级别的驱动。</block>
  <block id="53f6fbaa0c2bc4ebb4fc98f8a0337c54" category="paragraph">这也可以在以下平台找到：<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序，但粒度是FlexVol volume级别，而不是 qtree 级别。要启用对Trident创建的卷进行快照的功能，请设置后端参数选项。<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>根据ONTAP后端定义的所需快照策略。  Trident无法获知存储控制器拍摄的任何快照。</block>
  <block id="3d68d8607ffd54f10e7dd693bb2b8a16" category="section-title">我可以为通过Trident配置的卷设置快照保留百分比吗？</block>
  <block id="423b8287d49f26ac095593b58d3d9e69" category="paragraph">是的，您可以通过Trident设置预留特定百分比的磁盘空间来存储快照副本。<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>后端定义文件中的属性。如果您已配置<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>和<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>在后端定义文件中，快照保留百分比是根据以下方式设置的：<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>后端文件中提到的百分比。如果<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>没有提及百分比数值， ONTAP默认将快照保留百分比设为 5%。如果<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>如果选项设置为“无”，则快照保留百分比设置为 0。</block>
  <block id="6b0d34d8a0749198a6b80eec69479c86" category="section-title">我可以直接访问卷快照目录并复制文件吗？</block>
  <block id="eb3a2d1eb3c4022269f4c6837332311a" category="paragraph">是的，您可以通过设置来访问Trident配置的卷上的快照目录。<block ref="7ad68fdac2eac069eb8ed0fc45b0fb74" prefix=" " category="inline-code"></block>后端定义文件中的参数。</block>
  <block id="4bfa28359ad130e5906ee7d785f1b314" category="section-title">我可以通过Trident为卷设置SnapMirror吗？</block>
  <block id="64dd4ea74b402889a9c341da491f4933" category="paragraph">目前， SnapMirror必须通过ONTAP CLI 或OnCommand System Manager在外部进行设置。</block>
  <block id="e321bf6d54ded18df56a41ea51223a2a" category="section-title">如何将持久卷恢复到特定的ONTAP快照？</block>
  <block id="5325f5d2cf63aaaa6610f09e8aa4dc35" category="paragraph">要将卷还原到ONTAP快照，请执行以下步骤：</block>
  <block id="4e789db936072df2058e9f271a9b8db8" category="list-text">使正在使用持久卷的应用程序 pod 静默。</block>
  <block id="b34baa75f4f799a23b19de9b94e86868" category="list-text">通过ONTAP CLI 或OnCommand System Manager恢复到所需的快照。</block>
  <block id="08754f2800804f1fe3673c858b4b56e0" category="list-text">重启应用程序 pod。</block>
  <block id="5a333b18a215ecfd4457ba0e1732654b" category="section-title">Trident能否在配置了负载均衡镜像的 SVM 上配置卷？</block>
  <block id="0e7629426b9d7596800cd5d72f558a7f" category="paragraph">可以为通过 NFS 提供数据的 SVM 的根卷创建负载均衡镜像。 ONTAP会自动更新由Trident创建的卷的负载均衡镜像。这可能会导致卷安装延迟。使用Trident创建多个卷时，卷的配置取决于ONTAP更新负载均衡镜像。</block>
  <block id="0d3ef54a4cc337b5d907b6639e51c6d4" category="section-title">如何将每个客户/租户的存储类别使用情况分开统计？</block>
  <block id="fda1b35892cb6f61447f0e49415937d9" category="paragraph">Kubernetes 不允许在命名空间中使用存储类。但是，您可以使用 Kubernetes 通过使用存储资源配额（每个命名空间一个配额）来限制每个命名空间中特定存储类的使用量。要拒绝特定命名空间对特定存储的访问，请将该存储类的资源配额设置为 0。</block>
  <block id="c217b0ac2dd5504f79ba78b220a9c358" category="summary">NetApp以多种方式为Trident提供支持。我们提供全天候 (24x7) 的丰富免费自助支持选项，例如 Discord 频道。</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="doc">支持</block>
  <block id="567994f58882dceaeab9400ad2bdf7e2" category="paragraph">NetApp以多种方式为Trident提供支持。我们提供全天候 (24x7) 的丰富免费自助支持选项，例如知识库 (KB) 文章和 Discord 频道。</block>
  <block id="77981c4635531727d3030788d4ff1e6b" category="section-title">Trident支持</block>
  <block id="8327052a054aaa112ecf4f19369899c9" category="inline-link-macro">NetApp软件版本对定义的支持</block>
  <block id="925ebc19538c47a22c7fcbf3d4f16838" category="paragraph">Trident根据您的版本提供三个级别的支持。参考<block ref="1b35655e5fe9e8bdc0fd2a18d7e5a06c" category="inline-link-macro-rx"></block>。</block>
  <block id="34678ee868eeabce720fc4a0fd60c17a" category="list-text">全力支持</block>
  <block id="bcf42b210ffb66f788559ec05bd3978c" category="list-text">Trident自发布之日起提供十二个月的全面支持。</block>
  <block id="d397c85f7e5c9820b73839b4255bab4e" category="list-text">有限的支持</block>
  <block id="c4672ccc07d08b01842ba7bff5ab9012" category="list-text">Trident在发布日期后的第 13 至 24 个月提供有限的支持。</block>
  <block id="57b81b24dfc6e0b0f8ce342d0f7250d3" category="list-text">自给自足</block>
  <block id="c6fc0d89ce850093b5d2e987955ba870" category="list-text">Trident 的文档可在发布日期后的第 25 个月至第 36 个月内查阅。</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">版本</block>
  <block id="e26bc895e5bb00237e35bd08e101a228" category="inline-link-macro">25.06</block>
  <block id="512754259e832a6faaee7e55aa2a0641" category="paragraph"><block ref="512754259e832a6faaee7e55aa2a0641" category="inline-link-macro-rx"></block></block>
  <block id="c21446b3ecfb30ed6c2760d686bd4578" category="cell">2026年6月</block>
  <block id="2f57a6988da045d1c26e2c5016ad0900" category="cell">2027年6月</block>
  <block id="e388180fa8946253a28286d92fcbc393" category="cell">2028年6月</block>
  <block id="68d4b8621bcc2d9eae1a68dc27dfa485" category="inline-link-macro">25.02</block>
  <block id="61a3094d46fa14bffb9067eeb8d3405a" category="paragraph"><block ref="61a3094d46fa14bffb9067eeb8d3405a" category="inline-link-macro-rx"></block></block>
  <block id="be90349da04be71a620e68314d810f7f" category="cell">2026年2月</block>
  <block id="4b7cb6c36399bdd4e8724de18a1c079b" category="cell">2027年2月</block>
  <block id="eaaf7bd308bf6f27888c8d18ba11417d" category="cell">2028年2月</block>
  <block id="e9c4cf1c3d2fd7e6c0a13bfe44d8e785" category="inline-link-macro">24.10</block>
  <block id="5956c33dbd8c8ed6e363f54092a9d544" category="paragraph"><block ref="5956c33dbd8c8ed6e363f54092a9d544" category="inline-link-macro-rx"></block></block>
  <block id="99dfa28920a40a7be0858c50f989a3e5" category="cell">2025年10月</block>
  <block id="78c875172f37f031a2632dc008815ee1" category="cell">2026年10月</block>
  <block id="17ab7ccda1012696aabc01e478bd7612" category="cell">2027年10月</block>
  <block id="38999be4c01ec9d8c11d4405b7dc50e0" category="inline-link-macro">24.06</block>
  <block id="1e441e2a6ea2842643d9b8f88e32aebf" category="paragraph"><block ref="1e441e2a6ea2842643d9b8f88e32aebf" category="inline-link-macro-rx"></block></block>
  <block id="94d267f658e04734eb2e098127293a89" category="cell">2025年6月</block>
  <block id="4e9b156e7e2788c8cd4b0877fd922657" category="inline-link-macro">24.02</block>
  <block id="d2196853cebe173567df4b864e4816f7" category="paragraph"><block ref="d2196853cebe173567df4b864e4816f7" category="inline-link-macro-rx"></block></block>
  <block id="6cc5c9e930ea3d3b8bff4367c60ceea4" category="cell">2025年2月</block>
  <block id="766995a062c6503acd7ac4752fbb865d" category="inline-link-macro">23.10</block>
  <block id="bcb8f00239af2cecd5a6b534dabea922" category="paragraph"><block ref="bcb8f00239af2cecd5a6b534dabea922" category="inline-link-macro-rx"></block></block>
  <block id="cfab1ba8c67c7c838db98d666f02a132" category="cell">--</block>
  <block id="217af7d1776d22530d98be04d104fd49" category="inline-link-macro">23.07</block>
  <block id="62bc04158f931e9b0a26f5676c8ab043" category="paragraph"><block ref="62bc04158f931e9b0a26f5676c8ab043" category="inline-link-macro-rx"></block></block>
  <block id="928f12ce7e1197fe962e09f979b98d0d" category="cell">2025年7月</block>
  <block id="a257f7f4b2f6e07845ce567df142ad00" category="cell">2026年7月</block>
  <block id="1a3a2b5e6c52142797bb5c00594e2a3c" category="inline-link-macro">23.04</block>
  <block id="4f00a05b361ef580687832a6a48984db" category="paragraph"><block ref="4f00a05b361ef580687832a6a48984db" category="inline-link-macro-rx"></block></block>
  <block id="42ce83dc3f5ef22d986311b267a5ac20" category="cell">2025年4月</block>
  <block id="fc7d05f9009e90b92a15aad926bca249" category="cell">2026年4月</block>
  <block id="8dfda84fc7f59655e20a770603bf9231" category="inline-link-macro">23.01</block>
  <block id="e0ed61e44672f0b6193055dd0719d240" category="paragraph"><block ref="e0ed61e44672f0b6193055dd0719d240" category="inline-link-macro-rx"></block></block>
  <block id="7022ed6df71cc12fbd0576cef4df23fd" category="cell">2026年1月</block>
  <block id="775d4bb28d257a6aa23992563a82c458" category="inline-link-macro">22.10</block>
  <block id="1d064e71d708bc66779c604db1339850" category="paragraph"><block ref="1d064e71d708bc66779c604db1339850" category="inline-link-macro-rx"></block></block>
  <block id="40e41fb2db11266b8f751c0d5c67cba0" category="inline-link">NetApp知识库（需要登录）</block>
  <block id="62c93f738b926db77daa59d585fbfa48" category="paragraph">如需查看完整的故障排除文章列表，请参阅<block ref="57f5c759ada931c6a2051314ca6ee99e" category="inline-link-rx"></block>。</block>
  <block id="1cf7168782187634fbc408c66b895dbc" category="section-title">社区支持</block>
  <block id="9cc21385e3a5bbf0e140948125e39e4c" category="paragraph">我们的平台上有一个活跃的容器用户公共社区（包括Trident开发人员）。<block ref="6130664377fa14615bb1abd5257e9714" category="inline-link-macro-rx"></block> 。这里是提出有关项目的一般性问题并与志同道合的同行讨论相关话题的好地方。</block>
  <block id="965b11d07d6acceebc9efec23e5e74a9" category="section-title">NetApp技术支持</block>
  <block id="b27fcb3adc5d56564559e3f24a9659c8" category="paragraph">如需Trident的帮助，请使用以下命令创建支持包<block ref="1d41e2024c69110ad6054ffc785ca8e0" prefix=" " category="inline-code"></block>并将其发送至<block ref="da34ca64df3f236a423516102d4096c2" prefix=" " category="inline-code"></block>。</block>
  <block id="d13de4a83d7b44c2e65495def8ef1c7b" category="section-title">了解更多信息</block>
  <block id="eddc3ab7d283c02464f100ff837cf055" category="inline-link-macro">Trident资源</block>
  <block id="01ba66c56fa9029a3ce0095f09b9b340" category="list-text"><block ref="01ba66c56fa9029a3ce0095f09b9b340" category="inline-link-macro-rx"></block></block>
  <block id="874d8a5301794a9ca2aba132ac2460f3" category="inline-link-macro">Kubernetes Hub</block>
  <block id="8f4c1b75985ff2903107b7115115ea58" category="list-text"><block ref="8f4c1b75985ff2903107b7115115ea58" category="inline-link-macro-rx"></block></block>
  <block id="dfd4fd2ff3f0bcabea8bfd811d0db9b4" category="summary">Trident是由NetApp维护的开源存储配置器和编排器。它允许您为由 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。  **请阅读发行说明，了解有关升级到Trident 25.06 的重要信息。**</block>
  <block id="1c14876f05b759f9c9be73a49c84ddd4" category="doc">Trident 25.06 文档</block>
  <block id="0c2517d08c2a451f035c427a4dc895e1" category="summary">以下是此版本已知的几个问题。</block>
  <block id="95dc0391ce7b396d7dd5622284e8fc3e" category="doc">已知问题</block>
  <block id="34515f1d88b10d0db0a78eba6c533394" category="paragraph">已知问题指明了可能会阻止您成功使用此版本产品的问题。</block>
  <block id="825cc355a6b503245e0d84d26f0e16d1" category="paragraph">以下已知问题会影响当前版本：</block>
  <block id="dd298b4e9bfcd54db2048c92819679ad" category="section-title">恢复 Restic 备份的大文件可能会失败</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NETAPP、NETAPP 徽标和NetApp商标页面上列出的标志是NetApp, Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">NetApp拥有的专利的最新列表可以在以下位置找到：</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开源</block>
  <block id="e476cbfc1ce1aee033e17376d6942cf3" category="paragraph">您可以在每个版本的通知文件中查看NetApp Trident软件中使用的第三方版权和许可信息。<block ref="4a3c8c5a408c6db1c44c04391a8a0a2f" category="inline-link-rx"></block> 。</block>
  <block id="52eb48d8202a6d184f86997bcbd937cf" category="summary">Trident的配置过程分为两个主要阶段。第一阶段将存储类与一组合适的后端存储池关联起来，这是在进行配置之前必须进行的准备工作。第二阶段包括卷的创建本身，需要从与待创建卷的存储类别关联的存储池中选择一个存储池。</block>
  <block id="89c3bcf0ecc1114f8d19734d9156cb40" category="doc">配置</block>
  <block id="7c14ddfe8f627e4786f4da7cd4cea9ba" category="section-title">存储类关联</block>
  <block id="90bec6679868d1d43c3f2f5d9905165f" category="paragraph">将后端存储池与存储类关联起来，取决于存储类的请求属性及其<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>，<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block> ， 和<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>列表。创建存储类时， Trident会将其每个后端提供的属性和池与存储类请求的属性和池进行比较。如果存储池的属性和名称与所有请求的属性和池名称匹配， Trident会将该存储池添加到该存储类的适用存储池集合中。此外， Trident还添加了列表中列出的所有存储池。<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>即使它们的属性不满足存储类的所有或任何请求属性，也要将其添加到该集合中。你应该使用<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>列出要覆盖和移除存储类使用的存储池。每次添加新的后端时， Trident都会执行类似的过程，检查其存储池是否满足现有存储类的要求，并删除任何被标记为排除的存储池。</block>
  <block id="ab4589eca69db942d79a0dbbd9ec8399" category="section-title">创建卷</block>
  <block id="252902d6f7f664b44722075296d3ce49" category="paragraph">Trident然后利用存储类和存储池之间的关联来确定在哪里配置卷。创建卷时， Trident首先获取该卷存储类别的存储池集合，如果您为该卷指定了协议， Trident会删除那些无法提供所请求协议的存储池（例如， NetApp HCI/ SolidFire后端无法提供基于文件的卷，而ONTAP NAS 后端无法提供基于块的卷）。 Trident会随机化所得集合的顺序，以方便卷的均匀分布，然后遍历该集合，依次尝试在每个存储池上配置卷。如果一次成功，则返回成功结果，并将过程中遇到的任何失败记录下来。  Trident仅在无法为请求的存储类别和协议配置所有可用的存储池时才会返回失败。</block>
  <block id="6cba37a64b3872e40e12212479ca8ece" category="summary">了解更多关于Trident如何处理其驱动程序的卷快照创建的信息。</block>
  <block id="e9c3828cd06711f9036bb4ce862a32c5" category="doc">卷快照</block>
  <block id="a6fbed601c3d014f6d8342990aeee0b5" category="section-title">了解如何创建卷快照</block>
  <block id="29a2e5ba987103c3a239ad6ec13b96a2" category="list-text">对于<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ， 和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>驱动程序中，每个持久卷 (PV) 都映射到一个FlexVol volume。因此，卷快照被创建为NetApp快照。 NetApp快照技术比同类快照技术具有更高的稳定性、可扩展性、可恢复性和性能。这些快照副本在创建所需时间和存储空间方面都非常高效。</block>
  <block id="5d4b9bc562ebe88c39d0e521b90fc54b" category="list-text">对于<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序中，每个持久卷 (PV) 都映射到一个FlexGroup。因此，卷快照将创建为NetApp FlexGroup快照。 NetApp快照技术比同类快照技术具有更高的稳定性、可扩展性、可恢复性和性能。这些快照副本在创建所需时间和存储空间方面都非常高效。</block>
  <block id="9574cb59de58a7e6882179620abd42fd" category="list-text">对于<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序，PV 映射到在共享FlexVol卷上创建的 LUN。通过对关联的 LUN 执行 FlexClone 操作，即可获得 PV 的 VolumeSnapshot。 ONTAP FlexClone技术能够几乎瞬间创建即使是最大数据集的副本。副本与其父级共享数据块，除了元数据所需的空间外，不占用任何存储空间。</block>
  <block id="9dbabbadda024bb7b1d0db43ab31b45f" category="list-text">对于<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序中，每个 PV 映射到在NetApp Element软件/ NetApp HCI集群上创建的 LUN。 VolumeSnapshots 由底层 LUN 的 Element 快照表示。这些快照是特定时间点的副本，仅占用少量系统资源和空间。</block>
  <block id="e5200dca1b3eb1315befdc6f874d5143" category="list-text">当与<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序中， ONTAP快照是FlexVol的某个时间点的副本，会占用FlexVol本身的空间。随着快照的创建/计划，这会导致卷中的可写空间随时间减少。解决此问题的一个简单方法是通过 Kubernetes 调整大小来增加卷。另一种方法是删除不再需要的快照。当通过 Kubernetes 创建的 VolumeSnapshot 被删除时， Trident将删除关联的ONTAP快照。并非通过 Kubernetes 创建的ONTAP快照也可以删除。</block>
  <block id="9f049d4909391d7f977c1fc9b8c6db8f" category="paragraph">使用Trident，您可以利用 VolumeSnapshots 从中创建新的 PV。使用FlexClone技术从这些快照创建 PV，适用于受支持的ONTAP和 CVS 后端。从快照创建 PV 时，后备卷是快照父卷的FlexClone 。这<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序使用 Element 软件卷克隆从快照创建 PV。它在这里从 Element 快照创建一个克隆。</block>
  <block id="962da67bee9575fc006f5d69c948f63a" category="summary">虚拟池在 Trident 的存储后端和 Kubernetes 的 StorageClasses 之间提供了一个抽象层。它们允许管理员以通用的、与后端无关的方式定义每个后端的位置、性能和保护等方面，而无需让 StorageClass 指定要使用哪个物理后端、后端池或后端类型来满足所需的标准。</block>
  <block id="aa3a2f2908114304b0a2fa7847f52c52" category="doc">虚拟池</block>
  <block id="6dc68c3b2f9d6c276fc86090da3220f5" category="paragraph">虚拟池在Trident存储后端和 Kubernetes 之间提供了一个抽象层。<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block> 。它们允许管理员以通用的、与后端无关的方式定义每个后端的各个方面，例如位置、性能和保护，而无需创建单独的配置。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>指定要使用的物理后端、后端池或后端类型，以满足所需条件。</block>
  <block id="c395d1a6e14d73fb73663b1198b0b134" category="section-title">了解虚拟泳池</block>
  <block id="63e606feac51f51c118b9ea9da3584dc" category="paragraph">存储管理员可以在任何Trident后端上，通过 JSON 或 YAML 定义文件定义虚拟池。</block>
  <block id="6293784c303cb134632b85dc06f372df" category="image-alt">展示了虚拟池的概念图。</block>
  <block id="2a778cf7220cdde142651975e1bcd90f" category="paragraph">在虚拟池列表之外指定的任何方面对于后端都是全局的，并将应用于所有虚拟池；而每个虚拟池可以单独指定一个或多个方面（覆盖任何后端全局方面）。</block>
  <block id="e26346b2afab61526141ea7275a77ba3" category="list-text">定义虚拟池时，不要尝试重新排列后端定义中现有虚拟池的顺序。</block>
  <block id="92aa2031bb642a0c5c916142f725400d" category="list-text">我们不建议修改现有虚拟池的属性。您需要定义一个新的虚拟池来进行更改。</block>
  <block id="43d41b472d09879b85f78a3b8e487fd1" category="paragraph">大多数方面都是用后端特有的术语来规定的。至关重要的是，这些方面值不会暴露在后端驱动程序之外，也无法用于匹配。<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>相反，管理员可以为每个虚拟池定义一个或多个标签。每个标签都是一个键值对，并且标签可能在不同的后端中是相同的。与方面类似，标签可以针对每个池进行指定，也可以全局指定到后端。与具有预定义名称和值的方面不同，管理员可以完全自主地根据需要定义标签键和值。为了方便起见，存储管理员可以为每个虚拟池定义标签，并按标签对卷进行分组。</block>
  <block id="5912b080dcb9b431aedfe3f22784a527" category="paragraph">可以使用以下字符来定义虚拟池标签：</block>
  <block id="89ff245fa0048aa9d5eeb6153a82f880" category="list-text">大写字母<block ref="0c43922c2fd0b2886820ce8d59d0a425" prefix=" " category="inline-code"></block></block>
  <block id="568787cc8b0bed04e060c362d705b747" category="list-text">小写字母<block ref="dcb844fadbceca7867ca91e26174469b" prefix=" " category="inline-code"></block></block>
  <block id="99be75de31964ff7afed59629c2827c9" category="list-text">数字<block ref="415d01607bfb64fa0b7efaf0fe064e86" prefix=" " category="inline-code"></block></block>
  <block id="f0fbfac7ddb67830c39dcddb2e0101aa" category="list-text">下划线<block ref="b14a7b8059d9c055954c92674ce60032" prefix=" " category="inline-code"></block></block>
  <block id="c76231732eebaec2e2411ed7cfd30e2c" category="list-text">连字符<block ref="336d5ebc5436534e61d16e63ddfca327" prefix=" " category="inline-code"></block></block>
  <block id="e084f7ea866c7ad616e67a911925c850" category="paragraph">一个<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>通过引用选择器参数中的标签来确定要使用的虚拟池。虚拟池选择器支持以下运算符：</block>
  <block id="e1b3ec89ead7f83a9245ed5c9cacfdbf" category="cell">运算符</block>
  <block id="3b64653c97a388d828849314b6a1b383" category="cell">池的标签值必须：</block>
  <block id="499badcb6f450c7f46c51d873eb84286" category="cell"><block ref="43ec3e5dee6e706af7766fffea512721" prefix="" category="inline-code"></block></block>
  <block id="354653142ec321459dfd6d71444e992e" category="cell">性能=优质</block>
  <block id="6da89265a9a8b0b28eb4946bb2ec0c6d" category="cell">匹配</block>
  <block id="5a5292b0a0d0379f0f1b12801b09b266" category="cell"><block ref="de0219f9333d57ea89a9ba235df098ba" prefix="" category="inline-code"></block></block>
  <block id="eccde6822783bd75209c9b6a2d357f6c" category="cell">性能！=极限</block>
  <block id="ecf92052d55345fee4602d9eb8c22063" category="cell">不匹配</block>
  <block id="ae2bef277194f73d24a36a78009aac1e" category="cell"><block ref="13b5bfe96f3e2fe411c9f66f4a582adf" prefix="" category="inline-code"></block></block>
  <block id="f8cf8c23afb5459dbf7c24b685caf85b" category="cell">位置在（东，西）</block>
  <block id="c6c1caf73b0f83d807abe5a717014ab7" category="cell">属于价值集合。</block>
  <block id="1a031eecbce49366e550273b9321b909" category="cell"><block ref="935f754ecc68ca688f61c154c404ed06" prefix="" category="inline-code"></block></block>
  <block id="b5585f3f9b45f391fee5dd15e6516450" category="cell">表演奖（银奖、铜奖）</block>
  <block id="8daf6b016f4033d59900c23f162c0f73" category="cell">不在值集中</block>
  <block id="c6bfba38b789fec8271d1d1496a9ee59" category="cell"><block ref="42538adbdb6240b2b083a000a615d5bd" prefix="" category="inline-code"></block></block>
  <block id="152f5dc0f7ac734f8e8ee17d4a482462" category="cell">保护</block>
  <block id="7b532e697a35209f3df3956577cc3d9c" category="cell">存在且具有任意值</block>
  <block id="eb0254f1d0a82e646c239d4d2e2f83ac" category="cell"><block ref="f65e5ff2a1bb1af969dccabe7dcd5cdd" prefix="" category="inline-code"></block></block>
  <block id="67a3b723b2d9024808eb2c6e686d00a0" category="cell">！保护</block>
  <block id="1fde97909b90bb329db2062f7744bd45" category="cell">不存在</block>
  <block id="acd6bcd484ba971a72536c22c06f04e2" category="summary">了解更多关于Trident如何使用卷访问组的信息。</block>
  <block id="b4621305109716b02eed0cf25fabab13" category="doc">卷访问组</block>
  <block id="33911b1eec54b4b5a7fbc504e6569989" category="inline-link">卷访问组</block>
  <block id="6a460593bdfb0144320bef6fdd1b2472" category="paragraph">了解更多关于Trident如何使用<block ref="783dd6ea9e0b09c84db9ccd072a61c55" category="inline-link-rx"></block>。</block>
  <block id="1ce858ea946af658f2db231318e1c74e" category="admonition">如果您使用的是 CHAP，请忽略此部分。建议使用 CHAP 以简化管理并避免下文所述的扩展限制。此外，如果您在 CSI 模式下使用Trident ，则可以忽略此部分。  Trident在作为增强型 CSI 配置器安装时使用 CHAP。</block>
  <block id="99c850b82f45e568828f2a8c5ab8f94d" category="section-title">了解卷访问组</block>
  <block id="547d4fe433ab9ed2223dfe9c48379548" category="paragraph">Trident可以使用卷访问组来控制对其所配置卷的访问。如果 CHAP 被禁用，它会寻找一个名为“访问组”的访问组。<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>除非您在配置中指定一个或多个访问组 ID。</block>
  <block id="33a94edb76f0383c1d244a8698373b50" category="paragraph">Trident会将新卷与已配置的访问组关联起来，但它本身并不创建或以其他方式管理访问组。在将存储后端添加到Trident之前，访问组必须存在，并且它们需要包含 Kubernetes 集群中每个节点的 iSCSI IQN，这些节点可能会挂载由该后端配置的卷。在大多数安装中，这包括集群中的每个工作节点。</block>
  <block id="054e161b9c33938d4cac2bab4e4d46b8" category="paragraph">对于节点数超过 64 个的 Kubernetes 集群，您应该使用多个访问组。每个访问组最多可包含 64 个 IQN，每个卷可属于四个访问组。配置最多四个访问组后，集群中最多 256 个节点中的任何节点都将能够访问任何卷。有关卷访问组的最新限制，请参阅<block ref="ac4000c3a85e5909daa6593f9f0617fd" category="inline-link-rx"></block>。</block>
  <block id="ca3c25915a30bef4ec583f6082477acf" category="paragraph">如果您要修改的配置是基于默认配置的，那么请注意以下事项。<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>访问组必须与其他组一起使用，并且必须包含 ID。<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>访问列表中的组。</block>
  <block id="4cfa22b281cbd36e1a275d61ec23a9b4" category="summary">您可以收集日志以帮助进行故障排除。收集日志的方法取决于您运行 Docker 插件的方式。</block>
  <block id="fe1786b49549e8e06a89b9c57d7fc514" category="doc">收集日志</block>
  <block id="756909f99bc1a720d318a5f5b94eb094" category="section-title">收集日志以进行故障排除</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="6049f954e4284100050b26e9f3fb772e" category="list-text">如果您使用推荐的托管插件方法运行Trident （即，使用<block ref="fb3421df1496105acc8a14808359550b" prefix=" " category="inline-code"></block>命令），可以这样理解：</block>
  <block id="7f86daacf34c67c042470fa9d926ba49" category="paragraph">标准日志级别应该足以诊断大多数问题。如果这还不够，您可以启用调试日志记录。</block>
  <block id="c28722abec5c1daefa02916119bbff91" category="list-text">要启用调试日志记录，请安装启用调试日志记录功能的插件：</block>
  <block id="b142025dd533fb27bf7df1a93c55e311" category="paragraph">或者，在插件已安装的情况下启用调试日志记录：</block>
  <block id="6bdfdbfc466bb6d93222dbf7b3a374fe" category="list-text">如果您在主机上运行该二进制文件，则日志位于主机的目录中。<block ref="849fc2421f236e9c9b49a9d3fed2c404" prefix=" " category="inline-code"></block>目录。要启用调试日志记录，请指定<block ref="9b945915b0cddbee22047fd529d642f6" prefix=" " category="inline-code"></block>当你运行插件时。</block>
  <block id="2aa0797ce5da04d1c6f027c9b3276483" category="section-title">一般故障排除技巧</block>
  <block id="94d799ff06bdb0aedb7b64151dac73d7" category="list-text">新用户遇到的最常见问题是配置错误，导致插件无法初始化。发生这种情况时，当您尝试安装或启用插件时，可能会看到类似这样的消息：</block>
  <block id="fe6b4529e706ebc0f7e3668d3230d029" category="paragraph"><block ref="e10704aaf501d617a85e30884eb05c0b" prefix="" category="inline-code"></block></block>
  <block id="3d924bd43304301ed127cbbd303a4fa6" category="paragraph">这意味着插件启动失败。幸运的是，该插件内置了全面的日志记录功能，应该可以帮助您诊断可能遇到的大多数问题。</block>
  <block id="79c820c2d64495c47651e58e73f97294" category="list-text">如果将光伏系统安装到集装箱上遇到问题，请确保：<block ref="7a31649dd02ecf0349542b72f9d5ef54" prefix=" " category="inline-code"></block>已安装并正在运行。使用主机操作系统所需的软件包管理器并检查是否<block ref="7a31649dd02ecf0349542b72f9d5ef54" prefix=" " category="inline-code"></block>正在运行。您可以通过运行以下命令来检查 rpcbind 服务的状态：<block ref="461bc51ac38341d1d2fdae2e84bc6e47" prefix=" " category="inline-code"></block>或其等效物。</block>
  <block id="e391df7d288176b307da8db0c4d91ae5" category="summary">Trident for Docker 为NetApp存储平台提供与 Docker 生态系统的直接集成。它支持从存储平台到 Docker 主机的存储资源的配置和管理，并提供了一个框架，以便将来添加其他平台。</block>
  <block id="e0a3531ef314a005745a9fea19b5ba09" category="doc">部署Trident</block>
  <block id="70f45f0faadd8edb223d0fdeb6668679" category="paragraph">同一主机上可以同时运行多个Trident实例。这样就可以同时连接到多个存储系统和存储类型，并且可以自定义 Docker 卷使用的存储。</block>
  <block id="d59db7846bd10b6d60d21543df9faa9e" category="paragraph-title">你需要什么</block>
  <block id="89bcbd8e4ba49b7310e9fa748e878c4b" category="inline-link-macro">部署的先决条件</block>
  <block id="7da919c969cc2b18d98105fe90684df8" category="paragraph">查看<block ref="18d5551396fb2ce2e009cfdb709e4875" category="inline-link-macro-rx"></block>。确保满足先决条件后，即可部署Trident。</block>
  <block id="88f0ab229fa9d759d74fcf6ab7cc17b1" category="section-title">Docker 管理的插件方法（版本 1.13/17.03 及更高版本）</block>
  <block id="58391bc76e8c1c5635a11134b3e4083d" category="admonition">如果您之前在 Docker 1.13/17.03 之前的版本中使用过Trident 的传统守护进程方法，请确保在使用托管插件方法之前停止Trident进程并重新启动 Docker 守护进程。</block>
  <block id="7bf1ee8f4e093050c1cdf1842931af7d" category="list-text">停止所有正在运行的实例：</block>
  <block id="47b9ec5c8c4439980c63f4188bad5324" category="list-text">重启 Docker。</block>
  <block id="5311ac4d72d5c91dcaa39b896d3b8027" category="list-text">请确保您已安装 Docker Engine 17.03（新版本 1.13）或更高版本。</block>
  <block id="07d6db5e99a0aa19fe76f15efed30ecf" category="inline-link">安装或更新您的安装程序</block>
  <block id="2c3bc9d0632e0cccc05fdd3c42467df9" category="paragraph">如果您的版本已过时，<block ref="ddebe10ca17c0276898872fa2632e8fb" category="inline-link-rx"></block> 。</block>
  <block id="48afbcf494fc19ee409f5aff48ae32c3" category="list-text">创建配置文件并按如下方式指定选项：</block>
  <block id="9314e9bcd24c80b255fc3e9e697a2ada" category="list-text"><block ref="2245023265ae4cf87d02c8b6ba991139" prefix="" category="inline-code"></block>默认文件名是<block ref="06b2d3b23dce96e1619d2b53d6c947ec" prefix=" " category="inline-code"></block>不过，您可以通过指定名称来使用您选择的任何名称。<block ref="2245023265ae4cf87d02c8b6ba991139" prefix=" " category="inline-code"></block>文件名选项。配置文件必须位于<block ref="82a4d1e835ca8dc19ea6a437e4af9493" prefix=" " category="inline-code"></block>主机系统上的目录。</block>
  <block id="8798dc2a3b5e61873054923c9f170ac7" category="list-text"><block ref="6ab0f208312cdf3ab62b4b1061d4f7c0" prefix="" category="inline-code"></block>：指定日志级别<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix="(" category="inline-code"></block>，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block> ，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block> ，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block> ，<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block> ）。默认值为<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block>。</block>
  <block id="45ed67026a1141006588fcc698646141" category="list-text"><block ref="ad42f6697b035b7580e4fef93be20b4d" prefix="" category="inline-code"></block>：指定是否启用调试日志记录。默认值为 false。如果为真，则覆盖日志级别。</block>
  <block id="3bed6f89999b483af7f55024d9e7c02a" category="list-text">创建配置文件存放位置：</block>
  <block id="28156615c51d4bad2ee47d0a9f43f404" category="list-text">创建配置文件：</block>
  <block id="8554af307cedea04e0e39362f35175f4" category="list-text">使用托管插件系统启动Trident 。代替<block ref="3d689bd3819ead35ed794427bd12f459" prefix=" " category="inline-code"></block>使用您正在使用的插件版本（xxx.xx.x）。</block>
  <block id="8020e7c6d37db1ac7100b3b117f46cfd" category="list-text">开始使用Trident从已配置的系统中获取存储空间。</block>
  <block id="a9c521f25a3bacb94ad1dd4705b3585f" category="list-text">创建一个名为“firstVolume”的卷：</block>
  <block id="4fbca4f67cbe96bc7d7a16691d2912c2" category="list-text">容器启动时创建默认卷：</block>
  <block id="b8e88709dbc4f2f80a96f53f83862704" category="list-text">移除音量“firstVolume”：</block>
  <block id="0e68ac1d84bfedf203365a9fb37db9ed" category="section-title">传统方法（版本 1.12 或更早版本）</block>
  <block id="2c1107bda4c1ae7904ab1835c35973b7" category="list-text">请确保您使用的是 Docker 版本 1.10 或更高版本。</block>
  <block id="b6fdfa2eab3e357687eba5ddec2bea0c" category="paragraph">如果您的版本过旧，请更新您的安装。</block>
  <block id="45c61654258cfd16ceec15df7df02138" category="inline-link">请按照您的分发说明进行操作</block>
  <block id="07dff22faeb910f375341cfcbd4899fd" category="paragraph">或者，<block ref="9ce989a7f7f995616a47f5dd291ed229" category="inline-link-rx"></block> 。</block>
  <block id="588d2fe1c60271cde75dbeba32e0b25b" category="list-text">请确保您的系统已配置 NFS 和/或 iSCSI。</block>
  <block id="03fe5b0d58270efa87041677cac72ad7" category="list-text">安装并配置NetApp Docker 卷插件：</block>
  <block id="f45f5a64dae951d3e37c9bd382201b06" category="list-text">下载并解压应用程序：</block>
  <block id="b255d9e06a4ca8e9f5bc31c9198426ad" category="list-text">移动到回收站路径中的某个位置：</block>
  <block id="b2edeceecc054572188ee3b08cd58c64" category="list-text">放置好二进制文件并创建配置文件后，使用所需的配置文件启动Trident守护进程。</block>
  <block id="4846d107d8ddb5051591d14dcbddba8c" category="admonition">除非另有指定，卷驱动程序的默认名称为“netapp”。</block>
  <block id="f253a45a33bc62e467efd426699d9025" category="paragraph">守护进程启动后，您可以使用 Docker CLI 界面创建和管理卷。</block>
  <block id="e3dec3f86b9a3b1be209ab63855ce432" category="list-text">创建卷：</block>
  <block id="5ff2e3e853922fdb84ef21b85ffdac2e" category="list-text">启动容器时配置 Docker 卷：</block>
  <block id="8f6a91f5f21d0478e3fd89095fc28ab9" category="list-text">删除 Docker 卷：</block>
  <block id="b48e6203239c93859800f96924a39ed7" category="section-title">系统启动时启动Trident</block>
  <block id="0350980c728940d67af063bb5d711f0f" category="paragraph">systemd 系统的示例单元文件可在以下位置找到：<block ref="50a97f9b0dec64cc53ca48406c60fe4d" prefix=" " category="inline-code"></block>在 Git 仓库中。要在 RHEL 系统中使用该文件，请执行以下操作：</block>
  <block id="5b51496da86e5a2073e0c618390c3d2a" category="list-text">将文件复制到正确位置。</block>
  <block id="44103de0a164f687d305ad91e919d8ee" category="paragraph">如果运行多个实例，则应为单元文件使用唯一的名称。</block>
  <block id="3223aadc84a3ccb4a3473ba01c895184" category="list-text">编辑该文件，将描述（第 2 行）更改为与驱动程序名称匹配，并将配置文件路径（第 9 行）更改为反映您的环境。</block>
  <block id="1edae3931401a32d7dd7dd6e0a2ad563" category="list-text">重新加载 systemd 以使其吸收更改：</block>
  <block id="db38a93e27eba57d507611d002ad612f" category="list-text">启用该服务。</block>
  <block id="c7e0a4deeebe264aa7d5f7f3ca3ef77f" category="paragraph">这个名称会根据你给文件命名的方式而有所不同。<block ref="dce2a9642217836d54f614dfd625b753" prefix=" " category="inline-code"></block>目录。</block>
  <block id="baa04490a79e9e8de7fa4cd44e2c6fbb" category="list-text">启动服务。</block>
  <block id="93c7574cf83c1f01b04891cf2d826cea" category="list-text">查看状态。</block>
  <block id="f4f15418284ae7a01b27fccc1af0463a" category="admonition">每次修改单元文件后，请运行以下命令：<block ref="269b117015efb12595eebf74692e5cbc" prefix=" " category="inline-code"></block>命令使其能够感知这些变化。</block>
  <block id="a5a6bc232526faaa8ab11bd5f46a069c" category="summary">查找有关将Trident与 Docker 结合使用时已知问题的信息。</block>
  <block id="3a3b7ac2e39541ea05707ccd6eb054d4" category="doc">已知问题和限制</block>
  <block id="44110fddc560d626db733ac60924ea7c" category="paragraph">查找有关将Trident与 Docker 结合使用时已知问题和限制的信息。</block>
  <block id="8bb35988eac5a841d2af092365f1aa42" category="section-title">将Trident Docker Volume Plugin 从旧版本升级到 20.10 及更高版本会导致升级失败，并出现“没有这样的文件或目录”错误。</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="list-title">临时解决策</block>
  <block id="f49f11bc5398ac13e500d16eac424e77" category="list-text">禁用插件。</block>
  <block id="cc3dae6dd6670606c41c62b10273605e" category="list-text">移除插件。</block>
  <block id="6010901b5c4bb6ad671e6f07fcc038d8" category="list-text">重新安装插件，并提供额外信息<block ref="2245023265ae4cf87d02c8b6ba991139" prefix=" " category="inline-code"></block>范围。</block>
  <block id="e527ab8c1c51767e38a3603d51d2d6e5" category="section-title">卷名长度至少为 2 个字符。</block>
  <block id="45c9df594d13c8a5e5472503d5f14b01" category="inline-link">参见错误 25773</block>
  <block id="c167efd138e06a8ee59885983c5ddf69" category="admonition">这是 Docker 客户端的限制。客户端会将单个字符名称解释为 Windows 路径。<block ref="f082f49b923960d888c1d98a1e9f4fcb" category="inline-link-rx"></block> 。</block>
  <block id="442b5623691118072cf6342e3614f21a" category="section-title">Docker Swarm 的某些行为导致Trident无法支持它与所有存储和驱动程序的组合。</block>
  <block id="a7c3ff464b1ef4364de4df03d66bee5e" category="list-text">Docker Swarm 目前使用卷名称而不是卷 ID 作为其唯一的卷标识符。</block>
  <block id="61ab6f5cff8de89cba95d9e3bbc4ff71" category="list-text">卷请求会同时发送到 Swarm 集群中的每个节点。</block>
  <block id="738890a616b36648aef3afc3dbd99a29" category="list-text">卷插件（包括Trident）必须在 Swarm 集群中的每个节点上独立运行。由于ONTAP 的工作方式以及<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驾驶员之所以能发挥作用，是因为他们是唯一能够在这些限制条件下操作的人。</block>
  <block id="a0ba0b0d751124c646a352594c7e9d7b" category="paragraph">其余驱动程序会受到诸如竞争条件之类的问题的影响，这可能会导致单个请求创建大量卷，而没有明确的“赢家”；例如，Element 具有允许卷具有相同名称但 ID 不同的功能。</block>
  <block id="48cbf13b390ff021b130d5f372147af5" category="paragraph">NetApp已向 Docker 团队提供了反馈，但目前没有任何迹象表明未来会采取什么措施。</block>
  <block id="29cff148f43bc689eb14447b333f6f83" category="section-title">如果正在配置FlexGroup ，而第二个FlexGroup与正在配置的FlexGroup有一个或多个共同的聚合，则ONTAP不会配置第二个FlexGroup 。</block>
  <block id="8e846679c3471e522caeeaf12adf2232" category="summary">当您需要同时拥有多个存储配置时，需要多个Trident实例。实现多个实例的关键在于使用容器化插件的 --alias 选项为它们指定不同的名称，或者在主机上实例化Trident时使用 --volume-driver 选项为它们指定不同的名称。</block>
  <block id="2af81ac5264569558ae512fd78aaeb99" category="doc">管理多个Trident实例</block>
  <block id="8f327f2ceda84404290184a7454160ed" category="paragraph">当您需要同时拥有多个存储配置时，需要多个Trident实例。实现多个实例的关键在于使用不同的名称来命名它们。<block ref="14742efbfd1451d64cd78e6664734234" prefix=" " category="inline-code"></block>使用容器化插件的选项，或者<block ref="3462d72f00482b2e9f6fcfcdf665289b" prefix=" " category="inline-code"></block>在主机上实例化Trident时的选择。</block>
  <block id="52ef1c6ffefaba3249f208369424635d" category="section-title">Docker 管理插件（版本 1.13/17.03 或更高版本）的步骤</block>
  <block id="547c4a5f7c863aad85f5265c03ed72ea" category="list-text">启动第一个实例时，指定别名和配置文件。</block>
  <block id="991ac134f22efa2bb955362d95827ae5" category="list-text">启动第二个实例，指定不同的别名和配置文件。</block>
  <block id="aa0dc0ac69e69c434317798e1aa9842b" category="list-text">创建卷时，将别名指定为驱动程序名称。</block>
  <block id="5ae25a45ab76de161f87fc41a84f746d" category="paragraph">例如，黄金交易量：</block>
  <block id="6dab7c53f6e3de2eae52e928dfe5b861" category="paragraph">例如，对于白银交易量而言：</block>
  <block id="67754cb209925946943e297b3a8be344" category="section-title">传统方法（版本 1.12 或更早版本）的步骤</block>
  <block id="cbd128765e82966ed5e454a99b22e688" category="list-text">使用自定义驱动程序 ID 通过 NFS 配置启动插件：</block>
  <block id="51c923daa4caf6aea6d24201b73871b6" category="list-text">使用自定义驱动程序 ID 和 iSCSI 配置启动插件：</block>
  <block id="dd72ade865d731ba8f6a6fc4c8ccd86f" category="list-text">为每个驱动程序实例配置 Docker 卷：</block>
  <block id="8e2044cc9d4e8f515ad4809a68d75465" category="paragraph">例如，对于 NFS：</block>
  <block id="d39eb6e4299503c5d451d19b9645be42" category="paragraph">例如，对于 iSCSI：</block>
  <block id="6d9d4f707717522af7673ba035a40845" category="summary">在部署Trident之前，您必须在主机上安装和配置必要的协议先决条件。</block>
  <block id="782bd8949cb40c80fd3f3126eccab35a" category="doc">部署先决条件</block>
  <block id="88825f48aa3e053d7df66897e8b63e38" category="section-title">核实要求</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">要求</block>
  <block id="6bee7851f8606d588c9122b234c202e3" category="list-text">确认您的部署满足所有要求<block ref="6fc1811f5f9a8ae54793544600e2dff7" category="inline-link-macro-rx"></block>。</block>
  <block id="d46ecc35447a8c17ef014ff6daf07bba" category="inline-link">安装或更新它</block>
  <block id="1035fa0ac2c3ed19f6ba56cafe7e121f" category="list-text">请确认您已安装受支持的 Docker 版本。如果您的 Docker 版本已过时，<block ref="0b011811ae105895ca4da9769d7e6f99" category="inline-link-rx"></block> 。</block>
  <block id="fdb5bcd69c8617adc24a528d074b060b" category="list-text">请确认您的主机上已安装并配置协议所需的先决条件。</block>
  <block id="2cb4ed05fbad97efb755e294c572862d" category="section-title">NFS 工具</block>
  <block id="dc3c80fe7e62048ec7f179f78dd1d918" category="paragraph">使用适用于您操作系统的命令安装 NFS 工具。</block>
  <block id="05a2712653dfbf7d695c18242d9848e6" category="open-title">RHEL 8+</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="open-title">Ubuntu</block>
  <block id="7b05c6f5db7b1690970d79c209e667fc" category="admonition">安装 NFS 工具后重启工作节点，以防止将卷附加到容器时发生故障。</block>
  <block id="0172151d0fbf6ae973feaaaf8a2c1b3a" category="section-title">iSCSI 工具</block>
  <block id="10ff9e1b33974d06317ff739498154ce" category="paragraph">使用适用于您操作系统的命令安装 iSCSI 工具。</block>
  <block id="8cd5b262d8d9950185128d052d55f7c8" category="list-text">安装以下系统软件包：</block>
  <block id="1a5157a00ea5806f553766d5b3b114fd" category="list-text">请检查 iscsi-initiator-utils 版本是否为 6.2.0.874-2.el7 或更高版本：</block>
  <block id="19955b3c2d2c1cfc1c82c2fe0347a065" category="list-text">将扫描方式设置为手动：</block>
  <block id="d0b02d407fd5c75d0e7eac549a852191" category="list-text">启用多路径：</block>
  <block id="60c268e00db3206011b54b01705d7211" category="admonition">确保<block ref="7901fe536dc82e3cb12052c3fac7fef6" prefix=" " category="inline-code"></block>包含<block ref="2a81b35478c9ccb4f9392dcc40edb8e6" prefix=" " category="inline-code"></block>在下面<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>。</block>
  <block id="8bec0eea71974a9138ccfa96983ddcfc" category="list-text">确保<block ref="3fe4dc8de876aca2c78fa0cd9c6d0b65" prefix=" " category="inline-code"></block>和<block ref="8732863da72605a20ed96b4eee87a5fb" prefix=" " category="inline-code"></block>正在运行：</block>
  <block id="8018f5d6ddc4e67678d1659757828deb" category="list-text">启用并启动<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>：</block>
  <block id="a53508e75911225e5de8b5febc82cf12" category="list-text">请检查 open-iscsi 版本是否为 2.0.874-5ubuntu2.10 或更高版本（适用于 bionic）或 2.0.874-7.1ubuntu6.1 或更高版本（适用于 focal）：</block>
  <block id="b163c84ad8a4e55a17b51aad8074093e" category="list-text">确保<block ref="356cb36dc1c54ae3f8a7c332c76d7edd" prefix=" " category="inline-code"></block>和<block ref="452b142235e718663e27bc4f162c14ca" prefix=" " category="inline-code"></block>已启用并正在运行：</block>
  <block id="b00fd28ef92c5c525d66d12aa0d5e4dd" category="section-title">NVMe 工具</block>
  <block id="cfd4e84c111973cbf00e30acfd3af3b1" category="paragraph">使用适用于您操作系统的命令安装 NVMe 工具。</block>
  <block id="c5c04ab13d0b9dcc3187f7e5cdfb7a00" category="list-text">NVMe 需要 RHEL 9 或更高版本。</block>
  <block id="f961ae7e5a407c3c3df6f5facf3c1ef3" category="list-text">如果您的 Kubernetes 节点的内核版本太旧，或者您的内核版本没有 NVMe 软件包，则您可能需要将节点的内核版本更新为包含 NVMe 软件包的版本。</block>
  <block id="38aef0bc7cf230dfcf5476915774aa95" category="open-title">RHEL 9</block>
  <block id="20215ca4c00abcf8fb731d0f856d0e91" category="section-title">FC工具</block>
  <block id="f0ad3dc6a6ba17b1e77a2a4af657f22a" category="paragraph">使用适用于您操作系统的命令安装 FC 工具。</block>
  <block id="78937357687a7b0292ed689d4e420485" category="inline-link">红帽文档</block>
  <block id="89e30b0f2c0e48835ff872a994fc749c" category="list-text">当使用运行 RHEL/Red Hat Enterprise Linux CoreOS (RHCOS) 且带有 FC PV 的工作节点时，请指定<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block>StorageClass 中的 mountOption 用于执行内联空间回收。参考<block ref="65c95aeda8cb0b26307f9839dd3fefbf" category="inline-link-rx"></block>。</block>
  <block id="0ac202e458490a734271522fcedf4876" category="list-text">确保<block ref="8732863da72605a20ed96b4eee87a5fb" prefix=" " category="inline-code"></block>正在运行：</block>
  <block id="69eeaf73fccab6d6abcba46bd6a3a3bf" category="list-text">确保<block ref="452b142235e718663e27bc4f162c14ca" prefix=" " category="inline-code"></block>已启用并正在运行：</block>
  <block id="ab2ce125ebcf04e3858934dafe06462f" category="summary">查看适用于您的Trident配置的配置选项。</block>
  <block id="34e1f7eb303c0a150cd440611b3b5e24" category="doc">存储配置选项</block>
  <block id="51f834b47bcd78a0f4f40fd8ca40446f" category="section-title">全局配置选项</block>
  <block id="048751d5dafc60f01ac58c7abebe0fb4" category="paragraph">这些配置选项适用于所有Trident配置，无论使用何种存储平台。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">选项</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">描述</block>
  <block id="7877022c956918624cc0373ff564cad4" category="cell"><block ref="2af72f100c356273d46284f6fd1dfc08" prefix="" category="inline-code"></block></block>
  <block id="63b276a6c28274ed5e553d4ce3fe7eb1" category="paragraph">配置文件版本号</block>
  <block id="2fc042d3545f5ad7df1999c9e5486176" category="paragraph"><block ref="c4ca4238a0b923820dcc509a6f75849b" prefix="" category="inline-code"></block></block>
  <block id="868dff7060d78b6417dc8e065eca8374" category="cell"><block ref="d45aebe724c55b101f2ae8924ba3d486" prefix="" category="inline-code"></block></block>
  <block id="ac5eb8fcbd1ed9c85a98d91e10e26a38" category="paragraph">存储驱动程序名称</block>
  <block id="bba4e1b8d8614fe9da2d67e2dcef4b52" category="paragraph"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block></block>
  <block id="c08068da3c5d19547544c4bd424a6b76" category="cell"><block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix="" category="inline-code"></block></block>
  <block id="7ff5348ddee6132fe7c166b8b7917cc0" category="paragraph">卷名称的可选前缀。默认：<block ref="689ee6510c7f9ef9df1c263a08823d96" prefix=" " category="inline-code"></block> 。</block>
  <block id="81998bdb6c3f52ba69dbecf0ec513180" category="paragraph"><block ref="46fa46eed970046d03e2dedc95cdc83b" prefix="" category="inline-code"></block></block>
  <block id="91590ee78f1b4751284f4f9ea80cfe86" category="cell"><block ref="e083f2ed1275af0ce4336a068ebee72a" prefix="" category="inline-code"></block></block>
  <block id="dfb6135042da6e8fbf367d9cf13431ef" category="paragraph">对容量大小有可选限制。默认值：""（不强制执行）</block>
  <block id="5d8040f7ca409e3993359a877f675e59" category="paragraph"><block ref="75da9d6de91e782eca4fa00341367135" prefix="" category="inline-code"></block></block>
  <block id="fb2a1518f6d194cef3caaff16d0f8ee4" category="admonition">请勿使用<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>（包括默认值）适用于 Element 后端。默认情况下，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序将忽略此设置，并且不使用前缀。  NetApp建议使用特定的租户 ID 进行 Docker 卷映射，或者使用属性数据，该属性数据填充了 Docker 版本、驱动程序信息和来自 Docker 的原始名称（如果可能使用了任何名称修改）。</block>
  <block id="0863f9e97e159e3ea1ce46bdb49b1254" category="paragraph">可以使用默认选项，避免在创建的每个卷上都指定这些选项。这<block ref="f7bd60b75b29d79b660a2859395c1a24" prefix=" " category="inline-code"></block>此选项适用于所有控制器类型。有关如何设置默认卷大小的示例，请参阅ONTAP配置部分。</block>
  <block id="a48a8458539e489328f4d6d3fc0ee288" category="cell"><block ref="f7bd60b75b29d79b660a2859395c1a24" prefix="" category="inline-code"></block></block>
  <block id="9548d4d33e26f6bbe564b4eb47a52e4b" category="paragraph">新建卷的可选默认大小。默认：<block ref="7d0f45b4b1cf6603762c74ca39c833dd" prefix=" " category="inline-code"></block></block>
  <block id="dfda6aac7ee732ec79153da76a0e963a" category="paragraph"><block ref="08aa1584c9a5791fb64b0f7f1453f9eb" prefix="" category="inline-code"></block></block>
  <block id="0353522b39b87d54d40d3f09ec668851" category="section-title">ONTAP 配置</block>
  <block id="cd536bce1bed61366e8d17a85fe6678a" category="paragraph">除了上述全局配置值之外，使用ONTAP时，还可以使用以下顶级选项。</block>
  <block id="07c54fe26be1e43601e99cd9d4fbe262" category="cell"><block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix="" category="inline-code"></block></block>
  <block id="464779f3491153dd1e79ddbd8a81e3f0" category="paragraph">ONTAP管理 LIF 的 IP 地址。您可以指定一个完全限定域名（FQDN）。</block>
  <block id="b6d628512c1127da9adb6c459c9f7c95" category="paragraph"><block ref="190dafab69706a67221c1226360de7dc" prefix="" category="inline-code"></block></block>
  <block id="bd81db53971fda3e688447b28c747d1a" category="cell"><block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix="" category="inline-code"></block></block>
  <block id="c95cada2a569592345ebc18e5ef4c7aa" category="paragraph">LIF协议的IP地址。</block>
  <block id="50738c79b08f93cc8be7f7ee1a3ac387" category="paragraph">* ONTAP NAS 驱动程序*： NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供， Trident将从 SVM 获取 dataLIF。您可以指定一个完全限定域名 (FQDN) 用于 NFS 挂载操作，从而创建轮询 DNS 以在多个 dataLIF 之间进行负载均衡。</block>
  <block id="ede78805a80cf9b2284aa458924e07b2" category="paragraph">* ONTAP SAN 驱动程序*：请勿指定 iSCSI 或 FC。Trident的使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的 iSCSI 或 FC LIF。如果出现以下情况，则会生成警告：<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>已明确定义。</block>
  <block id="251296d0166ace97771b155156985b38" category="paragraph"><block ref="98a2cd7efa1ba950d42e42af495c4248" prefix="" category="inline-code"></block></block>
  <block id="afc423de2be5ca5ab3a6ae9548bbfcf3" category="cell"><block ref="924ff83ff1e671bacfb07ff12b845703" prefix="" category="inline-code"></block></block>
  <block id="11053eb2b6ac6e8802c67c054cf55ad9" category="paragraph">要使用的存储虚拟机（如果管理 LIF 是集群 LIF，则此项为必填项）</block>
  <block id="9fcbfb18564773bb1604cf400912944c" category="paragraph"><block ref="b26399fddd6473c150b4e7528fb04fdc" prefix="" category="inline-code"></block></block>
  <block id="6d77646a2fd9ab65f8e3344d7dce661a" category="cell"><block ref="14c4b06b824ec593239362517f538b29" prefix="" category="inline-code"></block></block>
  <block id="723a179bbb9fc3c4f12cf296a8841b27" category="paragraph">连接到存储设备的用户名</block>
  <block id="8131d179a4284fbb0ed410bbbbcf1eb6" category="paragraph"><block ref="6173aa5206484b5224450952747c7148" prefix="" category="inline-code"></block></block>
  <block id="6aa91a7fbb8c9edcf4aa5f9411aec19c" category="cell"><block ref="5f4dcc3b5aa765d61d8327deb882cf99" prefix="" category="inline-code"></block></block>
  <block id="8cf10281cf3b9290d5988c57a7d19693" category="paragraph">连接存储设备的密码</block>
  <block id="c4dc9cb5606cc8c0597a5c8f1f77b005" category="paragraph"><block ref="5ebe2294ecd0e0f08eab7690d2a6ee69" prefix="" category="inline-code"></block></block>
  <block id="7e6d207f2b120c6cc9caa98510aa51c6" category="cell"><block ref="39adbeb6bc21a3133e5fdcf1ec05d1a0" prefix="" category="inline-code"></block></block>
  <block id="24794cfca66d1eed7c8defc480365bf0" category="paragraph">用于配置的聚合（可选；如果设置，则必须分配给 SVM）。对于<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序，此选项将被忽略。分配给 SVM 的所有聚合都用于配置FlexGroup卷。</block>
  <block id="fc3424ba1777889d0d49ea7f5a675c9e" category="paragraph"><block ref="70d2c7701d2837552c0a38c02a326592" prefix="" category="inline-code"></block></block>
  <block id="12d2394af47293b12d6b5f411f99a6d1" category="cell"><block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix="" category="inline-code"></block></block>
  <block id="925060a0c0a15f99ef1bee43f1660ea4" category="paragraph">可选，如果使用率超过此百分比，则配置失败</block>
  <block id="e84b7103384d0a3393c0847330716669" category="paragraph"><block ref="f819de81247be4a5428dc0e169de28b8" prefix="" category="inline-code"></block></block>
  <block id="2b45af5c768d7b2495ef631c991ecd78" category="cell"><block ref="e477739f39dbd2f1e1c5268912135e92" prefix="" category="inline-code"></block></block>
  <block id="876885770cf58d20ef5672cc5594e85d" category="inline-link">请在此处查看 NFS 主机配置信息</block>
  <block id="8904f6454065d44212063d39eeae5f07" category="paragraph">对 NFS 挂载选项进行精细控制；默认值为“-o nfsvers=3”。  *仅限以下情况：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>司机*。<block ref="71f7a3f48cfd3876cffba401813b7db0" category="inline-link-rx"></block> 。</block>
  <block id="7dd39afeb1c0b05aac5f4bf6fbd94990" category="paragraph"><block ref="301c869c551e12d862ab0291837102a0" prefix="" category="inline-code"></block></block>
  <block id="3b890f58db76bb3003ada171cd18c4db" category="cell"><block ref="9d8592d88bbb76c68c01d830f091dacc" prefix="" category="inline-code"></block></block>
  <block id="5cbbc03b20d402cc5f3688219dc927db" category="paragraph">Trident创建和管理每个节点<block ref="58f3779afe9da9ffdc085dc3064306f7" prefix=" " category="inline-code"></block>作为<block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix=" " category="inline-code"></block>。</block>
  <block id="0ee19d4be17e297cfb39c398cb268b5e" category="paragraph">此值不能更改或省略。</block>
  <block id="07d41595da50d0c332f22902db2f76d8" category="paragraph">*仅限以下情况：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>司机*。</block>
  <block id="684a16b15a51568bcdd546607176bd57" category="paragraph"><block ref="e77a1bd34ff5793aca292b38d23bc2c9" prefix="" category="inline-code"></block></block>
  <block id="74d08e13aea757b8172499f067668443" category="paragraph">最大可请求容量。</block>
  <block id="98ce75f2128e52057c9dbf00a9eb2736" category="paragraph"><block ref="f07e606cfe25ac6fb07d9c4af941d9a2" prefix="" category="inline-code"></block></block>
  <block id="07f6b23cad3d6da54012935ff972affe" category="cell"><block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix="" category="inline-code"></block></block>
  <block id="99d7b353753f3b80388b5ab7e69a4a28" category="paragraph">每个FlexVol 的最大 qtree 数量必须在 [50, 300] 范围内，默认值为 200。</block>
  <block id="3e00ac0f228180d0a5a3756df9a5bca3" category="paragraph">*对于<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序，此选项允许自定义每个FlexVol* 的最大 qtree 数量。</block>
  <block id="1ae6e291c93a6d5962af8004aecd9c4c" category="paragraph"><block ref="94f6d7e04a4d452035300f18b984988c" prefix="" category="inline-code"></block></block>
  <block id="89149296a9e0c36d8eb5e9c82e71155b" category="paragraph"><block ref="5b08b7c4c720db1d75c8c76a920fd99a" prefix="" category="inline-code"></block></block>
  <block id="c024b0a80a0f117a251e956f7b09ac4e" category="cell">*支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>仅限司机。*用于选择<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>对于 iSCSI，<block ref="eac89e2640666fd1076a776e4b748fae" prefix=" " category="inline-code"></block>适用于 NVMe/TCP 或<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block>用于光纤通道 (FC) 上的 SCSI。</block>
  <block id="053b2e680c58724dc4bdd83223136c48" category="cell"><block ref="39eea648dab96b0ee6022dabb38bc420" prefix="" category="inline-code"></block>如果为空</block>
  <block id="f14a3ef36727dfbbea91c1d6b3fdbede" category="cell"><block ref="c8f83e727d4a4255a6485c24776e86bb" prefix="" category="inline-code"></block></block>
  <block id="33fefa32caf35cd4691465f3592a0539" category="cell">*支持<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>仅限司机。*限制ONTAP ontap-nas-economy 和 ontap-SAN-economy 驱动程序中的FlexVol大小。</block>
  <block id="3890063556e337d458019437f027030b" category="paragraph">系统提供了默认选项，避免在创建的每个卷上都进行指定：</block>
  <block id="a6bddf19eed00dbe2199864dee8454ce" category="cell"><block ref="cae77b049bf504af7afc43b99b6c5213" prefix="" category="inline-code"></block></block>
  <block id="af2bffb136dd0c22342ad9cb06187197" category="paragraph">空间预订模式；<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block> （精简配置）或<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>（厚的）</block>
  <block id="56d058c51fcd79545706c62569ba5a19" category="paragraph"><block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix="" category="inline-code"></block></block>
  <block id="0ec3875cf79264e4689a646be2f704b6" category="cell"><block ref="0a236e7685e50a59df980d0a30929d6c" prefix="" category="inline-code"></block></block>
  <block id="7f0d015762fc8e2b44f0ad1cd5429af5" category="paragraph">要使用的快照策略，默认值为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="7556d5a1b0c5f68b7cb5aedaa3156008" category="cell"><block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix="" category="inline-code"></block></block>
  <block id="6a3f2fe5a221ff5e914123b7d1d207ac" category="paragraph">快照预留百分比，默认值为空字符串，表示接受ONTAP默认值。</block>
  <block id="11663b17d5bcea48dbfb36b13965663b" category="paragraph"><block ref="d3d9446802a44259755d38e6d163e820" prefix="" category="inline-code"></block></block>
  <block id="4be01095ce6e500084fc427e5dec61ac" category="cell"><block ref="58c1c86186ef8de4f6e12d8f3aed8b64" prefix="" category="inline-code"></block></block>
  <block id="871c12a80dbc519da4b71b3ea166cdc4" category="paragraph">创建时将克隆体与其父级分离，默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block></block>
  <block id="249091efa412cf5e332461c484b979d0" category="paragraph"><block ref="68934a3e9455fa72420237eb05902327" prefix="" category="inline-code"></block></block>
  <block id="b091cbafedf94db98f17823d044434bd" category="cell"><block ref="5bdf74912a51c34815f11e9a3d20b609" prefix="" category="inline-code"></block></block>
  <block id="2bc97a247278d92f5552529c55ab7f0d" category="paragraph">在新卷上启用NetApp卷加密 (NVE)；默认启用<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。要使用此选项，必须在集群上获得 NVE 许可并启用 NVE。</block>
  <block id="98c76e4bb2a33d9fd5985c31833d545b" category="paragraph">如果后端启用了 NAE，则在Trident中配置的任何卷都将启用 NAE。</block>
  <block id="dd7e96ca2da30b4de0cef5d5d0d67883" category="paragraph">更多信息，请参阅：<block ref="5113a2fb1642ecd23870711ba25c4ad7" category="inline-link-macro-rx"></block> 。</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">true</block>
  <block id="ce46e8f3fc6eaddbe03115e0d62090ac" category="cell"><block ref="c005e78d4bd808038335c32dd84cf7da" prefix="" category="inline-code"></block></block>
  <block id="290cc6c07ae2ba0a638720a38f1356ed" category="paragraph">NAS 选项，用于已配置的 NFS 卷，默认值为<block ref="f1c1592588411002af340cbaedd6fc33" prefix=" " category="inline-code"></block></block>
  <block id="8dfb6d491cffb51a17396f993c195d8b" category="paragraph"><block ref="f1c1592588411002af340cbaedd6fc33" prefix="" category="inline-code"></block></block>
  <block id="ce8f82152151ae2aadaec166eca744a9" category="cell"><block ref="7ad68fdac2eac069eb8ed0fc45b0fb74" prefix="" category="inline-code"></block></block>
  <block id="775acc7033e41c0ec1b40c64643c6339" category="paragraph">NAS选项用于访问<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>目录。</block>
  <block id="9baf39c0a00f0d9f174a9671e5cefbab" category="paragraph">NFSv4 为“true”，NFSv3 为“false”。</block>
  <block id="e59001176f4360988f5d774a8405b4b9" category="cell"><block ref="647ce4e5394e2e595e46b4fc50a628e9" prefix="" category="inline-code"></block></block>
  <block id="1667ea9b715250d5f295353e97cde10e" category="paragraph">NFS导出策略要使用的NAS选项，默认值为<block ref="c21f969b5f03d33d43e04f8f136e7682" prefix=" " category="inline-code"></block></block>
  <block id="980ef1c1aa7d1456ee087df02119341e" category="paragraph"><block ref="c21f969b5f03d33d43e04f8f136e7682" prefix="" category="inline-code"></block></block>
  <block id="a463baaf6666da7178b6fc6a3c8a3fee" category="cell"><block ref="f7f695c763ad0e0ba03c2ff9cbcfcb3d" prefix="" category="inline-code"></block></block>
  <block id="f5d176b3de4662ca3603a69ab08bc166" category="paragraph">NAS 选项，用于访问已配置的 NFS 卷。</block>
  <block id="053b422d907cb55ac105c173adde1080" category="paragraph">NFS 支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>安全措施。默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。</block>
  <block id="69f25314e2d927ebcaa0f19c9f2a57da" category="paragraph"><block ref="4913a9178621eadcdf191db17915fbcb" prefix="" category="inline-code"></block></block>
  <block id="3184b1a9846944fabb00496c4b6b613a" category="cell"><block ref="23030324c640b4b47b8381c02456649a" prefix="" category="inline-code"></block></block>
  <block id="19d28ffef37322622a55f9d7f1f9fa59" category="paragraph">SAN选项用于选择文件系统类型，默认为<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block></block>
  <block id="c90caaafbe0da0287b6a84f0894fa40b" category="paragraph"><block ref="310201b6353c5f38bc039e0e51b079d3" prefix="" category="inline-code"></block></block>
  <block id="31aa018945eb62580d68d360cba8ba54" category="cell"><block ref="a3e48f0594dda6037d37d52d343489b0" prefix="" category="inline-code"></block></block>
  <block id="36212bd37512e583deabaefb464f77f9" category="paragraph">要使用的分层策略，默认值为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>。</block>
  <block id="90adf331b7868c7af46ad6e035e93844" category="section-title">缩放选项</block>
  <block id="b52d90bca507da030b84d478b8b8f150" category="paragraph">这<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序为每个 Docker 卷创建一个ONTAP FlexVol 。  ONTAP每个集群节点最多支持 1000 个 FlexVol，集群最多可支持 12,000 个FlexVol卷。如果您的 Docker 卷需求符合此限制，则<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>由于 FlexVols 提供了 Docker 卷粒度快照和克隆等附加功能，因此驱动程序是首选的 NAS 解决方案。</block>
  <block id="b8f30e4086b754ccaf7bd5d01d8df137" category="paragraph">如果您需要的 Docker 卷数量超过了FlexVol 的限制，请选择<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>或者<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>司机。</block>
  <block id="5c43de330169c269435e59a6b0ec6a2e" category="paragraph">这<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序在自动管理的FlexVol卷池中创建作为ONTAP Qtree 的 Docker 卷。 Qtree 提供了更大的可扩展性，每个集群节点最多可达 100,000 个节点，每个集群最多可达 2,400,000 个节点，但代价是牺牲了一些功能。这<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序不支持 Docker 卷粒度快照或克隆。</block>
  <block id="a21d144a1c4c6283532b218d06e428b5" category="admonition">这<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>Docker Swarm 目前不支持该驱动程序，因为 Docker Swarm 无法协调跨多个节点的卷创建。</block>
  <block id="a742d54fecc7e60d5a6c56568622bf9d" category="paragraph">这<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序在自动管理的FlexVol卷的共享池中创建 Docker 卷作为ONTAP LUN。这样一来，每个FlexVol就不局限于一个 LUN，并且为 SAN 工作负载提供了更好的可扩展性。根据存储阵列的不同， ONTAP每个集群最多支持 16384 个 LUN。由于这些卷底层是 LUN，因此该驱动程序支持 Docker 卷粒度快照和克隆。</block>
  <block id="e1232df03027aec38979e9ee0c9b350c" category="paragraph">选择<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序可提高单个卷的并行处理能力，该卷可以增长到 PB 级，包含数十亿个文件。  FlexGroups 的一些理想用例包括 AI/ML/DL、大数据和分析、软件构建、流媒体、文件存储库等等。  Trident在配置FlexGroup卷时会使用分配给 SVM 的所有聚合。  Trident中的FlexGroup支持还需考虑以下几点：</block>
  <block id="9d83b6d2e2b099e63bf8e2fc8c870893" category="list-text">需要ONTAP版本 9.2 或更高版本。</block>
  <block id="e7c74973b26ad51b9db42a9c347a8cd4" category="list-text">截至撰写本文时，FlexGroups 仅支持 NFS v3。</block>
  <block id="02a100b04add3b90fddef64499e825a2" category="list-text">建议为 SVM 启用 64 位 NFSv3 标识符。</block>
  <block id="aa56a1d260c6089f006323437ab5613f" category="list-text">建议的最小FlexGroup成员/卷大小为 100 GiB。</block>
  <block id="90bce6b2a4ca618777f172f6d51e69f1" category="list-text">FlexGroup卷不支持克隆。</block>
  <block id="971d29a2392e004ddd4263282b307e0c" category="inline-link">NetApp FlexGroup卷最佳实践和实施指南</block>
  <block id="8d848c284e4e3a777487dbfd26724083" category="paragraph">有关 FlexGroup 以及适合 FlexGroup 的工作负载的信息，请参阅以下内容：<block ref="fd26d63759e7985cecb8814cdedc189b" category="inline-link-rx"></block> 。</block>
  <block id="9e2ebdd267bef148382aa48682e06bc5" category="paragraph">为了在同一环境中获得高级功能和大规模部署，您可以运行多个 Docker Volume Plugin 实例，其中一个使用<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>以及另一个使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>。</block>
  <block id="1534742dd977c66a11d77eb23f10a5ab" category="section-title">为Trident定制ONTAP角色</block>
  <block id="c1781ac6bfd240f903c26ce4164a5d30" category="paragraph">您可以创建一个具有最低权限的ONTAP集群角色，这样您就不必使用ONTAP管理员角色在Trident中执行操作。在Trident后端配置中包含用户名时， Trident将使用您创建的ONTAP集群角色来执行操作。</block>
  <block id="6f3cfcc010b2a22b26b8059d261fac87" category="inline-link-macro">Trident自定义角色生成器</block>
  <block id="c466d2f2e197b9c922cb025297903d0c" category="paragraph">请参阅<block ref="4eb6d8d47ddb4f7930e07a2c9166ea85" category="inline-link-macro-rx"></block>有关创建Trident自定义角色的更多信息。</block>
  <block id="e2862bb379be91d6c367e3ce170d88f7" category="open-title">使用ONTAP CLI</block>
  <block id="13b3544c4f5df79cbf834a2ae8ec0d87" category="list-text">使用以下命令创建新角色：</block>
  <block id="86c8f953c394c19d7db6f6cf9882490e" category="paragraph"><block ref="6594f00105facbc68b3a919300221cc8" prefix="" category="inline-code"></block></block>
  <block id="baf63376850e35e5b35be659d0ef2894" category="list-text">为Trident用户创建用户名：</block>
  <block id="fc03ab18d43301d015d44d432ae97eee" category="paragraph"><block ref="576b5b6204cfa4837c36a45307295380" prefix="" category="inline-code"></block><block ref="6d1394abf99896b6835a3be55cc2adce" prefix=" " category="inline-code"></block></block>
  <block id="dfeb1cb6cf625159ce3e04d467f8ec3f" category="list-text">将角色映射到用户：</block>
  <block id="ff0444fca20d2b690849631c3206bc5a" category="paragraph"><block ref="9e7d4cc1e0a49fb0aadd14f9a159a7ec" prefix="" category="inline-code"></block></block>
  <block id="3ceac40325b3a50cc62cce2df9efb8ae" category="open-title">使用系统管理器</block>
  <block id="b36ba0290d144b7b7cf516c0b9f70063" category="paragraph">在ONTAP系统管理器中执行以下步骤：</block>
  <block id="88ec54a18605240b35f6b1c72d27ffb6" category="list-text">*创建自定义角色*：</block>
  <block id="70af366c70c2f42b90ebe57600895fa4" category="list-text">要在集群级别创建自定义角色，请选择“集群 &gt; 设置”。</block>
  <block id="c981775dff9d5b385dd83a577d5a47b5" category="paragraph">（或者）要在 SVM 级别创建自定义角色，请选择“存储”&gt;“存储虚拟机”&gt;<block ref="6913fa50f9906263ba0aa9cbfc60f855" prefix=" " category="inline-code"></block> &gt; 设置 &gt; 用户和角色*。</block>
  <block id="0d47f26dcf60e81c5a6649ae4ded4563" category="list-text">选择“用户和角色”旁边的箭头图标（*-&gt;*）。</block>
  <block id="abf2a7962f2af308e67cf04c04d67351" category="list-text">在“角色”下选择“+添加”。</block>
  <block id="0607c670bf97cc18aea662bb4a8b1897" category="list-text">定义角色规则，然后点击“保存”。</block>
  <block id="8c112f6dd4899ec2bde450ad96ea3854" category="list-text">将角色映射到Trident用户： + 在“用户和角色”页面上执行以下步骤：</block>
  <block id="a0d362400ef1998e3199f1a2a4e851a0" category="list-text">在“用户”下方选择“添加”图标 *+*。</block>
  <block id="d81179b522f733916296275ca934cec0" category="list-text">选择所需的用户名，然后在“角色”下拉菜单中选择角色。</block>
  <block id="4cc186df234138a57b2e8c5d8e5f7f8d" category="list-text">单击“保存”。</block>
  <block id="63a7ae2ee855741b03454ffca32a6548" category="paragraph">更多信息请参阅以下页面：</block>
  <block id="5f20deacb4e1a680e1507ac2f9038f3d" category="inline-link-macro">用于管理ONTAP的自定义角色</block>
  <block id="5f318245652e5c97dfa5340e400f38d4" category="inline-link-macro">定义自定义角色</block>
  <block id="6bfa5cadeded7f55ece7a366fff5008f" category="list-text"><block ref="612b00166c7c7ac093e9d589e794c9ab" category="inline-link-macro-rx"></block>或者<block ref="42415b53f4c69ae3cfdecaffa64f1802" category="inline-link-macro-rx"></block></block>
  <block id="61d21be565a36251bbca59c0ffb7571d" category="inline-link-macro">与角色和用户协作</block>
  <block id="c92674673011f8a8c6fc62a43d907f3c" category="list-text"><block ref="c92674673011f8a8c6fc62a43d907f3c" category="inline-link-macro-rx"></block></block>
  <block id="0c0f6724044ed44fb85d2ce3193cb7c3" category="section-title">ONTAP配置文件示例</block>
  <block id="9dbc2be9eae595ee555b36e2d5464473" category="example-title">&lt;code&gt;ontap-nas&lt;/code&gt;驱动程序的NFS示例</block>
  <block id="e5fdbcee018644d221f382b1d5b8f41a" category="example-title">&lt;code&gt;ontap-nas-flexgroup&lt;/code&gt;驱动程序的NFS示例</block>
  <block id="80640d18e28e0ebe180f21ae5d3a563f" category="example-title">&lt;code&gt;ontap-nas-economy&lt;/code&gt; 驱动程序的 NFS 示例</block>
  <block id="cf156eb50f8332673b89dc95a2cbbd82" category="example-title">&lt;code&gt;ontap-san&lt;/code&gt; 驱动程序的 iSCSI 示例</block>
  <block id="d5a757f0fabce17fc0eb2e1d3d308b05" category="example-title">&lt;code&gt;ontap-san-economy&lt;/code&gt; 驱动程序的 NFS 示例</block>
  <block id="fc3afabf3465382a1844a56a3fd55417" category="example-title">&lt;code&gt;ontap-san&lt;/code&gt; 驱动程序的 NVMe/TCP 示例</block>
  <block id="35bf5cbb6338abecc1fe5e2fddecc6fa" category="example-title">&lt;code&gt;ontap-san&lt;/code&gt;驱动程序的SCSI over FC示例</block>
  <block id="ffe54c343031d16e77db73e2d950e277" category="section-title">Element软件配置</block>
  <block id="3afcd136a7bffa20fc39ba6581412cd2" category="paragraph">除了全局配置值之外，在使用 Element 软件（NetApp HCI/ SolidFire）时，还可以使用这些选项。</block>
  <block id="06981b2729b4b522b21d903c7738a2ca" category="cell"><block ref="2a6ba72e93aa7fa676d07973ed2716bb" prefix="" category="inline-code"></block></block>
  <block id="31b1d21fc5180ec9a5b3d9d7d5ce3295" category="paragraph">https://&lt;登录名&gt;:&lt;密码&gt;@&lt;mvip&gt;/json-rpc/&lt;元素版本&gt;</block>
  <block id="8eadd25d5b4b5d0637cc13cd7349ce5d" category="paragraph">https://admin:admin@192.168.160.3/json-rpc/8.0</block>
  <block id="955f5caa2495689258902533d1a6cd44" category="cell"><block ref="dcda39e13b00bf6bd40a507e1833a6f5" prefix="" category="inline-code"></block></block>
  <block id="c61f15977fe4efa0866eea87fb740cda" category="paragraph">iSCSI IP 地址和端口</block>
  <block id="6a6b63874c664c103982f6d422c6384e" category="paragraph">10.0.0.7:3260</block>
  <block id="4e25fe4a614b527d9b3d89ee6abe5d35" category="cell"><block ref="2e9183e3f034dbf1322a3385f151456e" prefix="" category="inline-code"></block></block>
  <block id="72deb2676231ab8e068ef60dd89edd4c" category="paragraph">要使用的 SolidFireF 租户（如果未找到则创建）</block>
  <block id="c1fd85851a162222ab0690383666bd47" category="paragraph"><block ref="05b6053c41a2130afd6fc3b158bda4e6" prefix="" category="inline-code"></block></block>
  <block id="f016e2c01f2bafa45e6b537d49f0f9da" category="cell"><block ref="b3a3a10e13e242e0f148e510ddf12402" prefix="" category="inline-code"></block></block>
  <block id="d2672389886b173aef703433f7e4b89b" category="paragraph">将 iSCSI 流量限制在非默认接口时，请指定接口。</block>
  <block id="26194deaf50c44db6eb5983237bdaf25" category="cell"><block ref="f2d346b1bb7c1c85ab6f7f21e3666b9f" prefix="" category="inline-code"></block></block>
  <block id="ee1aea1de97320ad8e98436f68b01b4a" category="paragraph">QoS规范</block>
  <block id="5935dcd024929bc7086bb230802bf576" category="paragraph">参见下面的示例</block>
  <block id="5e9bf55f849ccc5a31a50d1fa784d28c" category="cell"><block ref="8630b9e1983d8c4672fc7b4a8770c637" prefix="" category="inline-code"></block></block>
  <block id="40c7465c2468fd6e890691f6cb612731" category="paragraph">升级版Trident安装的前缀。如果您使用的是 1.3.2 之前的Trident版本，并且使用现有卷执行升级，则需要设置此值才能访问通过卷名称方法映射的旧卷。</block>
  <block id="bf0a8b77dbb95465376fb2cfec90b422" category="paragraph"><block ref="76bb7251da6a3c88e629c03a402b9d15" prefix="" category="inline-code"></block></block>
  <block id="36f9c7b615268efec7f4c56c387a55bb" category="paragraph">这<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序不支持 Docker Swarm。</block>
  <block id="1059bb8540c48e6b455e802384bad65d" category="section-title">示例元素软件配置文件</block>
  <block id="a1dbba31317214ceff74a44fe41d31ee" category="summary">您可以安全地升级Trident for Docker，而不会对正在使用的卷产生任何影响。升级过程中会有一段短暂的时间，<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>针对该插件的命令将不会成功，应用程序将无法挂载卷，直到该插件再次运行。大多数情况下，这只需要几秒钟。</block>
  <block id="e08bfc79c5202517b3814efd6e82fb2c" category="doc">升级或卸载Trident</block>
  <block id="f683581d3e75f05f9d9215f9b4696cef" category="section-title">升级</block>
  <block id="62171888e44548522bb83b960a55d872" category="paragraph">按照以下步骤升级Trident for Docker。</block>
  <block id="ed279061e829314cb0dc7a1708ca5e5b" category="list-text">列出现有卷册：</block>
  <block id="7c256ad076320e18e087b238e9063f3f" category="list-text">禁用插件：</block>
  <block id="f4ea3e4191f5bda0b91e08059bf9842a" category="list-text">升级插件：</block>
  <block id="39ebc56f061889873fccc1784c6638f7" category="admonition">Trident 18.01 版本取代了 nDVP。你应该直接从以下位置升级：<block ref="86e913ca68bd85fc4edc0bd4588cdf55" prefix=" " category="inline-code"></block>图片到<block ref="c0324ebb59395a35956b35c5d0c7b285" prefix=" " category="inline-code"></block>图像。</block>
  <block id="824ba648551a27da6c43705bcd663830" category="list-text">启用插件：</block>
  <block id="e4c48899ce42f4eb019f54a1a8e66560" category="list-text">请确认插件已启用：</block>
  <block id="c4d884c606b57bb6cb43864e3499d5a2" category="list-text">确认卷可见：</block>
  <block id="558ab0bef1894a7a726109d36632d09d" category="inline-link-macro">已知问题</block>
  <block id="ee0630d22b9d452ae7bb9de29a466b86" category="admonition">如果您从旧版本的Trident （20.10 之前）升级到Trident 20.10 或更高版本，则可能会遇到错误。更多信息，请参阅<block ref="6d21ff1c2708107ac3f4ed1a6e27b449" category="inline-link-macro-rx"></block>。如果遇到此错误，您应该先禁用该插件，然后删除该插件，最后通过传递额外的配置参数来安装所需的Trident版本：<block ref="5be09dfb82e46451bc4cc62d83a8dafe" prefix=" " category="inline-code"></block></block>
  <block id="a27dfe771799a09fd55fea73286eb6ab" category="section-title">卸载</block>
  <block id="b8b22011179e05bc575b579038285d28" category="paragraph">按照以下步骤卸载Trident for Docker。</block>
  <block id="867d93c3d1de0e8e75fa408cfadcbba5" category="list-text">删除插件创建的所有卷。</block>
  <block id="4a28a108f39c07ac09218644ca6e9bb0" category="list-text">移除插件：</block>
  <block id="0e9e734e557a02db30a20e5ac259cfb9" category="summary">每个存储驱动程序都有一组不同的选项，您可以在创建卷时指定这些选项以自定义结果。请参阅下方适用于您配置的存储系统的选项。</block>
  <block id="11e1b165c1d718d825f4bb9aaf0b884e" category="doc">驱动程序特定音量选项</block>
  <block id="bca0712c590c8d3c228bf1044aed730b" category="paragraph">在创建卷操作期间使用这些选项非常简单。提供选项和值<block ref="b2ed43620b7fff2689035f1e99c24ded" prefix=" " category="inline-code"></block>CLI 操作期间的运算符。这些值会覆盖 JSON 配置文件中的任何等效值。</block>
  <block id="6021d91bdededf94b8ae37c30e820118" category="section-title">ONTAP容量选项</block>
  <block id="58c4d5bb52050e96221a67cebc52a666" category="paragraph">NFS、iSCSI 和 FC 的卷创建选项包括以下几种：</block>
  <block id="d3a07c97b6050b305c7dda0aea1657be" category="paragraph">卷大小默认为 1 GiB。</block>
  <block id="69e8c7b4f73d39cea9948875813f7ddd" category="paragraph">容量配置方式可以是精简配置或厚配置，默认为精简配置。有效值为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>（精简配置）和<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>（厚配置）。</block>
  <block id="839d5cbe0fec88e102ab7dee46577ac7" category="paragraph">这将把快照策略设置为所需值。默认值为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>这意味着不会自动为该卷创建快照。除非存储管理员修改，否则所有ONTAP系统上都存在一个名为“default”的策略，该策略会创建并保留 6 个每小时快照、2 个每日快照和 2 个每周快照。可以通过浏览来恢复快照中保存的数据。<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>卷中任意目录中的目录。</block>
  <block id="b8a0fde33bd7662b7b9cb4158f04ef52" category="paragraph">这将把快照预留量设置为所需的百分比。默认值为空，这意味着如果您选择了 snapshotPolicy， ONTAP将选择 snapshotReserve（通常为 5%）；如果 snapshotPolicy 为 none，则 ONTAP 将选择 snapshotReserve（通常为 0%）。您可以在配置文件中为所有ONTAP后端设置默认 snapshotReserve 值，并且可以将其用作除 ontap-nas-economy 之外的所有ONTAP后端的卷创建选项。</block>
  <block id="14b63ea5b97502ca2d75e85bee96b8b4" category="paragraph">克隆卷时，这将导致ONTAP立即将克隆卷与其父卷分离。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。有些克隆卷的用例最好在创建后立即将克隆卷与其父卷分离，因为不太可能有机会提高存储效率。例如，克隆一个空数据库可以节省大量时间，但节省的存储空间却很少，因此最好立即拆分克隆。</block>
  <block id="911675212835161abe9bce3f33c70af0" category="paragraph">在新卷上启用NetApp卷加密 (NVE)；默认设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。要使用此选项，必须在集群上获得 NVE 许可并启用 NVE。</block>
  <block id="cdaf246fba737b75127faa65456baa30" category="paragraph">设置卷要使用的分层策略。这决定了当数据变为不活动状态（冷数据）时，是否将其迁移到云层。</block>
  <block id="1c46d85ab16f6b373409ad15260b1b0a" category="paragraph">以下附加选项仅适用于 NFS：</block>
  <block id="b145a4acc7a577d843f538580013776b" category="paragraph">这控制卷本身的权限集。默认情况下，权限将设置为<block ref="3bea04230b923e6ce984667e43456485" prefix=" " category="inline-code"></block>或者用数字表示法表示为 0755，并且<block ref="63a9f0ea7bb98050796b649e85481845" prefix=" " category="inline-code"></block>将成为所有者。文本格式或数字格式均可。</block>
  <block id="6d70e81198809f9c160f10b05a430ab1" category="paragraph">将此设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>将使<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>客户端访问该卷时可见的目录。默认值为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>这意味着可见性<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>目录默认处于禁用状态。某些镜像，例如官方的 MySQL 镜像，在以下情况下无法按预期工作：<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>目录可见。</block>
  <block id="700d608597316c75fc869190f51cff49" category="paragraph">设置该卷要使用的导出策略。默认值为<block ref="c21f969b5f03d33d43e04f8f136e7682" prefix=" " category="inline-code"></block>。</block>
  <block id="6b068a846d408b1d9ccd2c7220326b9d" category="paragraph">设置用于访问卷的安全样式。默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。有效值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>和<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>。</block>
  <block id="842aac52866a44b40a5733ce352cf6df" category="paragraph">以下附加选项仅适用于 iSCSI：</block>
  <block id="56efcdcb9168adcb146b4d86bf55e99d" category="cell">设置用于格式化 iSCSI 卷的文件系统。默认值为<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block>。有效值为<block ref="66f137c5dc684da2a6a65917c86edd67" prefix=" " category="inline-code"></block>，<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block> ， 和<block ref="310201b6353c5f38bc039e0e51b079d3" prefix=" " category="inline-code"></block>。</block>
  <block id="a0ee23c5b4cbd6a28a4143933891f927" category="cell"><block ref="45922ba6ba8428764f22ed06f814c762" prefix="" category="inline-code"></block></block>
  <block id="284899fef89b0b2e358229a40cbaa53e" category="cell">将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>将关闭 LUN 的空间分配功能。默认值为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>这意味着当卷空间不足且卷中的 LUN 无法接受写入时， ONTAP会通知主机。此选项还允许ONTAP在主机删除数据时自动回收空间。</block>
  <block id="ff7c0fcd6a31e735a61c001f75426961" category="section-title">示例</block>
  <block id="9e6d454a094b92b0132e48d2369debf5" category="paragraph">请看以下示例：</block>
  <block id="006ae665d682a3f9a5488cf901070b36" category="list-text">创建一个 10 GiB 卷：</block>
  <block id="865cd97dd9f832e1d9213d79b236a1ab" category="list-text">创建一个带有快照的 100 GiB 卷：</block>
  <block id="297d0d2fcc555e5037c8d251daf5a620" category="list-text">创建一个启用了 setUID 位的卷：</block>
  <block id="6c374189e15747b9b59cf004c2d1d7f2" category="paragraph">最小卷大小为 20 MiB。</block>
  <block id="265a503bda2fd70f2fd9a6cf2d876c27" category="paragraph">如果未指定快照保留，且快照策略为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>Trident使用 0% 的快照储备。</block>
  <block id="8c05fd71822bf85c290cef86db959f68" category="list-text">创建一个没有快照策略和快照保留的卷：</block>
  <block id="d15d662af6e4417b0b7c134a84ed577c" category="list-text">创建一个没有快照策略且自定义快照保留比例为 10% 的卷：</block>
  <block id="52a56a468f11c3298931c8e32c938e15" category="list-text">创建一个具有快照策略和 10% 自定义快照保留空间的卷：</block>
  <block id="72291962244c35e29a2e95cd6bd139bf" category="list-text">创建具有快照策略的卷，并接受 ONTAP 的默认快照保留（通常为 5%）：</block>
  <block id="f6f813eaaff2b296a27b6bf051485d2b" category="section-title">Element 软件音量选项</block>
  <block id="a514753df071ac540af065b659d1c65c" category="paragraph">Element 软件选项会显示与卷相关的大小和服务质量 (QoS) 策略。创建卷时，使用以下方式指定与其关联的 QoS 策略：<block ref="efdd13397a4561d40713ef6bcddfc6e0" prefix=" " category="inline-code"></block>命名法。</block>
  <block id="f201e088f13d93e3d12b3c0ef78dece3" category="paragraph">使用 Element 驱动程序定义 QoS 服务级别的第一步是创建至少一个类型，并在配置文件中指定与名称关联的最小、最大和突发 IOPS。</block>
  <block id="5cb7e4a4b6a51af0b5b09cb230b83422" category="paragraph">Element软件的其他卷创建选项包括以下几种：</block>
  <block id="32ba3ea0fdfbd643c0ee55450e506969" category="paragraph">卷的大小，默认为 1 GiB 或配置条目...“defaults”：{“size”：“5G”}。</block>
  <block id="d52146098b8ecd83b888289a86e26d19" category="cell"><block ref="bcb398a5b9906c7313bb069518ecd7c1" prefix="" category="inline-code"></block></block>
  <block id="348ef18ccca06aa29547bd9ad87beebe" category="paragraph">可以使用 512 或 4096，默认值为 512 或配置项 DefaultBlockSize。</block>
  <block id="1daf1c12549d6d3ae75c4d8d5f59d532" category="paragraph">请参阅以下包含 QoS 定义的示例配置文件：</block>
  <block id="7afe0c73e341cee7c90b4d4dda4600d9" category="paragraph">在上述配置中，我们有三个策略定义：青铜、白银和黄金。这些名称是随意起的。</block>
  <block id="fb489bd0bae5618bdc73d177f2d64e38" category="list-text">创建 10 GiB 黄金卷：</block>
  <block id="81271f59b907de8227da8c807392b336" category="list-text">创建 100 GiB 青铜卷：</block>
  <block id="e5dfa6bb65c32f9e92c36163229be455" category="summary">要创建卷，请使用标准<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>需要时，请使用指定Trident驱动程序名称的命令。</block>
  <block id="feabbbf9b5afb31194daf0d8e3ff75dc" category="doc">使用卷</block>
  <block id="56143904c89c4a03d66e1cd15cc7d399" category="paragraph">您可以使用标准方法轻松创建、克隆和删除卷<block ref="8609cd03fd6628c6bcc999242fa9f3aa" prefix=" " category="inline-code"></block>需要时，请使用指定Trident驱动程序名称的命令。</block>
  <block id="dc88dce8ec264777b2f90ec0af744f43" category="section-title">创建卷</block>
  <block id="a32b09b1335e0afbb640a9412690680d" category="list-text">使用默认名称创建带有驱动程序的卷：</block>
  <block id="b09a5613f6e78efae1c0ac67f2289c08" category="list-text">创建包含特定Trident实例的卷：</block>
  <block id="93da65a9fd0004d9477aeac024e08e15" category="inline-link-macro">options</block>
  <block id="593e5c95e1adc19e8d81719c16b57bc1" category="admonition">如果您没有指定任何内容<block ref="3a0a40f90bfa29e0eb23418c553e5ef5" category="inline-link-macro-rx"></block>使用的是驱动程序的默认设置。</block>
  <block id="e19486e0f435d5132bb0d59bf69d3994" category="list-text">覆盖默认卷大小。请参阅以下示例，使用驱动程序创建 20 GiB 的卷：</block>
  <block id="5149eec9d959a54cf392efaa710541d1" category="admonition">卷大小以字符串形式表示，其中包含一个整数值，单位可选（例如：10G、20GB、3TiB）。如果没有指定单位，则默认值为 G。大小单位可以表示为 2 的幂（B、KiB、MiB、GiB、TiB）或 10 的幂（B、KB、MB、GB、TB）。简写单位使用 2 的幂（G = GiB，T = TiB，…）。</block>
  <block id="9bc129eac7adf7ea5d8ed1c021fab2dc" category="section-title">移除音量</block>
  <block id="281a0f40363a276c6ec125244c784112" category="list-text">删除该卷的方式与其他 Docker 卷一样：</block>
  <block id="7959e3701f7a7fba7713c7530d496324" category="admonition">使用时<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>上述示例驱动程序删除并清除卷。</block>
  <block id="d50044469c0bf9ab38eff9cf7243fb25" category="section-title">克隆卷</block>
  <block id="3fb1a139a17d8521fe406180d6d6fd59" category="paragraph">使用时<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ， 和<block ref="a3e1af20cc594d726b1beb3d184dcf26" prefix=" " category="inline-code"></block>Trident可以克隆卷。使用时<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>或者<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序不支持克隆。从现有卷创建新卷将创建一个新的快照。</block>
  <block id="9374b766b9dd78063440afd69afabf38" category="list-text">检查卷以枚举快照：</block>
  <block id="2747096689037792fa87de7a0e8440e2" category="list-text">从现有卷创建新卷。这将导致创建一个新的快照：</block>
  <block id="31d9b5ed201aa44dbeae6d17d38c0c6f" category="list-text">从现有卷上的快照创建新卷。这不会创建新的快照：</block>
  <block id="516b30a46da41c6969cb7249d6567905" category="section-title">访问外部创建的卷</block>
  <block id="97b3aeb8d6066d1decf96518ded15d8e" category="paragraph">只有当外部创建的块设备（或其克隆）没有分区且其文件系统受Trident支持时（例如：一个），容器才能使用Trident访问这些块设备（或其克隆）。<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block>格式化<block ref="1f986d7f0f42932dbaaf84475f63ea7a" prefix=" " category="inline-code"></block>无法通过Trident访问）。</block>
  <block id="0cc9d438ad56fdbd4bbdfb24f3548660" category="summary">Trident以单个 Controller Pod 和集群中每个工作节点上的 Node Pod 的形式运行。节点 pod 必须运行在您希望挂载Trident卷的任何主机上。</block>
  <block id="aae2218cccc8db14384d3387594fe6ae" category="doc">Trident架构</block>
  <block id="a5199cf0d9f113491f9efa18f3bee2e1" category="section-title">了解控制器 pod 和节点 pod</block>
  <block id="26ad893be275d6f4dd0e2992250c147f" category="inline-link-macro">Kubernetes CSI Sidecar 容器</block>
  <block id="2544d3adb30a2378653ade7cf906c0aa" category="paragraph">Trident以单个部署。<block ref="7f05a5daccc48435b05c14a7b739fa36" category="inline-xref-macro-rx"></block>以及一个或多个<block ref="8642ddce0d2b15cad48dfefb369d4c89" category="inline-xref-macro-rx"></block>在 Kubernetes 集群上，并使用标准的 Kubernetes _CSI Sidecar Containers_ 来简化 CSI 插件的部署。<block ref="c1b69fa7e0376b667b144d553d4653a8" category="inline-link-macro-rx"></block>由 Kubernetes 存储社区维护。</block>
  <block id="30735a308956ec6de6caa328d0d5b43b" category="inline-link-macro">节点选择器</block>
  <block id="1db653cf6745dd1e6aa8d6e843ea5e96" category="inline-link-macro">容忍与污点</block>
  <block id="b38acf7b48d99a3dc06e012c7b1c1f3e" category="paragraph">Kubernetes<block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block>和<block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block>用于限制 pod 在特定或首选节点上运行。在Trident安装过程中，您可以为控制器和节点 pod 配置节点选择器和容差。</block>
  <block id="e3826c3aea0bf8502f2ba8ff27eeef19" category="list-text">控制器插件负责卷的配置和管理，例如快照和调整大小。</block>
  <block id="361d997e700d422835e56b644784bb7e" category="list-text">节点插件负责将存储连接到节点。</block>
  <block id="4d0894b72f21c4fc0e41d094c2d50aed" category="image-title">Trident已部署在 Kubernetes 集群上</block>
  <block id="92ad11160b8482411ae1167ed34e2bc0" category="image-alt">Kubernetes 集群上的Trident架构图。</block>
  <block id="7457022455b6a26d17766b38200639d9" category="section-title">Trident控制器舱</block>
  <block id="8268d8b8723783972c959e76371dd7df" category="paragraph">Trident Controller Pod 是一个运行 CSI Controller 插件的单个 Pod。</block>
  <block id="4d52310e56906c6b51b5691f5aca1a86" category="list-text">负责在NetApp存储中配置和管理卷</block>
  <block id="64ebc3b44b9bf9706d440310d6edc2a9" category="list-text">由 Kubernetes 部署管理</block>
  <block id="77dde6100b9c974d6b8f13a2c5a5d91f" category="list-text">根据安装参数的不同，可以在控制平面或工作节点上运行。</block>
  <block id="c8d85d76462b8224e3b823eec9636faa" category="image-title">Trident控制器舱示意图</block>
  <block id="bea45d305fedae15441ab438c3abf9a6" category="image-alt">运行 CSI 控制器插件及适用 CSI 边车的Trident控制器 Pod 的示意图。</block>
  <block id="7ac36fe121832c95b5cc692aac2d42e9" category="section-title">Trident节点 Pod</block>
  <block id="cb5b3335d8639110c33aa74ae67f7ec2" category="paragraph">Trident Node Pod 是运行 CSI Node 插件的特权 Pod。</block>
  <block id="23b09b316e4e6d2ab77e24ae85097f4f" category="list-text">负责挂载和卸载主机上运行的 Pod 的存储设备</block>
  <block id="5d6469c46b1f411571e059e13a5fe826" category="list-text">由 Kubernetes DaemonSet 管理</block>
  <block id="723997cd24cc1452bfa6efd9349f4262" category="list-text">必须在任何能够挂载NetApp存储的节点上运行</block>
  <block id="ffc3cbdd80c8b7dee840511d7c7b2cce" category="image-title">Trident节点舱示意图</block>
  <block id="8f29ef239c0926132689374fc142a732" category="image-alt">运行 CSI Node 插件及适用 CSI sidecar 的Trident Node Pod 示意图。</block>
  <block id="4bd05efa612e48dd723de2bdd29f88e2" category="section-title">支持的 Kubernetes 集群架构</block>
  <block id="190693c471c998e2d7706ff05c87d3c2" category="paragraph">Trident支持以下 Kubernetes 架构：</block>
  <block id="c91cda04d3ac5ae2da327d347d4bbefe" category="cell">Kubernetes集群架构</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="cell">支持</block>
  <block id="c0057eecd4b1a67d11dc801b8992a574" category="cell">默认安装</block>
  <block id="0c69c79a8788e0e4572d0c4838e69401" category="cell">单主控计算</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">是</block>
  <block id="1fc3441370ae575a64d605fcd15a05fd" category="cell">多主计算</block>
  <block id="7cb2eb9488f3532834f7ef233ae894dd" category="cell">掌握，<block ref="a226e9fbdfc1c8dd7e7fef4d333f86ed" prefix=" " category="inline-code"></block>计算</block>
  <block id="5e5f49db20e29f6377e57e98932dae57" category="cell">主控、基础设施、计算</block>
  <block id="330103c2a0c87f0aa273d6c15590a575" category="summary">Trident是由NetApp维护的完全受支持的开源项目。它旨在帮助您使用行业标准接口（例如容器存储接口 (CSI)）来满足容器化应用程序的持久性需求。</block>
  <block id="e61b32e0e629aff81f643458f823b962" category="doc">了解Trident</block>
  <block id="f94a579e5ec139027f8b7d0d24bcce36" category="paragraph">Trident是由NetApp维护的完全支持的开源项目。它旨在帮助您使用行业标准接口（例如容器存储接口 (CSI)）来满足容器化应用程序的持久性需求。</block>
  <block id="b8a9ce80261b5fb6cc4c2d2e1f0990ca" category="section-title">什么是Trident？</block>
  <block id="5e62a96ba0adfc3472a925ff92c33174" category="paragraph">NetApp Trident支持在所有流行的NetApp存储平台（包括公有云和本地）上使用和管理存储资源，例如本地ONTAP集群（AFF、 FAS和ASA）、 ONTAP Select、 Cloud Volumes ONTAP、Element 软件（NetApp HCI、 SolidFire）、 Azure NetApp Files、 Amazon FSx for NetApp ONTAP和 Google Cloud 上的Cloud Volumes Service 。</block>
  <block id="30136395f01879792198317c11831ea4" category="inline-link-macro">Kubernetes</block>
  <block id="b1779edf31deaecac634566a2a377f62" category="paragraph">Trident是一个符合容器存储接口 (CSI) 标准的动态存储编排器，可与以下系统原生集成：<block ref="c4f47b2d4c7b6c009c3ed9bc1f952dce" category="inline-link-macro-rx"></block> 。 Trident以单个 Controller Pod 和集群中每个工作节点上的 Node Pod 的形式运行。参考 <block ref="9f6208219ae600271f6632db354451ed" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="d613d80a6fcacbbceeb665fc5b0846f0" category="inline-link-macro">部署适用于 Docker 的Trident</block>
  <block id="5b6cbf8e3be454064a322ad7f9c47cc2" category="paragraph">Trident还为NetApp存储平台提供与 Docker 生态系统的直接集成。 NetApp Docker Volume Plugin (nDVP) 支持从存储平台到 Docker 主机的存储资源配置和管理。参考 <block ref="168e02b8c5756e29b56aa79aa4a1b715" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="58095fffdb6c13585af5e47e876f7afe" category="inline-link-macro">Kubernetes 概念和工具</block>
  <block id="1bc6462cd59612636c72620a6a67410b" category="admonition">如果您是第一次使用 Kubernetes，您应该先熟悉一下它。<block ref="41eecc10f74d492dbf2a2c207d5acb1b" category="inline-link-macro-rx"></block> 。</block>
  <block id="ad989553d20159458528f9cbeec280ac" category="section-title">Kubernetes 与NetApp产品集成</block>
  <block id="c15968f29ef9905b44c7b9f373e75568" category="paragraph">NetApp的存储产品组合与 Kubernetes 集群的许多方面集成，提供高级数据管理功能，从而增强 Kubernetes 部署的功能、能力、性能和可用性。</block>
  <block id="4d82a1ec1af02725042c8c785564ee7a" category="example-title">Amazon FSx for NetApp ONTAP</block>
  <block id="5051760a43d66d77d01c7a8eb030e7e1" category="paragraph"><block ref="c3736e0f766925817ef4f34af9c72365" category="inline-link-macro-rx"></block>是一项完全托管的 AWS 服务，可让您启动和运行由NetApp ONTAP存储操作系统支持的文件系统。</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="example-title">Azure NetApp Files</block>
  <block id="29ec7bd31b1a1379b78d9898d947d73d" category="paragraph"><block ref="c5e53d3a8d8d3c363071213b1e4da969" category="inline-link-rx"></block>是由NetApp提供支持的企业级 Azure 文件共享服务。您可以在 Azure 中原生运行要求最高的基于文件的工作负载，并获得您期望从NetApp获得的高性能和丰富的数据管理功能。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="example-title">Cloud Volumes ONTAP</block>
  <block id="047d03a544a1cc3e86aff90177fbd63a" category="paragraph"><block ref="003ebe68b90d9dc2aab9b61b702f9f9b" category="inline-link-macro-rx"></block>是一款纯软件存储设备，可在云端运行ONTAP数据管理软件。</block>
  <block id="1215f8190533dfdf63d2224a6d88266f" category="example-title">Google Cloud NetApp Volumes</block>
  <block id="03f2a9d8b5b9f1a03bc58b91a939d84f" category="paragraph"><block ref="ad43edaec055586043c762c9475bde5c" category="inline-link-macro-rx"></block>是 Google Cloud 中完全托管的文件存储服务，提供高性能、企业级的文件存储。</block>
  <block id="27bb76bfb1e4f9966c31f5042348cd1e" category="example-title">Element软件</block>
  <block id="231afe47f3f37d3808096b36c28b4ded" category="inline-link">Element</block>
  <block id="7630fd61eebe4d79cfa82d81963940d7" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block>通过保证性能并实现简化和精简的存储布局，使存储管理员能够整合工作负载。</block>
  <block id="08edd2123939d5309dced149763a50ee" category="example-title">NetApp HCI</block>
  <block id="d2a67136c7c7e990d18b8e71635d0395" category="paragraph"><block ref="59c437b3f3e5b14b78b208acb3b663e2" category="inline-link-macro-rx"></block>通过自动化日常任务，简化数据中心的管理和扩展，使基础设施管理员能够专注于更重要的功能。</block>
  <block id="ad82bf93e4b28ad012a8be09e30d3d59" category="paragraph">Trident可以直接针对底层NetApp HCI存储平台，为容器化应用程序配置和管理存储设备。</block>
  <block id="7b02ea300aef2e0bff0d7f6111053284" category="example-title">NetApp ONTAP</block>
  <block id="c034280f677ad8e09361e26a1f0d8b2e" category="paragraph"><block ref="8c73590b5c61238f85244f0e29214d94" category="inline-link-macro-rx"></block>NetApp是 NetApp 的多协议统一存储操作系统，可为任何应用程序提供高级数据管理功能。</block>
  <block id="90de0fd1d09f4fc27d99667555a8a12f" category="paragraph">ONTAP系统具有全闪存、混合或全 HDD 配置，并提供多种不同的部署模型：本地FAS、AFA 和ASA集群、 ONTAP Select和Cloud Volumes ONTAP。  Trident支持这些ONTAP部署模型。</block>
  <block id="a1582c89f8e85f372306a05848eafb68" category="summary">NetApp的存储产品组合与 Kubernetes 集群的许多不同方面集成，提供高级数据管理功能，从而增强 Kubernetes 部署的功能、能力、性能和可用性。</block>
  <block id="10f0fa4079121b371145e16713fdbb44" category="section-title">Trident</block>
  <block id="c14b72fed21fd4eafddae164ba8081d0" category="paragraph"><block ref="41274746a612585e32637b095dd7555b" category="inline-link-rx"></block>使企业能够更轻松地管理、保护和迁移在公有云内部和跨公有云以及本地环境中运行的、数据丰富的容器化工作负载（这些工作负载运行在 Kubernetes 上）。 Trident利用NetApp久经考验且功能强大的存储产品组合中的Trident ，在公有云和本地环境中提供持久容器存储。它还提供了一套丰富的、高级的、应用感知的数据管理功能，例如快照、备份和恢复、活动日志和主动克隆，用于 Kubernetes 工作负载的数据保护、灾难/数据恢复、数据审计和迁移用例。</block>
  <block id="253b40ae359ba25b56231803430c4873" category="section-title">ONTAP</block>
  <block id="54ad97548183fc7d802b6db88573701f" category="paragraph">ONTAP是NetApp 的多协议统一存储操作系统，可为任何应用程序提供高级数据管理功能。  ONTAP系统具有全闪存、混合或全 HDD 配置，并提供多种不同的部署模型，包括工程硬件（FAS和AFF）、白盒（ONTAP Select）和仅限云（Cloud Volumes ONTAP）。</block>
  <block id="cbb7697b4f6f189240d043ff70ca133c" category="admonition">Trident支持上述所有ONTAP部署模型。</block>
  <block id="5c04ffbd0c110bf7b37d6b95eb756b75" category="paragraph"><block ref="700b45b9fca207b66f675c8d5dfb073b" category="inline-link-rx"></block>是一款纯软件存储设备，可在云端运行ONTAP数据管理软件。您可以使用Cloud Volumes ONTAP进行生产工作负载、灾难恢复、DevOps、文件共享和数据库管理。它通过提供存储效率、高可用性、数据复制、数据分层和应用程序一致性，将企业存储扩展到云端。</block>
  <block id="f8869dc9dbb397ea76e820ae99f70217" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block>是一项完全托管的 AWS 服务，可让您启动和运行由NetApp ONTAP存储操作系统支持的文件系统。  FSx for ONTAP让您能够利用您熟悉的NetApp功能、性能和管理能力，同时享受在 AWS 上存储数据的简单性、敏捷性、安全性和可扩展性。  FSx for ONTAP支持ONTAP文件系统的许多功能和管理 API。</block>
  <block id="1fdf61a8f946268990d8e15dd9069a6d" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block>通过保证性能并实现简化和精简的存储布局，使存储管理员能够整合工作负载。  Element 结合了 API，可实现存储管理各个方面的自动化，使存储管理员能够事半功倍。</block>
  <block id="25f221cc63a7e1fa55b05c29420a72a2" category="paragraph"><block ref="2841e7defe3939e68d83d007d1ad666b" category="inline-link-rx"></block>通过自动化日常任务，简化数据中心的管理和扩展，使基础设施管理员能够专注于更重要的功能。</block>
  <block id="be17f8b9c728a6cb61cad5a2609b3888" category="paragraph">NetApp HCI完全受Trident支持。  Trident可以直接针对底层NetApp HCI存储平台，为容器化应用程序配置和管理存储设备。</block>
  <block id="29e7ab00082418141d470583a19c28d3" category="paragraph"><block ref="2384314bcd106c8062815b2ed789c4ad" category="inline-link-rx"></block>是由NetApp提供支持的企业级 Azure 文件共享服务。您可以在 Azure 中原生运行要求最高的基于文件的工作负载，并获得您期望从NetApp获得的高性能和丰富的数据管理功能。</block>
  <block id="0ce84605b24873b2ee81987302d60089" category="paragraph"><block ref="bc468e9b0072cb6f1552f9bc0a3b6063" category="inline-link-rx"></block>是一个云原生文件服务，它通过 NFS 提供 NAS 卷，并具有全闪存性能。这项服务使任何工作负载（包括传统应用程序）都能在 GCP 云中运行。它提供完全托管的服务，可提供持续的高性能、即时克隆、数据保护以及对 Google Compute Engine (GCE) 实例的安全访问。</block>
  <block id="a60c2f57df655a9ac5fcaa0750886195" category="summary">如果您是 Kubernetes 新手，请按照说明安装 Kubernetes 进行试用。这些说明提供了一个基本的单节点集群， Trident可以将其集成到该集群中进行演示。</block>
  <block id="8c33c0d65f9f2a648eb30a9703072383" category="doc">Trident快速入门</block>
  <block id="a555fee6c6587118e36d8dd135df1313" category="inline-link-macro">Trident的要求</block>
  <block id="96a40ad4ad263d59437e326f22eaecdf" category="paragraph">只需几个步骤，即可安装Trident并开始管理存储资源。开始之前，请先回顾一下<block ref="d5fb7f9fba906801b000d5533dc030cf" category="inline-link-macro-rx"></block>。</block>
  <block id="f1bcf1c509e84f327a99d5510a722dec" category="inline-link-macro">Trident for Docker</block>
  <block id="5b5dc0344ff29ee1aeb0845b87692cf1" category="admonition">有关 Docker 的信息，请参阅<block ref="f7120b9f314af1c9d82deae8957b54f3" category="inline-link-macro-rx"></block>。</block>
  <block id="06c2cea18679d64399783748fa367bdd" category="inline-image-macro">一个</block>
  <block id="ab17e5f89eede1d0e6d8d31cc646b837" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>准备工作节点</block>
  <block id="aba4bc9d3bde7d18b07c23d5c7d0f495" category="paragraph">Kubernetes 集群中的所有工作节点都必须能够挂载您为 Pod 配置的卷。</block>
  <block id="89d83ec6e8ec0c087fbc4aedc555b362" category="inline-link-macro">准备工作节点</block>
  <block id="f36d25716a4b2c466ddcb8065bef3ae6" category="paragraph"><block ref="f36d25716a4b2c466ddcb8065bef3ae6" category="inline-link-macro-rx"></block></block>
  <block id="aada29daee1d64ed0fe907043855cb7e" category="inline-image-macro">两个</block>
  <block id="8f571d58ed95211be01ea993de3fee3e" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block>安装Trident</block>
  <block id="9877a7ec0ff327ca21c8022d61c25f88" category="paragraph">Trident提供多种安装方法和模式，针对各种环境和组织进行了优化。</block>
  <block id="b8b9eab8c1ed7b79387652490f5724ec" category="inline-link-macro">安装Trident</block>
  <block id="d94be11e75caa4db23a136d9b4cca4d9" category="paragraph"><block ref="d94be11e75caa4db23a136d9b4cca4d9" category="inline-link-macro-rx"></block></block>
  <block id="ca8a2087e5557e317599344687a57391" category="inline-image-macro">三</block>
  <block id="f3b066024fd8e2699d194d41d5e46a5d" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block>创建后端</block>
  <block id="2e5120dd8211c4057a742a03b68ffe1a" category="paragraph">后端定义了Trident与存储系统之间的关系。它告诉Trident如何与该存储系统通信，以及Trident应该如何从中配置卷。</block>
  <block id="2865195658f1488af43d46690ad5826e" category="inline-link-macro">配置后端</block>
  <block id="079428cf070b5e0039780f2cb4a5a962" category="paragraph"><block ref="8be76aeedec602130bcedf5acbf56030" category="inline-link-macro-rx"></block>适用于您的存储系统</block>
  <block id="981b8fcee42e1e726a67a2b9a98ea6e9" category="inline-image-macro">四个</block>
  <block id="eda4708b025e26e5f9759856f4f88876" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block>创建 Kubernetes 存储类</block>
  <block id="a5cdf497d98aa8d8e9bf311fe225a905" category="paragraph">Kubernetes StorageClass 对象指定Trident作为配置器，并允许您创建存储类以配置具有可自定义属性的卷。  Trident为指定Trident配置器的 Kubernetes 对象创建匹配的存储类。</block>
  <block id="14f4c7abe09c4481722f1fa6563f2604" category="inline-link-macro">创建存储类</block>
  <block id="abf99adee0d47955ab8c148a0937ce6e" category="paragraph"><block ref="abf99adee0d47955ab8c148a0937ce6e" category="inline-link-macro-rx"></block></block>
  <block id="e5d9de39f7ca1ba2637e5640af3ae8aa" category="inline-image-macro">五</block>
  <block id="b625988ee18e5f1370f9b328cfa197b7" category="paragraph-title"><block ref="99e8b2f00e172bfcff96afdce69907bc" category="inline-image-macro-rx" type="image"></block>提供一定量</block>
  <block id="185cde3c1e3ef64c59eaee8662d4048a" category="paragraph">持久卷 (PV) 是 Kubernetes 集群上由集群管理员配置的物理存储资源。  _PersistentVolumeClaim_ (PVC) 是对集群上持久卷的访问请求。</block>
  <block id="e8a058c8c47f6e4976a9fc5b5c00ec92" category="paragraph">创建一个持久卷 (PV) 和一个持久卷声明 (PVC)，使用配置的 Kubernetes StorageClass 请求访问 PV。然后您可以将光伏组件安装到支架上。</block>
  <block id="a3b7bd8edd528214a68ac3ceb5c9935c" category="inline-link-macro">提供一定量</block>
  <block id="7646000ea978570e919e657f5ec9aa57" category="paragraph"><block ref="7646000ea978570e919e657f5ec9aa57" category="inline-link-macro-rx"></block></block>
  <block id="58eaebf972358f1cf03d386a4ade1a0f" category="section-title">下一步是什么？</block>
  <block id="abefc87b0c4c459aa6fdb12d98caf984" category="paragraph">现在您可以添加其他后端、管理存储类、管理后端以及执行卷操作。</block>
  <block id="54f1c3c7de2748b6f3616d7b1186ade2" category="summary">安装Trident之前，您应该查看这些通用系统要求。特定后端可能还有其他要求。</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="doc">要求</block>
  <block id="0fe713481395212a8eb358f4cb188c04" category="section-title">关于Trident的关键信息</block>
  <block id="8e7cb3d16dbeb8a9289495de8b479d1f" category="paragraph">*您必须阅读以下关于Trident的重要信息。*</block>
  <block id="04dc1d4246222d48d4348b40baef0aac" category="example-title">关于Trident的关键信息</block>
  <block id="65cfb19ed2b3d296782fbfdd6b7075b1" category="list-text">Trident现已支持 Kubernetes 1.34。在升级 Kubernetes 之前先升级Trident 。</block>
  <block id="5e25fae885baef0275d27a764979b289" category="list-text">Trident严格强制要求在 SAN 环境中使用多路径配置，建议值为<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block>在 multipath.conf 文件中。</block>
  <block id="7b9eed191ce5e7cc8c8d1cb8cfe2d8c8" category="paragraph">使用非多路径配置或使用<block ref="a3a1d5b95e345a3db24a5a30e349f699" prefix=" " category="inline-code"></block>或者<block ref="e82e6d155396541f07f7347c984444ea" prefix=" " category="inline-code"></block>multipath.conf 文件中的值会导致挂载失败。  Trident建议使用<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block>自 21.07 版本发布以来。</block>
  <block id="c777be7f669397b0a376fe32ca5cd9c3" category="section-title">支持的前端（编排器）</block>
  <block id="710f95d40d121f27f89b0faa6e178133" category="paragraph">Trident支持多种容器引擎和编排器，包括以下几种：</block>
  <block id="7cc1edf2116d94e97b8f4a69079de132" category="list-text">Anthos On-Prem (VMware) 和 Anthos on Bare Metal 1.16</block>
  <block id="e69ddc8f5253cd0167cca555b0f0fd9c" category="list-text">Kubernetes 1.27 - 1.34</block>
  <block id="bef9303dd11d749d2facca8b3064630e" category="list-text">OpenShift 4.12、4.14 - 4.19（如果您计划使用 OpenShift 4.19 进行 iSCSI 节点准备，则支持的最低Trident版本为 25.06.1。）</block>
  <block id="3b30a7aea8a6f98824f61888e8628449" category="inline-link-macro">Red Hat 扩展更新支持 (EUS) 发布生命周期</block>
  <block id="6b62784ed0975ba9ec1e2f69af860e25" category="admonition">Trident继续支持旧版本的 OpenShift，以符合……<block ref="d73f30265a77d175825591fd08508146" category="inline-link-macro-rx"></block>即使他们依赖于上游不再官方支持的 Kubernetes 版本。在这种情况下安装Trident时，您可以放心地忽略有关 Kubernetes 版本的任何警告消息。</block>
  <block id="7f6d66fd53fc399c1b8baeebcdb94472" category="list-text">Rancher Kubernetes Engine 2（RKE2）v1.27.x - 1.34.x</block>
  <block id="844c50b4f1aab48821867a1209be687b" category="admonition">虽然Trident在 Rancher Kubernetes Engine 2 (RKE2) 版本 1.27.x - 1.34.x 上受支持，但Trident目前仅在 RKE2 v1.28.5+rke2r1 上获得认证。</block>
  <block id="e42907190e2666646d57ade5c061e6e2" category="paragraph">Trident还与许多其他完全托管和自托管的 Kubernetes 产品合作，包括 Google Kubernetes Engine (GKE)、Amazon Elastic Kubernetes Services (EKS)、Azure Kubernetes Service (AKS)、Mirantis Kubernetes Engine (MKE) 和 VMWare Tanzu Portfolio。</block>
  <block id="eca0dda5d40cf62b4a73c50deab2520c" category="inline-link-macro">KubeVirt</block>
  <block id="4cb56edacf6f40b0077e559878cb88a1" category="paragraph">Trident和ONTAP可用作存储提供程序<block ref="98ab68800979b414641691275d2b9c15" category="inline-link-macro-rx"></block>。</block>
  <block id="a5fd2691a6a5df653970895b1c5045ed" category="inline-link-macro">升级 Helm 安装</block>
  <block id="bde4e01f8df98626e0dc1c36a8e06a5a" category="admonition">在将已安装Trident的 Kubernetes 集群从 1.25 版本升级到 1.26 或更高版本之前，请参阅以下内容：<block ref="1b428bb9b9fe27db6cd8932526864634" category="inline-link-macro-rx"></block> 。</block>
  <block id="f787cd4b6963b13f12fa53131f58ef6c" category="section-title">支持的后端（存储）</block>
  <block id="90e5d592b7e0b2afb122e69c00372ddf" category="paragraph">要使用Trident，您需要以下一个或多个受支持的后端：</block>
  <block id="1d3d126b8a5bad69c46ed03734beed47" category="list-text">NetApp全 SAN 阵列 (ASA)</block>
  <block id="fc1d748db1b5b488ce7af7d17ea15d55" category="inline-link-macro">软件版本支持</block>
  <block id="4afb8b760c67eab8ce5a9cf405163d78" category="list-text">NetApp 有限支持下的本地FAS、 AFF、Select 或ASA r2（iSCSI 和 NVMe/TCP）集群版本。看<block ref="50931d770a2149cdd08c9f8b08c33f00" category="inline-link-macro-rx"></block>。</block>
  <block id="6b51834314ece904405eb0ce1a6e6bd8" category="list-text">NetApp HCI/Element 软件 11 或更高版本</block>
  <block id="e80b6a304e29d5dfcb9150f47d69db94" category="section-title">Trident对 KubeVirt 和 OpenShift 虚拟化的支持</block>
  <block id="8f323a9e5c0c5162cc6e0d48e0cb1850" category="paragraph-title">支持的存储驱动程序：</block>
  <block id="cffd29fb8e17cb30625130ee24cd667d" category="paragraph">Trident支持以下适用于 KubeVirt 和 OpenShift 虚拟化的ONTAP驱动程序：</block>
  <block id="8321592ce24c8a122ecf26a63cfca407" category="list-text">ontap-nas</block>
  <block id="caafdf62a2c609bfa5316118231a1007" category="list-text">ontap-nas-economy</block>
  <block id="188c0d870c5f930d042bdaa1f1fc3573" category="list-text">ontap-san（基于 TCP 的 iSCSI、FCP、NVMe）</block>
  <block id="1bbe28a8ef9b1c85d07b013af0628d36" category="list-text">ontap-san-economy（仅限 iSCSI）</block>
  <block id="db526afc657fdfec1ca176eb9d281f89" category="list-title">需要考虑的要点：</block>
  <block id="0ae326ef84f2a6bc4be48951f88c0162" category="list-text">更新存储类以使其具有<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>参数（例如：<block ref="6db865adcb81b7cf881ff9839476f850" prefix=" " category="inline-code"></block>在 OpenShift 虚拟化环境中。如果需要，请使用以下方式显式设置音量模式为阻止模式：<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block>参数<block ref="c6dda2fd1e6d70d582099348cfe6c847" prefix=" " category="inline-code"></block>通知 CDI 创建块数据卷。</block>
  <block id="c515dd3a067f21589c3e11d31e32462b" category="list-text">_块存储驱动程序的 RWX 访问模式_: ontap-san (iSCSI、NVMe/TCP、FC) 和 ontap-san-economy (iSCSI) 驱动程序仅支持“volumeMode: Block”（原始设备）。对于这些司机来说，<block ref="8da9b296683a7538d85fc38fcb987292" prefix=" " category="inline-code"></block>由于卷是以原始设备模式提供的，因此无法使用该参数。</block>
  <block id="f97169869bcbff98d85a1b7ec1d7b5f8" category="list-text">对于需要 RWX 访问模式的实时迁移工作流程，支持以下组合：</block>
  <block id="d3701dd5a7c831a74d496a90c3a65f13" category="list-text">NFS+<block ref="7f5db5e0500761cacd6f89838e2ebdc5" prefix=" " category="inline-code"></block></block>
  <block id="42c7d371004c0674ae717618c4a08508" category="list-text">iSCSI+<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block> （原始设备）</block>
  <block id="e031968b595722f16da97146c3a92c69" category="list-text">NVMe/TCP +<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block> （原始设备）</block>
  <block id="381edc20137f75d1e418981c1361fd2c" category="list-text">FC+<block ref="1467a571dd94848f616edc4a0c33b927" prefix=" " category="inline-code"></block> （原始设备）</block>
  <block id="c7c7a6a5641f33e348244f9c43010e16" category="section-title">功能需求</block>
  <block id="6116c21c42b3138e811999de6433a0a6" category="paragraph">下表总结了此版本Trident提供的功能及其支持的 Kubernetes 版本。</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes 版本</block>
  <block id="10f295a61d2a793ac8936a69cf458654" category="cell">需要设置特色门吗？</block>
  <block id="27f15237580e8f85cd2846baf40ad83b" category="paragraph">1.27 - 1.34</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="paragraph">否</block>
  <block id="e830b7e4d1fb7f84600876af87cb4381" category="cell">卷 Snapshot</block>
  <block id="ea8ed249117e76cb53766e218fe2b7c7" category="cell">PVC 来自卷快照</block>
  <block id="28dcded20f550dcad1bd9bb03a5bbe73" category="cell">iSCSI PV 调整大小</block>
  <block id="1673543ed032e46f3572ba65bc070693" category="cell">ONTAP双向 CHAP</block>
  <block id="176e16df4faab1a1e06e9585c813d5fe" category="cell">动态出口政策</block>
  <block id="1f7219b07d5bce7feec002a9f4dc2201" category="cell">Trident操作员</block>
  <block id="443432948b68bb63d707ce7ecc4a021a" category="cell">CSI拓扑</block>
  <block id="af7c8216a3289efe1a298a19c00b8b8c" category="section-title">测试过的主机操作系统</block>
  <block id="29fce9ae0f476afd36cf3ebf4de1d2a8" category="paragraph">虽然Trident官方并未正式支持特定操作系统，但已知以下操作系统可以正常工作：</block>
  <block id="8554748be67b956e550de942edae807d" category="admonition">NVMe/TCP 需要 RHEL 9 或更高版本。</block>
  <block id="de547bcab0e20f54ec4d5e95ba44b0b1" category="list-text">Windows Server 2022</block>
  <block id="779639a0216e7a8fd164ee8a7266d8b8" category="paragraph">默认情况下， Trident在容器中运行，因此可以在任何 Linux 工作节点上运行。但是，这些工作人员需要能够使用标准 NFS 客户端或 iSCSI 发起程序挂载Trident提供的卷，具体取决于您使用的后端。</block>
  <block id="11ea58814ce429c3e3254a63f8cde7a4" category="paragraph">这<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>该实用程序也可在上述任何 Linux 发行版上运行。</block>
  <block id="13d80777c8fd43e555c1f5b1b72d7ef0" category="section-title">主机配置</block>
  <block id="e379ebca8f2245b4a0c32803c6d7f845" category="paragraph">Kubernetes 集群中的所有工作节点都必须能够挂载您为 Pod 配置的卷。要准备工作节点，您必须根据所选驱动程序安装 NFS、iSCSI 或 NVMe 工具。</block>
  <block id="2139fe384d5ae165545994dff01961d9" category="section-title">存储系统配置</block>
  <block id="ac65d911a6a42e3244db78a534db815a" category="paragraph">Trident可能需要对存储系统进行更改，后端配置才能使用它。</block>
  <block id="87dc0337d3ded2211d9b01c32e22d90d" category="inline-link-macro">配置后端</block>
  <block id="50823ee9226376c44bfb71c334ee2f3f" category="paragraph"><block ref="50823ee9226376c44bfb71c334ee2f3f" category="inline-link-macro-rx"></block></block>
  <block id="8ff649e05d6e0ae0d638b05135917e8b" category="section-title">Trident港口</block>
  <block id="31ae62dfe6cb254d32d0f67deda8d9ad" category="paragraph">Trident需要访问特定端口才能进行通信。</block>
  <block id="2e442c7238666f1b73934ff5c2034b82" category="paragraph"><block ref="2e442c7238666f1b73934ff5c2034b82" category="inline-link-macro-rx"></block></block>
  <block id="923680056b0f0258907f498670b4ead1" category="section-title">容器镜像和相应的 Kubernetes 版本</block>
  <block id="ce8468ce4398f1403e56c8d07fbfbdff" category="paragraph">对于物理隔离安装，以下列表是安装Trident所需的容器镜像参考。使用<block ref="4ebf280824868255c952dc529072ecb9" prefix=" " category="inline-code"></block>用于验证所需容器镜像列表的命令。</block>
  <block id="f5df426ed26da0917a8092b8f0b273d7" category="section-title">Trident 25.06.2 所需的容器镜像</block>
  <block id="7b5dfababf92391b5761944c63b0d3bb" category="cell">Kubernetes 版本</block>
  <block id="aa92c4c233bc01609d957e469736b699" category="cell">容器图像</block>
  <block id="73b1fe6d150d74c875ee4a368dd3b1a9" category="cell">v1.27.0、v1.28.0、v1.29.0、v1.30.0、v1.31.0、v1.32.0、v1.33.0、v1.34.0</block>
  <block id="2bf22bcd28ba853a9453f882ca5dd194" category="list-text">docker.io/netapp/trident:25.06.2</block>
  <block id="d010f8bd4e6cede4d3e51de4419c09aa" category="list-text">docker.io/netapp/trident-autosupport:25.06</block>
  <block id="b55333d21cb50b1d1d34c529c999482f" category="list-text">registry.k8s.io/sig-storage/csi-provisioner:v5.2.0</block>
  <block id="3b72fba0c67a9cb87151e878d3ba37f9" category="list-text">registry.k8s.io/sig-storage/csi-attacher:v4.8.1</block>
  <block id="06489d7f99c3b214c8b9a539006a642c" category="list-text">registry.k8s.io/sig-storage/csi-resizer:v1.13.2</block>
  <block id="5b892dce2351df7e1f21d1004bc2cb19" category="list-text">registry.k8s.io/sig-storage/csi-snapshotter:v8.2.1</block>
  <block id="7e8b00e8f801232796015a8859867e55" category="list-text">registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.13.0</block>
  <block id="1f8b4ae7badb9c9b5fd03f3770bf252f" category="list-text">docker.io/netapp/trident-operator:25.06.2（可选）</block>
  <block id="543f0a02b84be74ac68a52c8fb383d86" category="section-title">Trident 25.06 所需的容器镜像</block>
  <block id="3e711dbc16f3de48b46eca5b86572321" category="list-text">docker.io/netapp/trident:25.06.0</block>
  <block id="5647d06b79232a09c66557bdfc379908" category="list-text">docker.io/netapp/trident-operator:25.06.0（可选）</block>
  <block id="f5d19c8a8c2f8f69c432eeca877b5fcd" category="summary">您可以使用Trident安装程序来自定义部署。</block>
  <block id="4b4c8bb835df197f723a52a388a1a4e0" category="paragraph">您可以使用Trident安装程序来自定义安装。</block>
  <block id="0dabff490bbf6c7e308950959cc5a024" category="section-title">了解安装程序</block>
  <block id="e0ebb2a26a33f54574264738d90b4256" category="paragraph">Trident安装程序允许您自定义属性。例如，如果您已将Trident镜像复制到私有仓库，则可以使用以下方式指定镜像名称：<block ref="00e6ff45e8bcc6b9e35e9c68d8d5135c" prefix=" " category="inline-code"></block> 。如果您已将Trident镜像以及所需的 CSI sidecar 镜像复制到私有存储库，则最好使用以下方式指定该存储库的位置：<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block>开关，其形式<block ref="c4c34dc2c7d5cb25c084ca11127ba1c6" prefix=" " category="inline-code"></block>。</block>
  <block id="85219bbc6090744b49cad804af63daaa" category="admonition">在私有仓库中安装Trident时，如果您使用的是<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block>切换以指定存储库位置，不要使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>在存储库路径中。例如：<block ref="51e87a5a10277cd8b68fe2bfaab6b1e5" prefix=" " category="inline-code"></block></block>
  <block id="8355509d170c8a61d236e927a5fcc6e2" category="paragraph">如果您使用的是 Kubernetes 发行版，那么<block ref="703e9c640b9e3ea630f6687938e43c9a" prefix=" " category="inline-code"></block>它将数据存储在与通常路径不同的路径上。<block ref="bc5cffcf9f10f624d02ae2efb8215dc5" prefix=" " category="inline-code"></block>您可以使用以下方式指定备用路径<block ref="4009da7ed740211f32d29441deab875e" prefix=" " category="inline-code"></block>。</block>
  <block id="47cd697cf3c9dcf916f70a0007956c1d" category="paragraph">如果需要对安装进行超出安装程序参数允许范围的自定义，您还可以自定义部署文件。使用<block ref="5de93c87952cd098700fb8d46daed4d6" prefix=" " category="inline-code"></block>该参数会在安装程序中创建以下 YAML 文件<block ref="a0f848942ce863cf53c0fa6cc684007d" prefix=" " category="inline-code"></block>目录：</block>
  <block id="0858f0ee003d52951161848adffe1b31" category="list-text"><block ref="d67d2c9d865b587d65b2e63c78c1cfa0" prefix="" category="inline-code"></block></block>
  <block id="af73689aedfa47bd2a7cf144917b0642" category="list-text"><block ref="eb6cdeddd28243c1552ea3b1061b4410" prefix="" category="inline-code"></block></block>
  <block id="1d53fd876245951bb003eb47849ff39d" category="list-text"><block ref="91696b9b3532f20cd7fb80573a7425d4" prefix="" category="inline-code"></block></block>
  <block id="b17dbe8acaeca82c72d25948de03eefc" category="list-text"><block ref="c1484787d70c4ea99f3bd377937ea020" prefix="" category="inline-code"></block></block>
  <block id="ecb2b56a094cc1cbd3ac263b23d91f8b" category="list-text"><block ref="9f6c6212091d8eef52ff63c5e58f70e8" prefix="" category="inline-code"></block></block>
  <block id="c5e462ae653234d0ea0e98a000e62a97" category="list-text"><block ref="b4d153fcc8c4c7bed016796085d6abd1" prefix="" category="inline-code"></block></block>
  <block id="f1347677de6873f8ddce6d736cba9a63" category="list-text"><block ref="ec3914518572122d25969da6b4b66fcc" prefix="" category="inline-code"></block></block>
  <block id="2539c7e25ada2a2cdae0eb4c4633b893" category="list-text"><block ref="3f7046611d8d5f8ed666a93ae7a61ae7" prefix="" category="inline-code"></block></block>
  <block id="702fa57eedc6ee8490a7294016f8b14f" category="list-text"><block ref="1a368feb8bb72ef66bb194b43d0a15b3" prefix="" category="inline-code"></block></block>
  <block id="385d099ed91e83dbe20ea05fbed68e22" category="paragraph">生成这些文件后，您可以根据需要修改它们，然后使用它们。<block ref="8026926641b283123174e50f80da83de" prefix=" " category="inline-code"></block>安装您的自定义部署。</block>
  <block id="dafb04a56b5428b7efaff9062ddc586b" category="summary">Trident操作符允许您通过使用属性来自定义Trident 的安装方式。<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>规格</block>
  <block id="2f6c694f9d016c7193ece4853c402d96" category="doc">自定义Trident操作员安装</block>
  <block id="0155e97c891593a2b846fc604a01426f" category="paragraph">Trident操作符允许您使用属性自定义Trident安装。<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>规格如果您想对安装进行超出以下范围的自定义：<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>如果论据允许，请考虑使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>生成自定义 YAML 清单，并根据需要进行修改。</block>
  <block id="8d6d249f3e02155f1f4e28dec3f40a4f" category="paragraph">Trident以单个控制器 pod 的形式运行，集群中的每个工作节点上还有一个节点 pod。节点 pod 必须运行在您希望挂载Trident卷的任何主机上。</block>
  <block id="0897b2b75e3d0217c2f6994605a2cae7" category="paragraph">Kubernetes<block ref="219288b06ade6fd51c16efe605941441" category="inline-link-macro-rx"></block>和<block ref="9466cd429d8630101055a8fd14904bd9" category="inline-link-macro-rx"></block>用于限制 pod 在特定或首选节点上运行。使用`ControllerPlugin`和<block ref="96687552cc4dff10038a1b07a8bf3bd3" prefix=" " category="inline-code"></block>您可以指定约束和覆盖规则。</block>
  <block id="50f33d14f129e4548c1c270fd6725a78" category="section-title">配置选项</block>
  <block id="d71d7e5009f5ee11ae970a342fff23ae" category="admonition"><block ref="b2c66bca748ffde67c7b6817cb8dd795" prefix="" category="inline-code"></block>已在……中指定<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>用于指定Trident安装所在的命名空间。 Trident安装后，此参数*无法更新*。尝试这样做会导致<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>状态更改为<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block>。  Trident不打算跨命名空间迁移。</block>
  <block id="a739aa7f082abebdf65f4b114dd3ad7d" category="paragraph">此表详细说明<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>属性。</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">参数</block>
  <block id="7a1920d61156abc05a60135aefe8bc67" category="cell">默认</block>
  <block id="f3f30d479f6e3b393d917a3b2f88c770" category="cell"><block ref="89801e9e98979062e84647433a8ed3e9" prefix="" category="inline-code"></block></block>
  <block id="0cf03ede150b823aae6ae068fa6ffb35" category="cell">用于安装Trident 的命名空间</block>
  <block id="90a731f9a8a983f7cf3905960d8146ec" category="cell"><block ref="9aa82da0cffe247b84587c1cc8e32746" prefix="" category="inline-code"></block></block>
  <block id="a67cf6b087ff88dbfacec8375928995c" category="cell"><block ref="ad42f6697b035b7580e4fef93be20b4d" prefix="" category="inline-code"></block></block>
  <block id="6c6ebc33a5cbbe6942a0c9ec90d575a2" category="cell">启用Trident的调试功能</block>
  <block id="b4f36de9fda080c1fd1d9edb1e60e36b" category="cell"><block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix="" category="inline-code"></block></block>
  <block id="0915385df687d0c4a0afb57a61f02af3" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ， 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>仅有的。与 Kubernetes 非优雅节点关闭 (NGNS) 配合使用，使集群管理员能够在节点出现故障时安全地将挂载卷的工作负载迁移到新节点。</block>
  <block id="05f901da7fdacb9ca59e3d7e2d40f98d" category="cell"><block ref="0f4137ed1502b5045d6083aa258b5c42" prefix="" category="inline-code"></block></block>
  <block id="fbbd7b4b14060c4fdb02f92c4c08e702" category="cell">设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>支持在Windows工作节点上安装。</block>
  <block id="3f5dc9ae5f538d3ce4d0cc20e7762671" category="cell"><block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix="" category="inline-code"></block></block>
  <block id="2455735b04a718daf96631c95e2d2d2c" category="paragraph">设置为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>在 AKS 集群上使用托管身份或云身份时。设置为<block ref="907695ffaef2806fea589c7d8d044679" prefix=" " category="inline-code"></block>在 EKS 集群上使用云身份时。设置为<block ref="9856712fdf7563a4074fc130ed9f0755" prefix=" " category="inline-code"></block>在 GKE 集群上使用云身份时。</block>
  <block id="2f6b7b0c1002ad67f4e455a17d784c94" category="cell"><block ref="9d4568c009d203ab10e33ea9953a0264" prefix="" category="inline-code"></block></block>
  <block id="0b79806f5a5d5ddd87cd1bd2a28f965c" category="cell"><block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix="" category="inline-code"></block></block>
  <block id="d73f3637b8d6ba73db2eed6c626bb0f7" category="paragraph">在 AKS 集群上使用云标识时，请设置为工作负载标识（“azure.workload.identity/client-id: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx”）。在 EKS 集群上使用云身份时，设置为 AWS IAM 角色（“'eks.amazonaws.com/role-arn: arn:aws:iam::123456:role/trident-role'”）。在 GKE 集群上使用云身份时，请设置为云身份（“'iam.gke.io/gcp-service-account: xxxx@mygcpproject.iam.gserviceaccount.com'”）。</block>
  <block id="d293f031e5664526b25f3a65012401b7" category="cell"><block ref="fdb7cb8f657426e7c409bfd6d1a36ce4" prefix="" category="inline-code"></block></block>
  <block id="609512f035fafafacc14b4f6f29bb70d" category="cell">通过 IPv6 安装Trident</block>
  <block id="68934a3e9455fa72420237eb05902327" category="cell">false</block>
  <block id="077e99fe42ced522b462656cffffe09c" category="cell"><block ref="d5276bb17ae062102e883a18454c2f1b" prefix="" category="inline-code"></block></block>
  <block id="ebc465247274e830568c785a604321aa" category="paragraph">Kubernetes 操作超时。</block>
  <block id="487b75b94dd20a59c7005f9de6a6c4a0" category="admonition">这<block ref="d5276bb17ae062102e883a18454c2f1b" prefix=" " category="inline-code"></block>该参数仅适用于Trident安装。</block>
  <block id="710d51eba716c95765550f52a1c4fd61" category="cell"><block ref="4aff31f193e6ea4df2a1c4f841bad5d6" prefix="" category="inline-code"></block></block>
  <block id="42cf123e93ecc5c0297652edbc547fc0" category="cell"><block ref="2fac1659431903a30e063d49b3effb9d" prefix="" category="inline-code"></block></block>
  <block id="4a213b7c3b997ffb0794b25909381d16" category="cell">不要自动向NetApp发送自动支持包</block>
  <block id="2bccac20e55391730a985f9819e1cc41" category="cell"><block ref="7ecc687ea7566f05fd13fde7be607bfc" prefix="" category="inline-code"></block></block>
  <block id="84448c234dfdfd2a7367341fd4b56a80" category="cell">自动支持遥测的容器镜像</block>
  <block id="d59cb19805caf164811cd6ff7d71da51" category="cell"><block ref="2a096ce9ce9c58c91575ae3f40daa915" prefix="" category="inline-code"></block></block>
  <block id="f4a6821b04b9ce6b90148068341347b6" category="cell"><block ref="5f264298da92162575024336c485cc13" prefix="" category="inline-code"></block></block>
  <block id="7f54ca385f028308d19e228ce0534a47" category="cell">用于发送自动支持遥测数据的代理地址/端口</block>
  <block id="fca9ec6d50035c840a58bdecab9e25b1" category="cell"><block ref="256acfe307251e7444859851d87d5735" prefix="" category="inline-code"></block></block>
  <block id="e9f06180af644cfa6e5d20bd67c03bc5" category="cell"><block ref="fe98497efedbe156ecc4b953aea77e07" prefix="" category="inline-code"></block></block>
  <block id="9e6197850998001239ecde260b512013" category="cell">用于卸载Trident 的标志</block>
  <block id="cad060d2f14dbf08315c20014ed31daa" category="cell"><block ref="0b19d236934f609fe765b504a36b637e" prefix="" category="inline-code"></block></block>
  <block id="26ed500280b8c0e427f21574b44203cc" category="cell">Trident日志记录格式：[text,json]</block>
  <block id="db8e1facb8efde48ce50388e2dc9cfcc" category="cell"><block ref="20cd815523e5806aec29a57282b0d49f" prefix="" category="inline-code"></block></block>
  <block id="7610c5cc7910022402c4fbd450d889ce" category="cell"><block ref="d771848c80f96e5954a8658655cf79d7" prefix="" category="inline-code"></block></block>
  <block id="f443d16ba56df1480ca415fae25eaaef" category="cell">安装Trident镜像</block>
  <block id="fcd7f4cc8a01becf1cfddb538266578c" category="cell"><block ref="f6ac10a5549303d8f00a11f375963f9b" prefix="" category="inline-code"></block></block>
  <block id="8088435dc0e1c8b85217d850d3e7a602" category="cell"><block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix="" category="inline-code"></block></block>
  <block id="4f25f4cca5c1939f4a728d2678e719f7" category="cell">内部注册表路径，格式如下<block ref="d2ce1f53a5f0e84f4f1b5e28836eb05b" prefix=" " category="inline-code"></block></block>
  <block id="4a5fadb6b0890cea5e8d53c37411aaf0" category="cell"><block ref="bc35d038baf172a19349f289d31fbf9d" prefix="" category="inline-code"></block></block>
  <block id="e6b96cbb467923e86672bb25db5ecebb" category="cell"><block ref="31e3a95d0afff0def109a244b7f82d83" prefix="" category="inline-code"></block></block>
  <block id="31aad37dce0c28e12908582a0d63736a" category="cell">主机上 kubelet 目录的路径</block>
  <block id="a55d315d1b8f8342158866cd0f4acf4f" category="cell"><block ref="df8f3af91e96fe841267201ed450cd6b" prefix="" category="inline-code"></block></block>
  <block id="b6e0e2c4168573f0ed61c842470342ba" category="cell"><block ref="c13a52521693f799a16fd56a35c77a04" prefix="" category="inline-code"></block></block>
  <block id="26cb458bf42b8de61d4c66da519e7560" category="cell">要彻底移除Trident，需要删除以下资源：</block>
  <block id="2d30d1348c4d2533a165827a22516caa" category="cell"><block ref="0d9b54b29da54379cca6b8782b9faae5" prefix="" category="inline-code"></block></block>
  <block id="f73bb4a0bc9913e7fc6db5f9e5f2afeb" category="cell">从内部镜像仓库拉取镜像的秘诀</block>
  <block id="79445b5dba623a55ad4d974712853c2f" category="cell"><block ref="2b8b5018006a800ae06485c3aacfa08d" prefix="" category="inline-code"></block></block>
  <block id="cbea7dc9eb2c3c926a86130b0be6368f" category="cell">设置Trident操作符的镜像拉取策略。有效值为：<block ref="68eec46437c384d8dad18d5464ebc35c" prefix=" " category="inline-code"></block>始终提取图像。<block ref="7803982c6b845094275e8e83f0fad3a6" prefix=" " category="inline-code"></block>仅当节点上尚不存在该镜像时才拉取该镜像。<block ref="6e7b34fa59e1bd229b207892956dc41c" prefix=" " category="inline-code"></block>永远不要删除图像。</block>
  <block id="ac7c98af4f51cc4b20acafb785a53284" category="cell"><block ref="7803982c6b845094275e8e83f0fad3a6" prefix="" category="inline-code"></block></block>
  <block id="b89df534de66f446ec6482f9d7898bb2" category="cell"><block ref="3d97872197327b9967bcc3f4f76b25c5" prefix="" category="inline-code"></block></block>
  <block id="d64d0e5bb5a552ae4986a713f41c8fc3" category="cell">Pod 的附加节点选择器。遵循与以下相同的格式<block ref="6ae8be3433bfc36ced79a1271e6ebf11" prefix=" " category="inline-code"></block>。</block>
  <block id="8d414af35aeb82413205fa45551a5545" category="cell">无默认值；可选</block>
  <block id="df1f367efe879ec0030f43610e29c5af" category="cell"><block ref="e648881dc52660bceb907a4b5b9f7042" prefix="" category="inline-code"></block></block>
  <block id="875ce721843c20d7f9aae240673ed68b" category="cell">覆盖 Kubernetes 对 Pod 的容忍度。遵循与以下相同的格式：<block ref="f1fa64fcf5077601cb803e995a51fa4f" prefix=" " category="inline-code"></block> 。</block>
  <block id="47a441037628a3c0f0edb0daccb33f99" category="cell"><block ref="ae41eb1a542b17214c779966cd254a4d" prefix="" category="inline-code"></block></block>
  <block id="00e8e1706119ce5300bdc9141ececc37" category="cell">Pod 的附加节点选择器。遵循与以下相同的格式<block ref="6ae8be3433bfc36ced79a1271e6ebf11" prefix=" " category="inline-code"></block>。</block>
  <block id="f297db5a937924105908a365d9d4c4ff" category="cell"><block ref="b729c9d7484a61fd754f6b7f533db71c" prefix="" category="inline-code"></block></block>
  <block id="2c82926c3266fa69b7a6b9b9bf2da929" category="cell"><block ref="e9a7558decb5e432d8b7c4d536cc9876" prefix="" category="inline-code"></block></block>
  <block id="17290457cf887fb0694111a08adc91e7" category="paragraph">使Trident能够准备 Kubernetes 集群的节点，以使用指定的数据存储协议管理卷。*现在，<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>是唯一支持的值。*</block>
  <block id="dcc6257f6685a427757ede81b2086cb2" category="admonition">从 OpenShift 4.19 开始，此功能支持的最低Trident版本为 25.06.1。</block>
  <block id="c58ac3825b86aa7d2974a07f7fa6034e" category="cell"><block ref="ddb26827be8b4407890c3c9d97a1cfaa" prefix="" category="inline-code"></block></block>
  <block id="5e7f36ac5097702b7b261f47121e2fca" category="paragraph">控制器与 Kubernetes API 服务器通信时使用的每秒查询数 (QPS) 限制。Burst 值根据 QPS 值自动设置。</block>
  <block id="2ab2e58818cb444e3077fcc7704f7079" category="cell"><block ref="f899139df5e1059396431415e770c6dd" prefix="" category="inline-code"></block>; 选修的</block>
  <block id="d7a2654dbfab5a9156d117ed5f38d69d" category="cell"><block ref="b061e443e106870da185a3681948cf1b" prefix="" category="inline-code"></block></block>
  <block id="8f6c08227a11c89c47d71368ee8be24b" category="paragraph">支持并发Trident控制器操作以提高吞吐量。</block>
  <block id="a7b533ae6b857f339e48992cd45fb205" category="admonition">*技术预览*：此功能在NetApp Trident 25.06 中处于实验阶段，目前支持使用ONTAP-SAN 驱动程序（iSCSI 和 FCP 协议）的有限并行工作流程。</block>
  <block id="4352a1b4e004cf57ac04661a18de43aa" category="inline-link-macro">将 Pod 分配给节点</block>
  <block id="746996e3c70ac1447e486f6c9fc0fac2" category="admonition">有关格式化 pod 参数的更多信息，请参阅<block ref="7b3a69fdac08c769183925679da4c365" category="inline-link-macro-rx"></block>。</block>
  <block id="38a0b9f59e6fe23e1617dc0e78498afe" category="section-title">强制分离的详细信息</block>
  <block id="20c0c9efee2da2645ec0eefaf3c75d8c" category="inline-link-macro">Kubernetes：节点非优雅关闭</block>
  <block id="ac359e2f52a664608f09a2e7a47ec527" category="paragraph">强制分离功能可用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ， 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>仅有的。在启用强制分离之前，必须在 Kubernetes 集群上启用非正常节点关闭 (NGNS)。Kubernetes 1.28 及以上版本默认启用 NGNS。更多信息，请参阅<block ref="a0c86c823d7e699cfc277c93de351a2d" category="inline-link-macro-rx"></block>。</block>
  <block id="97949d2167cfb02925ebeb5fbc18e41c" category="admonition">使用时<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>或者<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序，您需要设置<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>后端配置中的参数<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>以便Trident可以使用托管导出策略限制对应用了污点的 Kubernetes 节点的访问。</block>
  <block id="b90bdf58371477fc38f47c2f6d120df5" category="admonition">由于Trident依赖于 Kubernetes NGNS，请勿移除<block ref="2ea3337d8d7fc43880e82df308aa0f16" prefix=" " category="inline-code"></block>将来自不健康节点的污点保留到所有无法容忍的工作负载重新调度为止。鲁莽地应用或移除污点可能会危及后端数据保护。</block>
  <block id="36d4895fba0608ac61adf67bca2ca709" category="paragraph">当 Kubernetes 集群管理员应用了<block ref="7b58fe53e2e4b586e9605f1371e1ebf3" prefix=" " category="inline-code"></block>节点受到污染<block ref="badc795d88a7db6cc65d56bc758b3ea4" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident将确定节点状态并：</block>
  <block id="5a46bcb638ad3abfd754aecfb450a781" category="list-text">停止对挂载到该节点的卷的后端 I/O 访问。</block>
  <block id="a753dc0e9b9a4864e2954c838d295341" category="list-text">将Trident节点对象标记为<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block>（不适合新出版物）</block>
  <block id="d3f280add1ef01848e3068dbafeb2930" category="admonition">Trident控制器将拒绝新的发布卷请求，直到节点重新获得资格（在被标记为已激活之后）。<block ref="32478ef751ab0a81974a3aa8569607b9" prefix=" " category="inline-code"></block>由Trident节点 pod 执行。任何使用已挂载 PVC 调度的工作负载（即使集群节点运行状况良好且已准备就绪）在Trident验证节点之前都不会被接受。<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block> （适用于新出版物）。</block>
  <block id="94b5491434477bb572567175dae8789b" category="paragraph">当节点健康状况恢复且污点被移除后， Trident将：</block>
  <block id="8f57f52b7233aecf56728bcd48d3a51c" category="list-text">识别并清理节点上过期的已发布路径。</block>
  <block id="9b87d3b70754b676221dcbe27972c21e" category="list-text">如果节点位于<block ref="4304fb35c4cdfa886970499304f2aaba" prefix=" " category="inline-code"></block>状态（已移除服务中断污点，节点处于）<block ref="e7d31fc0602fb2ede144d18cdffd816b" prefix=" " category="inline-code"></block>如果状态）并且所有过期的、已发布的路径都已清理， Trident将重新接纳该节点。<block ref="123402c04dcfb6625f688f771a5fc05d" prefix=" " category="inline-code"></block>并允许将新发布的卷添加到节点。</block>
  <block id="a3ff66cf5848a34d56915c8e879a5d52" category="section-title">示例配置</block>
  <block id="cb970ba92f64074cb0c13138a539851d" category="paragraph">您可以使用以下属性<block ref="289efe9665b12a9f791f1897f30c1a0b" category="inline-xref-macro-rx"></block>在定义时<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义您的安装。</block>
  <block id="0f63a7a4873a5bae5060bde9fd1009af" category="example-title">基本自定义配置</block>
  <block id="8c1fabda63909c966d5b02c908178af2" category="paragraph">这个示例是在运行以下命令后创建的：<block ref="6108feb94d9d09a19e33648dcce80003" prefix=" " category="inline-code"></block>该命令代表一个基本的自定义安装：</block>
  <block id="a144d1a554ec741f701e87c26360c28e" category="example-title">节点选择器</block>
  <block id="0b566d8eeef773fb0a1874a0340c1bf1" category="paragraph">此示例使用节点选择器安装Trident 。</block>
  <block id="de5aefa11fe3836b4b8d0769b09b21eb" category="example-title">Windows 工作节点</block>
  <block id="a687cccb5ef434dd8df6734253a09535" category="paragraph">这个示例是在运行以下命令后创建的：<block ref="2241cac556b278d16d0bb5f94117277a" prefix=" " category="inline-code"></block>该命令在 Windows 工作节点上安装Trident 。</block>
  <block id="f393555b01f0bafc5bd6a63db97bac1d" category="example-title">AKS 集群上的托管身份</block>
  <block id="f9c98839799a3d0d53b9fe671548369b" category="paragraph">本示例安装Trident以在 AKS 集群上启用托管身份。</block>
  <block id="87405c3bcad617fc620ddcd9d59cee14" category="example-title">AKS 集群上的云身份</block>
  <block id="134db50713debda2944acc2079f0cd32" category="paragraph">本示例在 AKS 集群上安装Trident以用于云身份。</block>
  <block id="26f5586d25dc46e2526fe898341970ac" category="example-title">EKS 集群上的云身份</block>
  <block id="338531cfbc43156671176c4844d84c2e" category="example-title">GKE 的云身份</block>
  <block id="b89f71465b55ef1dc894a4364041d9f0" category="paragraph">本示例在 GKE 集群上安装Trident以用于云身份。</block>
  <block id="dfee7b28d5bbb63372e0d49295ca91ff" category="summary">您可以使用 Helm 部署Trident Operator 并安装Trident 。此过程适用于Trident所需的容器镜像存储在私有镜像仓库中的安装情况。</block>
  <block id="3e8935de45b1559e2ec2b01c1bbb06c2" category="doc">使用 Helm 部署Trident Operator（离线模式）</block>
  <block id="11ad6eeb0e6095efdbf4599d71303b0e" category="inline-link-macro">标准部署流程</block>
  <block id="eba73b570dfb3af8b46b60d34f2b27a9" category="paragraph">您可以使用 Helm 部署Trident Operator 并安装Trident 。此过程适用于Trident所需的容器镜像存储在私有镜像仓库中的安装情况。如果您没有私有镜像仓库，请使用<block ref="2230544d14bc4ba0c61a5a1b2030a1d4" category="inline-link-macro-rx"></block>。</block>
  <block id="b59305925bb6ffc962ea48351db964e8" category="section-title">关于Trident25.06的关键信息</block>
  <block id="906e93a2060242b360786042d0f40c9f" category="section-title">使用 Helm 部署Trident Operator 并安装Trident。</block>
  <block id="7d3f46589c43a64fd040e4f0e0691a86" category="inline-link-macro">掌舵图</block>
  <block id="54cae3576f4c4ef43a60a75276a7afdb" category="paragraph">使用Trident<block ref="30e4ebd32bc870aef019efda0672389c" category="inline-link-macro-rx"></block>您可以一步完成Trident操作符的部署和Trident 的安装。</block>
  <block id="3342f1a2f74c6062a39d3076c35c5a5b" category="inline-link-macro">安装概述</block>
  <block id="6657de3ab3deaeef939684c50d5310e3" category="paragraph">审查<block ref="17128a3e349370ba21c9ca13ca0bc297" category="inline-link-macro-rx"></block>确保您已满足安装先决条件并为您的环境选择了正确的安装选项。</block>
  <block id="8f3958d59b8da100a4663b1cace112b7" category="inline-link-macro">部署前提条件</block>
  <block id="2e1b3f44683eee188be985693c4af5e1" category="inline-link-macro">Helm 版本 3</block>
  <block id="64d2af40480a5cebf7e64939f6253bf3" category="paragraph">除了<block ref="c7282b7e52e27c635b613335e59bf436" category="inline-link-macro-rx"></block>你需要<block ref="fc0cdbd8defe0c7175199dd05a0f8e76" category="inline-link-macro-rx"></block>。</block>
  <block id="4d204b33a367deb7dbcb20395c917da2" category="admonition">在私有仓库中安装Trident时，如果您使用的是<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block>切换以指定存储库位置，不要使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>在存储库路径中。</block>
  <block id="43eba64dcd06763432addbcf8db2d367" category="list-text">添加Trident Helm 仓库：</block>
  <block id="b3735f022036728c24121c449da97183" category="inline-link-macro">Trident和CSI图像</block>
  <block id="d7ccfdca42aadc41314f5df3ed2e4cbf" category="list-text">使用<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block>并指定部署和镜像仓库位置的名称。你的<block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block>CSI 镜像可以位于同一个注册表或不同的注册表中，但所有 CSI 镜像必须位于同一个注册表中。在这些例子中，<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>这是您正在安装的Trident版本。</block>
  <block id="c4ffea098f78924a9b9331b8f5e9c8b4" category="open-title">一个注册表中的图像</block>
  <block id="4847c552b2ff9251806e41c8fa907e19" category="open-title">不同注册机构中的图像</block>
  <block id="134bf17c90c90b5aeed99dde262bf14d" category="admonition">如果您已经为Trident创建了命名空间，那么<block ref="cc1f5c1d16e33b8463c9ee27295cd5df" prefix=" " category="inline-code"></block>该参数不会创建额外的命名空间。</block>
  <block id="d75fdc8e85ddcd7e9dc9f367168dec11" category="paragraph">您可以使用<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block>查看安装详细信息，例如名称、命名空间、图表、状态、应用程序版本和修订号。</block>
  <block id="4c5ab57df808d08e9978671e7e81bb2a" category="section-title">安装过程中传递配置数据</block>
  <block id="e366a20246a41520da551be510c1d658" category="paragraph">安装过程中有两种方法可以传递配置数据：</block>
  <block id="c2bae6a1b11b371647052979113c2b7c" category="cell"><block ref="2c1d18b300e96c797f390483b0c6acdb" prefix="" category="inline-code"></block>（或者<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block>）</block>
  <block id="0bfab21a3b7a34a60173df3f165eda9c" category="paragraph">指定一个包含覆盖规则的 YAML 文件。可以多次指定，最右边的文件将优先使用。</block>
  <block id="ef136231fb37749162723573d36b19c9" category="cell"><block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix="" category="inline-code"></block></block>
  <block id="7595b6387dfaf9307f563edc4d951a0d" category="paragraph">在命令行中指定覆盖设置。</block>
  <block id="9632d6ad86670e70a32c6b93e85ad9f4" category="paragraph">例如，要更改默认值<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>运行以下命令，其中<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>是您正在安装的Trident版本：</block>
  <block id="4dd793a25a8706b6330293fdd8ba3cca" category="paragraph">要添加 nodePrep 值，请运行以下命令：</block>
  <block id="d924b4945b9cee37e07a2c601d1081be" category="paragraph">这张表格和<block ref="ba05023d0f1b5d4b64b6cad4cf9a7ecd" prefix=" " category="inline-code"></block>该文件是 Helm chart 的一部分，提供了键及其默认值的列表。</block>
  <block id="a4b3e6e276b60f51832e92ee5e4c0d3c" category="admonition">不要从 values.yaml 文件中移除默认亲和性设置。当您需要提供自定义亲和性时，请扩展默认亲和性。</block>
  <block id="e0e228e32d97e1461cf4492bd5366550" category="cell"><block ref="6370f866cf64618c026027da41bd248e" prefix="" category="inline-code"></block></block>
  <block id="f54139bbd014c510ee9fa277241d4666" category="cell">用于 pod 分配的节点标签</block>
  <block id="b7f663c63859fec6f7d2f1ecd891de73" category="cell"><block ref="6e0bd2b3fba01f3f74634cfc6fcc31d6" prefix="" category="inline-code"></block></block>
  <block id="6b164b6efa957c912428e089b86ecd45" category="cell">Pod 注解</block>
  <block id="4e3c35024b2d124aa9ab33a254e2545c" category="cell"><block ref="7c73e8c8cba054b3164d0b641ef36a41" prefix="" category="inline-code"></block></block>
  <block id="1a6308fa062d92acbff3b1304615d1db" category="cell">部署注解</block>
  <block id="716c09bbd59aa99d3932f73b7f517b2c" category="cell"><block ref="d6c26478ca41a23cc9741a4e92576269" prefix="" category="inline-code"></block></block>
  <block id="1147c70db6b1e5ac87df9b1ef26ea59a" category="cell">对舱位分配的容忍度</block>
  <block id="ed550d998ef1de0c69744fb5f7f7173c" category="cell"><block ref="1474047fb00b2d8d95646f7436837ed0" prefix="" category="inline-code"></block></block>
  <block id="064fd06fa9edd7a1e29b4da6fd9a1688" category="cell">对小组分配的偏好</block>
  <block id="b81e781314c37667d0eae6eeba5f0468" category="cell"><block ref="d525dcbea000b0429493d47a891b5ad9" prefix="" category="inline-code"></block></block>
  <block id="2a2c6cbf201e7fa0935ec1e8b243cca1" category="cell">Pod 的附加节点选择器。参考 <block ref="4b8785cedf610e3d8df57f69213f93a8" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="0ccd4d74122ec81d149bc2bb132524d6" category="cell"><block ref="e8c1183eadfdb38078a7bd66bfa038ac" prefix="" category="inline-code"></block></block>
  <block id="8a00a4799d11edabcb628da338d295ce" category="cell">覆盖 Kubernetes 对 Pod 的容忍度。参考 <block ref="4b8785cedf610e3d8df57f69213f93a8" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="c5387f0fc94f27d79519bb1299916e0f" category="cell"><block ref="bc0951b6e57a04c942fe6054649bb323" prefix="" category="inline-code"></block></block>
  <block id="7923027736f9cc9bbc6f6914e020e8a2" category="cell"><block ref="85dec10eb608a93a9febb24b39f5dae5" prefix="" category="inline-code"></block></block>
  <block id="13449393414b4d9d6fb5c0c42481c6bb" category="cell">确定注册表<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>，<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>以及其他图片。留空则接受默认值。重要提示：在私有仓库中安装Trident时，如果您使用的是<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block>切换以指定存储库位置，不要使用<block ref="191065897cafafd6677dec7355a785d9" prefix=" " category="inline-code"></block>在存储库路径中。</block>
  <block id="9d4568c009d203ab10e33ea9953a0264" category="cell">""</block>
  <block id="7211a1f37ce0f92a2727e11de77a5256" category="cell">设置镜像拉取策略<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="f19aec010e48d5133114e8de96e071cd" category="cell">设置镜像拉取密钥<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>，<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>以及其他图片。</block>
  <block id="b8ef31ad215c14ea7ac3aa4744f3b42f" category="cell">允许覆盖 kubelet 内部状态的主机位置。</block>
  <block id="5e2907912eaee9094910d428b8f01073" category="cell"><block ref="2d9583aa0b2422324be870c86f92540f" prefix="" category="inline-code"></block></block>
  <block id="a580f5edb0407fe7fc07e03adb88d2be" category="cell">允许将Trident操作符的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block> ，<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block> ，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block> ，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block> ，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block> ， 或者<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="17b455f4f77262089207347508d91156" category="cell"><block ref="94b4515f09a2cc099780cd762366bc78" prefix="" category="inline-code"></block></block>
  <block id="0b401c459e3ff134b1e0ef7924967db5" category="cell"><block ref="844aa3cc935c46477e308955f84504e9" prefix="" category="inline-code"></block></block>
  <block id="0d1fd401e197635acbe814b44cbbe0f0" category="cell">允许将Trident操作符的日志级别设置为 debug。</block>
  <block id="22cfef4d87bd251ba39dd92d08a6b0bb" category="cell"><block ref="b326b5062b2f0e69046810717534cb09" prefix="" category="inline-code"></block></block>
  <block id="e6e859881d25cceaf35be98ff2b495e5" category="cell"><block ref="225eb420f27fc1614025e3e94f1dbcd4" prefix="" category="inline-code"></block></block>
  <block id="3e23960e7162cfc391ab62ee009d09b5" category="cell">允许完全覆盖图像<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>。</block>
  <block id="586d412183efcbc76c2b206c73911009" category="cell"><block ref="5a50bd404d515b199254e69f83732c55" prefix="" category="inline-code"></block></block>
  <block id="87a9d5d1548b0e39b7cfe5115c686d2d" category="cell">允许覆盖标签<block ref="c39d2745402b5d2987cfdd8df3bda0e1" prefix=" " category="inline-code"></block>图像。</block>
  <block id="ba6229139ac12ca183160040964cdaae" category="cell"><block ref="c185b55e62d1fe703eb97b2a31b6c2a3" prefix="" category="inline-code"></block></block>
  <block id="2b5e815c8ff99f9eef6559d24c783ba7" category="cell">允许Trident在 IPv6 集群中工作。</block>
  <block id="aacf685d031cae06a5c158144296d071" category="cell"><block ref="b958a6de9ca123713491252f2ab02f59" prefix="" category="inline-code"></block></block>
  <block id="68087b4c898b9466dc989d8086e173dc" category="paragraph">覆盖大多数 Kubernetes API 操作的默认 180 秒超时（如果非零，则以秒为单位）。</block>
  <block id="0784343c721b59e3c2426a1b76297982" category="admonition">这<block ref="b958a6de9ca123713491252f2ab02f59" prefix=" " category="inline-code"></block>该参数仅适用于Trident安装。</block>
  <block id="bd3dd99c8eae44e2ae2bfc8f00dc3db0" category="cell"><block ref="045117b0e0a11a242b9765e79cbf113f" prefix="" category="inline-code"></block></block>
  <block id="fbf0a4141bdac5821d271a6c1de1f483" category="cell"><block ref="70b0324e2a65a29bea1b014606caba39" prefix="" category="inline-code"></block></block>
  <block id="d74c6fe1792f46d6c929a448fd8b99cd" category="cell">覆盖 HTTP 请求的默认 90 秒超时时间。<block ref="bb61fa2850d04f4e5e34449de13febe4" prefix=" " category="inline-code"></block>超时时间无限长。不允许使用负值。</block>
  <block id="ab7c61393023df91a4271d09e26bda15" category="cell"><block ref="558c8a41e3e5c9a0f109be6e60efce8d" prefix="" category="inline-code"></block></block>
  <block id="b2ffdfaa5c81870c0fb113956a7244aa" category="cell"><block ref="141d9fad9dd7e4fec852d6e55f414373" prefix="" category="inline-code"></block></block>
  <block id="31f08e89ef234f9ec501c003d82bd2b4" category="cell">允许禁用Trident定期AutoSupport报告。</block>
  <block id="22ca6470a16bcd1b3a0fd7b7dc456b4c" category="cell"><block ref="9626ee86c83efe1de7c3f5e2669b4a04" prefix="" category="inline-code"></block></block>
  <block id="1eb59d4f1034670c547353e700b9c45f" category="cell">允许覆盖Trident AutoSupport容器的图像标签。</block>
  <block id="dfdc01cf8fa557986d9b3e8702b6ff1b" category="cell"><block ref="3d689bd3819ead35ed794427bd12f459" prefix="" category="inline-code"></block></block>
  <block id="8639f9efa7d4198eba06690d4a1f0d16" category="cell"><block ref="c370bb44f26914bb0c965f35a89a42f7" prefix="" category="inline-code"></block></block>
  <block id="1b8b03266c41458cf8c8b67fddf79f72" category="cell">使Trident AutoSupport容器能够通过 HTTP 代理向服务器发送请求。</block>
  <block id="b081a6c6ed5931a2b55e31e706aae502" category="cell"><block ref="5836094432fed0c547c18869122bbf9a" prefix="" category="inline-code"></block></block>
  <block id="28b0bd49547c0889ddc764ec4af0404f" category="cell">设置Trident日志格式<block ref="1cb251ec0d568de6a929b520c4aed8d1" prefix="(" category="inline-code"></block>或者<block ref="466deec76ecdf5fca6d38571f6324d54" prefix=" " category="inline-code"></block>）。</block>
  <block id="4d165b964c1ea4708882da42c3ef5194" category="cell"><block ref="0be533d5261bfa202a27dd6f4a2ff4da" prefix="" category="inline-code"></block></block>
  <block id="025e09276aadc123e8e855a29fafc984" category="cell">禁用Trident审计日志记录器。</block>
  <block id="c7bc9c0edf4b3f771388feb15b8ad592" category="cell"><block ref="cd4906de65bd0389fcc62105f05b77d6" prefix="" category="inline-code"></block></block>
  <block id="dca184d2a2b16c8fb797363408cbe703" category="cell">允许将Trident的日志级别设置为：<block ref="04a75036e9d520bb983c5ed03b8d0182" prefix=" " category="inline-code"></block> ，<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block> ，<block ref="caf9b6b99962bf5c2264824231d7a40c" prefix=" " category="inline-code"></block> ，<block ref="1ea4c3ab05ee0c6d4de30740443769cb" prefix=" " category="inline-code"></block> ，<block ref="cb5e100e5a9a3e7f6d1fd97512215282" prefix=" " category="inline-code"></block> ， 或者<block ref="df6402fd9ecc60f5a2159fdf45711cd4" prefix=" " category="inline-code"></block>。</block>
  <block id="c97f5436c3ba56768a7996ac0a152830" category="cell"><block ref="efc1e9e3a120c20b12e892ce2f230ff8" prefix="" category="inline-code"></block></block>
  <block id="14db3339a3d7e6dcb158ff8a75d75327" category="cell">允许将Trident的日志级别设置为<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>。</block>
  <block id="3e52a0855ea502bd31c48eb02424ee67" category="cell"><block ref="aaeab2a659f3d6ac5063b6d8a4e7c24a" prefix="" category="inline-code"></block></block>
  <block id="a17b61342a14dd24f10e7959b8c897e8" category="cell">允许为跟踪日志记录或日志抑制启用特定的Trident工作流程。</block>
  <block id="66468bda18a84578afccd8255efa1845" category="cell"><block ref="d5c1386f335f8df3cd920142f8ee23b7" prefix="" category="inline-code"></block></block>
  <block id="8a755d63b74fdfced1868a0b3e2d5162" category="cell">允许为跟踪日志记录或日志抑制启用特定的Trident层。</block>
  <block id="d31727faddcc7355e9e3bf46abdf8088" category="cell">允许完全覆盖Trident的图像。</block>
  <block id="a74941f6c96a1995cbfb438419467c32" category="cell"><block ref="fdd0820bbfc488d6a2ccba8ba0f74e73" prefix="" category="inline-code"></block></block>
  <block id="275360255393ae93a5ae2ff80a7ee5b6" category="cell">允许覆盖Trident图像的标签。</block>
  <block id="50c1c44df91bb9f35aaa04b0157d6136" category="cell"><block ref="60c65b849dbb837618645b7860aa608e" prefix="" category="inline-code"></block></block>
  <block id="74b30241e61b88d42e066d77a638a568" category="cell">允许覆盖 Kubernetes 存活/就绪探测使用的默认端口。</block>
  <block id="baee061ae15e488356d9c958fd837562" category="cell">允许在 Windows 工作节点上安装Trident 。</block>
  <block id="0a08ed3de9d17e8644d3e57dc374c3ea" category="cell">允许启用强制分离功能。</block>
  <block id="632a46acdaa26f30f25b11d5c83eaa58" category="cell"><block ref="94ef2a130a825358ab3002442d6e5145" prefix="" category="inline-code"></block></block>
  <block id="ad77b466842808c8dce5116073a3e52b" category="cell">不创建操作员 pod 安全策略。</block>
  <block id="6d893452bf49a70aa18938a81935210f" category="summary">您可以使用 Helm 部署Trident Operator 并安装Trident 。此过程适用于Trident所需的容器镜像未存储在私有镜像仓库中的安装情况。</block>
  <block id="2f74d18d1c9959832fc00b898fa2417e" category="doc">使用 Helm 部署Trident Operator（标准模式）</block>
  <block id="6852076d7b753ee3ea825ae4af1375ac" category="inline-link-macro">离线部署流程</block>
  <block id="c4a180ac17652dd1cd170c28b376be9c" category="paragraph">您可以使用 Helm 部署Trident Operator 并安装Trident 。此过程适用于Trident所需的容器镜像未存储在私有镜像仓库中的安装情况。如果您确实拥有私有镜像仓库，请使用<block ref="95202a095b590d767c9926fd1850fb68" category="inline-link-macro-rx"></block>。</block>
  <block id="2f5480efe7a0a4b0cffbf110abec11c2" category="paragraph">使用Trident<block ref="cdacb2b0d49176a3c0d8cc9d693de833" category="inline-link-macro-rx"></block>您可以一步完成Trident操作符的部署和Trident 的安装。</block>
  <block id="b34ad03c5088f36033c20b21d9aae4c2" category="list-text">使用<block ref="0562418e6d9a76d0dd22b2f186a2203d" prefix=" " category="inline-code"></block>并为您的部署指定一个名称，如下例所示：<block ref="5c9befb508998ce21883733ce6ab129f" prefix=" " category="inline-code"></block>这是您正在安装的Trident版本。</block>
  <block id="85e06bb6e03e71b7708d9d4b6f4967ea" category="cell">Pod 的附加节点选择器。参考 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详情。</block>
  <block id="74f3be1a07b1f65cef69ac77defaff4b" category="cell">覆盖 Kubernetes 对 Pod 的容忍度。参考 <block ref="662636849823c896b8f86e3f7d6afa9b" category="inline-xref-macro-rx"></block> 了解详情。</block>
  <block id="f8d2c273db74b394820e68a59b18bfff" category="cell">覆盖大多数 Kubernetes API 操作的默认 30 秒超时（如果非零，则以秒为单位）。</block>
  <block id="2911e600bbad981e24b3e2a2b3a03f82" category="cell"><block ref="cfcd208495d565ef66e7dff9f98764da" prefix="" category="inline-code"></block></block>
  <block id="99c0f28c38ebd0826265cfd120e75cce" category="cell">设置为<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>在 AKS 集群上使用托管身份或云身份时。在 EKS 集群上使用云身份时，请设置为“AWS”。</block>
  <block id="7552178c666688de472839ddf4b0f4d0" category="cell">在 AKS 集群上使用云标识时，请设置为工作负载标识（“azure.workload.identity/client-id: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx”）。在 EKS 集群上使用云身份时，设置为 AWS IAM 角色（“'eks.amazonaws.com/role-arn: arn:aws:iam::123456:role/trident-role'”）。</block>
  <block id="50f9796c3e95f29464ed077bb59ca6a5" category="cell"><block ref="a1edaea62dbed344534369e9668223b1" prefix="" category="inline-code"></block></block>
  <block id="d3ee0f95ea35db45a8c5d2deb96b4eb9" category="cell">调用 iSCSI 自愈功能的时间间隔。</block>
  <block id="d2393ee8411e83742fc73a79660d81ba" category="cell"><block ref="48899b1fc217fef67f8c9c11d2af0800" prefix="" category="inline-code"></block></block>
  <block id="5368476cef8604c12ee3f8a741319473" category="cell"><block ref="85fc372a514da766ce84a222668f8e62" prefix="" category="inline-code"></block></block>
  <block id="a5c601ef1c412054e22a761067edb9da" category="cell">iSCSI 自愈功能会在一段时间后尝试通过注销和重新登录来解决过期的会话。</block>
  <block id="e1bd8a641f8c3114c2698aa76942b621" category="cell"><block ref="4fe853d0c57c2a118a755c207068b052" prefix="" category="inline-code"></block></block>
  <block id="bf514a22294dc1e674b6fafac9463f62" category="cell">使Trident能够准备 Kubernetes 集群的节点，以使用指定的数据存储协议管理卷。*现在，<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>是唯一支持的值。*注意：从 OpenShift 4.19 开始，此功能支持的最低Trident版本为 25.06.1。</block>
  <block id="a4ae088aa8dbc2e97f85135b007cce76" category="summary">您可以手动部署Trident操作员来安装Trident。此过程适用于Trident所需的容器镜像存储在私有镜像仓库中的安装情况。</block>
  <block id="44e21d73aa8bd7200fceac6671723524" category="doc">手动部署Trident操作员（离线模式）</block>
  <block id="c54f3e7a1c4cb645b1fc4f0f7a583ac6" category="paragraph">您可以手动部署Trident操作员来安装Trident。此过程适用于Trident所需的容器镜像存储在私有镜像仓库中的安装情况。如果您没有私有镜像仓库，请使用<block ref="0d70fdec6fbaf15c3c460970c31207c9" category="inline-link-macro-rx"></block>。</block>
  <block id="8ff1bc8a7ac69f081f871e9e2a8c0d0f" category="section-title">手动部署Trident操作员并安装Trident</block>
  <block id="ea8cda06a0e70ad34c1b9ab1b7135105" category="inline-link-macro">支持的 Kubernetes 集群</block>
  <block id="bcc71769dd00af93bb067088094d9b0b" category="paragraph">登录到 Linux 主机并验证它是否正在管理一个正常工作的进程。<block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block>并且您拥有必要的权限。</block>
  <block id="e420b75ec3bc014e3f69c43b2383768b" category="admonition">使用 OpenShift 时，请<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>而不是<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>在以下所有示例中，请先以 *system:admin* 身份登录，方法是运行以下命令。<block ref="924132b4cedac6927feecff33e0a8e17" prefix=" " category="inline-code"></block>或者<block ref="42c32f65d2d1c08a83fbc226da30a162" prefix=" " category="inline-code"></block>。</block>
  <block id="92e83bca2bb40324de35154f8c95083d" category="list-text">请验证您的 Kubernetes 版本：</block>
  <block id="b17eef151a74252395aad7db4b148b57" category="list-text">验证集群管理员权限：</block>
  <block id="987c560d773c81bc59f0fa11370626f5" category="list-text">验证您是否可以启动一个使用 Docker Hub 镜像的 pod，并通过 pod 网络访问您的存储系统：</block>
  <block id="d868f4f0026c532dcfdb417dde3174c2" category="section-title">步骤 1：下载Trident安装包</block>
  <block id="a1142049a82a11e90102d655bb7e234d" category="inline-link-macro">GitHub 上的 _Assets_ 部分</block>
  <block id="7a14ead6cd595f6aff8b701879a9f990" category="paragraph">Trident安装包包含部署Trident操作员和安装Trident所需的一切。从以下位置下载并解压最新版本的Trident安装程序<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="e0755e6cf0a80c2d8535ac3b7eae0b4b" category="section-title">步骤 2：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CRD</block>
  <block id="04bed90b9e7d65b6d7dd48211e0a9f6c" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源定义（CRD）。你将创建一个<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>稍后会提供自定义资源。请使用适当的 CRD YAML 版本<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block>创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CRD：</block>
  <block id="ad9aaefb573cd08d43c2b039449b1f0e" category="section-title">步骤 3：更新操作员中的注册表位置</block>
  <block id="287d9354cd0e889ca3c170f1a20060ce" category="paragraph">在<block ref="02f3115b006f7541a477d52ea8c0f861" prefix=" " category="inline-code"></block>， 更新<block ref="ff1ea91c85a440ad216d6d8dafdb2b4a" prefix=" " category="inline-code"></block>反映您的图像注册位置。你的<block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block>CSI 镜像可以位于同一个注册表或不同的注册表中，但所有 CSI 镜像必须位于同一个注册表中。例如：</block>
  <block id="3ce13997cacbb7668e6636ffb21ba04a" category="list-text"><block ref="a5ad704b64900183c3e85fea9edad0f0" prefix="" category="inline-code"></block>如果您的所有图片都位于同一个注册表中。</block>
  <block id="b6e3b64ea99d65462c313d10936507a1" category="list-text"><block ref="f5f5dab4b39c35c32ac8846470b513ad" prefix="" category="inline-code"></block>如果您的Trident镜像与 CSI 镜像位于不同的注册表中。</block>
  <block id="7a79f435dcaa0ca2322cde1d80c13868" category="section-title">步骤 4：部署Trident操作员</block>
  <block id="22471ed8a819a124f9ee9785680269ec" category="paragraph">Trident安装程序提供了一个捆绑文件，可用于安装操作符并创建关联对象。该捆绑文件提供了一种简便的方法来部署操作员并使用默认配置安装Trident 。</block>
  <block id="5e2619e85dc9af38c2b7180c37168571" category="list-text">对于运行 Kubernetes 1.24 的集群，请使用<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>。</block>
  <block id="e4941fda44f66f353885d1a37ca63e2b" category="list-text">对于运行 Kubernetes 1.25 或更高版本的集群，请使用<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>。</block>
  <block id="622bbef04f6f2121d92777cd7c59cc83" category="list-text">默认情况下， Trident安装程序会将操作员部署在<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>命名空间。如果<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>命名空间不存在，请使用以下命令创建：</block>
  <block id="5bb66df6f3cd1e022e0cb84d5ef9e8e6" category="list-text">要将运算符部署到除命名空间之外的其他命名空间<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>命名空间，更新<block ref="8610cac3beb01fb0b43bc94c587a807d" prefix=" " category="inline-code"></block>，<block ref="a3df76a4fb69b2a5e9ec42d242e90ea3" prefix=" " category="inline-code"></block>和<block ref="9fa80de5781893b057ff1d535201893b" prefix=" " category="inline-code"></block>并使用以下命令生成您的捆绑文件<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>。</block>
  <block id="0b9fb37ad5573b24cf369ec73caffe42" category="list-text">创建<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>使用以下命令，其中 _&lt;bundle.yaml&gt;_ 为<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>或者<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>根据您的 Kubernetes 版本。</block>
  <block id="3d886aa354247002acbb6642625843d1" category="list-text">使用以下命令编译捆绑包，其中 _&lt;bundle.yaml&gt;_ 为<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>或者<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>根据您的 Kubernetes 版本。</block>
  <block id="05cb480f9344b60f5eeaed25c5e230d1" category="list-text">创建资源并部署操作员：</block>
  <block id="806742cccf8380250ffb871d582a0a03" category="list-text">确认操作员、部署和副本集已创建。</block>
  <block id="a770ca95121cc795b602f9af6af024fb" category="admonition">Kubernetes 集群中应该只有*一个*操作员实例。不要创建多个Trident操作员部署。</block>
  <block id="579b44412770c0d6b65bc3fd9bf7c61c" category="section-title">步骤 5：更新映像注册表位置<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block></block>
  <block id="d0ebde94f92d8c1bae0c6660a5847bba" category="paragraph">你的<block ref="57de9a35aeedde82408b1e047030d221" category="inline-link-macro-rx"></block>CSI 镜像可以位于同一个注册表或不同的注册表中，但所有 CSI 镜像必须位于同一个注册表中。更新<block ref="7b4b81fb05ca7f2a09fe73526ac95482" prefix=" " category="inline-code"></block>根据您的注册表配置添加其他位置规范。</block>
  <block id="5295ac8fb520b71deb8a1b57857b2562" category="section-title">步骤 6：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident</block>
  <block id="78f538d1739cfd8c70698ec72269da17" category="inline-link-macro">自定义您的Trident安装</block>
  <block id="a0c08bc8d399eef3571153bb0ecb4a77" category="paragraph">您现在可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident。您还可以选择进一步<block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block>使用属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>规格以下示例展示了Trident和 CSI 镜像位于不同注册表中的安装情况。</block>
  <block id="9c0f95d6de9186b24cce94c1c19ad0bb" category="section-title">验证安装</block>
  <block id="f33407040f00668c9fe98aa95119654b" category="paragraph">有几种方法可以验证您的安装情况。</block>
  <block id="1ee1b78e8a634a10be54657432d990c0" category="section-title">使用<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>地位</block>
  <block id="59331c774767b9695025c001ca75a1f6" category="inline-link-macro">检查日志</block>
  <block id="4b3e10870e70ff689f8c7d5c4470bb56" category="paragraph">现状<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>指示安装是否成功，并显示已安装的Trident版本。安装过程中，状态<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>变化来自<block ref="2763f33c904a183bd0ef06f9c4fb4403" prefix=" " category="inline-code"></block>到<block ref="98dd43dfae05b11befe1f140e0ec787a" prefix=" " category="inline-code"></block>。如果你观察<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block>状态异常且操作员无法自行恢复，<block ref="b02c5b645df4a829ba2f9c98296d4b15" category="inline-link-macro-rx"></block> 。</block>
  <block id="ec53a8c4f07baed5d8825072c89799be" category="cell">状态</block>
  <block id="2763f33c904a183bd0ef06f9c4fb4403" category="cell">安装</block>
  <block id="e4f485171dcf600d2f0b0e8332394897" category="cell">操作员正在使用此方法安装Trident 。<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CR。</block>
  <block id="98dd43dfae05b11befe1f140e0ec787a" category="cell">已安装</block>
  <block id="55a64caca1122c8b2fd992a355c7750b" category="cell">Trident已成功安装。</block>
  <block id="c2aaea4dacecce78b34302e41fcef75e" category="cell">卸载</block>
  <block id="cdef3688b4499bd3dbc552c9cf5defc3" category="cell">操作员正在卸载Trident，因为<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>。</block>
  <block id="b78846123fdd78d5ab62451b855194e3" category="cell">已卸载</block>
  <block id="e52593aaecb3b20362fa0081eea6a0f9" category="cell">Trident已卸载。</block>
  <block id="d7c8c85bf79bbe1b7188497c32c3b0ca" category="cell">失败</block>
  <block id="36be8fe129110882a2ec7138f4e363dd" category="cell">操作员无法安装、修补、更新或卸载Trident；操作员将自动尝试从此状态恢复。如果这种情况持续存在，则需要进行故障排除。</block>
  <block id="6909beea5b50605780e3411f879fe916" category="cell">正在更新</block>
  <block id="3201d58137fab497dea740d761a9733b" category="cell">操作员正在更新现有设备。</block>
  <block id="902b0d55fddef6f8d651fe1035b7d4bd" category="cell">错误</block>
  <block id="efaeca66375c8663b6d1d64f4886f267" category="cell">这<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>未使用。已经存在另一个了。</block>
  <block id="474d9cf1b4e7f826154b0e1f35c59f5a" category="section-title">使用 pod 创建状态</block>
  <block id="24947bdc3a3d6387b2550da2302d4470" category="paragraph">您可以通过查看已创建的 pod 的状态来确认Trident安装是否完成：</block>
  <block id="8492a795a07bc459d58808ef0ab73c36" category="section-title">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="85390ca1f1fb456c5467114ab06d3089" category="paragraph">您可以使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>检查已安装的Trident版本。</block>
  <block id="9be65bfc0904c8b8e06776335df88c52" category="summary">您可以手动部署Trident操作员来安装Trident。此过程适用于Trident所需的容器镜像未存储在私有镜像仓库中的安装情况。</block>
  <block id="5d8f25140dde9344f1318b1319929306" category="doc">手动部署Trident操作员（标准模式）</block>
  <block id="e09b85e9dd23a53724a460d162828e91" category="paragraph">您可以手动部署Trident操作员来安装Trident。此过程适用于Trident所需的容器镜像未存储在私有镜像仓库中的安装情况。如果您确实拥有私有镜像仓库，请使用<block ref="3fd9bb28718715a2d036f0ab9d9239b8" category="inline-link-macro-rx"></block>。</block>
  <block id="953aeeea088f5f969f2eba121ae81f15" category="paragraph">在开始安装之前，请登录到 Linux 主机并验证它是否正在管理一个正常工作的服务器。<block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block>并且您拥有必要的权限。</block>
  <block id="ef2305a5dae85359e321280954448fc1" category="paragraph">创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源定义（CRD）。你将创建一个<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>稍后会添加自定义资源。请使用适当的 CRD YAML 版本<block ref="91ff3926f7c7983bb4a56689f631e6c9" prefix=" " category="inline-code"></block>创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CRD。</block>
  <block id="7e1c8354fb2b2ecb65abfa6a63e08970" category="section-title">步骤 3：部署Trident操作员</block>
  <block id="c35c65e4cd4cef23559781ed63709eb0" category="section-title">步骤 4：创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident</block>
  <block id="c97e335d53c8d571c8e8f7464c884831" category="paragraph">您现在可以创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并安装Trident。  （可选）<block ref="af79c767b326b6188dbe7366c85a8007" category="inline-link-macro-rx"></block>使用属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>规格</block>
  <block id="7904a6dadeabd7b725caf08c750b3d2e" category="summary">您可以使用以下方式安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。此过程适用于Trident所需的容器镜像存储在私有镜像仓库或非私有镜像仓库中的安装。</block>
  <block id="3d289dfc040026f9fd5fd0d307821b6c" category="doc">使用 tridentctl 安装</block>
  <block id="bbe2bfefd5797bb567e3da92f68ce8d1" category="inline-link-macro">自定义 tridentctl 部署</block>
  <block id="10ccc4c39e10c8cfa195e969ad74df78" category="paragraph">您可以使用以下方式安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。此过程适用于Trident所需的容器镜像存储在私有镜像仓库或非私有镜像仓库中的安装。自定义您的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>部署，请参阅<block ref="8e7a26c9800a78fa0b68fb2423ba3fb4" category="inline-link-macro-rx"></block>。</block>
  <block id="2122a8acb599837078e6b76436e892c4" category="list-text">Trident现已支持 Kubernetes 1.27。在升级 Kubernetes 之前先升级Trident 。</block>
  <block id="a44928a927e3a51b044bf23f54c5ecc1" category="section-title">使用以下方式安装Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="380dea89244939b33f7066f0dfbafa8b" category="paragraph">Trident安装程序包会创建一个Trident pod，配置用于维护其状态的 CRD 对象，并初始化 CSI sidecar 以执行诸如将卷配置并附加到集群主机之类的操作。从以下位置下载并解压最新版本的Trident安装程序<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block>。请使用您选择的Trident版本更新示例中的 _&lt;trident-installer-XX.XX.X.tar.gz&gt;_。</block>
  <block id="9937b0e906f4a701bfb0a7f52c8b7458" category="section-title">步骤 2：安装Trident</block>
  <block id="aab75b58977502d2c2813069d908ad61" category="paragraph">通过执行以下命令在所需的命名空间中安装Trident：<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block>命令。您可以添加其他参数来指定镜像仓库位置。</block>
  <block id="53c512e9599c71e1a585d636a5229820" category="open-title">标准模式</block>
  <block id="ca5380881d4e3b38f359d5d05acd6163" category="paragraph">您的安装状态应该类似于这样。</block>
  <block id="c5e8fc3926c956e64487a70aa036ec8c" category="paragraph">您可以使用 pod 创建状态或 pod 创建状态来验证您的安装。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="5ba19178fb1b2111306714e923b35945" category="inline-link-macro">开启调试模式</block>
  <block id="43e7d51a6323aabe7af3d192e157f5ed" category="admonition">如果安装程序未能成功完成或<block ref="ce3abad3e11d6a43c5178e20a0c7d64b" prefix=" " category="inline-code"></block> <block ref="2903817a25b5de1e17a06122d71c5cf9" prefix="(" category="inline-code"></block>在 23.01 之前的版本中）没有 *Running* 状态，表示该平台未安装。使用<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix=" " category="inline-code"></block>到<block ref="82f062b46969132d4baf9d002395a676" category="inline-link-macro-rx"></block>并排查问题。</block>
  <block id="d01f9020330072ac03affe8ff09d74c1" category="paragraph">以下示例提供了使用Trident安装的示例配置。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="d5999fd61d148b96e54f154a54ffead5" category="example-title">Windows 节点</block>
  <block id="f19a63197b0bddc429409fc31e0f0028" category="paragraph">要使Trident能够在 Windows 节点上运行：</block>
  <block id="ecb7d1d46da3859c69f45b619ace746a" category="example-title">强制分离</block>
  <block id="c5b5b00ff1b3a892c8694ab932cbf9ca" category="paragraph">有关强制分离的更多信息，请参阅<block ref="63cac71755fb6ef1f1fea34cf4037121" category="inline-link-macro-rx"></block>。</block>
  <block id="efb39fa310a7096844b88691811796ed" category="example-title">启用并发Trident控制器操作</block>
  <block id="e6bd8d0922b2f21a4aea7439cad54ba6" category="paragraph">为了实现并发的Trident控制器操作以提高吞吐量，请添加<block ref="663f61c1cf47f8a531c8d769e8bf59f4" prefix=" " category="inline-code"></block>安装过程中可选择此选项，如本示例所示。</block>
  <block id="16f386086a2ad7537b5e373f9c0c2d25" category="summary">您可以使用Trident操作符（手动或使用 Helm）安装Trident ，或者使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供重要信息，帮助您选择合适的安装流程。</block>
  <block id="3673a00b7dc94dd4c41d2410acd2fd30" category="paragraph">为了确保Trident能够安装在各种不同的环境和组织中， NetApp提供了多种安装选项。您可以使用Trident操作符（手动或使用 Helm）安装Trident ，或者使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。本主题提供重要信息，帮助您选择合适的安装流程。</block>
  <block id="ef911ad0da9f5477ca7ec7af0ba4181a" category="paragraph">无论采用何种安装路径，您都必须具备以下条件：</block>
  <block id="3f2851ece89063ca1615062ac2117a4e" category="list-text">对运行受支持版本的 Kubernetes 且已启用功能要求的受支持 Kubernetes 集群拥有完全权限。回顾<block ref="3675fd04b78685cacd6e23511ab11d10" category="inline-link-macro-rx"></block>了解详情。</block>
  <block id="071d9becf308917b53d70c09e7da51b6" category="list-text">可访问受支持的NetApp存储系统。</block>
  <block id="19eb712f406fc64109f96d9cf4055cb9" category="list-text">能够从所有 Kubernetes 工作节点挂载卷。</block>
  <block id="5f35b91e200cda68bf700d65b89c2c73" category="list-text">一台带有 Linux 主机的<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>（或者<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>如果您使用的是 OpenShift，则需要安装并配置 OpenShift 来管理您要使用的 Kubernetes 集群。</block>
  <block id="f6f19569d16b2b36f137e3df3e315626" category="list-text">这<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>设置环境变量以指向您的 Kubernetes 集群配置。</block>
  <block id="dd3de2609b612d76ef4c71b97b8d6100" category="inline-link">按照以下步骤启用 CLI 访问</block>
  <block id="c585967fa32d82c5e3c24bd63926c6a0" category="list-text">如果您正在将 Kubernetes 与 Docker Enterprise 一起使用，<block ref="57562caf1c76e1a261b7e2f8c3d113f9" category="inline-link-rx"></block> 。</block>
  <block id="8ded34c5caad3971bb6d0a2b202d7b32" category="list-text">集群必须支持特权工作负载。</block>
  <block id="4a052772dca278b7be31d54ca9f21831" category="inline-link-macro">基本概念</block>
  <block id="a0c3ccd8e55dd8a4f5f5ad3a5269e331" category="admonition">如果您还不熟悉……<block ref="13aad4b6f98e790ff55e578921fa5ede" category="inline-link-macro-rx"></block>现在正是做这件事的好时机。</block>
  <block id="a24b4ef46f44c1b54b99e62f49bef9af" category="section-title">选择您的安装方式</block>
  <block id="dcb987a2d08ee1a9198d1183b1a63a96" category="inline-link-macro">方法之间的转换</block>
  <block id="e11c9248bc5d43c6663f67955adbc53b" category="paragraph">选择适合您的安装方式。您还应该考虑以下因素：<block ref="e6ce874bf5f421a383109cc222a74763" category="inline-link-macro-rx"></block>在做出决定之前。</block>
  <block id="bd1cc9ebdb33ed22a54815219f97af08" category="section-title">使用Trident运算符</block>
  <block id="b2ad529645b5bea51c4bcd516a5c5c8f" category="inline-link-macro">自定义您的Trident操作员部署</block>
  <block id="4561600b99ad801aedaa0ed3d3f3d7dd" category="paragraph">无论是手动部署还是使用 Helm， Trident operator 都是简化安装和动态管理Trident资源的绝佳方式。你甚至可以<block ref="5290e5312b651716bedf8a83ec5a6467" category="inline-link-macro-rx"></block>使用属性<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源（CR）。</block>
  <block id="9d2c1d92b0ecb606394b40e3553d07d2" category="paragraph">使用Trident运算符的优点包括：</block>
  <block id="4c4c1456097b6c9eca1c708465c381be" category="example-title">&lt;strong&gt;创建Trident对象&lt;/strong&gt;</block>
  <block id="9bb09894435f05fa667865ab4c45ace7" category="paragraph">Trident操作符会自动为您的 Kubernetes 版本创建以下对象。</block>
  <block id="839be275cd4b0f32a2c3e0278ce6d568" category="list-text">操作员的服务帐户</block>
  <block id="f330ead337ce41659c5526de118cdac3" category="list-text">集群角色和集群角色绑定到服务帐户</block>
  <block id="02c7e9dd319d7284e2200c673387dfdc" category="list-text">专用 PodSecurityPolicy（适用于 Kubernetes 1.25 及更早版本）</block>
  <block id="dbbf8c6ec95775d28c3c6da1878bf8c3" category="list-text">操作员本身</block>
  <block id="7b0d9f7412b27b7678fe3c1e9ecd655d" category="example-title">资源问责制</block>
  <block id="fd326d5b24197ffa86d97a4a14cb4f74" category="paragraph">集群范围的Trident操作符管理与集群级别的Trident安装相关的资源。这样可以减轻使用命名空间作用域的操作符维护集群作用域资源时可能出现的错误。这对于自我修复和修补至关重要。</block>
  <block id="504dabdcc3051fc4c1b7a92eb22fad82" category="example-title">&lt;strong&gt;自愈能力&lt;/strong&gt;</block>
  <block id="971121cd3f2006d8d765f6943be3667d" category="paragraph">操作员监控Trident安装情况，并积极采取措施解决问题，例如部署被删除或意外修改时。一个<block ref="6088362e783ede60a64ba91287dc58c1" prefix=" " category="inline-code"></block>创建一个与以下对象关联的 pod：<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block> CR 安装了Trident系统。这样可以确保集群中只有一个Trident实例，并控制其设置，从而确保安装是幂等的。当对安装进行更改时（例如，删除部署或节点守护进程集），操作员会识别这些更改并逐个修复它们。</block>
  <block id="0bfe7abd2878a67d5ff26746df309f8c" category="example-title">&lt;strong&gt;轻松更新现有安装&lt;/strong&gt;</block>
  <block id="cbbeebc91e4ea4f1960f7a74b5b14c23" category="paragraph">您可以使用操作符轻松更新现有部署。你只需要编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR 对安装进行更新。</block>
  <block id="2bd0a347fcdd1f32b2c47512a0f234b5" category="paragraph">例如，假设您需要启用Trident来生成调试日志。为此，请修补您的<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>设置<block ref="8cddd364bfd0d68f21e3a9ba1123b849" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>：</block>
  <block id="33ab2c3f94452baf7f17dab03982edfb" category="paragraph">后<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>更新完成后，操作员会处理更新并修补现有安装。这可能会触发创建新的 pod，以便相应地修改安装。</block>
  <block id="ac0482b416d6b2d907db760f79e018a7" category="example-title">&lt;strong&gt;全新安装&lt;/strong&gt;</block>
  <block id="fac5e433885256c138db519bfb7d9c8b" category="paragraph">集群范围的Trident操作符能够干净利落地移除集群范围的资源。用户可以完全卸载Trident ，并轻松重新安装。</block>
  <block id="f72ba1a3a498489a96fd8774bfa9ea9d" category="example-title">&lt;strong&gt;Kubernetes 自动升级处理&lt;/strong&gt;</block>
  <block id="2b926612abdd76af2a073b5894f76c21" category="paragraph">当集群的 Kubernetes 版本升级到受支持的版本时，操作员会自动更新现有的Trident安装，并对其进行更改，以确保其满足 Kubernetes 版本的要求。</block>
  <block id="47a11daa7ba65ffd7ce5a63a596b662f" category="admonition">如果集群升级到不受支持的版本，操作员将阻止安装Trident。如果Trident已随 Operator 一起安装，则会显示警告，指示Trident安装在不受支持的 Kubernetes 版本上。</block>
  <block id="43e6c0a141c1737a96917c56c7e22a73" category="inline-link-macro">使用以下代码安装：&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;</block>
  <block id="c82b4b0fab3872638ac3c7cebf4e6354" category="paragraph">如果您有需要升级的现有部署，或者您希望高度定制部署，则应考虑以下事项：<block ref="e214bf159dbaf6573cfe15f1373b92db" category="inline-link-macro-rx"></block> 。这是部署Trident的常规方法。</block>
  <block id="4c24a3b9facf2ea9fc7ed2ca52dab45d" category="inline-link-macro">自定义您的&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt; 安装</block>
  <block id="2a756f07c39d09b80ec682e46071340c" category="paragraph">你可以<block ref="d16089dfa270d6679e80d43ec8b5c378" category="inline-link-macro-rx"></block>生成Trident资源的清单。这包括Trident在安装过程中创建的部署、守护进程集、服务帐户和集群角色。</block>
  <block id="726ba10e7d6fe535f2d9336e7321a0d0" category="admonition">从 22.04 版本开始，每次安装Trident时将不再重新生成 AES 密钥。通过此次发布， Trident将安装一个新的密钥对象，该对象会在不同的安装版本中持久存在。这意味着，<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 22.04 版本可以卸载以前版本的Trident，但更早的版本无法卸载 22.04 版本的安装。选择合适的安装方法。</block>
  <block id="84721e18f913ae71c91ded91f5eb0ccc" category="section-title">选择您的安装模式</block>
  <block id="ecafb217c7f4e740b9f654a4f2d90d83" category="paragraph">根据贵组织所需的_安装模式_（标准、离线或远程）确定部署流程。</block>
  <block id="e0090e5eeb1da23a2924e8a8913a9bf8" category="open-title">标准安装</block>
  <block id="551b274494ab1b09b1dc86a5a0c18783" category="paragraph">这是安装Trident的最简单方法，适用于大多数没有网络限制的环境。标准安装模式使用默认注册表来存储所需的Trident。<block ref="0b505db73d92bac18356fa3feb3cf7e3" prefix="(" category="inline-code"></block> ）和 CSI<block ref="95d6355f896a633ab07c528c03b44c8e" prefix="(" category="inline-code"></block>图片。</block>
  <block id="2c5f46571f2892ffdec449b4fe136e81" category="paragraph">使用标准模式时， Trident安装程序：</block>
  <block id="ca02732ace7c24d10b82abb835861fa8" category="list-text">从互联网获取容器图像</block>
  <block id="987eeee7473b18ea803953637bdfad2e" category="list-text">创建一个部署或节点守护进程集，该守护进程集会在 Kubernetes 集群中所有符合条件的节点上启动Trident Pod。</block>
  <block id="6c09f957f6dd5f1b3287dacfabe8711a" category="open-title">离线安装</block>
  <block id="559e73031b36e6693dcd5724b5ec9488" category="paragraph">在与外界完全隔离或安全的位置，可能需要离线安装模式。在这种情况下，您可以创建一个私有镜像注册表或两个镜像注册表来存储所需的Trident和 CSI 映像。</block>
  <block id="37f28a5a50507d5cf12665008632572f" category="admonition">无论你的注册表配置如何，CSI 镜像都必须位于同一个注册表中。</block>
  <block id="8e9a94c9655a1b4aac478f836ff8dde6" category="open-title">远程安装</block>
  <block id="3937570b6000a2f24b3066af230f4546" category="paragraph">以下是远程安装过程的概要：</block>
  <block id="c784203bd2d02288d50564d90224ed01" category="list-text">部署适当版本的<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>在您要部署Trident 的远程计算机上。</block>
  <block id="02ed10abbc71334918b1acb54df6e3f3" category="list-text">从 Kubernetes 集群复制配置文件并进行设置<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>远程计算机上的环境变量。</block>
  <block id="da693b77cde91654c6296abe8f901988" category="list-text">发起<block ref="1513e62b9eb7bbfc46c1be1a91a2ab76" prefix=" " category="inline-code"></block>使用命令验证您是否可以连接到所需的 Kubernetes 集群。</block>
  <block id="df65ec31c6f96e95301e3c6ff8863335" category="list-text">使用标准安装步骤，从远程计算机完成部署。</block>
  <block id="8be61d7ba452354892142828445281d0" category="section-title">根据您的方法和模式选择流程</block>
  <block id="667af34faf4c2e74b377bbe7608ca481" category="paragraph">做出决定后，选择合适的流程。</block>
  <block id="4c3880bb027f159e801041b1021e88e8" category="cell">方法</block>
  <block id="f8a17e31b9d98082aa01aa0b41f63a01" category="cell">安装方式</block>
  <block id="e633d636fff46ea0b0998da525b2fba2" category="cell">Trident操作员（手动）</block>
  <block id="8f923c676fa6a52b7729476fc0d5f245" category="paragraph"><block ref="8f923c676fa6a52b7729476fc0d5f245" category="inline-link-macro-rx"></block></block>
  <block id="d295bad40364c9511c0d7b6a18e9557b" category="paragraph"><block ref="d295bad40364c9511c0d7b6a18e9557b" category="inline-link-macro-rx"></block></block>
  <block id="b9267203f04d91a5fcda0041ad2b3b64" category="cell">Trident操作员（Helm）</block>
  <block id="c197c2a4864a9d7a8190b1988d1e5885" category="paragraph"><block ref="c197c2a4864a9d7a8190b1988d1e5885" category="inline-link-macro-rx"></block></block>
  <block id="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="paragraph"><block ref="8dc52e4e0ca84a69e954b9b7a21c2bfc" category="inline-link-macro-rx"></block></block>
  <block id="0b9d702360fb60f9b8b477339ca03a7b" category="cell"><block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="" category="inline-code"></block></block>
  <block id="be686de0390e44f3981b994e059dfcb7" category="inline-link-macro">标准安装或离线安装</block>
  <block id="9e244fc5020d1137289c0c34c2944ac4" category="paragraph"><block ref="9e244fc5020d1137289c0c34c2944ac4" category="inline-link-macro-rx"></block></block>
  <block id="dd341f866eaefb939dc86608773c909d" category="section-title">安装方法之间的转换</block>
  <block id="84dfae02381a00cf11d01c571e3e3e0f" category="paragraph">您可以自行决定更改安装方法。在此之前，请考虑以下事项：</block>
  <block id="47bc0a3097919fdad65f139b6d69a9ff" category="list-text">安装和卸载Trident时，务必使用相同的方法。如果您已经部署了<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>你应该使用适当版本的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>用于卸载Trident 的二进制文件。同样，如果您使用操作员进行部署，则应该编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR 和设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>卸载Trident。</block>
  <block id="e1c3faef9fedf771266b88670b01c96e" category="list-text">如果您有一个基于操作员的部署，想要将其移除并改用其他方式，请尝试以下方法：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>要部署Trident，您应该首先进行编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并设置<block ref="f41a95848a012f4f1a6550ce79c588aa" prefix=" " category="inline-code"></block>卸载Trident。然后删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>以及操作员部署。然后您可以使用以下方式进行安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="44a97f581d6467983edc4e5900722f32" category="list-text">如果您有一个基于手动操作员的部署，并且想要使用基于 Helm 的Trident操作员部署，则应先手动卸载操作员，然后执行 Helm 安装。这使得 Helm 能够使用所需的标签和注释来部署Trident操作符。如果不这样做，基于 Helm 的Trident操作员部署将因标签验证错误和注释验证错误而失败。</block>
  <block id="96fa331785e435bbddfc7f404fa5ce84" category="list-text">如果你有一个<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>基于 Helm 的部署，您可以执行基于 Helm 或基于 Operator 的部署，而无需卸载Trident。</block>
  <block id="25c11af81bf0b01ce7b0f24ddc9f7136" category="section-title">其他已知配置选项</block>
  <block id="f2019abfb2d31501ffeb653190c776c7" category="paragraph">在 VMware Tanzu Portfolio 产品上安装Trident时：</block>
  <block id="dbe38f4f0d856b41827e6e4531720a5e" category="list-text">这<block ref="4009da7ed740211f32d29441deab875e" prefix=" " category="inline-code"></block>应该将标志设置为 kubelet 目录的位置。默认情况下，这是<block ref="a926643d94a7dbc3362b17c2ed8a3f12" prefix=" " category="inline-code"></block>。</block>
  <block id="4dc3529fbf05312075f0aa52f9c0908e" category="paragraph">使用以下方式指定 kubelet 位置<block ref="4009da7ed740211f32d29441deab875e" prefix=" " category="inline-code"></block>据悉，他曾为Trident Operator、Helm 等公司工作。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>部署。</block>
  <block id="6935ea1d99a0c26f0e4cddb80f444849" category="summary">如果您使用 Red Hat OpenShift，则可以使用操作员安装Trident 。</block>
  <block id="c282cc9924716a0ecdcc1864c8821950" category="doc">从Trident社区操作员切换到 OpenShift 认证操作员</block>
  <block id="92da9bfce4b6635fcf5d3f3725accbbc" category="paragraph">要从NetApp Community Trident Operator 切换到 Red Hat OpenShift Certified Trident Operator，您需要卸载社区版 Operator，然后使用 OperatorHub 安装认证版 Operator。</block>
  <block id="cec1c482e499b4748371d5e19359dacd" category="inline-link-macro">为Trident安装准备环境</block>
  <block id="9f965f02f635b760a84c43d43aba854f" category="paragraph">在开始安装之前，<block ref="a24ee29cd883cbf52de58a68b0fed1a7" category="inline-link-macro-rx"></block> 。</block>
  <block id="82c3da1e712e572f424c3b7bf7dafcaf" category="section-title">卸载NetApp Trident社区操作员</block>
  <block id="ae76609b28371ddbc9f46be837040994" category="list-text">使用 OpenShift 控制台导航至 OperatorHub。</block>
  <block id="349838fb1d851d3e2014b9fe39203275" category="image-alt">安装</block>
  <block id="2d8d10c295f87a1f17d2f37a4df9688d" category="list-text">找到NetApp Trident社区操作员。</block>
  <block id="e1b3a07c6ba67335c1564ff539f1f885" category="admonition">不要选择“从该运算符中删除所有操作数实例”。</block>
  <block id="615da270425b5ecb4fe6ddeed9358880" category="list-text">点击“卸载”。</block>
  <block id="c7afcce8432c7e249a80e803d2a81180" category="section-title">安装 OpenShift 认证的 Operator</block>
  <block id="6eaf33f9c2387a07f89fc20e19acffaa" category="list-text">导航至 Red Hat OperatorHub。</block>
  <block id="cccebca328e4674a8888d5dc22f61e0d" category="list-text">搜索并选择NetApp Trident Operator。</block>
  <block id="9872de8cf3e5ac67cae81e5c17eaa5cc" category="list-text">按照屏幕上的指示安装操作员。</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="section-title">验证</block>
  <block id="ba8b537f098a607b7119fc78961300eb" category="list-text">在控制台中检查 OperatorHub，以确保新认证的操作员已成功安装。</block>
  <block id="838483eae18a7bca44c25a90dc7f55c3" category="doc">使用 OpenShift OperatorHub 安装Trident</block>
  <block id="d569da5fb14cad502f71e232cdfcb4e4" category="paragraph">如果您使用 Red Hat OpenShift，则可以使用 Red Hat 认证的操作员安装NetApp Trident 。使用以下步骤从 Red Hat OpenShift 容器平台安装Trident 。</block>
  <block id="516a493e6df274ac5512ffaab7234ebf" category="section-title">找到并安装Trident操作符</block>
  <block id="7a200e69eab0d67b215ea6e3c6081797" category="list-text">导航至 OpenShift OperatorHub 并搜索NetApp Trident。</block>
  <block id="70fec01f1a76dbea74bd12ad8fb20151" category="list-text">单击* NetApp Trident* 打开安装设置。</block>
  <block id="1ad8c45e73d79fb1d5606c962d0f3cda" category="list-text">选择所需的选项，然后单击“*安装*”以打开操作员配置。</block>
  <block id="3bcd8afe0d2e66ac8ee08b64d8ab5aa9" category="admonition">确保选择最新的 Operator 版本。</block>
  <block id="e1834934410991eaa116cd9cffd2e554" category="list-text">保留所有参数，然后单击“*安装*”。</block>
  <block id="a1e30a9991b9e8abb01ef39a2da53ae9" category="paragraph">安装完成后，Operator 将显示在已安装的 Operator 列表中并可供使用。</block>
  <block id="8b29df4adf6fbbaec0828beed4564d1b" category="list-text">单击“查看操作员”可查看操作员的详细信息。</block>
  <block id="7c7ed74fe0c2134a4029358fd7840eaa" category="list-text">在 * Trident Orchestrator* 下，单击 *创建实例*。</block>
  <block id="7b61a3bcc8bbd41470bf0de7fcfd839e" category="list-text">单击“YAML 视图”并将以下内容粘贴到表单中：</block>
  <block id="9152cfa618e086866a5af7caaed0d2bd" category="list-text">Red Hat Enterprise Linux CoreOS (RHCOS) 未启用和配置 iSCSI。</block>
  <block id="5df2f935f2bc3df2c6378f665b3d6659" category="list-text">您可以添加<block ref="e9a7558decb5e432d8b7c4d536cc9876" prefix=" " category="inline-code"></block>用于配置和启用所有 OpenShift 工作节点上的 iSCSI 和 Multipath 服务的参数。</block>
  <block id="f61306bfa8c6de676059739358d4479f" category="list-text">单击“创建”； Trident Orchestrator 将完全安装。</block>
  <block id="7f95b6a9d45bd5ee11107a5abb5dd69c" category="section-title">卸载Trident操作员</block>
  <block id="9838ab5306db947832d94d1cd49a486a" category="list-text">从已安装的操作符列表中选择Trident操作符。</block>
  <block id="b5a7424a278ddd01fa4e381b58d1e00d" category="list-text">请选择是否要从运算符中删除所有操作数实例。</block>
  <block id="28ed84868f638999e59e306d6b87b07c" category="admonition">如果您不选中“从该运算符中删除所有操作数实例”复选框，则不会卸载Trident 。</block>
  <block id="afe272beb780ad53d441c342bf1c8c77" category="summary">了解更多关于 tridentctl 的信息，这是一个命令行实用程序，可提供对Trident 的简单访问。</block>
  <block id="f13f0f6bb53cad2be972536943806066" category="doc">使用 tridentctl 管理Trident</block>
  <block id="7358b1fd077fa65f88fff87888fd2547" category="inline-link">Trident安装包</block>
  <block id="aace960e27eac9490c7c162553e42f7f" category="paragraph">这<block ref="5a856e83aada9750fe5389f8da94335b" category="inline-link-rx"></block>包括<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>用于提供对Trident 的简单访问的命令行实用程序。拥有足够权限的 Kubernetes 用户可以使用它来安装Trident或管理包含Trident pod 的命名空间。</block>
  <block id="497769c5c03818fffe81b6190ec47c82" category="section-title">命令和全局标志</block>
  <block id="66fa8a46aff90f5c8507c33a1cdc3e3f" category="paragraph">你可以运行<block ref="d7948c15bebd1e81a58fa7c99888c9c6" prefix=" " category="inline-code"></block>获取可用命令列表<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>或附加<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>向任何命令添加标志，即可获取该特定命令的选项和标志列表。</block>
  <block id="ee4805b45f3a791791c675c82c73c1b6" category="paragraph"><block ref="081bcd7924bd528b9799fd1b1389158c" prefix="" category="inline-code"></block></block>
  <block id="be99e89b73ca0fc3198af4f4649e5134" category="paragraph">Trident<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>该实用程序支持以下命令和全局标志。</block>
  <block id="c441ee50c88f6e5e3a7c69fc69dad8b8" category="example-title">命令</block>
  <block id="e49cf31f5ed35f0eb694c7714e8c3234" category="list-text"><block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix="" category="inline-code"></block></block>
  <block id="a0ac16c3fbcfa888fa59e67b5463167b" category="list-text">向Trident添加资源。</block>
  <block id="3649b15e31d22a1e2210f014d843b9fa" category="list-text"><block ref="099af53f601532dbd31e0ea99ffdeb64" prefix="" category="inline-code"></block></block>
  <block id="2f9b5be603774ecb9636b484d457359e" category="list-text">从Trident中移除一个或多个资源。</block>
  <block id="a4027ed0f56ae6ac2cbb7605a519932b" category="list-text"><block ref="b5eda0a74558a342cf659187f06f746f" prefix="" category="inline-code"></block></block>
  <block id="6635cd89ace7391965bccedd81e35cb6" category="list-text">从Trident获取一项或多项资源。</block>
  <block id="c6a354ad100a80a11b5358549fa08956" category="list-text"><block ref="657f8b8da628ef83cf69101b6817150a" prefix="" category="inline-code"></block></block>
  <block id="b6886cb9d8320f0522485af2d7b5e732" category="list-text">关于任何命令的帮助。</block>
  <block id="7920cf9e1a990d156e390321c1d5efeb" category="list-text"><block ref="59b514174bffe4ae402b3d63aad79fe0" prefix="" category="inline-code"></block></block>
  <block id="926631c8cfb777fe0db4134e51613ead" category="list-text">打印一份Trident所需容器图像的表格。</block>
  <block id="99ff05be0d0e797b4814ab264d1555b7" category="list-text"><block ref="93473a7344419b15c4219cc2b6c64c6f" prefix="" category="inline-code"></block></block>
  <block id="bb596d4d22f7a33ee0d2a24060a763ec" category="list-text">将现有资源导入Trident。</block>
  <block id="cc27cfd3259c2299d8dece590d5f6985" category="list-text"><block ref="19ad89bc3e3c9d7ef68b89523eff1987" prefix="" category="inline-code"></block></block>
  <block id="27b4c36cae8d1c4fd515d289942c87cc" category="list-text">安装Trident。</block>
  <block id="2acfb4ba14a6f33d7e82e8d1dda6542f" category="list-text"><block ref="2165e4fa5bddb65a31f6a0c495c2fa37" prefix="" category="inline-code"></block></block>
  <block id="257fa8c5a4a1749d97d717fe4e1215ea" category="list-text">打印Trident的日志。</block>
  <block id="9ce837bc2492d4ed390bc5d1ea9d1437" category="list-text"><block ref="2541d938b0a58946090d7abdde0d3890" prefix="" category="inline-code"></block></block>
  <block id="2124524b5b56338967984edc522a8671" category="list-text">从Trident发送资源。</block>
  <block id="806cf5654c2458b177e5c7daa3c09f48" category="list-text">卸载Trident。</block>
  <block id="30cf71e674825d319eb0406032c1a80b" category="list-text"><block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix="" category="inline-code"></block></block>
  <block id="28c0034c10c257670255526657e62d93" category="list-text">在Trident中修改资源。</block>
  <block id="1f46b6519384cf9cc5d7893457ab6e9c" category="list-text"><block ref="2424c0d4857ddcc30f1aabda7294d84f" prefix="" category="inline-code"></block></block>
  <block id="92cde4054a93fe29af6357539b327494" category="list-text">暂时停止后端运行。</block>
  <block id="238000b5c5df1cc446f5ba823c01807c" category="list-text"><block ref="ae26b3d8e556703291282149e3ae894f" prefix="" category="inline-code"></block></block>
  <block id="852e24eece7824454b8f5c79668a07bb" category="list-text">在Trident中升级资源。</block>
  <block id="70e5b412fc117fa7faec13d3e8be6421" category="list-text">打印Trident版本。</block>
  <block id="12d9bb0959755423ba2fc4a4d349ee90" category="example-title">全局标志</block>
  <block id="a54f86a6d882e5b4c1560087bb3d23fe" category="list-text"><block ref="9b017020b9d48d433ec90c548e6b5c70" prefix="" category="inline-code"></block>，<block ref="b47e5fb843a641159b90a001a614119c" prefix=" " category="inline-code"></block></block>
  <block id="f984c283566ffcc330d2055e568c2bc4" category="list-text">调试输出。</block>
  <block id="aa8575d70709b06761f70e7aa773dccd" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block></block>
  <block id="cbaa0d88e3069707dc20abca170c009e" category="list-text">帮助<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="301f920ee13f1cef29f1c14dacf94c4b" category="list-text"><block ref="ff2bddd61609f26dc3255408781890ad" prefix="" category="inline-code"></block>，<block ref="a4b374188b5bbba3f37deccc51421bd4" prefix=" " category="inline-code"></block></block>
  <block id="4927d7c110c03787d6a128bc5245a451" category="list-text">指定<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>本地运行命令或从一个 Kubernetes 集群向另一个 Kubernetes 集群运行命令的路径。</block>
  <block id="9858b15df593f3960e8b74b5eb680bf0" category="admonition">或者，您可以导出<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>变量指向特定的 Kubernetes 集群并提出问题<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>向该集群发出命令。</block>
  <block id="6e25615e543a74d4a5ea9c21cda4b604" category="list-text"><block ref="9cefd96d40d0ee1256c8eff1def0312d" prefix="" category="inline-code"></block>，<block ref="3be3a69890f8609a06ed69c980bdf3ed" prefix=" " category="inline-code"></block></block>
  <block id="0680c12a98c31009064ca561bf02c7f8" category="list-text">Trident部署的命名空间。</block>
  <block id="e9fe902fae54aee02c0226a1cd4ef93e" category="list-text"><block ref="b2ed43620b7fff2689035f1e99c24ded" prefix="" category="inline-code"></block>，<block ref="fde021f6d95feede78ab3d390365d552" prefix=" " category="inline-code"></block></block>
  <block id="fc070ca332d823236f678c78abc58ee2" category="list-text">输出格式。  json|yaml|name|wide|ps（默认）之一。</block>
  <block id="51b3c65bb68baeb2ef94eb128afdc270" category="list-text"><block ref="406381251d2d4637ebfac7f24cc49c6f" prefix="" category="inline-code"></block>，<block ref="b59778b847581570efb244355a6aa704" prefix=" " category="inline-code"></block></block>
  <block id="d56fa7a9770a5e6333220363051532ac" category="list-text">Trident REST接口的地址/端口。</block>
  <block id="433f174b6e54b889696b2efd4ef40dc6" category="admonition">Trident REST 接口可以配置为仅监听和提供服务于 127.0.0.1（对于 IPv4）或 [::1]（对于 IPv6）。</block>
  <block id="1c36a7e67198ff73665408726652a4c3" category="section-title">命令选项和标志</block>
  <block id="76ea0bebb3c22822b4f0dd9c9fd021c5" category="section-title">create</block>
  <block id="592f5a846f45840ff17ae3fcbb5f2d26" category="paragraph">使用<block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix=" " category="inline-code"></block>向Trident添加资源的命令。</block>
  <block id="1183069eacde609c309c6652f2abbc57" category="paragraph"><block ref="4bf60056ad290949d881334e46fe9fc1" prefix="" category="inline-code"></block></block>
  <block id="dae8ace18bdcbcc6ae5aece263e14fe8" category="list-text">选项</block>
  <block id="71f8a14d1d2aabce6854ce9de9e4de40" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>为Trident添加后端。</block>
  <block id="099af53f601532dbd31e0ea99ffdeb64" category="section-title">删除</block>
  <block id="03c6dd1ba84a83f2cd07f340b6806c09" category="paragraph">使用<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>从Trident中移除一个或多个资源的命令。</block>
  <block id="28b6c04534d74299209efef5ba8ed0e0" category="paragraph"><block ref="f8e353bd7af0b2adee08bd2cfca86ee4" prefix="" category="inline-code"></block></block>
  <block id="21ee8d29d964bb9b13a0c41d9602ae94" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>从Trident中删除一个或多个存储后端。<block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>从Trident中删除一个或多个卷快照。<block ref="0606cab8952ca875c43a0e15b35aab7c" prefix=" " category="inline-code"></block>从Trident中删除一个或多个存储类。<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>从Trident中删除一个或多个存储卷。</block>
  <block id="b5eda0a74558a342cf659187f06f746f" category="section-title">得到</block>
  <block id="e558124864c80bb4cb3afd12ca94d6a3" category="paragraph">使用<block ref="b5eda0a74558a342cf659187f06f746f" prefix=" " category="inline-code"></block>从Trident获取一个或多个资源的命令。</block>
  <block id="3880097e6e3ace364060bd1a3502034a" category="paragraph"><block ref="5af35d698576fbd6e910714628ae9a91" prefix="" category="inline-code"></block></block>
  <block id="d4f3a31079f902b3ab789d35c645a783" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>从Trident获取一个或多个存储后端。<block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>从Trident获取一个或多个快照。<block ref="0606cab8952ca875c43a0e15b35aab7c" prefix=" " category="inline-code"></block>从Trident获取一个或多个存储类。<block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix=" " category="inline-code"></block>从Trident获取一卷或多卷。</block>
  <block id="4ea7801f17a4e5485e8b050c052fb443" category="list-text">旗帜</block>
  <block id="fbb9ff314555260bd6ce75e7fefe007a" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block> ：有关卷的帮助。<block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix=" " category="inline-code"></block> ：将查询限制在子源卷上。<block ref="aed2a4a749284f757648f1057abf44cd" prefix=" " category="inline-code"></block> ：将查询限制在卷的下级。</block>
  <block id="59b514174bffe4ae402b3d63aad79fe0" category="section-title">图片</block>
  <block id="2d7cc984025c13a373fe75153203182f" category="paragraph">使用<block ref="59b514174bffe4ae402b3d63aad79fe0" prefix=" " category="inline-code"></block>用于打印Trident所需容器图像表格的标志。</block>
  <block id="15e57263073fbab8a5c17df2199514fa" category="paragraph"><block ref="1a4565f84c3ef7acc3e88c3af0bf4b12" prefix="" category="inline-code"></block></block>
  <block id="8373216d773ee6fe75393fa84e1e92c6" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>图片帮助。<block ref="47fa03ef5536c5573b137cec5adc2d39" prefix=" " category="inline-code"></block> ，<block ref="afb81ccdb6e6d78674d516ee32b89981" prefix=" " category="inline-code"></block> Kubernetes 集群的语义版本。</block>
  <block id="f6c534966bc7687e0c87134d025f8837" category="section-title">进口量</block>
  <block id="713e63397727c946dac8452e705917bd" category="paragraph">使用<block ref="f6c534966bc7687e0c87134d025f8837" prefix=" " category="inline-code"></block>将现有卷导入Trident 的命令。</block>
  <block id="7627836f99f91110fe4d92a0cf45f490" category="paragraph"><block ref="9fe05f98df27b42476862d09511bd0d7" prefix="" category="inline-code"></block></block>
  <block id="9ab81f57823f6aeb02362291f23883e6" category="list-text">别名</block>
  <block id="501eadc7c3c034b710e1a4d2a417bbce" category="list-text"><block ref="210ab9e731c9c36c2c38db15c28a8d1c" prefix="" category="inline-code"></block>，<block ref="9e3669d19b675bd57058fd4664205d2a" prefix=" " category="inline-code"></block></block>
  <block id="346218c412dda8bcf2f8fc06030abee5" category="list-text"><block ref="5338b151154663bac9980b0f044518f2" prefix="" category="inline-code"></block>，<block ref="33781a1644c3eb60bb229660536cb79b" prefix=" " category="inline-code"></block> ：YAML 或 JSON PVC 文件的路径。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block> ，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block> ：音量帮助。<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>仅创建 PV/PVC。不要想当然地认为存在销量生命周期管理。</block>
  <block id="19ad89bc3e3c9d7ef68b89523eff1987" category="section-title">安装</block>
  <block id="cc674f0e0cd8c84b97f0fa6a907c1a9c" category="paragraph">使用<block ref="19ad89bc3e3c9d7ef68b89523eff1987" prefix=" " category="inline-code"></block>安装Trident 的标志。</block>
  <block id="1adc393db1e6b77c875ecd4c669772ec" category="paragraph"><block ref="190ae106b0b18c5bb8b5f3bdc39dacb9" prefix="" category="inline-code"></block></block>
  <block id="a8e3858ca6cf43d168887f0054576cb6" category="list-text"><block ref="88e6af50844241df09da1b4f0fed0dc1" prefix="" category="inline-code"></block>：自动支持遥测的容器镜像（默认为“netapp/trident autosupport:&lt;当前版本&gt;”）。<block ref="21e377b6d1724ef73707d1b42de99ab3" prefix=" " category="inline-code"></block>用于发送 Autosupport 遥测数据的代理地址/端口。<block ref="8ef3d4e948c6061ad15793e3bfd2660f" prefix=" " category="inline-code"></block>尝试在节点上安装所需的软件包。<block ref="5de93c87952cd098700fb8d46daed4d6" prefix=" " category="inline-code"></block>无需安装任何软件即可生成 YAML 文件。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block> ，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block>安装帮助。<block ref="a6bd80a942dd6d1c4d4b8aa4bd064415" prefix=" " category="inline-code"></block> ：覆盖Trident控制器 REST API 的 HTTP 请求超时时间（默认 1 分 30 秒）。<block ref="22f97752ec243e2f8fb13a584ff48f0d" prefix=" " category="inline-code"></block> ：内部镜像仓库的地址/端口。<block ref="af58b91b0e366d67d75550c28c8b73bd" prefix=" " category="inline-code"></block> ：所有 Kubernetes 操作的超时时间（默认 3 分钟）。<block ref="931fef57514fa5bc71c5c9784dcb35b2" prefix=" " category="inline-code"></block> ：kubelet 内部状态的主机位置（默认为“/var/lib/kubelet”）。<block ref="ad595b91ed4748510a60df1c00ce5bd6" prefix=" " category="inline-code"></block> Trident日志格式（文本、JSON）（默认“文本”）。<block ref="1606f6268af560ddbfffdd3790afb4d2" prefix=" " category="inline-code"></block> ：使Trident能够准备 Kubernetes 集群的节点，以使用指定的数据存储协议来管理卷。 *现在，<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>是唯一支持的值。从 OpenShift 4.19 开始，此功能支持的最低Trident版本为 25.06.1.*<block ref="120a4fcacf73dd87df1de81c4d7a2526" prefix=" " category="inline-code"></block> ： Trident使用的旧版 PV 的名称，确保它不存在（默认值为“trident”）。<block ref="12ea064968b15f51e1c1a7444fe9f227" prefix=" " category="inline-code"></block> ： Trident使用的旧版 PVC 的名称，确保它不存在（默认值为“trident”）。<block ref="284e51f7c35ac8708577507873ff928e" prefix=" " category="inline-code"></block> ：不要自动向NetApp发送自动支持包（默认为 true）。<block ref="61bce13717a9d6da0266dbc3e2b1e642" prefix=" " category="inline-code"></block>安装过程中禁用大部分输出。<block ref="356c2fa7142c3aee4cd6204d96ea0890" prefix=" " category="inline-code"></block>要安装的Trident镜像。<block ref="8a3f78e98fdbc7da7e036e7ae4598a23" prefix=" " category="inline-code"></block> Kubernetes API 请求的每秒查询数 (QPS) 限制（默认为 100；可选）。<block ref="8026926641b283123174e50f80da83de" prefix=" " category="inline-code"></block>使用安装目录中已存在的任何 YAML 文件。<block ref="4a4ef9f92e69acc000120379678aadcf" prefix=" " category="inline-code"></block> ：Trident 通信使用 IPv6。</block>
  <block id="2165e4fa5bddb65a31f6a0c495c2fa37" category="section-title">logs</block>
  <block id="d26beba5397e2900bd10ac2f4114439a" category="paragraph">使用<block ref="2165e4fa5bddb65a31f6a0c495c2fa37" prefix=" " category="inline-code"></block>用于打印Trident日志的标志。</block>
  <block id="0fc4d21e21006115d42b2d6aa4451ffa" category="paragraph"><block ref="8815a52aa2be7be3d51559b2366dc8e1" prefix="" category="inline-code"></block></block>
  <block id="03b876ad5d685e21517c5c91d80aa1b7" category="list-text"><block ref="37caf0ee262229a9ddc60877eec6883f" prefix="" category="inline-code"></block>，<block ref="33a12b543204974f74acd94de699324e" prefix=" " category="inline-code"></block>除非另有规定，否则请创建包含所有日志的支持存档。<block ref="914071b8934b1d6035495f1ed02aa5fd" prefix=" " category="inline-code"></block> ，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block> ：日志帮助。<block ref="269889131ee4793a82191b78a2eb60e3" prefix=" " category="inline-code"></block> ，<block ref="e1db966b8a9ad737de7da72be15dcfc3" prefix=" " category="inline-code"></block>要显示的Trident日志。  trident|auto|trident-operator|all（默认值“auto”）之一。<block ref="60cfbca684c147d47b652c83c9617370" prefix=" " category="inline-code"></block> ：要从中收集节点 pod 日志的 Kubernetes 节点名称。<block ref="b3868ba70a8f4cf55464dd9926381db1" prefix=" " category="inline-code"></block> ，<block ref="a29a0e1222e48537fee91cff87dcb786" prefix=" " category="inline-code"></block> ：获取先前容器实例的日志（如果存在）。<block ref="2c82c1731bc7980f276a26037aa42ec1" prefix=" " category="inline-code"></block>获取边车容器的日志。</block>
  <block id="2541d938b0a58946090d7abdde0d3890" category="section-title">发送</block>
  <block id="05ec773046cd39b8bc0f2d677bce0910" category="paragraph">使用<block ref="2541d938b0a58946090d7abdde0d3890" prefix=" " category="inline-code"></block>从Trident发送资源的命令。</block>
  <block id="6faa54b930cd3447550e2f6a2be621bb" category="paragraph"><block ref="c68774a474a551b5788d1c1e26d3dcd0" prefix="" category="inline-code"></block></block>
  <block id="48df24d35784c5df52ab82ba6f257549" category="list-text"><block ref="ee64de1ad50d8209e64ee58b23e27986" prefix="" category="inline-code"></block>将 Autosupport 归档文件发送给NetApp。</block>
  <block id="fe98497efedbe156ecc4b953aea77e07" category="section-title">卸载</block>
  <block id="18a643410fc45a102fb920f23c9c2836" category="paragraph">使用<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block>卸载Trident 的标志。</block>
  <block id="bab5bdd673e8007bb1451ff83f2d7fbf" category="paragraph"><block ref="f74e9b644f442240b768be80cfac9840" prefix="" category="inline-code"></block></block>
  <block id="ba491d35780f4d2becc7847117f59c9d" category="list-text"><block ref="60072fc2fad0d30fc656850e04c7433f" prefix="" category="inline-code"></block>：卸载帮助。<block ref="61bce13717a9d6da0266dbc3e2b1e642" prefix=" " category="inline-code"></block>卸载过程中禁用大部分输出。</block>
  <block id="3ac340832f29c11538fbe2d6f75e8bcc" category="section-title">更新</block>
  <block id="599e9ff51846ab1b00f04c11c114486b" category="paragraph">使用<block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix=" " category="inline-code"></block>在Trident中修改资源的命令。</block>
  <block id="8020758b80cef903a0b06e0083b2a43b" category="paragraph"><block ref="8894c4db9cf5d5ac9d439434e0994407" prefix="" category="inline-code"></block></block>
  <block id="0cf5883c2ee5ddae619d22db9c564f72" category="list-text"><block ref="b43fdd98b1fd705ae4c3a10cf25aad8a" prefix="" category="inline-code"></block>：在Trident中更新后端。</block>
  <block id="2424c0d4857ddcc30f1aabda7294d84f" category="section-title">更新后端状态</block>
  <block id="26cdb30fb70d63515b796135d1481235" category="paragraph">使用<block ref="2424c0d4857ddcc30f1aabda7294d84f" prefix=" " category="inline-code"></block>暂停或恢复后端操作的命令。</block>
  <block id="a8692aa823f016402f6459f92e2c343c" category="paragraph"><block ref="1327c48297ec159839f95302f8885592" prefix="" category="inline-code"></block></block>
  <block id="60e3300406400d9ca307bbe9538cb66f" category="list-title">需要考虑的几点</block>
  <block id="ce48e23c21c781fc1bd260f1c6bbd0e9" category="list-text">如果后端是使用 TridentBackendConfig (tbc) 创建的，则无法使用以下方式更新后端：<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件。</block>
  <block id="965425a47916235e6c935104c9e64bca" category="list-text">如果<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>该值已在待办事项列表中设置，无法使用以下方式修改：<block ref="ce232749b55d6999ffb5cc1feb6c69fe" prefix=" " category="inline-code"></block>命令。</block>
  <block id="5c7182b03561a92970bed5538e17d9c4" category="list-text">重新获得设置能力<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>通过 tridentctl，在通过 tbc 设置之后，<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>必须从待办事项列表中移除该字段。这可以通过以下方式完成：<block ref="d8d9eaf9706e633cb1e715e88dfbe301" prefix=" " category="inline-code"></block>命令。之后<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>字段已移除，您可以使用<block ref="30ef4d8d0d0cb9218c8f70ca2b7ee7bc" prefix=" " category="inline-code"></block>更改命令<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>后端。</block>
  <block id="6969443eb58685fd2ba47dd82c688dfb" category="list-text">使用<block ref="30ef4d8d0d0cb9218c8f70ca2b7ee7bc" prefix=" " category="inline-code"></block>改变<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>。您还可以更新<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>使用<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>或者<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件；这将触发后端完全重新初始化，可能会很耗时。</block>
  <block id="0e43bd2bbbbfb114e0df26c0544f5608" category="list-text"><block ref="914071b8934b1d6035495f1ed02aa5fd" prefix="" category="inline-code"></block>，<block ref="0c113ca6d57519b559ba5a426be3c6b6" prefix=" " category="inline-code"></block> ：后端状态帮助。<block ref="2be951e4c83b3373b0b76554fd93bb4a" prefix=" " category="inline-code"></block>设置为<block ref="735fda5d72b5c650f3f0435195a211bd" prefix=" " category="inline-code"></block>暂停后端操作。设置为<block ref="fea087517c26fadd409bd4b9dc642555" prefix=" " category="inline-code"></block>恢复后端操作。设置为<block ref="735fda5d72b5c650f3f0435195a211bd" prefix=" " category="inline-code"></block>：</block>
  <block id="b2b04010a7e4a8486d987f6e074cde45" category="list-text"><block ref="befb9ef08cd8fda4bc507ccd6a523a43" prefix="" category="inline-code"></block>和<block ref="301cd7c7419443b2c9c5d87f6865f0cb" prefix=" " category="inline-code"></block>暂停。</block>
  <block id="15ba7f861a25848aeb7a04303194c22a" category="list-text"><block ref="c76dd551d0df4615489f4840c234db4e" prefix="" category="inline-code"></block>，<block ref="4956c0b34c154301cbe111d75fb939f9" prefix=" " category="inline-code"></block> ，<block ref="37ca7faad054353aadc61e64e55b4dac" prefix=" " category="inline-code"></block> ，<block ref="9a288381ee12262ef127ccbaeb520730" prefix=" " category="inline-code"></block> ，<block ref="db66912e8bdff8f12b8b75883aeb66ef" prefix=" " category="inline-code"></block> ，<block ref="752d336f53e6d74a5e509dd00eb2a627" prefix=" " category="inline-code"></block> ，<block ref="871b40b0d12fe47d3ce4d2bbfa30ccc5" prefix=" " category="inline-code"></block> ，<block ref="4c7dd4b0f1074705d27d812563c98768" prefix=" " category="inline-code"></block> ，<block ref="70850d0d4fbd8b67815a4598d5655a4d" prefix=" " category="inline-code"></block> ，<block ref="c4e5752b58b7f7b1c92a5302a0940801" prefix=" " category="inline-code"></block> ，<block ref="7c976338db43771fa6048705880496ea" prefix=" " category="inline-code"></block>仍然可用。</block>
  <block id="4ba6a75e6aacbc3737630ba55916cd27" category="inline-link-macro">后端管理选项</block>
  <block id="bffb766af67c15f14cae35f03dd6f4a9" category="inline-link-macro">使用 kubectl 执行后端管理</block>
  <block id="6ca35db8eab6c30e03e715e99d3c1d11" category="paragraph">您还可以使用以下方式更新后端状态<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>后端配置文件中的字段<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>或者<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>。更多信息，请参阅<block ref="991ae6fba57a2359d4e338d48b85301c" category="inline-link-macro-rx"></block>和<block ref="d39ea29671737dc4c6f8b362e0ace309" category="inline-link-macro-rx"></block>。</block>
  <block id="c26fe677a830587ef1c141567a86c86a" category="paragraph">*例子：*</block>
  <block id="0ecd11c1d7a287401d148a23bbd7a2f8" category="open-title">JSON</block>
  <block id="4c8c9b9d93d68dc932195b1aa0583910" category="paragraph">请按照以下步骤进行更新<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>使用<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件：</block>
  <block id="13cf048f75b63ff6bd6513e6ceb81fe0" category="list-text">编辑<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>要包含的文件<block ref="aa531c83e844d5d66725984798da11b8" prefix=" " category="inline-code"></block>字段值设置为“已暂停”。</block>
  <block id="4011c398b0ff3b95197b4f4713f3216e" category="list-text">使用以下方式更新后端<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>命令和更新后的路径<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件。</block>
  <block id="f05848de69e82db6963b7b9c5322a67f" category="paragraph">*例子*：<block ref="7aa76d5ff854a67029ba30d1a11e1e53" prefix=" " category="inline-code"></block></block>
  <block id="9463f87bbed1fcdacfb8d40e185ca2bc" category="open-title">YAML</block>
  <block id="a0c475f6592b0a660cc2db104d607b3f" category="paragraph">应用待办事项后，您可以使用以下方法对其进行编辑：<block ref="cdf774783c0eec7f2639a3c0d70d29ff" prefix=" " category="inline-code"></block>命令。以下示例使用以下方式将后端状态更新为挂起：<block ref="c7d1d8826ecea15bd2786371bbe65f70" prefix=" " category="inline-code"></block>选项：</block>
  <block id="2af72f100c356273d46284f6fd1dfc08" category="section-title">version</block>
  <block id="ff5f39bc4c620c3b1ca6b0811177f14c" category="paragraph">使用<block ref="2af72f100c356273d46284f6fd1dfc08" prefix=" " category="inline-code"></block>标志用于打印版本<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>以及正在运行的Trident服务。</block>
  <block id="4301e504ec5591a4c51fe93e446a7a35" category="paragraph"><block ref="dca46ba7b3ffeb9b51e10f54acbd826d" prefix="" category="inline-code"></block></block>
  <block id="e6e32acf4d56921ac92540101fe00fc9" category="list-text"><block ref="db0e9588c0d46e16e0aea5c50287a54f" prefix="" category="inline-code"></block>：仅限客户端版本（无需服务器）。<block ref="60072fc2fad0d30fc656850e04c7433f" prefix=" " category="inline-code"></block> ：版本帮助。</block>
  <block id="3bed2aa34d42c38e2a5593a67e2fe0c4" category="section-title">插件支持</block>
  <block id="424054df70ee64ca6c70f04f668acb1e" category="paragraph">Tridentctl 支持类似于 kubectl 的插件。如果插件二进制文件名遵循“tridentctl-&lt;plugin&gt;”格式，并且该二进制文件位于 PATH 环境变量列出的文件夹中，则 Tridentctl 会检测到该插件。所有检测到的插件都列在 tridentctl 帮助的插件部分中。您还可以通过在环境变量 TRIDENTCTL_PLUGIN_PATH 中指定插件文件夹来限制搜索范围（例如：<block ref="d8923b227a7eb64a54abbd6aa4ee0f6d" prefix=" " category="inline-code"></block> ）。如果使用该变量，tridenctl 将仅在指定的文件夹中搜索。</block>
  <block id="deeb141b9b83e90418e171a1871e4c4c" category="summary">卸载Trident时，应使用与安装Trident时相同的方法。如果升级后发现错误、依赖项问题或升级不成功或不完整，需要进行修复，则应卸载Trident并按照该版本的具体说明重新安装早期版本。</block>
  <block id="c4b35352cbf7a52a9444a610687067f8" category="doc">卸载Trident</block>
  <block id="7fdff6d1496ee07f5530882ace839236" category="paragraph">卸载Trident时，应使用与安装Trident时相同的方法。</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="list-title">关于此任务</block>
  <block id="e2f3eebc5fb0722c4ff76f470c4c3644" category="list-text">如果升级后出现错误、依赖项问题或升级失败/不完整，需要修复，则应卸载Trident并按照相应的说明重新安装早期版本。<block ref="e168bf6cc8da3b05fae6b22bcd12ba37" category="inline-link-macro-rx"></block> 。这是降级到早期版本的唯一推荐方法。</block>
  <block id="0a5e338ee1a9820e7a4a7d64f09e4a90" category="inline-link-macro">彻底移除Trident和CRDs</block>
  <block id="bfc34bbf9ae6407400b3d77e0e84543b" category="list-text">为了方便升级和重新安装，卸载Trident不会删除Trident创建的 CRD 或相关对象。如果您需要彻底删除Trident及其所有数据，请参阅以下内容：<block ref="a2addcf593ef6071e49d2a678662f830" category="inline-link-macro-rx"></block> 。</block>
  <block id="39596b8f60148eb1bbb5294ed08b18e3" category="paragraph">如果您要停用 Kubernetes 集群，则必须先删除所有使用Trident创建的卷的应用程序，然后再卸载。这样可以确保在 Kubernetes 节点上删除 PVC 之前，PVC 会被取消发布。</block>
  <block id="298619534d23da6e9389fd113bb13495" category="section-title">确定原始安装方法</block>
  <block id="17733a3e129c42343460715297e0ac17" category="paragraph">卸载Trident时，应使用与安装 Trident 时相同的方法。卸载前，请确认您最初安装Trident时使用的版本。</block>
  <block id="7bd3bf704987c7c25848acd94f0e499d" category="list-text">使用<block ref="8dd3e3fab389d3d56b4dbea697d52e91" prefix=" " category="inline-code"></block>检查豆荚。</block>
  <block id="289484202abcb58bc03e41c81caae5ac" category="list-text">如果没有操作员舱，Trident是通过以下方式安装的：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="ec1716523baff70aa24080e64d8b4b12" category="list-text">如果存在 operator pod，则Trident是通过Trident operator 手动安装的，或者使用 Helm 安装的。</block>
  <block id="5577c7ef32ae8572fa7be77d6824637e" category="list-text">如果有操作员舱，请使用<block ref="2bbaa285a4b0035313ee3178abf33313" prefix=" " category="inline-code"></block>确定Trident是否使用 Helm 安装。</block>
  <block id="aa5d66e97bedb220b9ef74e7c17b9f61" category="list-text">如果存在 Helm 标签，则表示Trident是使用 Helm 安装的。</block>
  <block id="28de01ed4501d62f4c5b88fa6049543d" category="list-text">如果没有 Helm 标签，则表示Trident是使用Trident操作员手动安装的。</block>
  <block id="426346b94737adca6c2d979d911464ef" category="section-title">卸载Trident操作员安装程序</block>
  <block id="253ead25988bfe2dee06d2227693e39d" category="paragraph">您可以手动卸载 Trident Operator 安装，也可以使用 Helm 卸载。</block>
  <block id="2985edaba812b8b31d08cc8513fee0a3" category="section-title">手动卸载</block>
  <block id="e2a7f7c4ad1f2b2220b05363feef82c8" category="paragraph">如果您使用操作员安装了Trident ，则可以通过执行以下操作之一来卸载它：</block>
  <block id="6418f8ccde0bb975a1ad82cf1d5250c6" category="list-text">**编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR 并设置卸载标志**：</block>
  <block id="30abd17d4913fab8af9d1efd63c15f9c" category="paragraph">当<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block>标志位已设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident操作符会卸载Trident，但不会移除 TridentOrchestrator 本身。如果您想再次安装Trident，则应该清理 TridentOrchestrator 并创建一个新的。</block>
  <block id="9f9bf29ad71be284c3ea7064648785b5" category="list-text">**删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>**：通过移除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>如果 CR 用于部署Trident，则指示操作员卸载Trident。操作员处理移除操作<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>然后继续移除Trident部署和守护进程集，并删除安装过程中创建的Trident pod。</block>
  <block id="55f6e2744208ccefe34f3e05ced2c988" category="section-title">卸载 Helm 安装</block>
  <block id="ea75777d00ce93c49ed762f4f7dfada6" category="paragraph">如果您使用 Helm 安装了Trident ，则可以使用以下命令卸载它：<block ref="547d17b0589ba1ba53549f8ddb830b62" prefix=" " category="inline-code"></block> 。</block>
  <block id="99dec4df69ba043a5eb3118e1e0b364e" category="section-title">卸载<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装</block>
  <block id="b19a703b7895e9b3039fbad761b2c100" category="paragraph">使用<block ref="fe98497efedbe156ecc4b953aea77e07" prefix=" " category="inline-code"></block>命令<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>移除与Trident关联的所有资源，但保留 CRD 及其相关对象：</block>
  <block id="6bfc286a12a4a343361f71fd9b7ccf62" category="summary">在使用Trident操作员升级Trident之前，您应该了解升级期间发生的后台进程。这包括对Trident控制器、控制器 Pod 和节点 Pod 以及节点 DaemonSet 的更改，以启用滚动更新。</block>
  <block id="a81c3a8630da0b8548245caae368a3c2" category="doc">了解操作员升级工作流程</block>
  <block id="3d40f2a5a694e68fd88105fc4f5ee0d4" category="section-title">Trident操作员升级处理</block>
  <block id="74e51c48d68796e06830c062f5c955c1" category="inline-link-macro">使用Trident运算符的好处</block>
  <block id="99c73e527698ab76b32674b7e9dd4708" category="inline-link-macro">滚动更新</block>
  <block id="6bd585eb6409f22b8a1e247f4935c581" category="paragraph">众多之一<block ref="1294f86abdf2591159d9dd04918b1092" category="inline-link-macro-rx"></block>安装和升级Trident 的过程是自动处理Trident和 Kubernetes 对象，而不会中断现有的已挂载卷。这样一来， Trident就能支持零停机时间的升级，或者说，<block ref="c0fb6b6f12bb8ae805a97690328ec023" category="inline-link-macro-rx"></block> 。具体来说， Trident操作符与 Kubernetes 集群通信以：</block>
  <block id="1a1508da73374db3dd227799f48fdf63" category="list-text">删除并重新创建Trident Controller 部署和节点 DaemonSet。</block>
  <block id="88b9e59609789e4bf00d72c8be9dd376" category="list-text">将Trident Controller Pod 和Trident Node Pod 替换为新版本。</block>
  <block id="6d3156de6583a452ead75c70c186fcb8" category="list-text">如果某个节点没有更新，并不妨碍其他节点的更新。</block>
  <block id="e232b75d1eb891caededece68ccba4bd" category="list-text">只有运行了Trident Node Pod 的节点才能挂载卷。</block>
  <block id="f54758d5b91452d3103cc1017fa70d71" category="admonition">有关 Kubernetes 集群上Trident架构的更多信息，请参阅：<block ref="2e4686c52a7aa47e7bc2aa3cfa953fbe" category="inline-link-macro-rx"></block> 。</block>
  <block id="672bc0defc3e808ff4066a5bb35984ff" category="section-title">操作员升级工作流程</block>
  <block id="09fca30aacc5af8d0afe600848776412" category="paragraph">当您使用Trident操作符发起升级时：</block>
  <block id="de1c3bc7b6551ded8e26b3c59f25fd6a" category="list-text">Trident运算符：</block>
  <block id="a958e7fa65b27b4be8589d6d0de8d135" category="list-text">检测当前安装的Trident版本（版本 _n_）。</block>
  <block id="95c09f4a69ddcda8ea23efaa0892e31f" category="list-text">更新所有 Kubernetes 对象，包括 CRD、RBAC 和Trident SVC。</block>
  <block id="fa5496466c33ad47156dabe9b4b7a83d" category="list-text">删除版本为 _n_ 的Trident Controller 部署。</block>
  <block id="de4c5e6acc990d98e3ed3412db367a33" category="list-text">创建版本 _n+1_ 的Trident Controller 部署。</block>
  <block id="55a86ba64e45e0262aa7012299b6e1a5" category="list-text">*Kubernetes* 为 _n+1_ 创建Trident Controller Pod。</block>
  <block id="9fcab903d35527e73aa8c9b8d55e4f02" category="list-text">删除 _n_ 的Trident节点守护进程集。操作员不会等待节点 Pod 终止。</block>
  <block id="a532235f4c82e61844620f45083fb82c" category="list-text">为 _n+1_ 创建Trident节点守护进程集。</block>
  <block id="5075af00f3f40cf13822f5863cc71c39" category="list-text">*Kubernetes* 在未运行Trident Node Pod _n_ 的节点上创建Trident Node Pod。这样可以确保一个节点上永远不会有超过一个Trident Node Pod，无论版本如何。</block>
  <block id="0efdc02c2d9fa1fcf31ff85fec4ed8de" category="summary">您可以使用操作员轻松升级现有的Trident安装。</block>
  <block id="9a98985a342ee2d7d213394e90d838a9" category="doc">使用Trident Operator 或 Helm 升级Trident安装</block>
  <block id="d6b7a42c6c41b071d2c80b3e4c2a7edf" category="inline-link-macro">选择升级方式</block>
  <block id="5430a6b8f98712c8210f8df2d906793a" category="paragraph">您可以使用Trident Operator 手动升级Trident ，也可以使用 Helm 进行升级。您可以从一个Trident Operator 安装升级到另一个Trident Operator 安装，或者从一个 Trident Operator 安装升级到另一个 Trident Operator 安装。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装到Trident操作员版本。审查<block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block>在升级Trident操作程序之前。</block>
  <block id="3ef75911ec16a9d0ba70cfd4e68dcb71" category="section-title">升级手动安装</block>
  <block id="618fab30e005e12b783d70218c18af46" category="paragraph">您可以从集群范围的Trident操作员安装升级到另一个集群范围的Trident操作员安装。所有Trident版本都使用集群范围的操作符。</block>
  <block id="b0e74afe1fdeb605b5c47b501c43b71b" category="inline-link-macro">您已安装的版本</block>
  <block id="18466b7fafaca62c9c0d2438889ca0c6" category="admonition">要从使用命名空间作用域运算符安装的Trident （版本 20.07 至 20.10）进行升级，请使用以下升级说明：<block ref="567dd1ff029f25a404a69ff1e3c8d83b" category="inline-link-macro-rx"></block>Trident。</block>
  <block id="eb7a4fa3d9aff7ec5b23abb8b82d516b" category="paragraph">Trident提供了一个捆绑文件，您可以使用该文件安装操作员并为您的 Kubernetes 版本创建关联对象。</block>
  <block id="bd2cc8575fe69c7f775292759380c838" category="inline-link-macro">bundle_pre_1_25.yaml</block>
  <block id="f27e6cf95381139bd9916c64f178d212" category="list-text">对于运行 Kubernetes 1.24 的集群，请使用<block ref="ccef28639b5a7d8b851d32c1ca719ce3" category="inline-link-macro-rx"></block>。</block>
  <block id="5a02ebff4889c2de0379a0fb10bed282" category="inline-link-macro">bundle_post_1_25.yaml</block>
  <block id="b9f6abf28d1518cdaae0ed7e29a5727e" category="list-text">对于运行 Kubernetes 1.25 或更高版本的集群，请使用<block ref="d1039b29d019902f70f499d65ede99cb" category="inline-link-macro-rx"></block>。</block>
  <block id="4e9ac50b8f51023570ef0b0a0a827912" category="inline-link-macro">受支持的 Kubernetes 版本</block>
  <block id="053bfc722ec4b4805e32c307458f8ea5" category="paragraph">请确保您使用的是正在运行的 Kubernetes 集群。<block ref="d502dc64864e79085bee32826e6fe213" category="inline-link-macro-rx"></block> 。</block>
  <block id="76e06d694db0c428e4d51e3354a7a4bd" category="list-text">请验证您的Trident版本：</block>
  <block id="723dc7fd3bdd515b6046b390cb3bc388" category="list-text">更新<block ref="9fa80de5781893b057ff1d535201893b" prefix=" " category="inline-code"></block>，<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block> ， 和<block ref="36b3316c230e2ae6e23e806fff5277a2" prefix=" " category="inline-code"></block>使用要升级到的版本（例如 25.06）的注册表和映像路径，以及正确的密钥。</block>
  <block id="b162e08e74f97a30264a0b1a8c613b78" category="list-text">删除用于安装当前Trident实例的Trident操作员。例如，如果您从 25.02 升级，请运行以下命令：</block>
  <block id="bdae3121e140e5325fd05919c86dd97f" category="list-text">如果您使用自定义方式对初始安装进行了设置<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>属性，您可以编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>用于修改安装参数的对象。这可能包括为离线模式指定镜像Trident和 CSI 映像注册表、启用调试日志或指定映像拉取密钥所做的更改。</block>
  <block id="31bb2a9401efa36d10c52fa5f70fb6bc" category="list-text">使用适用于您环境的正确 bundle.yaml 文件安装Trident ，其中 _&lt;bundle.yaml&gt;_ 是<block ref="bd2cc8575fe69c7f775292759380c838" prefix=" " category="inline-code"></block>或者<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix=" " category="inline-code"></block>根据您的 Kubernetes 版本。例如，如果您正在安装Trident 25.06.0，请运行以下命令：</block>
  <block id="6c352d855b7a2a90e6e0514063875d1a" category="list-text">编辑三叉戟项圈以包含图像 25.06.0。</block>
  <block id="1863fa40be678d4efa33c952a5cba52e" category="paragraph">您可以升级Trident Helm 安装。</block>
  <block id="b2095ed231848e69cbd92e44defb033b" category="admonition">当将已安装Trident 的Kubernetes 集群从 1.24 版本升级到 1.25 或更高版本时，必须更新 values.yaml 文件进行设置。<block ref="94ef2a130a825358ab3002442d6e5145" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>或添加<block ref="96d5d0b9a6e3e01b2ae2ed889f75d22e" prefix=" " category="inline-code"></block>到<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block>升级集群前必须先执行此命令。</block>
  <block id="5198b91e39c3a2f369e2426e2732625e" category="paragraph">如果您已将 Kubernetes 集群从 1.24 升级到 1.25，但未升级Trident helm，则 helm 升级将失败。要成功升级 Helm，请先执行以下步骤：</block>
  <block id="b85ec56f096c3a360d0efb02cd7a405c" category="list-text">从以下位置安装 helm-mapkubeapis 插件<block ref="bd65bd6616cbc50afd763e93267c969a" category="inline-link-rx"></block>。</block>
  <block id="5f5d62e54c7f1681b8aca17a51dae491" category="list-text">在Trident安装所在的命名空间中，对Trident版本执行一次试运行。这里列出了需要清理的资源。</block>
  <block id="db65493922bad76f3135ea26ab9b5377" category="list-text">使用 Helm 执行完整运行以进行清理。</block>
  <block id="cdfb4a820b1c2fb971221fb06e0dcd22" category="inline-link-macro">使用 Helm 安装了Trident 。</block>
  <block id="d180bc23594b2a81a598da69af7136af" category="list-text">如果你<block ref="538f4beb16c8502421a8389e199d34ce" category="inline-link-macro-rx"></block>你可以使用<block ref="9ba27131bd1269499334744b89769fac" prefix=" " category="inline-code"></block>一步即可升级。如果您没有添加 Helm 仓库或无法使用它进行升级：</block>
  <block id="51c9e4ca2440cc879a0ac3211d74b056" category="list-text">从此处下载最新版Trident<block ref="6a7c34d1e7545bd3ab5abc336e61eb7f" category="inline-link-macro-rx"></block> 。</block>
  <block id="19edaf19feadf74a38c5b3da24fd64bd" category="list-text">使用<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block>其中命令<block ref="c49c0910ea156a14c49e617b509b605a" prefix=" " category="inline-code"></block>反映您想要升级到的版本。</block>
  <block id="34c5f2f84f16f23213713a6adc11c319" category="admonition">如果在初始安装期间设置了自定义选项（例如，为Trident和 CSI 映像指定私有镜像注册表），请附加以下内容：<block ref="cd01e1bae83933b9c59c914bc71332ac" prefix=" " category="inline-code"></block>命令使用<block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix=" " category="inline-code"></block>确保将这些选项包含在升级命令中，否则这些值将重置为默认值。</block>
  <block id="3d0107bfa0874592e9dc04f9869b604b" category="list-text">跑步<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block>确认图表和应用程序版本均已升级。跑步<block ref="3e725291d4b17065fdcd321172fcfae3" prefix=" " category="inline-code"></block>查看所有调试信息。</block>
  <block id="613909529798c8a2543da8e954e5d742" category="section-title">从<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装到Trident操作员</block>
  <block id="9142b40107d9c5a0b86ef0ce8c25a88b" category="paragraph">您可以从以下位置升级到最新版本的Trident操作符：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装。现有的后端和PVC将自动可用。</block>
  <block id="733aa7fe5deef27d1cb0828cff0f17bd" category="admonition">在切换安装方法之前，请先查看<block ref="d7d87809bc6e1001ccd94c7433d28fd5" category="inline-link-macro-rx"></block>。</block>
  <block id="6a40bcc839c7c4e3dc8f6767cbe14743" category="list-text">下载最新版的Trident 。</block>
  <block id="4ab464bddccdcbc36fab4cea802025f9" category="list-text">创建<block ref="de2dc323226e711fbec4c5c39eeac5b8" prefix=" " category="inline-code"></block>来自清单文件的 CRD。</block>
  <block id="71530aef1814290453dc7add3bdae349" category="list-text">在同一命名空间中部署集群范围的操作符。</block>
  <block id="3dddb901f6b5bd5d89988dafdfabdec3" category="list-text">创建一个<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>安装Trident的 CR。</block>
  <block id="8d23be098d49e797284393a4c1479c53" category="list-text">确认Trident已升级到预期版本。</block>
  <block id="64913c0fb81e4c0c481a4fc1fac61cdd" category="summary">Trident遵循四个月的发布节奏，每年发布三个主要版本。每个新版本都是在前一个版本的基础上开发的，提供新功能和性能增强，以及错误修复和改进。我们鼓励您至少每年升级一次，以充分利用Trident的新功能。</block>
  <block id="77e55df8a70448ed424b5f523364ffc2" category="paragraph">从 24.02 版本开始， Trident遵循四个月的发布节奏，每年发布三个主要版本。每个新版本都以之前的版本为基础，并提供新功能、性能增强、错误修复和改进。我们建议您至少每年升级一次，以充分利用Trident的新功能。</block>
  <block id="ee656aff7dc78e280efdea39a682afbb" category="section-title">升级前的注意事项</block>
  <block id="2189850878cb079b3d2ec0126cc0c42a" category="paragraph">升级到最新版Trident时，请注意以下事项：</block>
  <block id="c0f69f3a3b098007f278b27ffb9915ac" category="list-text">在给定的 Kubernetes 集群的所有命名空间中，应该只安装一个Trident实例。</block>
  <block id="a34f035fd1be1d24760b20dd8fa547ea" category="list-text">Trident 23.07 及更高版本需要 v1 卷快照，不再支持 alpha 或 beta 快照。</block>
  <block id="34c1edfb4ac8581528c3791be680aeb3" category="inline-link-macro">CVS 服务类型</block>
  <block id="5797c3891863b81173e1bb10d6488a72" category="inline-link-macro">CVS 服务类型示例</block>
  <block id="df1a9174fcb3edd8d76379e2ce3131fc" category="list-text">如果您在 Google Cloud 中创建了Cloud Volumes Service，<block ref="14d2f65ad36632a8ebf2878592ce4877" category="inline-link-macro-rx"></block>您必须更新后端配置才能使用<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block>或者<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block>从Trident 23.01 升级时的服务级别。未能更新<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>后端故障可能导致卷出现故障。参考 <block ref="83a0df2fb9a604879fdb2fab6c5f77c1" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="355ecbb7c8a4a9a1ef360cb6b2697d0c" category="list-text">升级时，请务必提供以下信息<block ref="f6e7f85d8aee15940665bf722f7afac2" prefix=" " category="inline-code"></block>在<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>由Trident使用。您可以删除并重新创建<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>在不影响原有流量的情况下。</block>
  <block id="33966eba1ed0cde6afda5a97ffaffb09" category="inline-link">安全上下文</block>
  <block id="326aae224b3bbcf4b9eb8fc0a262fc24" category="list-text">这是强制执行的**要求**<block ref="cafe4c6014d8c45aaac70e49318f1a2a" category="inline-link-rx"></block>适用于 SAN 卷。</block>
  <block id="6429305365094c29848a93a6d17a7f53" category="list-text">https://github.com/NetApp/trident/tree/master/trident-installer/sample-input [示例输入^] 目录包含示例，例如https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-basic.yaml.templ<block ref="9abb8c7777ddb413820ee07d5d93aa4a" prefix="[" category="inline-code"></block> ^] 和链接： https://github.com/NetApp/trident/blob/master/trident-installer/sample-input/storage-class-samples/storage-class-bronze-default.yaml<block ref="69ae2d9a6d831af7488e53fec053b77e" prefix="[" category="inline-code"></block> ^]。</block>
  <block id="948c2cbef9ba6f931735e6eef2d86eba" category="list-text">更多信息，请参阅<block ref="04cf7258a315ca08f4b436c194fef69d" category="inline-link-macro-rx"></block>。</block>
  <block id="87459c33b1692755deb4b22c7eaa864c" category="section-title">步骤 1：选择版本</block>
  <block id="a307a5edde0e4eeeb35bb77f0a1f1cc7" category="paragraph">Trident 的版本遵循基于日期的命名规则。<block ref="fb6921a005d395f9482cdac0306d4935" prefix=" " category="inline-code"></block>命名规则中，“YY”是年份的最后两位数字，“MM”是月份。 Dot 版本遵循<block ref="d93ec759c4a0e8c1cf9c7653b2939656" prefix=" " category="inline-code"></block>按照惯例，其中“X”是补丁级别。您需要根据当前版本选择要升级到的版本。</block>
  <block id="843e8c92f2887fa83e4564f86e6a7ca0" category="list-text">您可以直接升级到与已安装版本相差不超过四个版本窗口内的任何目标版本。例如，您可以直接从 24.06（或任何 24.06 的小版本）升级到 25.06。</block>
  <block id="2251733916a92fc0c61d943165128928" category="inline-link-macro">早期版本</block>
  <block id="d4ea8129c0158e8c6ac0b3bb00a333e5" category="list-text">如果您要从四版本窗口之外的版本升级，请执行多步骤升级。请按照升级说明进行操作。<block ref="a799aa6eaf3a5192b34ea19f24bb716f" category="inline-link-macro-rx"></block>您正在从当前版本升级到符合四版本发布窗口的最新版本。例如，如果您当前运行的是 23.07 版本，并且想要升级到 25.06 版本：</block>
  <block id="96643a0b653f3484db440bd905d8e591" category="list-text">首次升级从 23.07 升级到 24.06。</block>
  <block id="0d5f6bd4062e1e564fa83bfc5eb6a64c" category="list-text">然后从 24.06 升级到 25.06。</block>
  <block id="199ed8c975e8bb544d18428ba17adbc3" category="inline-link">GitHub 上的问题详情</block>
  <block id="1eb921add61b9e1c5fcaf8272bb52ec6" category="admonition">在 OpenShift 容器平台上使用Trident操作符进行升级时，应升级到Trident 21.01.1 或更高版本。随 21.01.0 版本发布的Trident操作符存在一个已知问题，该问题已在 21.01.1 版本中修复。更多详情请参阅……<block ref="bcebcdd21adcbb3d7c640d63a711c6fb" category="inline-link-rx"></block> 。</block>
  <block id="6d2d3a9fb621ba23b0f8ec56dc8b0a24" category="section-title">步骤二：确定原始安装方法</block>
  <block id="25005cf84eec08f8f6a673dd193efa30" category="paragraph">要确定您最初安装Trident时使用的版本：</block>
  <block id="f83034df0569133b2bce8e38446dfa7d" category="list-text">如果有操作员舱，请使用<block ref="9ce56b0c50ae80fe754522969b1c96b9" prefix=" " category="inline-code"></block>确定Trident是否使用 Helm 安装。</block>
  <block id="dccfb2ce978b2c73d6a7308a124d0043" category="section-title">步骤 3：选择升级方式</block>
  <block id="74652b96889938fdef1037f82abf39b0" category="inline-link-macro">安装方法之间的转换</block>
  <block id="831878da1887476c96f4d3663eb93345" category="paragraph">通常情况下，您应该使用与初始安装相同的方法进行升级，但是您也可以……<block ref="e34c010032791417159012a5e31d7540" category="inline-link-macro-rx"></block> 。升级Trident有两种选择。</block>
  <block id="441b9a0ce7113f17c0021f9922b1c865" category="inline-link-macro">使用Trident操作员进行升级</block>
  <block id="672218727121432fb7209f42c6a00514" category="list-text"><block ref="672218727121432fb7209f42c6a00514" category="inline-link-macro-rx"></block></block>
  <block id="14d76a1fc05dcace5308e48b3d9bad49" category="admonition">我们建议您查看<block ref="4185c20447fb5f0bb4f33698bfd20d27" category="inline-link-macro-rx"></block>在与运营商升级之前。</block>
  <block id="a18aa1b83c1605570c9c2911c5180a7b" category="inline-link-macro">使用&lt;block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category='inline-code'/&gt;进行升级</block>
  <block id="3b2fa532fe7cebc94d245316f8af8ab4" category="list-text"><block ref="fd3f4a100d968c915adb11c8797ef5d2" category="inline-link-macro-rx"></block></block>
  <block id="0b788cf4288607cc017571ff06e7943e" category="summary">您可以使用以下方法轻松升级现有的Trident安装：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="2a21586f7990f8cb0f8951cd2ef7bc3b" category="doc">使用 tridentctl 进行升级</block>
  <block id="ffdcc81ea1b556d1898b6edeef92af9c" category="paragraph">您可以使用以下方法轻松升级现有的Trident安装<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="f01c58ea1eebde50a8ce26c58daf4cce" category="paragraph">卸载并重新安装Trident相当于升级。卸载Trident时， Trident部署使用的持久卷声明 (PVC) 和持久卷 (PV) 不会被删除。在Trident离线期间，已配置的 PV 仍将可用； Trident恢复在线后，将为在此期间创建的任何 PVC 配置卷。</block>
  <block id="ab639a35db468f671d4a76735e801015" category="paragraph">审查<block ref="5cffa5fbe758cc3901f0e33c78b29d1b" category="inline-link-macro-rx"></block>升级前使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="7ad65028965606bad1c173b4f16cefeb" category="list-text">运行卸载命令<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>移除与Trident关联的所有资源，但保留 CRD 和相关对象。</block>
  <block id="3777d5420fb2ef4c5e434cd5af97d73d" category="inline-link-macro">使用 tridentctl 安装Trident</block>
  <block id="23d4814be45e57b94df46ce2ee2a19f6" category="list-text">重新安装Trident。参考<block ref="6fa1b6e43e706a69762bd9a319950a21" category="inline-link-macro-rx"></block>。</block>
  <block id="1d2d1200e759d67b259f843be2270f71" category="admonition">请勿中断升级过程。确保安装程序运行完成。</block>
  <block id="a22c0a4dfca95968d88392eb0bbb2dcf" category="paragraph">集群管理员始终拥有对默认资源的访问权限。<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>命名空间，并且可以访问所有其他命名空间中的资源。要控制对资源和应用程序的访问，您需要创建额外的命名空间，并将资源和应用程序添加到这些命名空间中。</block>
  <block id="661e3b2b32de1ab85fb426b5abec28f3" category="paragraph">请注意，默认情况下，任何用户都无法创建应用程序数据管理变更请求 (CR)。<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>命名空间。您需要在应用程序命名空间中创建应用程序数据管理 CR（最佳实践是在与其关联的应用程序相同的命名空间中创建应用程序数据管理 CR）。</block>
  <block id="4516bb1529fba64216073cc95812839c" category="list-text">*AppVault*：需要存储桶凭证数据</block>
  <block id="10e6811ca4c78900349b612176a3233b" category="list-text">*AutoSupportBundleSchedule*：管理日志收集计划</block>
  <block id="7cfd5c25f0cd486a1157966cad4acba7" category="paragraph">最佳实践是使用基于角色的访问控制 (RBAC) 将对特权对象的访问限制在管理员范围内。</block>
  <block id="407b2fe2d3bbcc55c8ae895a2fd8263c" category="inline-link">Kubernetes RBAC 文档</block>
  <block id="280879df8b54b2167169ec47c5cabf6d" category="paragraph">有关基于角色的访问控制 (RBAC) 如何管理对资源和命名空间的访问的更多信息，请参阅……<block ref="4825a411217f39ad9486c7b5e7edfd2b" category="inline-link-rx"></block> 。</block>
  <block id="1f8885e14663f7eb65b23f1fb65cf1ad" category="inline-link">Kubernetes 服务帐户文档</block>
  <block id="6d2eefddf1d006b070ac00f2cf8d9f2e" category="paragraph">有关服务帐户的信息，请参阅<block ref="37bf82f0fc7d7e935aabd2fb73032b3c" category="inline-link-rx"></block>。</block>
  <block id="c8daba6f7a2139f5744d1f673acae2b4" category="section-title">示例：管理两组用户的访问权限</block>
  <block id="9a9f2142e8d53ddda9013b6fc97827cd" category="paragraph">例如，一个组织有集群管理员、一组工程用户和一组市场营销用户。集群管理员将完成以下任务，以创建一个环境，其中工程组和市场营销组各自只能访问分配给其各自命名空间的资源。</block>
  <block id="62e8eb1beb4089e76f084fa767746c24" category="section-title">步骤 1：创建命名空间以包含每个组的资源</block>
  <block id="bff98f2ace11d8e7b9fe541ae444c93a" category="paragraph">创建命名空间可以让你从逻辑上分离资源，并更好地控制谁可以访问这些资源。</block>
  <block id="34bc7fd01806723536ffab05992d77d0" category="list-text">为工程组创建一个命名空间：</block>
  <block id="ba644a4cbff232b5b4157a0f8bfc30f8" category="list-text">为市场营销组创建命名空间：</block>
  <block id="aac00f41716d928be61ef3ff1cd6fc2d" category="section-title">步骤 2：创建新的服务帐户，以便与每个命名空间中的资源进行交互</block>
  <block id="3e8da71376257c3915a88fb2bfe69a27" category="paragraph">您创建的每个新命名空间都带有一个默认服务帐户，但您应该为每个用户组创建一个服务帐户，以便将来必要时可以进一步在组之间划分权限。</block>
  <block id="7bd34dd5c1a41f3a7aeea2aaad2469b5" category="list-text">为工程团队创建一个服务帐户：</block>
  <block id="37281883196948d16907e71598070c79" category="list-text">为市场营销团队创建一个服务帐户：</block>
  <block id="2cdbda2406e807bdae6ccf33ad2445f3" category="section-title">步骤 3：为每个新服务帐户创建一个密钥</block>
  <block id="a15042adaad3bebc86d46ef450a4f98c" category="paragraph">服务帐户密钥用于对服务帐户进行身份验证，如果遭到泄露，可以轻松删除并重新创建。</block>
  <block id="78a7dfb4e5b60d84d3c54ec150be8a80" category="list-text">为工程服务帐户创建一个密钥：</block>
  <block id="b098f513abca683a5e1c36cbc8b244db" category="list-text">为营销服务帐户创建一个密钥：</block>
  <block id="d1732b3423240a19064951afa9a3266a" category="section-title">步骤 4：创建 RoleBinding 对象，将 ClusterRole 对象绑定到每个新的服务帐户。</block>
  <block id="067d8d99affb5418a3d899eba8658cc4" category="list-text">将集群角色绑定到工程服务帐户：</block>
  <block id="b25ecd55b23c424058fdad947fe23b13" category="list-text">将集群角色绑定到营销服务帐户：</block>
  <block id="574c7934280b498080dfc2272c570f69" category="section-title">步骤 5：测试权限</block>
  <block id="8d65423ec256f18737823ea6cedeae87" category="paragraph">测试权限是否正确。</block>
  <block id="7b0c0cd292b286167249cc067be6d47d" category="list-text">确认工程用户可以访问工程资源：</block>
  <block id="37aa0c3d444b765e5080a77f572f9040" category="list-text">确认工程用户无法访问市场营销资源：</block>
  <block id="afb432a9cb893dca3218bf5ed8f124b6" category="section-title">步骤 6：授予对 AppVault 对象的访问权限</block>
  <block id="518792e00e0ca0d711657c9051ae8b45" category="paragraph">要执行备份和快照等数据管理任务，集群管理员需要授予各个用户对 AppVault 对象的访问权限。</block>
  <block id="3ce2b0dd65dc314e4d0ccf4ed02db5a7" category="list-text">创建并应用 AppVault 和密钥组合的 YAML 文件，以授予用户对 AppVault 的访问权限。例如，以下 CR 授予用户对 AppVault 的访问权限<block ref="6ca05da537cc3daa1ec22134c0b69946" prefix=" " category="inline-code"></block>：</block>
  <block id="f1c648202447b3667edef5439e1a8c5e" category="list-text">创建并应用角色 CR，使集群管理员能够授予对命名空间中特定资源的访问权限。例如：</block>
  <block id="2ebacf7e8f38b367350c5c91618a6e79" category="list-text">创建并应用角色绑定 CR，将权限绑定到用户 eng-user。例如：</block>
  <block id="dc3d0a515ce0266cb00eb5cc06c4fe94" category="list-text">请确认权限是否正确。</block>
  <block id="b5c9b7c142e23b0f885d64628ec267ff" category="list-text">尝试检索所有命名空间的 AppVault 对象信息：</block>
  <block id="d0848afd8553c34945705222a97a4553" category="paragraph">您应该会看到类似以下内容的输出：</block>
  <block id="07337191562a62a775a853d9901903a6" category="list-text">测试用户是否可以获取他们现在有权访问的 AppVault 信息：</block>
  <block id="8eea62084ca7e541d918e823422bd82e" category="paragraph-title">结果</block>
  <block id="e7165fc51f62031fcae1d793899febaa" category="paragraph">您授予 AppVault 权限的用户应该能够使用授权的 AppVault 对象进行应用程序数据管理操作，并且不应该能够访问分配的命名空间之外的任何资源，或者创建他们无权访问的新资源。</block>
  <block id="6d0450323deb4880d88d2da4155d7c76" category="paragraph">Alertmanager 是一项服务，它可以接收 Prometheus 等工具发送的警报，并将它们路由到您配置的目标位置。</block>
  <block id="45501c075fe75338b712d61db6d82f54" category="paragraph">这些步骤中包含的配置和指导仅供参考；您需要根据自己的环境进行自定义。请参阅以下官方文档以获取具体说明和支持：</block>
  <block id="d9bdb1d7869cec3eaa75aaa48b414845" category="inline-link">kube-state-metrics 文档</block>
  <block id="28b29a811fcff582b069060bb6104048" category="list-text"><block ref="28b29a811fcff582b069060bb6104048" category="inline-link-rx"></block></block>
  <block id="695c33d174e4ad444d82403015632550" category="inline-link">普罗米修斯文档</block>
  <block id="94fa5821707b81f95ad49b7f10d2d4d6" category="list-text"><block ref="94fa5821707b81f95ad49b7f10d2d4d6" category="inline-link-rx"></block></block>
  <block id="853d2b8407eda505e00a8014afdb0ddf" category="inline-link">Alertmanager 文档</block>
  <block id="e23d8cb1d9d009a1aa298e95526efcd3" category="list-text"><block ref="e23d8cb1d9d009a1aa298e95526efcd3" category="inline-link-rx"></block></block>
  <block id="b246a1443f359b6da345c33e0b25f47a" category="section-title">步骤 1：安装监控工具</block>
  <block id="2a2c51a8db12ee75c90da4a3fb0e1a0b" category="section-title">安装 kube-state-metrics</block>
  <block id="016aa0f0550f5a0506cb61b61568e043" category="paragraph">您可以使用 Helm 安装 kube-state-metrics。</block>
  <block id="ea6a84ebff4515f07a0f260b7cce7b83" category="list-text">添加 kube-state-metrics Helm chart。例如：</block>
  <block id="dcae39a3bdbd6a2685507ccc14623d62" category="list-text">将 Prometheus ServiceMonitor CRD 应用到集群：</block>
  <block id="d6cff887be77b3dc5c6f689b93bb9b32" category="list-text">为 Helm chart 创建一个配置文件（例如，<block ref="1da0bbdfeb5bb05830055a1515d9e2a9" prefix=" " category="inline-code"></block> ）。您可以根据自身环境自定义以下示例配置：</block>
  <block id="cf5cf09f9422112814f7fa967e303283" category="listing-title">metrics-config.yaml：kube-state-metrics Helm chart 配置</block>
  <block id="eca99dda7e2a747b75c232f5c3e314a0" category="list-text">通过部署 Helm chart 来安装 kube-state-metrics。例如：</block>
  <block id="1b61aa1e4c2991758aa9c5bea0047156" category="inline-link">kube-state-metrics 自定义资源文档</block>
  <block id="88b8613d339947a37e41b1f514dcc42c" category="section-title">安装 Prometheus</block>
  <block id="6cfabcb4c640f9570382e21ec242a3c0" category="paragraph">您可以按照以下说明安装 Prometheus：<block ref="9c3dd7b31d363d10addc1dc55a338e01" category="inline-link-rx"></block> 。</block>
  <block id="7d512717b3f318d83bbce6f09e891a6f" category="section-title">安装 Alertmanager</block>
  <block id="ee3b7d497a79c10fe3b10cda25267876" category="paragraph">您可以按照以下说明安装 Alertmanager：<block ref="34c399dcb7431f049905523dd168baa8" category="inline-link-rx"></block> 。</block>
  <block id="9147f13af253be263e759a06097eea20" category="section-title">步骤 2：配置监控工具以协同工作</block>
  <block id="73be38664a808318efe65c02c4ce747c" category="paragraph">安装完监控工具后，需要配置它们以使其协同工作。</block>
  <block id="e441c0f153e5f2e8328aa8c2e9badf45" category="list-text">将 kube-state-metrics 与 Prometheus 集成。编辑 Prometheus 配置文件<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix="(" category="inline-code"></block>）并添加 kube-state-metrics 服务信息。例如：</block>
  <block id="ce813b4c1248ec7e0f14b08f1a037497" category="listing-title">prometheus.yaml：kube-state-metrics 服务与 Prometheus 的集成</block>
  <block id="934a401d15e7226d8cb60e2a12f28611" category="list-text">配置 Prometheus 将警报路由到 Alertmanager。编辑 Prometheus 配置文件<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix="(" category="inline-code"></block>）并添加以下部分：</block>
  <block id="2a88bf2582239d12cc0700d3c6857519" category="listing-title">prometheus.yaml：向 Alertmanager 发送警报</block>
  <block id="68f04b43068f22f98aaa6513240dd2b5" category="paragraph">Prometheus 现在可以从 kube-state-metrics 收集指标，并可以向 Alertmanager 发送警报。现在您可以配置哪些条件会触发警报以及警报应该发送到哪里。</block>
  <block id="a42cb9abdbaf69f90fba5592304008cd" category="section-title">步骤 3：配置警报和警报目标</block>
  <block id="1138a7ff5cea0f83ce07834c8e02315c" category="paragraph">配置好工具协同工作后，还需要配置哪些类型的信息会触发警报，以及警报应该发送到哪里。</block>
  <block id="917045fa08d9c44ee88951e8cdb4023b" category="section-title">警报示例：备份失败</block>
  <block id="ae9aa1ddb34419c7b7b7f49feba7fb45" category="paragraph">以下示例定义了一个关键警报，当备份自定义资源的状态设置为“是”时，该警报将被触发。<block ref="902b0d55fddef6f8d651fe1035b7d4bd" prefix=" " category="inline-code"></block>持续5秒或更长时间。您可以自定义此示例以匹配您的环境，并将此 YAML 代码片段包含在您的项目中。<block ref="aacdd9a7e2029a243488dbd0c49c5bbb" prefix=" " category="inline-code"></block>配置文件：</block>
  <block id="62c242d2e7dfd83a58d8ccf60227d68f" category="listing-title">rules.yaml：定义备份失败的 Prometheus 警报</block>
  <block id="e8665bc518bf7a6d63332be811e8f6cb" category="section-title">配置 Alertmanager 以将警报发送到其他渠道</block>
  <block id="70694773feb2b23c45e7ff7a6a3c3c8b" category="paragraph">您可以配置 Alertmanager，使其将通知发送到其他渠道，例如电子邮件、PagerDuty、Microsoft Teams 或其他通知服务，只需在配置文件中指定相应的配置即可。<block ref="9001eaececb0884cbeb80659e81340ad" prefix=" " category="inline-code"></block>文件。</block>
  <block id="c9272f0d68fac2055ba2d71be6c87b1b" category="paragraph">以下示例配置 Alertmanager 向 Slack 频道发送通知。要根据您的环境自定义此示例，请替换以下值：<block ref="aa8106611bcfe43fec48e6d1d371de52" prefix=" " category="inline-code"></block>密钥包含您环境中使用的 Slack webhook URL：</block>
  <block id="965357e3c90ccf3fba01174c6508d562" category="listing-title">alertmanager.yaml：向 Slack 频道发送警报</block>
  <block id="9c292a7d893942317e3d566cb6f6776c" category="paragraph">在应用程序上执行数据保护操作时，您需要手动或从命令行创建 AppVault CR。AppVaultCR 特定于您的环境，您可以使用本页上的示例作为创建 AppVault CR 的指南。</block>
  <block id="7fc5875d06887df5109a87a0ada90eca" category="section-title">配置 AppVault 身份验证和密码</block>
  <block id="05e673132e6ddc1f638835fcde244ff1" category="paragraph">在创建 AppVault CR 之前，请确保您选择的 AppVault 和数据移动器可以向提供商和任何相关资源进行身份验证。</block>
  <block id="8e2c4d33f50c044b257a84cd65ff1c79" category="section-title">数据迁移器存储库密码</block>
  <block id="02c19b7bc038d2af238bbd729bc3d9c4" category="list-text">手动创建 AppVault CR 时，请使用 *spec.dataMoverPasswordSecretRef* 字段指定密钥。</block>
  <block id="e64d157c7a9e337d525d51f62d9d0809" category="section-title">创建数据迁移存储库密码密钥</block>
  <block id="4fc9faf161c64ed80d0fb8ca9aa0882e" category="list-text">根据您使用的数据传输工具，您只需输入该数据传输工具对应的密码即可。例如，如果您正在使用 Restic，并且将来不打算使用 Kopia，则在创建密钥时，您可以只包含 Restic 密码。</block>
  <block id="1850a20880f300b00b10477bfcbd6087" category="list-text">请将密码保存在安全的地方。您将需要它来还原同一集群或其他集群上的数据。如果集群或<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>命名空间已被删除，没有密码您将无法恢复备份或快照。</block>
  <block id="5a3a68cc2fb27d13057472b4869353f1" category="open-title">使用 CR</block>
  <block id="8a9e0f8224695e94f0988f444488877b" category="open-title">使用 CLI</block>
  <block id="d2a7dc5804ec844f3f7bfb903e97693f" category="section-title">S3 兼容存储 IAM 权限</block>
  <block id="79832d443dadeb6d3b0637941d6ac067" category="inline-link">StorageGrid S3</block>
  <block id="1716834171e243de0f898a67621b6624" category="inline-link">ONTAP S3</block>
  <block id="d9b7f314625fb7dcf35c741afe65b676" category="inline-link">Amazon S3 文档</block>
  <block id="bc08c4a5eed12311fe8187fb000dd58a" category="paragraph">有关 Amazon S3 策略的更多信息，请参阅以下示例：<block ref="61017e44ea21b481e69f04f8ac510768" category="inline-link-rx"></block> 。</block>
  <block id="955d6e7ec20d5d3fcf83f82552f7d6e0" category="section-title">用于 Amazon S3（AWS）身份验证的 EKS Pod Identity</block>
  <block id="6aa9f6ea95e8a0a226da6a3727f18bb1" category="list-text">您的 EKS 集群已启用 Pod Identity。</block>
  <block id="ecadca4297640c38809298ae5d418fff" category="list-text">您已创建具有必要的 S3 存储桶权限的 IAM 角色。欲了解更多信息，请参阅 <block ref="d40f70e9b63b2ee09271e4f02ea6bf6d" category="inline-link-macro-rx"></block>。</block>
  <block id="5b71e41c96f404db1afa2e12eecd6500" category="list-text"><block ref="91bb592c84ad55997a90ac08be4392a4" prefix="" category="inline-code"></block></block>
  <block id="1aa00347a52b15ca93b318123bc06e86" category="list-text"><block ref="f7466ebc5710cc1f7aebdb3c2347f9e6" prefix="" category="inline-code"></block></block>
  <block id="7a9c1f2789b528ff73c69693fde3ecba" category="list-text"><block ref="12cb7c67caac3126c1f43145ffe66ca6" prefix="" category="inline-code"></block></block>
  <block id="71f3c1257dc9ab0b34ac201e2acb022c" category="list-text"><block ref="4853ba7c1c1c3978e9d7142231fc12a6" prefix="" category="inline-code"></block></block>
  <block id="aeb8fd34d676c01d8d9e00ea6a66b661" category="inline-link">AWS EKS Pod Identity 文档</block>
  <block id="a1c4fb1e42d1fc14a6fe64030e00a952" category="paragraph">有关启用 Pod 身份并将 IAM 角色与服务帐户关联的详细说明，请参阅<block ref="66ae84e756b5258fa5896e42189a8ba2" category="inline-link-rx"></block>。</block>
  <block id="cedc87a271db7f699ec07464bfd0a9ee" category="paragraph">*AppVault 配置* 使用 EKS Pod Identity 时，请配置您的 AppVault CR。<block ref="df9bc6a254da3cea83fc8b7c71c71ea9" prefix=" " category="inline-code"></block>使用标志而不是显式凭据：</block>
  <block id="571768fad7edd9c4f57173c592c1f86c" category="section-title">适用于云提供商的 AppVault 密钥生成示例</block>
  <block id="ed69194cde8739a857f51b02498a0c27" category="paragraph">定义 AppVault CR 时，您需要包含凭证以访问提供商托管的资源，除非您使用 IAM 身份验证。如何生成凭证密钥将根据提供商的不同而有所不同。以下是几个提供商的命令行密钥生成示例。您可以使用以下示例为每个云提供商的凭证创建密钥。</block>
  <block id="56ef2682280ac110060b881925a87b80" category="open-title">Google Cloud</block>
  <block id="a13eeeef5ff2b7fe85692890fb5d28b3" category="open-title">亚马逊 S3 (AWS)</block>
  <block id="1668ca1bd914c1d847f23b491319ac91" category="open-title">Microsoft Azure</block>
  <block id="b2aa71ee04e531f0b6d1f084ba45f52f" category="open-title">通用S3</block>
  <block id="3e2db83ddd4087c64413cfd7c14100b6" category="section-title">AppVault 创建示例</block>
  <block id="80b938565b2e1ff14bd06e780149b085" category="paragraph">以下是每个提供商的 AppVault 定义示例。</block>
  <block id="6b4d16571162a69eb03c99cb132a69ec" category="section-title">AppVault CR 示例</block>
  <block id="d05c8b60cfd355fccac41017c33ca892" category="paragraph">您可以使用以下 CR 示例为每个云提供商创建 AppVault 对象。</block>
  <block id="dd180e899bea0f9a0eb538e256c19673" category="list-text">您可以选择指定一个 Kubernetes secret，其中包含 Restic 和 Kopia 存储库加密的自定义密码。请参阅<block ref="7bf3b37360a9f432b37d8ac6c9f10cd4" category="inline-xref-macro-rx"></block>了解更多信息。</block>
  <block id="7491b3d3a4aa89a2dd6445477c6b6e0a" category="list-text">对于 Amazon S3 (AWS) AppVault 对象，您可以选择性地指定 sessionToken，如果您使用单点登录 (SSO) 进行身份验证，这将非常有用。当您为提供程序生成密钥时，将创建此令牌。<block ref="cd932e77bb3df9634d58b2fd34398b6f" category="inline-xref-macro-rx"></block> 。</block>
  <block id="2b7c7776f596f179d63bae82e841e9fe" category="list-text">对于 S3 AppVault 对象，您可以选择性地使用以下方式指定出站 S3 流量的出口代理 URL：<block ref="ea739eb21b9424ad95fb5cd1b3ee7d1c" prefix=" " category="inline-code"></block>钥匙。</block>
  <block id="0d96febdd171c11830ca8b96c7a4f8e4" category="admonition">对于使用 Pod Identity 和 Kopia 数据移动器的 EKS 环境，您可以移除<block ref="84695890ad88faf0bb2d6cdae8c01d51" prefix=" " category="inline-code"></block>部分并添加<block ref="df9bc6a254da3cea83fc8b7c71c71ea9" prefix=" " category="inline-code"></block>在<block ref="c0828e0381730befd1f7a025057c74fb" prefix=" " category="inline-code"></block>改为配置。</block>
  <block id="4db09810b323e73b4041a65c99bb14f8" category="paragraph">您可以使用以下 CLI 命令示例为每个提供商创建 AppVault CR。</block>
  <block id="99313bdb05c30c161eb80ae8dc89265f" category="list-text">对于 S3 AppVault 对象，您可以选择性地使用以下方式指定出站 S3 流量的出口代理 URL：<block ref="c0b36cdbc2185c1fe6ee0b0c177312da" prefix=" " category="inline-code"></block>争论。</block>
  <block id="aafdbe511f8dcfce152fe32eec4b84a8" category="section-title">查看 AppVault 信息</block>
  <block id="485573baf8bfa9487485deb07780d89f" category="list-text">查看 AppVault 对象的内容：</block>
  <block id="10dce9030ad8783afd2b4e831da49b7f" category="paragraph">*示例输出*：</block>
  <block id="72444a17ff17655124f96b02602fe90f" category="list-text">（可选）要查看每个资源的 AppVaultPath，请使用该标志<block ref="a9b1c03a99224cbb5c6773ccbe51d4fb" prefix=" " category="inline-code"></block>。</block>
  <block id="eb5dcb495342ee5285be31fb17267ccc" category="section-title">移除 AppVault</block>
  <block id="086d4622dbc50dc37c51fc80568681a2" category="paragraph">您可以随时删除 AppVault 对象。</block>
  <block id="79f2a1cdb1287644a5d3176157cc43c4" category="admonition">不要移除<block ref="276c63528ef3085f91fb1bc80a3febc0" prefix=" " category="inline-code"></block>在删除 AppVault 对象之前，请在 AppVault CR 中输入密钥。如果这样做，可能会导致 AppVault 存储桶中残留数据，集群中出现孤立资源。</block>
  <block id="6a346946ba0777d650b6e41a4c30c7b6" category="paragraph">请确保您已删除要删除的 AppVault 使用的所有快照和备份 CR。</block>
  <block id="33850d305da8c5eb949c81e70e40a54d" category="open-title">使用 Kubernetes CLI 删除 AppVault</block>
  <block id="620026f954fdad541c9d19554476345c" category="list-text">移除 AppVault 对象，并替换<block ref="bf09cf3bd2a9288a0bdf3d1b89b770a1" prefix=" " category="inline-code"></block>要删除的 AppVault 对象的名称：</block>
  <block id="2b1100a071932a4cb5f33e22121f48fa" category="paragraph">在使用命令行实用程序之前，需要将其安装在用于访问集群的计算机上。根据您的机器使用的是 x64 还是ARM CPU，请按照以下步骤操作。</block>
  <block id="852f04e90409df288c69ca8f37453383" category="open-title">下载适用于 Linux AMD64 CPU 的插件</block>
  <block id="b64b2077b896969e7810dbb0a2de2f1a" category="open-title">下载适用于 Linux ARM64 CPU 的插件</block>
  <block id="d58e744bd40cf0f8373ee5b2c7d11387" category="open-title">下载适用于 Mac AMD64 CPU 的插件</block>
  <block id="fd3e558ef6c1af851bddabf0eb1945d7" category="open-title">下载适用于 Mac ARM64 CPU 的插件</block>
  <block id="375efef64643c8aa6bb8e0ba2159a82a" category="list-text">启用插件二进制文件的执行权限：</block>
  <block id="15286900a0d0667ffc4d515aeec6a1d2" category="list-text">将插件二进制文件复制到 PATH 环境变量中定义的位置。例如，<block ref="7512824c50c61ea8d89d0f193a4f72d1" prefix=" " category="inline-code"></block>或者<block ref="ad2e864ce1a99daa836c3449f3ba705d" prefix=" " category="inline-code"></block>（您可能需要更高的权限）：</block>
  <block id="eefd51253afc93c1ad54658882a65dec" category="list-text">您也可以选择将插件二进制文件复制到您主目录中的某个位置。在这种情况下，建议确保该位置已添加到您的 PATH 环境变量中：</block>
  <block id="75b0e724fe59ed9d6eda0fcd4679bfee" category="admonition">将插件复制到 PATH 环境变量中的某个位置，即可通过键入以下命令来使用该插件。<block ref="d4845d5856667a10aee97f3404a35627" prefix=" " category="inline-code"></block>或者<block ref="e89ec374c6edc886ea12d28524834e68" prefix=" " category="inline-code"></block>从任何地点。</block>
  <block id="b23c395acc963a69b0a5f06a20bb4887" category="section-title">查看Trident CLI 插件帮助</block>
  <block id="305f79cb740685921820521a57e525e5" category="paragraph">您可以使用插件内置的帮助功能来获取有关插件功能的详细帮助：</block>
  <block id="09b4818c610e8f967a9f5257455a3a2a" category="list-text">使用帮助功能查看使用指南：</block>
  <block id="da9d072bec5b191d5b5120761a2094e5" category="section-title">启用命令自动补全</block>
  <block id="df7d0aa2cf46fe870b9bba130ea4d964" category="open-title">为 Bash shell 启用自动补全功能</block>
  <block id="dc8d08efd37c5c2cd13f1da4b74b2004" category="list-text">下载完成脚本：</block>
  <block id="bbd32e1d32af84e3002666b13f548cce" category="list-text">在您的用户目录下创建一个新目录，用于存放脚本：</block>
  <block id="63f01fb9933705d6d795c4c690a6504c" category="list-text">将下载的脚本移动到<block ref="37476bab24bad3126a5edbc11fab761e" prefix=" " category="inline-code"></block>目录：</block>
  <block id="4a76f80f250e570c9fd0b4b8b9e41486" category="list-text">将以下行添加到<block ref="b8cb707d54dfbd8ab64f0b1dc81b72e1" prefix=" " category="inline-code"></block>您主目录中的文件：</block>
  <block id="51c2c8a3b8dd4aaaa1d5640e39860408" category="open-title">为 Z shell 启用自动补全</block>
  <block id="45dba4471beecdb4813778042a6ccfc2" category="list-text">将下载的脚本移动到<block ref="d6ca46a9bae5529cb8e845fb419ba1e0" prefix=" " category="inline-code"></block>目录：</block>
  <block id="e2f12f24108169a5ab9aa9923f95a468" category="list-text">将以下行添加到<block ref="f0f9c4057b7322a99704208706a05ba7" prefix=" " category="inline-code"></block>您主目录中的文件：</block>
  <block id="7bbf9a1a0bbcbeb6a4fef133c3975079" category="paragraph">下次登录 shell 时，您可以使用 tridentctl-protect 插件进行命令自动补全。</block>
  <block id="45d7099b61647936da59ccfbaa49ca5c" category="list-text">创建一个名为的文件<block ref="e66ad8c89b28dc43a24e6e1689a79cdc" prefix=" " category="inline-code"></block>。</block>
  <block id="df0ecee897380da18617ddb170abdeb0" category="paragraph">以下示例配置文件显示了可用设置，并包含每个资源限制的默认值：</block>
  <block id="956fe3fe2ad4f9cb1b569d66b4ff1db5" category="list-text">应用以下值<block ref="e66ad8c89b28dc43a24e6e1689a79cdc" prefix=" " category="inline-code"></block>文件：</block>
  <block id="73d4542a63a157d0b7e3093eabec8fc9" category="section-title">自定义安全上下文约束</block>
  <block id="2708058a93672fbaa8bcf3e785e87b21" category="list-text">创建一个名为的文件<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>。</block>
  <block id="468f17ddccd3b34c0d539404233a5e45" category="list-text">在文件中添加 SCC 选项，并根据您的环境需要修改参数。</block>
  <block id="616d9e371ad293e03cb7d5ad25d66c80" category="paragraph">以下示例显示了 SCC 选项的参数默认值：</block>
  <block id="0c98fb0c406324f0a1aa95f76be6abee" category="paragraph">下表描述了SCC选项的参数：</block>
  <block id="4241afd729bbb74051e3cba55f164b0d" category="cell">确定是否可以创建 SCC 资源。仅当<block ref="aac82cc6424e9b52c84a0dbdc2518a15" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Helm 安装过程会识别 OpenShift 环境。如果不是在 OpenShift 上运行，或者如果<block ref="aac82cc6424e9b52c84a0dbdc2518a15" prefix=" " category="inline-code"></block>设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>不会创建 SCC 资源。</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">name</block>
  <block id="fd9cec0b7219b39de0235d899bf5b2c0" category="cell">指定SCC的名称。</block>
  <block id="141351edcf12ef25b127186a711471ce" category="cell">三叉戟保护工作</block>
  <block id="b988295c268025b49dfb3df26171ddc3" category="cell">优先事项</block>
  <block id="18dbc63582d575814786eb13d8baf787" category="cell">确定 SCC 的优先级。优先级较高的SCC会优先于优先级较低的SCC进行评估。</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1</block>
  <block id="ee747b6b4f133aa926c072d073f4a8d5" category="list-text">应用以下值<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>文件：</block>
  <block id="54b43aeb73b3f5136e6febff4f374663" category="paragraph">这将用指定的值替换默认值。<block ref="12cbdc8aa1f61a2cee8eff2b77c0e113" prefix=" " category="inline-code"></block>文件。</block>
  <block id="a7532dec52b4d581a8873a3048e6e181" category="paragraph">您可以自定义AutoSupport设置和命名空间过滤以满足您的特定要求。下表描述了可用的配置参数：</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">类型</block>
  <block id="1fceae4a3c0d1966481601a7ac4d1f83" category="cell">自动支持代理</block>
  <block id="b45cffe084dd3d20d928bee85e7b0f21" category="cell">string</block>
  <block id="d93069a68fb6f0fccb979fdae4a99614" category="cell">为NetApp AutoSupport连接配置代理 URL。使用此功能通过代理服务器路由支持包上传。例子：<block ref="3753b9fc3cbe6d0d91c7b449cad0b465" prefix=" " category="inline-code"></block> 。</block>
  <block id="c692f16bd0ca5b695511534a2e1eebfb" category="cell">自动支持.不安全</block>
  <block id="84e2c64f38f78ba3ea5c905ab5a2da27" category="cell">布尔值</block>
  <block id="ecf5fdf2786d609376e95f541c7dcdfa" category="cell">设置为“跳过AutoSupport代理连接的 TLS 验证”<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 。仅用于不安全的代理连接。  （默认：<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> ）</block>
  <block id="4dd202185370b5db00de876ba19c1bd1" category="cell">自动支持已启用</block>
  <block id="22416353aff9ef4322e1ee858f418ae4" category="cell">恢复跳过命名空间注释</block>
  <block id="a91c3b0476974e9ec186952f05c189f1" category="cell">要从备份和恢复操作中排除的命名空间注释的逗号分隔列表。允许您根据注释过滤命名空间。</block>
  <block id="8028cf835d9b72ff2d6f835934c25568" category="cell">restoreSkipNamespaceLabels</block>
  <block id="3f1cf3db23b5a0d9cdd2db63b9b30061" category="cell">要从备份和恢复操作中排除的命名空间标签的逗号分隔列表。允许您根据标签过滤命名空间。</block>
  <block id="4afdb4a6c604cf0a9b830ec8cb0430c9" category="paragraph">您可以使用 YAML 配置文件或命令行标志配置这些选项：</block>
  <block id="bfb59a2948710affa80485c4339915a0" category="open-title">使用 YAML 文件</block>
  <block id="edd355ced63179ed49206f4f87774b11" category="list-text">创建一个配置文件并将其命名为<block ref="ba05023d0f1b5d4b64b6cad4cf9a7ecd" prefix=" " category="inline-code"></block>。</block>
  <block id="68691c61fb4efdab4eca4a7e06fa75c7" category="list-text">在您创建的文件中，添加您想要自定义的配置选项。</block>
  <block id="8050ee75d62c0711ec176f9e1481041b" category="list-text">填写完之后<block ref="ba05023d0f1b5d4b64b6cad4cf9a7ecd" prefix=" " category="inline-code"></block>将包含正确值的文件应用配置文件：</block>
  <block id="2ee46f1547524b1cfc2f8b760b44c719" category="open-title">使用 CLI 标志</block>
  <block id="fc7791ffb26e7154ff5b48ab1b14bf8b" category="list-text">使用以下命令：<block ref="8b5806248570dbb13e7d3bc5e6c0ee37" prefix=" " category="inline-code"></block>用于指定各个参数的标志：</block>
  <block id="e131fc2359f1f35a2fdb476c3f19bfdd" category="list-text">创建一个名为的文件<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>。</block>
  <block id="785a1066f4a7291f0bd0c65d4529e79f" category="list-text">在文件中添加 nodeSelector 选项，并修改文件以添加或更改节点标签，从而根据您的环境需要进行限制。例如，以下文件包含默认的操作系统限制，但同时也针对特定区域和应用程序名称：</block>
  <block id="0b3a205b675b10deddbe1e4c76c36e22" category="list-text">应用以下值<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>文件：</block>
  <block id="86ff3a8cca72a77f236198059cede1b6" category="paragraph">这将默认限制替换为您在设置中指定的限制。<block ref="7eec75c3fd904f84005cd47f3bed0e47" prefix=" " category="inline-code"></block>文件。</block>
  <block id="e984343e441956b7136d09919877b5ab" category="open-title">使用 CR 创建支持包</block>
  <block id="dd942fa25b8e28c96c8d05e37b0f157e" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="699c503b46d4ca3ec78905dff3704cac" prefix=" " category="inline-code"></block> ）。</block>
  <block id="18924d9e76d2dc9a88bddb772904461d" category="list-text">配置以下属性：</block>
  <block id="3dbbdf39618ebec771728a10e75c52f9" category="list-text">*metadata.name*: (_必填_) 此自定义资源的名称；请为您的环境选择一个唯一且有意义的名称。</block>
  <block id="1d18312b2c5bd000f0693d25f38bddc9" category="list-text">*spec.triggerType*: (_Required_) 确定支持包是立即生成还是按计划生成。计划的数据包生成时间为世界协调时凌晨 12 点。可能值：</block>
  <block id="2b7dabba0077abe3732e0418b048a56b" category="list-text">已计划</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="list-text">手动</block>
  <block id="b541a1c308699e3b9e58d7a1aa6d3ad6" category="list-text">*spec.uploadEnabled*: (_可选_) 控制生成支持包后是否应将其上传到NetApp支持站点。如果未指定，则默认为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。可能值：</block>
  <block id="e836d7c4f6371da7534f60641286999b" category="list-text">false（默认值）</block>
  <block id="fa3e867f8599e4541ced8b0ced5b2cf1" category="list-text">*spec.dataWindowStart*: (_可选_) RFC 3339 格式的日期字符串，指定支持包中包含的数据窗口应开始的日期和时间。如果未指定，则默认为 24 小时前。您最早可以指定的日期范围是 7 天前。</block>
  <block id="139f344cca23a89c521bc7cc6c7100b8" category="paragraph">YAML 示例：</block>
  <block id="b8331cd182c8a703fc1ad6851d01da14" category="list-text">填写完之后<block ref="699c503b46d4ca3ec78905dff3704cac" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="b69675775a82aaa1e3307ebbe6a45fc0" category="open-title">使用 CLI 创建支持包</block>
  <block id="2294988013d14e5c254422b8164d83ad" category="list-text">创建支持包，将括号中的值替换为您环境中的信息。这<block ref="769627afa23a2b90f925b1091e474dc5" prefix=" " category="inline-code"></block>决定捆绑包是立即创建还是由计划安排决定创建时间，并且可以是<block ref="e1ba155a9f2e8c3be94020eef32a0301" prefix=" " category="inline-code"></block>或者<block ref="2b7dabba0077abe3732e0418b048a56b" prefix=" " category="inline-code"></block>。默认设置是<block ref="e1ba155a9f2e8c3be94020eef32a0301" prefix=" " category="inline-code"></block>。</block>
  <block id="a2a6b0573b13313f05c747e88489eec6" category="section-title">监视和检索支持包</block>
  <block id="4ff0609d2c162c23c5b740871050dda7" category="paragraph">使用任一方法创建支持包后，您可以监视其生成进度并将其检索到本地系统。</block>
  <block id="8aadefe9cc0cc86a02267b80b207f617" category="list-text">等待<block ref="f9826424ec573cdc9bb51c0f5cb897b0" prefix=" " category="inline-code"></block>到达<block ref="07ca5050e697392c9ed47e6453f1453f" prefix=" " category="inline-code"></block>状态。您可以使用以下命令监控生成进度：</block>
  <block id="3bea11acf8836689dcfed98dab0d1b2e" category="list-text">将支持包检索到您的本地系统。从已完成的AutoSupport包中获取复制命令：</block>
  <block id="ada844bd6c6a80bfce3dc4e9178eef4a" category="paragraph">找到<block ref="768c4e4d1692df1d92007f61dbeb0a6a" prefix=" " category="inline-code"></block>从输出中读取命令并运行它，将目标参数替换为您首选的本地目录。</block>
  <block id="dfb8cfd789dde682f000a96e0aabb1f1" category="list-text">将以下镜像拉取到本地计算机，更新标签，然后将其推送到您的私有镜像仓库：</block>
  <block id="e0f6b701766eb28d805d7ba1e820f582" category="list-text">登录注册表：</block>
  <block id="814565bb5d7e7359fff967986fd4195a" category="list-text">创建用于私有注册表身份验证的拉取密钥：</block>
  <block id="58bd941b0268654136e17a3f6361fa75" category="section-title">创建 AppVault CR</block>
  <block id="f5ddee36f3439fbf6875de509925b804" category="inline-link-macro">AppVault 自定义资源。</block>
  <block id="2fd92693952062fc00d949899370185d" category="section-title">定义应用程序</block>
  <block id="7eb786201a1068df31c2a8d7805c50bf" category="open-title">使用 CR 添加应用程序</block>
  <block id="b4b10aa7102ef4de9ba1d5672445c895" category="list-text">创建目标应用程序 CR 文件：</block>
  <block id="0f14679ea6b53d676a4e19300d32937e" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="6e1c6964e1bb7e391ff353b09e122d80" prefix=" " category="inline-code"></block> ）。</block>
  <block id="3b96edf2a12486fc5d9dfaf7e692cdfc" category="list-text">*metadata.name*: (_必填_) 应用程序自定义资源的名称。请注意您选择的名称，因为保护操作所需的其他 CR 文件会引用此值。</block>
  <block id="244fede3edf8f2ab57f281d777777961" category="list-text">*spec.includedNamespaces*: (_必需_) 使用命名空间和标签选择器来指定应用程序使用的命名空间和资源。应用程序命名空间必须包含在此列表中。标签选择器是可选的，可用于筛选每个指定命名空间内的资源。</block>
  <block id="cc8aa03bb88101c1901ab425b29a1901" category="list-text">*spec.includedClusterScopedResources*: (_可选_) 使用此属性指定要包含在应用程序定义中的集群范围资源。此属性允许您根据资源的组、版本、种类和标签来选择这些资源。</block>
  <block id="eba6898a839f426c3106a97f94614eb9" category="list-text">*groupVersionKind*: (_必需_) 指定集群范围资源的 API 组、版本和类型。</block>
  <block id="8d8a8010684a930aa7760c829cad4141" category="list-text">*labelSelector*: (_可选_) 根据标签筛选集群范围的资源。</block>
  <block id="1fdb8b98325df025bfd256fc475c0986" category="paragraph">如果需要在应用程序创建后应用此注解，可以使用以下命令：</block>
  <block id="2508b93e69f47b3a094284dbdc9a09de" category="list-text">（可选）添加筛选条件，包含或排除带有特定标签的资源：</block>
  <block id="b4d332d25d8164d8387707934254781d" category="admonition">当两者<block ref="a25777d0a6883efb33950a7cd7a8f9b9" prefix=" " category="inline-code"></block>和<block ref="2021b5ec814a388ca04af6c6d6c2d16f" prefix=" " category="inline-code"></block>被使用，<block ref="a25777d0a6883efb33950a7cd7a8f9b9" prefix=" " category="inline-code"></block>先运行，然后<block ref="2021b5ec814a388ca04af6c6d6c2d16f" prefix=" " category="inline-code"></block>应用于生成的资源。</block>
  <block id="964ba319e15e38c5b0f3ee2a3dd4a8f8" category="list-text">创建与您的环境相匹配的应用程序变更请求后，应用该变更请求。例如：</block>
  <block id="edb32c41feaaffb2d7ff10dac9d80312" category="open-title">使用 CLI 添加应用程序</block>
  <block id="221764e612f482dbef981bc478028287" category="list-text">使用以下示例之一创建并应用应用程序定义，将括号中的值替换为您环境中的信息。您可以使用逗号分隔的列表，并在示例中所示的参数中，将命名空间和资源包含在应用程序定义中。</block>
  <block id="26f08cf1da862c1ae831c562f3621d09" category="paragraph">在使用 CLI 创建应用程序时，要指定注解，可以使用以下方法：<block ref="3164592cacced1f14eeb788e764306a8" prefix=" " category="inline-code"></block>旗帜。</block>
  <block id="1ab026b6049460749549c7e94872c903" category="list-text">创建应用程序并使用文件系统冻结行为的全局设置：</block>
  <block id="5c69fd9a5297da7a82e38395fe1ca096" category="list-text">创建应用程序并配置本地应用程序设置以控制文件系统冻结行为：</block>
  <block id="6b556cca1436ef5909ccaa59f5aae989" category="paragraph">您可以使用<block ref="e80c5db95c437e3b5acee80112bd1f1a" prefix=" " category="inline-code"></block>和<block ref="484f02b530e920abf065e3f27b7a6d80" prefix=" " category="inline-code"></block>用于根据以下条件包含或排除资源的标志<block ref="303a9ae359153efd5b4c1067cd875175" prefix=" " category="inline-code"></block>例如组、种类、版本、标签、名称和命名空间，如下例所示：</block>
  <block id="0ef657dffb550796349fff7260ee7b1f" category="summary">您可以将备份或快照数据还原到不同的集群或存储类。</block>
  <block id="e2cc5e54cd44b8315b1324dec48b3d79" category="paragraph">您可以通过恢复备份数据在集群之间或不同的存储类之间迁移您的应用程序。</block>
  <block id="85ff05ce333a3cc83e4b1bece0b1a885" category="admonition">迁移应用程序时，为该应用程序配置的所有执行钩子都会随应用程序一起迁移。如果存在恢复后执行钩子，它将作为恢复操作的一部分自动运行。</block>
  <block id="dea2f94d534ebdd522c0137cd11f63bf" category="section-title">备份和恢复操作</block>
  <block id="b21f1727ed04fb70c8e47cb11cdfb2bb" category="paragraph">针对以下场景，您可以自动执行特定的备份和恢复任务，以执行备份和恢复操作。</block>
  <block id="a9764be0f1589c38e0a7df19889c7d63" category="section-title">克隆到同一集群</block>
  <block id="5a9889aaf704b3737fe054ecabd850fc" category="paragraph">要将应用程序克隆到同一集群，请创建快照或备份，然后将数据还原到同一集群。</block>
  <block id="365d382b2d9ecca9b0d40171c69b38ff" category="list-text">执行以下操作之一：</block>
  <block id="af9c364e0933200b7b8c1e7e13947ccf" category="inline-link-macro">创建快照</block>
  <block id="a73aa64574ccfae0cf05d9da96bd1301" category="list-text"><block ref="e078308a27dcac975eec5d2adaa1104c" category="inline-link-macro-rx"></block>。</block>
  <block id="f99b69945a176ffbedac86a22cf6c413" category="inline-link-macro">创建备份</block>
  <block id="d0b37af201761eb2698b45f7c3f6d0d8" category="list-text"><block ref="7d9cd4227c8376552577f7b664ce81bb" category="inline-link-macro-rx"></block>。</block>
  <block id="cf36005406fb9e7864efedea0a35a8a0" category="list-text">在同一集群上，根据您创建的是快照还是备份，执行以下操作之一：</block>
  <block id="2d173330624878d1a02dc399b82aa10b" category="inline-link-macro">从快照恢复数据</block>
  <block id="00b559822f9df33b751ce11389fb7c7a" category="list-text"><block ref="137b81ae6c60df62029e75ad69c6bacd" category="inline-link-macro-rx"></block>。</block>
  <block id="1c7b9a68982aa2ad5f1d69eeb5bdf99e" category="inline-link-macro">从备份中恢复数据</block>
  <block id="e27031b9d0bffffcf2abd2136eed21f5" category="list-text"><block ref="71bc4096317f8eb78a9951851bc1165b" category="inline-link-macro-rx"></block>。</block>
  <block id="403ecb1db6fa0f1bb20e787bb5f5dacd" category="section-title">克隆到不同的集群</block>
  <block id="a1f41e52e9ddbd9f87ecd032c237b1c0" category="inline-link-macro">SnapMirror 复制</block>
  <block id="f6acb98f21e25882aaaa267339abcc92" category="admonition">您可以使用以下方法在不同的集群之间复制应用程序<block ref="69314cba6d14bf88b8e850c978056766" category="inline-link-macro-rx"></block>。</block>
  <block id="fe961357dbe4b6bf8b5503f4919ea35c" category="list-text">确保目标集群上已配置包含备份的对象存储桶的 AppVault CR。</block>
  <block id="baafbccab17d07f9ba18e7becb7c76d2" category="inline-link-macro">从备份中恢复数据</block>
  <block id="878bbf0662ed19ef900e4e06bfad92d2" category="list-text">在目标集群上，<block ref="11860f9f3ec51316f8ebc9805806b6cd" category="inline-link-macro-rx"></block> 。</block>
  <block id="181aa092ab965b34bcee90e25056f876" category="section-title">将应用程序从一个存储类迁移到另一个存储类</block>
  <block id="259898c4a16b145b9fb12c18949c2e58" category="paragraph">您可以通过将备份还原到目标存储类，将应用程序从一个存储类迁移到另一个存储类。</block>
  <block id="f1ad7bca566917ee78958caa78fab3f5" category="paragraph">例如（不包括恢复 CR 中的密钥）：</block>
  <block id="daf2d2aebeca09dea5ece5c9c1513383" category="open-title">使用 CR 恢复快照</block>
  <block id="a35b06511e032bee46bbed064afa12dc" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="fac6dff7f801a4983f4a536dbcbd40d7" prefix=" " category="inline-code"></block>。</block>
  <block id="3585700696abe40ccc0973202ddace0a" category="list-text">在您创建的文件中，配置以下属性：</block>
  <block id="ac6cdb13ccdd5d0ac3195b3301db572c" category="list-text">*spec.appArchivePath*: AppVault 内存储快照内容的路径。您可以使用以下命令查找此路径：</block>
  <block id="d2e7f59eea5f95f37b023a243745727d" category="list-text">*spec.appVaultRef*: (_必需_) 存储快照内容的 AppVault 的名称。</block>
  <block id="33dc1feba43183f93ade318576611f4a" category="list-text">*spec.namespaceMapping*：恢复操作的源命名空间到目标命名空间的映射。代替<block ref="a6f7f0a873c27a67ee3194949076866b" prefix=" " category="inline-code"></block>和<block ref="2cfb071d6be7d4cf9e297100f62858fe" prefix=" " category="inline-code"></block>利用来自周围环境的信息。</block>
  <block id="12ed8140e585382bd7caee15c2ebb002" category="list-text">如果您需要仅选择要恢复的应用程序的某些资源，则可以添加筛选条件，以包含或排除带有特定标签的资源：</block>
  <block id="15212a55e2108abef019ef0de4a2d413" category="list-text">*resourceFilter.resourceSelectionCriteria*：（筛选时必需）使用<block ref="0daf9ee05d33b85e4cfc7be473c64e9b" prefix=" " category="inline-code"></block>包含或排除 resourceMatchers 中定义的资源。添加以下 resourceMatchers 参数以定义要包含或排除的资源：</block>
  <block id="bca1b1b2b1a229dc37dffa4f7012c02d" category="list-text">填写完之后<block ref="fac6dff7f801a4983f4a536dbcbd40d7" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="ffe607ccb2c74bd77fcfcd7f0ff7691e" category="open-title">使用 CLI 恢复快照</block>
  <block id="a77b4ff586cfbf08c54732a1ced52e4f" category="list-text">将快照还原到不同的命名空间，并将括号中的值替换为您环境中的信息。</block>
  <block id="4f7a601ab79eb07bd8f0460d0e4ebccf" category="list-text">这<block ref="c322d3de29d2b0c5e2e011dad5e77df2" prefix=" " category="inline-code"></block>参数使用命名空间和快照名称，格式如下<block ref="7310980de32cd5ca687291f4b01b2e19" prefix=" " category="inline-code"></block>。</block>
  <block id="9a3152a9bfe0e487c80e9e42ee22e9f0" category="list-text">这<block ref="65e11896cb6b19f7dcb2432e67c74725" prefix=" " category="inline-code"></block>该参数使用冒号分隔的命名空间，将源命名空间映射到正确的目标命名空间，格式如下：<block ref="07c70c21dcae158a4b2f0d389a52981b" prefix=" " category="inline-code"></block> 。</block>
  <block id="3909674c7e76459d193fe9c27f127cbf" category="summary">使用自动保护策略或临时方法，通过创建快照和备份来保护所有应用程序。</block>
  <block id="2530ad97c013f5d8d9c69004a4e7ee67" category="section-title">创建按需快照</block>
  <block id="9bbdcd6083ca1f29424ab7d4e6e6d3f5" category="paragraph">您可以随时创建按需快照。</block>
  <block id="c2c21ce64dd4770c44c8642d322a5424" category="admonition">如果集群范围的资源在应用程序定义中被明确引用，或者被引用到任何应用程序命名空间，则这些资源将被包含在备份、快照或克隆中。</block>
  <block id="ca5d8da21766c0b74083bb89d9b98f19" category="open-title">使用 CR 创建快照</block>
  <block id="d3455b82ff23d66412cff307dea26e95" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="30f7bac2bbe029d2d24e82f27526854c" prefix=" " category="inline-code"></block>。</block>
  <block id="14c5017706ef7ba38dbfced0b670f7e4" category="list-text">*spec.applicationRef*: 要创建快照的应用程序的 Kubernetes 名称。</block>
  <block id="92c5bebe15e018e9b60ed9fa2a5d7736" category="list-text">*spec.appVaultRef*: (_必需_) 应存储快照内容（元数据）的 AppVault 的名称。</block>
  <block id="a9860c462819471295facd0a13fc4275" category="list-text">*spec.reclaimPolicy*: (_可选_) 定义当快照 CR 被删除时，快照的 AppArchive 会发生什么情况。这意味着即使设置为<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>快照将被删除。有效选项：</block>
  <block id="ff5ca6a0665c8d286d507fe36b867e1c" category="list-text"><block ref="afece4245269582cb2f1009d4fb52047" prefix="" category="inline-code"></block>（默认）</block>
  <block id="c009f85498c5a7a2db78e1874e6dd4b1" category="list-text"><block ref="f2a6c498fb90ee345d997f888fce3b18" prefix="" category="inline-code"></block></block>
  <block id="e405f936b8c322965ea5098c0dbead5e" category="list-text">填写完之后<block ref="30f7bac2bbe029d2d24e82f27526854c" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="70e7d17c41da1ec8002b8b8735b5d0b2" category="open-title">使用 CLI 创建快照</block>
  <block id="210011bd2b9ec4d5301f86e4a42cd17a" category="list-text">创建快照，将括号中的值替换为您环境中的信息。例如：</block>
  <block id="6c4e6d5940a93fcf9cfb1c5d53280da3" category="section-title">创建按需备份</block>
  <block id="f874973a64b67b3f5a5bb3aa28c5ed12" category="paragraph">您可以随时备份应用程序。</block>
  <block id="e0babda055ca7a962e4010e772393eb7" category="open-title">使用 CR 创建备份</block>
  <block id="adfd482111138eb2dfed01cdbaf4bead" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="a130741c8dff3b771a616715e2390607" prefix=" " category="inline-code"></block>。</block>
  <block id="888ea90f9844794ae90f13cbee8b341f" category="list-text">*spec.applicationRef*: (_必需_) 要备份的应用程序的 Kubernetes 名称。</block>
  <block id="df4c9919e99b5b20e10644af2e6480e1" category="list-text">*spec.appVaultRef*: (_必需_) 应存储备份内容的 AppVault 的名称。</block>
  <block id="2c5daece4baabe00a1e913f6f4248b54" category="list-text">*spec.dataMover*: (_可选_) 指示要用于备份操作的备份工具的字符串。可能的值（区分大小写）：</block>
  <block id="2baffe938961bfb9edd7d7ddfd52e2e1" category="list-text"><block ref="5f1c05bdfa0fa9da52e78fce65f0891a" prefix="" category="inline-code"></block></block>
  <block id="02c4383beef4fc06361dc4ef7bd9762a" category="list-text"><block ref="d112b025f416527f157666baac7d0ff7" prefix="" category="inline-code"></block>（默认）</block>
  <block id="5a848fb25ba88be36b674bded99badbd" category="list-text">*spec.reclaimPolicy*: (_可选_) 定义从其声明中释放备份时会发生什么。可能值：</block>
  <block id="13001655f60b86601d45076ffb7e8cb4" category="list-text">*spec.snapshotRef*: (_可选_): 要用作备份源的快照名称。如果未提供，则会创建并备份临时快照。</block>
  <block id="ba2af206b00fb98d583a5fe7908af2cc" category="list-text">*metadata.annotations.protect.trident.netapp.io/full-backup* : (_可选_) 此注释用于指定备份是否应为非增量备份。默认情况下，所有备份都是增量的。但是，如果此注释设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>这样，备份就变成了非增量备份。如果未指定，备份将遵循默认的增量备份设置。最佳实践是定期执行完整备份，然后在两次完整备份之间执行增量备份，以最大限度地降低与恢复相关的风险。</block>
  <block id="e3cdcd12b4f53ac42049007406401d18" category="list-text">填写完之后<block ref="a130741c8dff3b771a616715e2390607" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="4dd48cffc8290e0b33e5c4ee6ddc6dbb" category="open-title">使用命令行创建备份</block>
  <block id="25ccf268b4f889fe28d3f3de94aace02" category="list-text">创建备份，将括号中的值替换为您环境中的信息。例如：</block>
  <block id="93b1107cde6ba041513cd9ccf7b4bae0" category="paragraph">您也可以选择使用<block ref="53f5240b338c91a0568f15e2562a35de" prefix=" " category="inline-code"></block>用于指定备份是否应为非增量备份的标志。默认情况下，所有备份都是增量的。使用此标志后，备份将变为非增量备份。最佳实践是定期执行完整备份，然后在两次完整备份之间执行增量备份，以最大限度地降低与恢复相关的风险。</block>
  <block id="451d39e79b7f4418d96b486e79bbce7d" category="section-title">制定数据保护计划</block>
  <block id="4efb4e385545dd4fb4a8cf16e5ef7763" category="paragraph">保护策略通过按照定义的计划创建快照、备份或两者来保护应用程序。您可以选择每小时、每天、每周和每月创建快照和备份，并可以指定要保留的副本数量。您可以使用 full-backup-rule 注释来安排非增量式完整备份。默认情况下，所有备份都是增量的。定期执行完整备份以及其间的增量备份有助于降低与恢复相关的风险。</block>
  <block id="71f68550bd8133367f60c4ea58f6680d" category="list-text">您只能通过设置来创建快照计划。<block ref="90d510783632c9f8604cd880d9f84137" prefix=" " category="inline-code"></block>归零和<block ref="460d2880d85882a9c98985b9b97c15f8" prefix=" " category="inline-code"></block>取大于零的值。环境<block ref="460d2880d85882a9c98985b9b97c15f8" prefix=" " category="inline-code"></block>将快照值设为零意味着任何计划备份仍会创建快照，但这些快照是临时的，会在备份完成后立即删除。</block>
  <block id="1f3ba9ee33f6eeade259b37d0a9d4295" category="open-title">使用变更请求 (CR) 创建计划。</block>
  <block id="0e94d109e3c6dd8f63d25b03253b5d5b" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="8b0c6e1f32e0c117335dedae62b11dba" prefix=" " category="inline-code"></block>。</block>
  <block id="fd3508664419c1ac5449e5dc6073188b" category="list-text">*spec.applicationRef*: 要备份的应用程序的 Kubernetes 名称。</block>
  <block id="183c1f11eb5fcbc4a480f1ed7ec6315d" category="list-text">*spec.backupRetention*：要保留的备份数量。零表示不应创建备份（仅快照）。</block>
  <block id="53ea99d8bfae17bb8fc2186524166892" category="list-text">*spec.snapshotRetention*：要保留的快照数量。零表示不创建任何快照。</block>
  <block id="da9137c7fbfdc9b7f02e3ca8def0431d" category="list-text">*spec.granularity*: 计划运行的频率。可能的值，以及相应的必填字段：</block>
  <block id="50b9f8f4650a278b466928c2105fc23a" category="list-text"><block ref="769cb50c95fd3a43c659aa73aba99e5b" prefix="" category="inline-code"></block>（需要您指定）<block ref="aadd5cec42dbc02d51f62a1095401f59" prefix=" " category="inline-code"></block> ）</block>
  <block id="03b866ae4a8a50619a4126154196606b" category="list-text"><block ref="c512b685438f41daa7386329a3b8f8d3" prefix="" category="inline-code"></block>（需要您指定）<block ref="aadd5cec42dbc02d51f62a1095401f59" prefix=" " category="inline-code"></block>和<block ref="9199af27775b1a2a876e6d7b25540711" prefix=" " category="inline-code"></block>）</block>
  <block id="2cfd34c47c4dbe46650e40185474bd21" category="list-text"><block ref="6c25e6a6da95b3d583c6ec4c3f82ed4d" prefix="" category="inline-code"></block>（需要您指定）<block ref="d5870327522a71f5b75f9d3793d0dc97" prefix=" " category="inline-code"></block> ， 和<block ref="4a04848e0e6e9423892ebc93ae61842d" prefix=" " category="inline-code"></block>）</block>
  <block id="e36f4a95a41882feb14dd016e82700bc" category="list-text"><block ref="9030e39f00132d583da4122532e509e9" prefix="" category="inline-code"></block>（需要您指定）<block ref="d5870327522a71f5b75f9d3793d0dc97" prefix=" " category="inline-code"></block> ， 和<block ref="9a7606959f42328ceeef95d70c353158" prefix=" " category="inline-code"></block>）</block>
  <block id="8461dc1f0cf640973db2ba7288efba21" category="list-text"><block ref="90589c47f06eb971d548591f23c285af" prefix="" category="inline-code"></block></block>
  <block id="85b77ce1b7f65fe79fd40e5b53ba60f5" category="list-text">*spec.dayOfMonth*：（可选）计划应运行的月份日期（1 - 31）。如果粒度设置为，则此字段为必填项。<block ref="9030e39f00132d583da4122532e509e9" prefix=" " category="inline-code"></block> 。该值必须以字符串形式提供。</block>
  <block id="c3d0b5531d946d2ff5d8deeeec3e7984" category="list-text">*spec.dayOfWeek*：（可选）计划应运行的星期几（0 - 7）。值 0 或 7 表示星期日。如果粒度设置为，则此字段为必填项。<block ref="6c25e6a6da95b3d583c6ec4c3f82ed4d" prefix=" " category="inline-code"></block> 。该值必须以字符串形式提供。</block>
  <block id="6bacf4f9c6600aa7f82b6f6b4f8a85e0" category="list-text">*spec.hour*：（可选）计划应运行的小时数（0 - 23）。如果粒度设置为，则此字段为必填项。<block ref="c512b685438f41daa7386329a3b8f8d3" prefix=" " category="inline-code"></block> ，<block ref="6c25e6a6da95b3d583c6ec4c3f82ed4d" prefix=" " category="inline-code"></block> ， 或者<block ref="9030e39f00132d583da4122532e509e9" prefix=" " category="inline-code"></block>。该值必须以字符串形式提供。</block>
  <block id="7793fda5cb73b26f1ecdca11dcd1383e" category="list-text">*spec.minute*：（可选）计划应运行的小时中的分钟数（0 - 59）。如果粒度设置为，则此字段为必填项。<block ref="769cb50c95fd3a43c659aa73aba99e5b" prefix=" " category="inline-code"></block> ，<block ref="c512b685438f41daa7386329a3b8f8d3" prefix=" " category="inline-code"></block> ，<block ref="6c25e6a6da95b3d583c6ec4c3f82ed4d" prefix=" " category="inline-code"></block> ， 或者<block ref="9030e39f00132d583da4122532e509e9" prefix=" " category="inline-code"></block>。该值必须以字符串形式提供。</block>
  <block id="1770a13eba6600496a86d2f1cf357813" category="list-text">*metadata.annotations.protect.trident.netapp.io/full-backup-rule*: (_可选_) 此注解用于指定安排完整备份的规则。你可以将其设置为<block ref="f9f90eeaf400d228facde6bc48da5cfb" prefix=" " category="inline-code"></block>您可以根据需要进行持续完整备份或自定义备份。例如，如果您选择按日粒度进行备份，则可以指定应进行完整备份的星期几。</block>
  <block id="16220401716289e6ffa12bfc49da1d84" category="paragraph">备份和快照计划的示例 YAML：</block>
  <block id="ce230d4d200ba39549537496edaaef6a" category="paragraph">仅快照计划的示例 YAML：</block>
  <block id="1326c499c45cd471c6075891c6573130" category="list-text">填写完之后<block ref="8b0c6e1f32e0c117335dedae62b11dba" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="6bb2ab2bbc2b0f3f5faec961628f6f4b" category="open-title">使用 CLI 创建计划任务</block>
  <block id="95e2bfc6f531a05575927e45b0a34558" category="list-text">创建保护计划，将括号中的值替换为您环境中的信息。例如：</block>
  <block id="0708d6413707329d6051a0456f0810ac" category="admonition">您可以使用<block ref="deb04333ae980bc0147681e476e1941c" prefix=" " category="inline-code"></block>查看此命令的详细帮助信息。</block>
  <block id="ab5807fb06fd654f730a4ed5a02bb950" category="paragraph">您可以设置<block ref="61df7cc86eb24ab1300f0e74e74bb50c" prefix=" " category="inline-code"></block>标记<block ref="f9f90eeaf400d228facde6bc48da5cfb" prefix=" " category="inline-code"></block>您可以根据需要进行持续完整备份或自定义备份。例如，如果您选择按天粒度进行备份，则可以指定应在哪些工作日进行完整备份。例如，使用<block ref="d416cce9d6bcb838c8958b9fbb84dffa" prefix=" " category="inline-code"></block>安排每周一和周四进行全面备份。</block>
  <block id="19c776919085070d66d199dd494adbbf" category="paragraph">对于仅快照计划，请设置<block ref="39c61d5d6dee0f5540cfcb77307edd90" prefix=" " category="inline-code"></block>并指定一个大于 0 的值<block ref="2c3fac80fc69264c6dbace5f18065639" prefix=" " category="inline-code"></block>。</block>
  <block id="efb44cfe1d5b8d9954ea045385675c66" category="section-title">删除快照</block>
  <block id="a37bf6328466dc531288498c6041de5f" category="paragraph">删除不再需要的已安排或按需快照。</block>
  <block id="3eb928cdf7a13317d47b6aff6e1777bc" category="list-text">删除与快照关联的快照 CR：</block>
  <block id="cb2cecbd9776fc0c17c7929541fe9404" category="section-title">删除备份</block>
  <block id="2072fc95a1bd08ae58a002d5b61a84d0" category="paragraph">删除不再需要的计划备份或按需备份。</block>
  <block id="396e0c641a3eb6083fa0ba7badcff8ac" category="admonition">确保回收策略设置为<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>从对象存储中删除所有备份数据。该策略的默认设置为：<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>避免意外数据丢失。如果政策不改变<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>备份数据将保留在对象存储中，需要手动删除。</block>
  <block id="7b30bbf41be45c1c70a68e6dd971d83a" category="list-text">删除与备份关联的备份 CR：</block>
  <block id="b4907a30deb60cd2f8ea2856235ce4d7" category="section-title">检查备份操作的状态</block>
  <block id="b030755f5014f11eb86aee527d4ef872" category="paragraph">您可以使用命令行来检查正在进行、已完成或已失败的备份操作的状态。</block>
  <block id="83fe182363ccdea33046e538aec4ac23" category="list-text">使用以下命令检索备份操作的状态，将方括号中的值替换为您环境中的信息：</block>
  <block id="bdd3c7731ba2eae7059bfebd0d56c7e3" category="section-title">启用 Azure NetApp 文件 (ANF) 操作的备份和还原</block>
  <block id="a3ba5a3fd33b03f148e52fd833cda7c3" category="paragraph">确保以下事项：</block>
  <block id="a9910fb38baec2aa849c3ea6191b1cf9" category="list-text">你有<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>已选为存储后端的默认存储类。</block>
  <block id="579cc8ac85c74501fbfa1bac4d013c1f" category="example-title">展开查看配置步骤</block>
  <block id="b1927eae954479de09c736cae4ed08dd" category="list-text">如果 ANF 卷是在升级到Trident 24.10 之前创建的，请在Trident中执行以下操作：</block>
  <block id="119a6ab21356c173b517e4baf8ab21d3" category="list-text">为每个基于 azure-netapp-files 且与应用程序关联的 PV 启用快照目录：</block>
  <block id="9cb0a94d3b3051cae7cda63d4c5aa1d6" category="list-text">确认已为每个关联的 PV 启用快照目录：</block>
  <block id="54472d1da4b0c6eadf8684e846b25dcc" category="paragraph">回复：</block>
  <block id="480c9b5f979d1ce95ea2a58b09826d1b" category="list-text">亚马逊弹性 Kubernetes 服务 (EKS)</block>
  <block id="974030a30a48754684d05541fd5e96c9" category="list-text">谷歌 Kubernetes 引擎 (GKE)</block>
  <block id="f3bd1985b243e9691bbbd63c6702344b" category="list-text">Microsoft Azure Kubernetes 服务 (AKS)</block>
  <block id="b175d08ac03101cd40f077848d436e1f" category="list-text">红帽 OpenShift</block>
  <block id="6577b94f9943e513915919cfd0dc5909" category="list-text">SUSE Rancher</block>
  <block id="c395793804bd9dfa82ff727781faf3c5" category="list-text">VMware Tanzu 产品组合</block>
  <block id="1de3a8db0dcc39abe68ae2b506a8f0ac" category="list-text">上游 Kubernetes</block>
  <block id="9ac0dd27d420b7b48ca72e463ae95e18" category="inline-link">这些说明</block>
  <block id="ca3930511e1c5997e851e891e33190ab" category="list-text">ONTAP存储阵列</block>
  <block id="e254891423d193d0e614eaf948880de5" category="paragraph">请确保您的存储后端满足以下要求：</block>
  <block id="28b0a2e1fa7af6d4a2a83bc61c130c0f" category="list-text">确保连接到集群的NetApp存储使用的是Trident 24.02 或更高版本（建议使用Trident 24.10）。</block>
  <block id="1efa9b79a24750278cc3058eaf2ead00" category="list-text">请确保您拥有NetApp ONTAP存储后端。</block>
  <block id="c9a524733ac9eb25fbf1980538b5437d" category="list-text">请确保您已配置用于存储备份的对象存储桶。</block>
  <block id="f4ce5a5f08fdc6de51b81cc305a21fd0" category="section-title">nas-economy 容量要求</block>
  <block id="43da051477acee60af3ad54451d3d090" category="paragraph">某些应用程序与使用快照目录的卷不兼容。对于这些应用，您需要通过在ONTAP存储系统上运行以下命令来隐藏快照目录：</block>
  <block id="beb2d6f4cedfc5b87a39d1766369fade" category="paragraph">您可以通过对每个 nas-economy 卷运行以下命令来启用快照目录，并将命令替换为<block ref="a86374477aa0b3d451812bb6ced0458d" prefix=" " category="inline-code"></block>使用要更改的卷的 UUID：</block>
  <block id="70117c3862b4c793cc80799862e6fde9" category="admonition">您可以通过设置Trident后端配置选项，为新卷默认启用快照目录。<block ref="7ad68fdac2eac069eb8ed0fc45b0fb74" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。现有卷数不受影响。</block>
  <block id="ac84b7596169ab3fb6c24e8a5c85c234" category="section-title">使用 KubeVirt 虚拟机保护数据</block>
  <block id="3ab436334531996382ccf17d7d3a4d69" category="section-title">SnapMirror复制的要求</block>
  <block id="701fc71f0daf0d596d98b3af41d195dd" category="list-text">本地部署的NetApp FAS、 AFF和ASA集群</block>
  <block id="00ae925249b1dcd734cdb679b48bf8f7" category="list-text">NetApp ONTAP Select</block>
  <block id="0f0b99ea2f70cd363c2c6a279f74e760" category="list-text">NetApp Cloud Volumes ONTAP</block>
  <block id="9f91d52d37c43ec162560596ac851ec9" category="section-title">ONTAP集群对SnapMirror复制的要求</block>
  <block id="6ed8f95cb1dcd3baff756120151793a9" category="paragraph">如果您计划使用SnapMirror复制功能，请确保您的ONTAP集群满足以下要求：</block>
  <block id="070b998f5495f2da2fb3ac5053772d1e" category="list-text"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>：极品飞车</block>
  <block id="48af35aa41f6c14dcd31a429e161cd45" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>：iSCSI</block>
  <block id="af09466318992e13530265625ea96e63" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>：FC</block>
  <block id="53b96f55224c3a6f51becdf09ad8ffe6" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>：NVMe/TCP（最低要求ONTAP版本 9.15.1）</block>
  <block id="ba84728ffba482ceb12371a53be2f636" category="inline-link">ONTAP中的SnapMirror许可概述</block>
  <block id="b677eb65f7f869d18b845725a133a8d5" category="list-text">*许可证*：使用数据保护包的ONTAP SnapMirror异步许可证必须在源 ONTAP 集群和目标ONTAP集群上启用。请参阅<block ref="a7b9425cefc4a3715b38951f4b2b6b35" category="inline-link-rx"></block>了解更多信息。</block>
  <block id="a167444fdea2847400372052380975f2" category="inline-link-macro">ONTAP One 附带的许可证</block>
  <block id="e25ea621e214708b88885c09ed9b5b9b" category="paragraph">从ONTAP 9.10.1 开始，所有许可证均以NetApp许可证文件 (NLF) 的形式交付，这是一个可以启用多种功能的单个文件。请参阅<block ref="99e347051ec17074ee747e0bde509d7d" category="inline-link-macro-rx"></block>了解更多信息。</block>
  <block id="afafd0e230868b7ce6a0a4fcf57ee6d2" category="admonition">仅支持SnapMirror异步保护。</block>
  <block id="ed097f5d093bf5311313c62bfb2f2d5a" category="section-title">SnapMirror复制的对等连接注意事项</block>
  <block id="a56ca0c4752a7197e296cb9141e9be9f" category="paragraph">如果您计划使用存储后端对等互连，请确保您的环境满足以下要求：</block>
  <block id="9fecd08b776fdfca7b33426363edf913" category="inline-link">集群和SVM对等连接概述</block>
  <block id="ddae31913091b421eaff815ed1e19b4f" category="list-text">*集群和 SVM*： ONTAP存储后端必须相互连接。请参阅<block ref="36ecaf21e9ca81a83e736deb4ff5c657" category="inline-link-rx"></block>了解更多信息。</block>
  <block id="94ac6b3955eab183cb88ab17c91000eb" category="admonition">确保两个ONTAP集群之间复制关系中使用的 SVM 名称是唯一的。</block>
  <block id="39741179a069c04c2421056e0f2b56fa" category="list-text">* NetApp Trident和 SVM*：对等远程 SVM 必须可供目标集群上的NetApp Trident使用。</block>
  <block id="57fe82c052fea1c269ca2b14e92e80d3" category="section-title">用于SnapMirror复制的Trident / ONTAP配置</block>
  <block id="62fd283f8b260923bfb8cde9c318b507" category="section-title">SnapMirror复制的 Kubernetes 集群要求</block>
  <block id="03ba2e33bef23ce0f974f7521e636992" category="paragraph">请确保您的 Kubernetes 集群满足以下要求：</block>
  <block id="da635a644d2727b18debb9ea48c169b6" category="list-text">*AppVault 可访问性*：源集群和目标集群都必须具有网络访问权限，才能从 AppVault 读取数据和写入数据，以实现应用程序对象复制。</block>
  <block id="debae13e33c5f861b21b322eed48bf3f" category="list-text">*网络连接*：配置防火墙规则、存储桶权限和 IP 允许列表，以启用两个集群和 AppVault 之间通过 WAN 进行通信。</block>
  <block id="35d8960b4053e461085ad015f6805d14" category="admonition">许多企业环境在广域网连接中实施严格的防火墙策略。在配置复制之前，请与您的基础架构团队确认这些网络要求。</block>
  <block id="f346d32ba5d9c332bf8577bf1bacda07" category="list-text">恢复应用程序时，为该应用程序配置的所有执行钩子都会随应用程序一起恢复。如果存在恢复后执行钩子，它将作为恢复操作的一部分自动运行。</block>
  <block id="961ce5b35a999d2dc3f7e386f74eb614" category="list-text">支持从备份恢复到不同的命名空间或恢复到原始命名空间（适用于 qtree 卷）。但是，对于 qtree 卷，不支持从快照恢复到不同的命名空间或恢复到原始命名空间。</block>
  <block id="a082effb2d23d4eb077129001a77582f" category="section-title">从备份还原到不同的命名空间</block>
  <block id="cff063350a0daf1b0ee4c6c97eb2e2de" category="admonition">将备份还原到具有现有资源的不同命名空间不会更改与备份中资源同名的任何资源。要恢复备份中的所有资源，要么删除并重新创建目标命名空间，要么将备份恢复到新的命名空间。</block>
  <block id="d110d36251c4dd04b7da5ef237ac6063" category="inline-link">科皮亚文件</block>
  <block id="0334c5d881452d9144d4edf93d44ff85" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="aa3356b96c40153ef83fe9854ede7a70" prefix=" " category="inline-code"></block>。</block>
  <block id="8ebefb3e84a05b2e3bf54824870d776d" category="list-text">*spec.appArchivePath*: AppVault 内存储备份内容的路径。您可以使用以下命令查找此路径：</block>
  <block id="3f1db1c30ba33e5d04499f000ed77f97" category="list-text">*spec.appVaultRef*: (_必需_) 存储备份内容的 AppVault 的名称。</block>
  <block id="18ad656f28db1ef6b2d76d21959ca243" category="list-text">填写完之后<block ref="aa3356b96c40153ef83fe9854ede7a70" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="6a07207e8441bfa8c4c36dc925112780" category="list-text">将备份还原到不同的命名空间，并将括号中的值替换为您环境中的信息。这<block ref="65e11896cb6b19f7dcb2432e67c74725" prefix=" " category="inline-code"></block>该参数使用冒号分隔的命名空间，将源命名空间映射到正确的目标命名空间，格式如下：<block ref="07c70c21dcae158a4b2f0d389a52981b" prefix=" " category="inline-code"></block> 。例如：</block>
  <block id="0bfcabe961e72fea535a073143d53fad" category="section-title">从备份恢复到原始命名空间</block>
  <block id="7260bc412b6c22c2589f01098c1f4430" category="paragraph">您可以随时将备份恢复到原始命名空间。</block>
  <block id="34653be4af07bad31b9a3775f18b1b5f" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="59a09233aaa2a2c9e25fc46650bd6dee" prefix=" " category="inline-code"></block>。</block>
  <block id="349d4c53fe9d2e740d60f7ce8094c294" category="list-text">填写完之后<block ref="59a09233aaa2a2c9e25fc46650bd6dee" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="11d13ce9542ccbfd1e47138c96b125a1" category="list-text">将备份恢复到原始命名空间，并将括号中的值替换为您环境中的信息。这<block ref="402051f4be0cc3aad33bcf3ac3d6532b" prefix=" " category="inline-code"></block>参数使用命名空间和备份名称，格式如下<block ref="7310980de32cd5ca687291f4b01b2e19" prefix=" " category="inline-code"></block>。例如：</block>
  <block id="d1548585dadda37a28905a23e22cf65d" category="section-title">从备份恢复到不同的集群</block>
  <block id="7fa8874b1f645ca2af9d81b51985b8fb" category="paragraph">如果原始集群出现问题，您可以将备份还原到其他集群。</block>
  <block id="dd4ee610bd1d035c73bc0cbcd80e46da" category="paragraph">确保满足以下先决条件：</block>
  <block id="b20f8883edb9068c67a2faeb3c083d38" category="list-text">目标集群可以访问与源集群相同的 AppVault 的存储桶路径，备份就存储在该存储桶中。</block>
  <block id="2358fb4006fff416413cb9bfc04e4b73" category="list-text">确保 AWS 会话令牌的过期时间足以满足任何长时间运行的恢复操作。如果在恢复操作期间令牌过期，则操作可能会失败。</block>
  <block id="df710f89ebb9e663bd3d66607a0bf413" category="inline-link">AWS 文档</block>
  <block id="f3aa7db516c38030a276a5895520407a" category="list-text">请参阅<block ref="968595e57d50a64e3fbe0f06bc16cb91" category="inline-link-rx"></block>有关 AWS 资源凭证的更多信息。</block>
  <block id="1ff83a5266e9e025c2984e0c10dea90e" category="admonition">确保用于应用程序还原的命名空间存在于目标集群上。</block>
  <block id="8d433ae9a21c49e9e5433ebd408605c0" category="list-text">查看目标集群中可用 AppVault 的备份内容：</block>
  <block id="378e6f0ba7080535a4462b5311befb40" category="paragraph">运行此命令将显示 AppVault 中可用的备份，包括其来源集群、相应的应用程序名称、时间戳和归档路径。</block>
  <block id="52b5830420efb96c3a91beb52bac3b23" category="paragraph">*示例输出：*</block>
  <block id="053aba80de03f3fdf626d1c858342330" category="list-text">使用 AppVault 名称和归档路径将应用程序还原到目标集群：</block>
  <block id="fceebbe32c1f7b24c54d6a4e8a0fa776" category="admonition">如果 BackupRestore CR 不可用，您可以使用步骤 2 中提到的命令来查看备份内容。</block>
  <block id="4ef55c1fec2de9218af40d16cbc021a4" category="list-text">使用以下命令恢复应用程序，将括号中的值替换为您环境中的信息。命名空间映射参数使用冒号分隔的命名空间，将源命名空间映射到正确的目标命名空间，格式为 source1:dest1,source2:dest2。例如：</block>
  <block id="db4c6bfd26488f4d6ab2ec6129b067d8" category="section-title">从快照还原到不同的命名空间</block>
  <block id="15910dd29963e5df5f2b5879472bcc00" category="admonition">SnapshotRestore 支持<block ref="b57d666629acffb30cc697faadc136b5" prefix=" " category="inline-code"></block>属性，但仅当源存储类和目标存储类使用相同的存储后端时才有效。如果您尝试恢复到<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>如果使用不同的存储后端，则恢复操作将失败。</block>
  <block id="941a76112ae80457a7a22ae552218be9" category="section-title">从快照恢复到原始命名空间</block>
  <block id="a392e5395f0751460dc460cd6ec5e89d" category="paragraph">您可以随时将快照恢复到原始命名空间。</block>
  <block id="4d18dba9a79fbe92e2bb99f0a9300df3" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="620b0dae36dbe6aeaae5d993f961c634" prefix=" " category="inline-code"></block>。</block>
  <block id="54625166c25afd8a6a484aaf2f346fbb" category="list-text">填写完之后<block ref="620b0dae36dbe6aeaae5d993f961c634" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="6bd960f94c189d42fef14b770c0ac909" category="list-text">将快照恢复到原始命名空间，并将括号中的值替换为您环境中的信息。例如：</block>
  <block id="ba2718de6be08337811d049982d9f03f" category="section-title">检查还原操作的状态</block>
  <block id="97dedb929a195e839af5f7d7f8ef0ec5" category="paragraph">您可以使用命令行来检查正在进行、已完成或已失败的还原操作的状态。</block>
  <block id="c076e91339c1f092aaad1d36a9c18a7a" category="list-text">使用以下命令检索恢复操作的状态，将方括号中的值替换为您环境中的信息：</block>
  <block id="3fbccf21ba46fe754417d45e7396e0e4" category="paragraph">您可以使用高级设置（例如注释、命名空间设置和存储选项）自定义恢复操作，以满足您的特定要求。</block>
  <block id="52391deb129507aac52d6fb22aaf137c" category="section-title">支持的字段</block>
  <block id="c87f7398b288400e3d2c984a3d997d7b" category="paragraph">本节介绍可用于恢复操作的其他字段。</block>
  <block id="11162de38772a3876602bb4d9d213f43" category="section-title">存储类别映射</block>
  <block id="b48c8c7ca3eb5e63afdfe6bbd74a35c9" category="paragraph">这<block ref="b57d666629acffb30cc697faadc136b5" prefix=" " category="inline-code"></block>属性定义了从源应用程序中存在的存储类到目标集群上新存储类的映射。您可以在具有不同存储类别的集群之间迁移应用程序时或更改 BackupRestore 操作的存储后端时使用此功能。</block>
  <block id="ffbfa7c1456b1cb991affd8a76d54fd1" category="section-title">支持的注释</block>
  <block id="738d4e5947ef1239f584cd47619cf356" category="paragraph">本节列出了系统中用于配置各种行为的支持注解。如果用户没有明确设置注释，系统将使用默认值。</block>
  <block id="55f6611cb342565cf0f5002400f53a95" category="cell">标注</block>
  <block id="31ce3cdcd67850870b616f75b555bbc5" category="cell">默认值</block>
  <block id="f49fa3f76b2a4fcdf04dff369d417d84" category="cell">protect.trident.netapp.io/data-mover-timeout-sec</block>
  <block id="a666ad37acca2b6a0ee400d7b2acf088" category="cell">数据移动器操作允许停止的最长时间（以秒为单位）。</block>
  <block id="aff5adfa33a9913ad2ab5d578c3f08c8" category="cell">“300”</block>
  <block id="3b2f6f0bb673ee02e8aafe624e2e971f" category="cell">protect.trident.netapp.io/kopia-content-cache-size-limit-mb</block>
  <block id="f044e4dc5e5fdde631180451c25a973c" category="cell">Kopia 内容缓存的最大大小限制（以兆字节为单位）。</block>
  <block id="9d397fb20eca1ebda087637e32a30a7b" category="cell">“1000”</block>
  <block id="0ae48837f8ebc5da6e90828852d02027" category="admonition">25.06 及更高版本不需要此步骤。</block>
  <block id="ed98e5c2a168d1606df0370fe371df28" category="paragraph">从 24.10 版本升级时，升级期间运行的快照可能会失败。此故障不会阻止将来创建快照，无论是手动创建还是计划创建。如果在升级过程中快照失败，您可以手动创建一个新的快照，以确保您的应用程序受到保护。</block>
  <block id="756accba0f305693c47126f932bd7ac6" category="paragraph">为避免潜在的故障，您可以在升级前禁用所有快照计划，并在升级后重新启用它们。但是，这会导致在升级期间错过任何计划的快照。</block>
  <block id="08583ac87350c1205f57ca5d8c629482" category="list-text">更新Trident Helm 仓库：</block>
  <block id="8e903b2b577c535f6f70248f34e61228" category="list-text">运行此命令以将 CRD 的管理权从<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>到<block ref="9a82c7a4099124e5bfaa83e7c5997bd4" prefix=" " category="inline-code"></block>：</block>
  <block id="da4df818678014568aed9623276fd9f5" category="list-text">运行此命令以删除 Helm 密钥<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>图表：</block>
  <block id="aeea10a9d4e3d29e20b749a201f0ae46" category="admonition">不要卸载<block ref="23901a54edbcff97a89483ac3112545c" prefix=" " category="inline-code"></block>使用 Helm 构建图表可能会删除您的 CRD 和任何相关数据。</block>
  <block id="ccd62d676165e34c2e9c6d088c06e70f" category="paragraph">执行钩子是一种自定义操作，您可以将其配置为与受管应用程序的数据保护操作一起运行。例如，如果您有一个数据库应用程序，则可以使用执行挂钩在快照之前暂停所有数据库事务，并在快照完成后恢复事务。这确保了应用程序一致的快照。</block>
  <block id="83fbf1604bedff410ea11872b40ab9f0" category="section-title">执行钩子的类型</block>
  <block id="9c6a9cc04a4d5840a5d237b232190a35" category="list-text">预快照</block>
  <block id="65db6b15c7f05c97a1647c11699053e3" category="list-text">快照后</block>
  <block id="0a2055495a94f091655a2e4d421cffe2" category="list-text">预备份</block>
  <block id="cf6e97e89c4b36c29252fcb7b0728d2f" category="list-text">备份后</block>
  <block id="349b93d2884e6ca3d41d0d9dab41dcd8" category="list-text">恢复后</block>
  <block id="0952ad82f36d650828c9197bb777ee05" category="list-text">故障转移后</block>
  <block id="a9f57378169166a88acf61a71442e5fb" category="section-title">执行顺序</block>
  <block id="e8132483e0cae3565c87c193b3fd8f57" category="paragraph">当运行数据保护操作时，执行挂钩事件按以下顺序发生：</block>
  <block id="4a6ccf1757fd10978b3fb28d81187dcc" category="list-text">任何适用的自定义预操作执行挂钩都在适当的容器上运行。您可以根据需要创建和运行任意数量的自定义预操作挂钩，但这些挂钩在操作之前的执行顺序既无法保证也无法配置。</block>
  <block id="cfbed2286711be0cf6dbc12aba602709" category="list-text">执行数据保护操作。</block>
  <block id="caf47630bbafdc416f6b6ecdb585e83e" category="list-text">如果适用，冻结的文件系统将被解冻。</block>
  <block id="9465fae733e0b5fdcd6e532ef8a78b08" category="list-text">任何适用的自定义后操作执行挂钩都在适当的容器上运行。您可以根据需要创建和运行任意数量的自定义后操作挂钩，但操作后这些挂钩的执行顺序既无法保证也无法配置。</block>
  <block id="a4ce4f522b635b3063f4af5d138933cc" category="paragraph">如果您创建多个相同类型的执行挂钩（例如，预快照），则无法保证这些挂钩的执行顺序。但是，不同类型的钩子的执行顺序是有保证的。例如，以下是具有所有不同类型钩子的配置的执行顺序：</block>
  <block id="25fcbdcc7c9fb7d2e1db9e64ef06804c" category="list-text">快照前钩子执行</block>
  <block id="f098e888afa8ccb3f1ad3337c3b6eea1" category="list-text">快照后钩子执行</block>
  <block id="59b50be8e9e2ed1b0e1bccae54c76036" category="list-text">执行备份前挂钩</block>
  <block id="1f374d287bf615eef6eb9afd92b862f2" category="list-text">执行备份后钩子</block>
  <block id="e807d528474129e76f18c5ce17a2c3d6" category="admonition">前面的顺序示例仅适用于运行不使用现有快照的备份时。</block>
  <block id="b74efcc6eafe1d8dec6ade34cfa13365" category="admonition">在生产环境中启用执行挂钩脚本之前，您应该始终对其进行测试。您可以使用“kubectl exec”命令方便地测试脚本。在生产环境中启用执行挂钩后，测试生成的快照和备份以确保它们一致。您可以通过将应用程序克隆到临时命名空间、恢复快照或备份，然后测试应用程序来执行此操作。</block>
  <block id="3094ed24e92fa43f93a063b74aba1810" category="admonition">如果快照前执行钩子添加、更改或删除 Kubernetes 资源，则这些更改将包含在快照或备份以及任何后续恢复操作中。</block>
  <block id="f99748fb4b1cf592516b60937743c52d" category="section-title">关于自定义执行钩子的重要说明</block>
  <block id="6b8e88c5f4231fbc6994f3a29dd893af" category="paragraph">在为您的应用程序规划执行挂钩时，请考虑以下事项。</block>
  <block id="c9333604c0c05d7727ea70ec5f1b806b" category="list-text">执行钩子必须使用脚本来执行操作。许多执行钩子可以引用同一个脚本。</block>
  <block id="6a7d60379bb9015c0bfe02adcc54d0b5" category="list-text">脚本大小限制为 96KB。</block>
  <block id="6b988caf78b1aa60f0402c611a1c8e2a" category="admonition">由于执行钩子通常会减少或完全禁用其所针对的应用程序的功能，因此您应该始终尝试尽量减少自定义执行钩子的运行时间。如果您启动带有相关执行挂钩的备份或快照操作，但随后取消它，则如果备份或快照操作已经开始，则仍允许挂钩运行。这意味着备份后执行挂钩中使用的逻辑不能假定备份已完成。</block>
  <block id="99dc882fc0f61d1db87631ed9f156913" category="section-title">执行钩子过滤器</block>
  <block id="44db75fbdb91be494665aebf40107fcf" category="paragraph">当您为应用程序添加或编辑执行挂钩时，您可以向执行挂钩添加过滤器来管理该挂钩将匹配哪些容器。过滤器对于在所有容器上使用相同容器镜像但可能将每个镜像用于不同目的的应用程序（例如 Elasticsearch）很有用。过滤器允许您创建执行挂钩在某些（但不一定是所有）相同的容器上运行的场景。如果为单个执行挂钩创建多个过滤器，它们将通过逻辑 AND 运算符组合在一起。每个执行挂钩最多可以有 10 个活动过滤器。</block>
  <block id="7caae75448dbc59fcadd621099e170b3" category="inline-link">正则表达式 2 (RE2) 语法支持</block>
  <block id="4c004df391027b81952b788a3802e37c" category="admonition">如果将命名空间过滤器添加到在恢复或克隆操作后运行的执行挂钩，并且恢复或克隆源和目标位于不同的命名空间中，则命名空间过滤器仅适用于目标命名空间。</block>
  <block id="f1ec6389b6d19d3be02f29f4a7d29051" category="section-title">执行钩子示例</block>
  <block id="0370124d48bfc5af2def19c48f433283" category="inline-link">NetApp Verda GitHub 项目</block>
  <block id="a59e4fa5cc01a3a4bdebbff4cec60b47" category="paragraph">访问<block ref="84d9961ef5a89731849bc2055780d0b6" category="inline-link-rx"></block>下载流行应用程序（如 Apache Cassandra 和 Elasticsearch）的真实执行挂钩。您还可以查看示例并获得构建您自己的自定义执行挂钩的想法。</block>
  <block id="b103709bb8bab06f6db02c661d88466a" category="section-title">创建执行钩子</block>
  <block id="e39c63d5ded2742e4215d5e339fa729e" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="ce6abb389eaae6953714e27f1dfde579" prefix=" " category="inline-code"></block>。</block>
  <block id="500ef917ae8cc36e9c85a2c0bc7d9337" category="list-text">*spec.applicationRef*: (_必需_) 要运行执行钩子的应用程序的 Kubernetes 名称。</block>
  <block id="5422fe7ebd8e2354557341f5b0c60905" category="list-text">*spec.stage*: (_Required_) 一个字符串，指示执行钩子应该在操作的哪个阶段运行。可能值：</block>
  <block id="fb55a965b77791b31ffd2bb548f71080" category="list-text">预</block>
  <block id="03d947a2158373c3b9d74325850cb8b9" category="list-text">发布</block>
  <block id="e60e3d87a1e5f522bbc8419b61b46a94" category="list-text">*spec.action*: (_Required_) 一个字符串，指示执行钩子将采取什么操作，假设指定的任何执行钩子过滤器都匹配。可能值：</block>
  <block id="d4e2713d1b1725a1592f9268589f990d" category="list-text">Snapshot</block>
  <block id="3500ba09d0538297440ca620c9dd46bf" category="list-text">备份</block>
  <block id="2bd339d85ee3b33e513359ce781b60cc" category="list-text">还原</block>
  <block id="7388404ef116c3ff812bfd290b094d9e" category="list-text">故障转移</block>
  <block id="216715348d2815376ef6d68d1ae8d3a1" category="list-text">*spec.enabled*: (_可选_) 指示此执行钩子是否已启用或禁用。如果未指定，则默认值为 true。</block>
  <block id="aa6776e9151e1848128d771057fdb5d1" category="list-text">*spec.hookSource*: (_必需_) 包含 base64 编码的 hook 脚本的字符串。</block>
  <block id="c2f4f9c36d367244147c02191649b33e" category="list-text">*spec.timeout*: (_可选_) 定义执行钩子允许运行的分钟数的数字。最小值为 1 分钟，如果未指定，则默认值为 25 分钟。</block>
  <block id="327ca4bc755c7de7ac0d335364730679" category="list-text">*spec.arguments*: (_可选_) 一个 YAML 列表，用于指定执行钩子的参数。</block>
  <block id="bf30a4b48b4b2636f15eacfc7159af33" category="list-text">*spec.matchingCriteria*: (_可选_) 一个可选的条件键值对列表，每个键值对构成一个执行钩子过滤器。每个执行钩子最多可以添加 10 个过滤器。</block>
  <block id="9092d99fcac84905883e4e76cd55bfab" category="list-text">*spec.matchingCriteria.type*: (_可选_) 用于标识执行钩过滤器类型的字符串。可能值：</block>
  <block id="820b7ec56ed75f6138f5ddc10aec4747" category="list-text">容器图像</block>
  <block id="3d52068b047d2a094a1af32cb2e338d6" category="list-text">容器名称</block>
  <block id="8fd1f588fe68392265ea3a8149ce05a3" category="list-text">Pod名称</block>
  <block id="d76694b319ab8227266d15f77f5f7aec" category="list-text">PodLabel</block>
  <block id="d84562295e02e89c17de04ba750d4c35" category="list-text">命名空间名称</block>
  <block id="011b50d44a6bb217bbe310071e727641" category="list-text">*spec.matchingCriteria.value*: (_可选_) 用于标识执行钩过滤器值的字符串或正则表达式。</block>
  <block id="5b34802949c91e91f2c85f8ee1c129bd" category="list-text">在用正确的值填充 CR 文件后，应用 CR：</block>
  <block id="de72143da28c8cafc0b906859f6e6d05" category="list-text">创建执行钩子，将括号中的值替换为您环境中的信息。例如：</block>
  <block id="d323f0b96d7cc15909a8faf8b343f7a0" category="section-title">手动运行执行钩子</block>
  <block id="b634452964a2a438acc2e266661043f1" category="paragraph">您可以手动运行执行钩子进行测试，或者在失败后需要手动重新运行钩子时也可以这样做。您需要拥有所有者、管理员或成员权限才能手动运行执行钩子。</block>
  <block id="b363e23f5ecd8c7994b0a821469e303c" category="paragraph">手动运行执行钩子包含两个基本步骤：</block>
  <block id="799527cc898bf9953cb450f2b50e3184" category="list-text">创建资源备份，该备份会收集资源并创建它们的备份，从而确定钩子函数的运行位置。</block>
  <block id="d65fd71b39d33804450847f69ddd69c0" category="list-text">针对备份运行执行钩子</block>
  <block id="d07d4b96979a15c6dea6fb4556200241" category="example-title">步骤 1：创建资源备份</block>
  <block id="32f56b6a11303c523e67b3ef5e70618e" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="1f13ad2055ef28f62611a4ced3a8da82" prefix=" " category="inline-code"></block>。</block>
  <block id="10f8657004606b105a7612de4504c293" category="list-text">*spec.applicationRef*: (_必需_) 要为其创建资源备份的应用程序的 Kubernetes 名称。</block>
  <block id="854d053ea53b0a9b6012fe3af98a11f9" category="list-text">查看备份状态。您可以重复使用此示例命令，直到操作完成：</block>
  <block id="5c04e29edc18bc5ad81fc61dec5eee00" category="list-text">确认备份是否成功：</block>
  <block id="163cbd835d00fc0fb13923332a76e532" category="example-title">步骤 2：运行执行钩子</block>
  <block id="89666a2351b355f4191600de4436dfe7" category="list-text">创建自定义资源 (CR) 文件并将其命名为<block ref="433572a415d5824f82d7e7c9a0829077" prefix=" " category="inline-code"></block>。</block>
  <block id="3e0977039522c796fb780d1c0155fdb7" category="list-text">*spec.applicationRef*: (_必需_) 确保此值与您在步骤 1 中创建的 ResourceBackup CR 中的应用程序名称匹配。</block>
  <block id="c4f09daab57e7cc61e19e7da88f84edc" category="list-text">*spec.appVaultRef*: (_必需_) 确保此值与您在步骤 1 中创建的 ResourceBackup CR 中的 appVaultRef 匹配。</block>
  <block id="021c431bf5a7e31ec81f982db93aa9f3" category="list-text">*spec.appArchivePath*：确保此值与您在步骤 1 中创建的 ResourceBackup CR 中的 appArchivePath 匹配。</block>
  <block id="e2399671182dcd28bddf5d44b11f7af2" category="list-text">*spec.stage*: (_Required_) 一个字符串，指示执行钩子应该在操作的哪个阶段运行。这次钩子运行不会在任何其他阶段运行钩子。可能值：</block>
  <block id="aa9f056f37cdee5e5bcd47f7bc3ac1ba" category="list-text">创建手动执行钩子运行请求：</block>
  <block id="42e563c466d27e9d4943ef1acd3703b7" category="list-text">检查执行钩子运行状态。您可以重复运行此命令，直到操作完成：</block>
  <block id="8430f2c56dfc9e79fcaf741392d54499" category="list-text">描述 exechooksrun 对象以查看最终详细信息和状态：</block>
  <block id="685db7ca1bcc71c55d1592c71e464158" category="section-title">故障转移和反向操作期间的执行钩子</block>
  <block id="bfc5a6b94bc23ccc51c85a2aa1cb71b4" category="paragraph">使用 AppMirror 关系保护应用程序时，在故障转移和反向操作期间，您应该注意与执行钩子相关的特定行为。</block>
  <block id="3d11bc959173dddd2997400e7bdf4d67" category="list-text">故障转移期间，执行钩子会自动从源集群复制到目标集群。您无需手动重新创建它们。故障转移后，应用程序上会存在执行钩子，这些钩子将在任何相关操作期间执行。</block>
  <block id="ba9dd6212c2e02686051fbf28e548584" category="list-text">在反向同步或反向重同步期间，应用程序上任何现有的执行钩子都会被移除。当源应用程序变为目标应用程序时，这些执行钩子将不再有效，并会被删除以防止其执行。</block>
  <block id="40322a2a338856f04751d8d3bdb62496" category="section-title">建立复制关系</block>
  <block id="f7c69ddccabddb0b74276d3c2a3086e0" category="paragraph">建立复制关系涉及以下步骤：</block>
  <block id="cc37bc9830a1edb8e50e296af8ade03b" category="list-text">选择复制计划（包括 Kubernetes 资源以及持久卷数据）</block>
  <block id="55960a396448d8f19fb182dfd2b04d90" category="list-text">设置拍摄快照的时间</block>
  <block id="7fe804bb721f10861ae38239b332f774" category="inline-link-macro">AppVault 自定义资源</block>
  <block id="1e8493e925b9f37d24c0573c08c6643a" category="list-text">在源集群上，为源应用程序创建一个 AppVault。根据您的存储提供商，修改示例中的内容。<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>为了适应您的环境：</block>
  <block id="bb557baccf285d1ab6b4cdc32daf5848" category="open-title">使用 CR 创建 AppVault</block>
  <block id="32429298e62d70d6afc71defdbdd3c42" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="0992b18d0f3771479838d4ddbaa2b097" prefix=" " category="inline-code"></block> ）。</block>
  <block id="4b60a832776a25dfdf74d5dac3d3111f" category="list-text">*metadata.name*: (_必填_) AppVault 自定义资源的名称。请记下您选择的名称，因为复制关系所需的其他 CR 文件会引用此值。</block>
  <block id="2e65eb784535a1ecc4b75ea18e2863a6" category="list-text">*spec.providerConfig*: (_必需_) 存储使用指定提供程序访问 AppVault 所需的配置。选择存储桶名称以及提供商所需的其他任何详细信息。请记下您选择的值，因为复制关系所需的其他 CR 文件会引用这些值。请参阅<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>例如，AppVault CR 与其他提供商的合作案例。</block>
  <block id="655a22501c6f6d02821989a81036e65e" category="list-text">*spec.providerCredentials*: (_Required_) 存储使用指定提供程序访问 AppVault 所需的任何凭据的引用。</block>
  <block id="cb95e87ea13fe367aee43a64591dc23f" category="list-text">*spec.providerCredentials.valueFromSecret*: (_Required_) 表示凭据值应来自密钥。</block>
  <block id="553f77a87c1f7385701bd0df77669571" category="list-text">*key*: (_必填_) 要从中选择的有效密钥。</block>
  <block id="cf3ae025f91646ac07aa5641d4e510cb" category="list-text">*name*: (_必填_) 包含此字段值的密钥的名称。必须位于同一命名空间中。</block>
  <block id="0e022225fc6e6c1b2028f3a32bcc9dbc" category="list-text">*spec.providerCredentials.secretAccessKey*: (_必需_) 用于访问提供程序的访问密钥。  *名称* 应与 *spec.providerCredentials.valueFromSecret.name* 匹配。</block>
  <block id="3830f9aa0973251f5c2658ea2e742ee5" category="list-text">*spec.providerType*: (_必需_) 确定备份的提供方；例如， NetApp ONTAP S3、通用 S3、Google Cloud 或 Microsoft Azure。可能值：</block>
  <block id="ac68bbf921d953d1cfab916cb6120864" category="list-text">AWS</block>
  <block id="cf04a02e37b774fc311a48f605c3c597" category="list-text">蔚蓝</block>
  <block id="50f66ecbc45488ee5826941bfbc50411" category="list-text">通用控制协议</block>
  <block id="03034eb1f294ef4f7a106ae02a31ae45" category="list-text">通用-s3</block>
  <block id="a4d3001255c12ffd187d9548a2c800aa" category="list-text">ontap-s3</block>
  <block id="da8c660bc44b572ae5fc3157a93282cb" category="list-text">存储网格-s3</block>
  <block id="8af3a24bfad8f2e7a06abec1e5bc710e" category="list-text">填写完之后<block ref="0992b18d0f3771479838d4ddbaa2b097" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="65b1402ebaf9b35766ab033225a55f41" category="open-title">使用 CLI 创建 AppVault</block>
  <block id="d686d91628b89b1ba45ca8bf5274eece" category="list-text">创建 AppVault，并将括号中的值替换为您环境中的信息：</block>
  <block id="a42a308559809e0fc20b13ea51d5d3d4" category="list-text">在源集群上，创建源应用程序 CR：</block>
  <block id="93b7f025ad50fefb3f6b0c5ee86d6162" category="open-title">使用 CR 创建源应用程序</block>
  <block id="793bc477cba966a8d3771d018030c3c4" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="3e2c6ff026eba99761434b4f79aaa782" prefix=" " category="inline-code"></block> ）。</block>
  <block id="3bf6684ac69fda7ed549f87ecb72678d" category="list-text">*metadata.name*: (_必填_) 应用程序自定义资源的名称。请记下您选择的名称，因为复制关系所需的其他 CR 文件会引用此值。</block>
  <block id="969353c1601d960362b65e2372b29251" category="list-text">*spec.includedNamespaces*: (_必需_) 命名空间及其关联标签的数组。使用命名空间名称，并可选择使用标签缩小命名空间的范围，以指定此处列出的命名空间中存在的资源。应用程序命名空间必须包含在此数组中。</block>
  <block id="7a4e65ca72b4d8d16a9df08725a64df9" category="paragraph">*YAML 示例*：</block>
  <block id="948be8a05d305f0b3dece0e8dcaf4546" category="list-text">填写完之后<block ref="3e2c6ff026eba99761434b4f79aaa782" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="677aa747b5e08444532c7cc040384124" category="open-title">使用 CLI 创建源应用程序</block>
  <block id="feaddb5b204f8f8f1226cc6f02275f5c" category="list-text">创建源应用程序。例如：</block>
  <block id="9399bd959f53d5a7d8671b597df92df2" category="paragraph">除了下面提供的计划之外，建议创建一个单独的每日快照计划，保留期为 7 天，以在对等ONTAP集群之间保持共同的快照。这样可以确保快照最多保留 7 天，但保留期限可以根据用户需求进行自定义。</block>
  <block id="bd8250ba3a5ac73f1ca0ba8c92937c5a" category="paragraph">如果发生故障转移，系统可以使用这些快照最多 7 天进行逆向操作。这种方法使得逆向过程更快、更高效，因为只会传输自上次快照以来所做的更改，而不是所有数据。</block>
  <block id="af22b57fbc1d302d6a0b83cb06ce9e6a" category="paragraph">如果应用程序的现有计划已经满足所需的保留要求，则无需制定其他计划。</block>
  <block id="929d5ad53cad5d51ead7578004e2d5e5" category="list-text">为源应用程序创建复制计划：</block>
  <block id="57cc31c4785dfe52bb22cc8d375a3b67" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="8898becea7c9a79dd32acb9c34818b46" prefix=" " category="inline-code"></block> ）。</block>
  <block id="87918fdbe5607aeceec3ec53bc40a2f8" category="list-text">*metadata.name*: (_必填_) 计划自定义资源的名称。</block>
  <block id="3e23380d121194d4ed43d5587e33eeba" category="list-text">*spec.AppVaultRef*: (_必需_) 此值必须与源应用程序的 AppVault 的 metadata.name 字段匹配。</block>
  <block id="565c53b27f6972afc514c3431a7fb733" category="list-text">*spec.backupRetention*: (_Required_) 此字段为必填项，其值必须设置为 0。</block>
  <block id="e00228f2eaa851d908b74fd6e1cbb1ab" category="list-text">*spec.enabled*：必须设置为 true。</block>
  <block id="b8e08f9f53492c0cf7c4c918c8c27185" category="list-text">*spec.granularity*：必须设置为<block ref="90589c47f06eb971d548591f23c285af" prefix=" " category="inline-code"></block>。</block>
  <block id="8c33ed4b89c2cd001ffad0203fe3c3b6" category="list-text">*spec.recurrenceRule*: 定义 UTC 时间的开始日期和重复间隔。</block>
  <block id="35ef995e5b9fe2ba99491ff849d63302" category="list-text">*spec.snapshotRetention*：必须设置为 2。</block>
  <block id="7c6d1c687b69c90909ec8375ac84883e" category="list-text">填写完之后<block ref="8898becea7c9a79dd32acb9c34818b46" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="85d88f09b637997959adc6d50a42d56f" category="list-text">在目标集群上，创建一个与在源集群上应用的 AppVault CR 完全相同的源应用程序 AppVault CR，并将其命名为（例如，<block ref="3ad9e8b652d0a9a977e2534bf143ea29" prefix=" " category="inline-code"></block> ）。</block>
  <block id="04a53b4d2f7e20d9df207bfb6beb6ee7" category="list-text">应用 CR：</block>
  <block id="8af8219e9797756f7e348dd40e365632" category="list-text">在目标集群上为目标应用程序创建目标 AppVault CR。根据您的存储提供商，修改示例中的内容。<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>为了适应您的环境：</block>
  <block id="d5ab09bc69c7800783bce2e14f2e456f" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="b851e4210e3875aa9242df636b0b3068" prefix=" " category="inline-code"></block> ）。</block>
  <block id="7fab67e3c762a0a044dd84f11a740dd7" category="list-text">*spec.providerConfig*: (_必需_) 存储使用指定提供程序访问 AppVault 所需的配置。选择一个<block ref="070a97dcde31faecac1fc843e205039c" prefix=" " category="inline-code"></block>以及其他任何您需要提供给服务提供商的详细信息。请记下您选择的值，因为复制关系所需的其他 CR 文件会引用这些值。请参阅<block ref="789b31b0a5cabea5de04107e65439f53" category="inline-link-macro-rx"></block>例如，AppVault CR 与其他提供商的合作案例。</block>
  <block id="4758f7c104e1f75364dadc9f8310e51d" category="list-text">填写完之后<block ref="b851e4210e3875aa9242df636b0b3068" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="f454fc9c64d31c07a352c043fe184940" category="list-text">在目标集群上，创建 AppMirrorRelationship CR 文件：</block>
  <block id="15e5c4ea8565e669f02393ab1d7b1021" category="open-title">使用 CR 创建 AppMirrorRelationship</block>
  <block id="3ca407ea70946200511f8d2e1008f20f" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block> ）。</block>
  <block id="52e868ab750f66344086c9bc5d6dadeb" category="list-text">*metadata.name:*（必填）AppMirrorRelationship 自定义资源的名称。</block>
  <block id="d9ee8f59f7e4a770213d4728b012fa38" category="list-text">*spec.destinationAppVaultRef*: (_必需_) 此值必须与目标集群上目标应用程序的 AppVault 名称匹配。</block>
  <block id="ad47c31cec730ddef75893f6207a8350" category="list-text">*spec.namespaceMapping*: (_必需_) 目标命名空间和源命名空间必须与相应应用程序 CR 中定义的应用程序命名空间匹配。</block>
  <block id="0d2f17f43053f85c97752c575bb2af3e" category="list-text">*spec.sourceAppVaultRef*: (_必需_) 此值必须与源应用程序的 AppVault 名称匹配。</block>
  <block id="5c0044cad9c27e4f4742c4a031edd6eb" category="list-text">*spec.sourceApplicationName*: (_必需_) 此值必须与您在源应用程序 CR 中定义的源应用程序的名称匹配。</block>
  <block id="e1e70c108ffb369c9c05ac65820562c3" category="list-text">填写完之后<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="d4c94febe4f13411fa761de57ad6cce6" category="open-title">使用 CLI 创建 AppMirrorRelationship</block>
  <block id="3d9dc864aeb5b914422a6a665c53ceeb" category="list-text">（可选）在目标集群上，检查复制关系的状态：</block>
  <block id="70cc2bec279e168711b67e789468c45c" category="section-title">故障转移到目标集群</block>
  <block id="fe07abfd92e0d0809a7eb71ce3f79b4b" category="list-text">在目标集群上，编辑 AppMirrorRelationship CR 文件（例如，<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block> ）并将 *spec.desiredState* 的值更改为<block ref="2c42d7d277f63fcbe64b041b997ceaed" prefix=" " category="inline-code"></block>。</block>
  <block id="2d258c624d61d2388efacfc246d2439e" category="list-text">保存CR文件。</block>
  <block id="66ccf267a388b1a30a7530a93ea5ce18" category="list-text">（可选）在故障转移应用程序上创建所需的任何保护计划。</block>
  <block id="86d47ead9019d8e9c93c863f7ab4e41b" category="list-text">（可选）检查复制关系的状态：</block>
  <block id="ea7117a895b98283737d3855ef6a2adc" category="section-title">重新同步失败的复制关系</block>
  <block id="c91dda18aff454993264381ffa25993f" category="paragraph">重新同步操作会重新建立复制关系。执行重新同步操作后，原始源应用程序将成为正在运行的应用程序，对目标集群上正在运行的应用程序所做的任何更改都将被丢弃。</block>
  <block id="86e073f24d64b270ed8fd6bac00280eb" category="paragraph">该过程会在重新建立复制之前停止目标集群上的应用程序。</block>
  <block id="63a5fb6889ac843fec3c274399995a88" category="admonition">故障转移期间写入目标应用程序的任何数据都将丢失。</block>
  <block id="2ebd442ba9080ba8f10b660fd69bb379" category="list-text">（可选）在源集群上，创建源应用程序的快照。这样可以确保捕获源集群的最新更改。</block>
  <block id="4d77fef9f6bd1f87593e41a1d32a7ea4" category="list-text">在目标集群上，编辑 AppMirrorRelationship CR 文件（例如，<block ref="e4fba3915616865173fe7feee130a30f" prefix=" " category="inline-code"></block> ）并将 spec.desiredState 的值更改为<block ref="072f9734fceb02f516b50d4174ac0f18" prefix=" " category="inline-code"></block>。</block>
  <block id="c7e41946fafafcb541aaa5a67635b607" category="list-text">如果您在目标集群上创建了任何保护计划来保护故障转移应用程序，请将其删除。任何残留的计划都会导致卷快照失败。</block>
  <block id="6e81bcb9e218ada350c173457300a0ed" category="section-title">反向重新同步失败的复制关系</block>
  <block id="b29e882c5e41f060c9261101cb1cab06" category="paragraph">当您反向同步故障转移复制关系时，目标应用程序将变为源应用程序，而源应用程序将变为目标应用程序。故障转移期间对目标应用程序所做的更改将被保留。</block>
  <block id="cd7eea117bba074d0250983f81bb10e4" category="list-text">在原始目标集群上，删除 AppMirrorRelationship CR。这导致目的地变成了出发地。如果新目标集群上还有任何剩余的保护计划，请将其删除。</block>
  <block id="3c890586eb43d0d71cdcb47011358420" category="list-text">通过将最初用于建立关系的 CR 文件应用到相反的集群来建立复制关系。</block>
  <block id="5ca8234bb17898bdaa8421e9bab83a0b" category="list-text">确保新目标（原始源集群）配置了两个 AppVault CR。</block>
  <block id="8a427fa57d96e74516c008754320b521" category="list-text">在相反的集群上建立复制关系，配置反向的值。</block>
  <block id="792322eb4a0bf1a122100fc009041d9b" category="section-title">反向应用程序复制方向</block>
  <block id="4625c1e6ccf2351ad9a08dcee33270c8" category="paragraph">在这种情况下，你交换了源地址和目标地址。</block>
  <block id="e319bd320145e358af8fd5dbada2d800" category="list-text">在源集群上，创建关机快照：</block>
  <block id="4f902591d45de06985f0af6d869c8a04" category="open-title">使用 CR 创建关机快照</block>
  <block id="1f6c30c2bcecec90eda54cd7038f326b" category="list-text">禁用源应用程序的保护策略计划。</block>
  <block id="4a4cfa535eb9cd705b5999ffaa6a738b" category="list-text">创建 ShutdownSnapshot CR 文件：</block>
  <block id="92391ecdad41a6b33b04771b3e5e20bf" category="list-text">创建自定义资源 (CR) 文件并将其命名为（例如，<block ref="9bab8384d1fd26e8737f71771039462f" prefix=" " category="inline-code"></block> ）。</block>
  <block id="1b38935a45d4eaf71098501cbdc191df" category="list-text">*metadata.name*: (_必填_) 自定义资源的名称。</block>
  <block id="54c1687e91064a6e4cdc35b9a2d411a8" category="list-text">*spec.ApplicationRef*: (_必需_) 此值必须与源应用程序 CR 文件的 metadata.name 字段匹配。</block>
  <block id="4390dd9bb73a0c56ac3c54b54b1fe51a" category="list-text">填写完之后<block ref="9bab8384d1fd26e8737f71771039462f" prefix=" " category="inline-code"></block>将文件的值正确后，应用 CR：</block>
  <block id="f450395b52edc310f6e53fe1a9e24477" category="open-title">使用 CLI 创建关机快照</block>
  <block id="01eb7f0adf446989c265a6179909de7b" category="list-text">创建关机快照，将括号中的值替换为您环境中的信息。例如：</block>
  <block id="47d8460d4aa2253d733ecb9b355e4319" category="list-text">在源集群上，关机快照完成后，获取关机快照的状态：</block>
  <block id="00e7f88da8b7690738f8546262d2fe54" category="list-text">在源集群上，使用以下命令查找 *shutdownsnapshot.status.appArchivePath* 的值，并记录文件路径的最后一部分（也称为基本名称；这将是最后一个斜杠之后的所有内容）：</block>
  <block id="579f2feb3d9edaa336d3ccb69c3fb855" category="list-text">从新的目标集群到新的源集群执行故障转移，并进行以下更改：</block>
  <block id="bdd0666b03fe73dd725c0376fdb435e0" category="admonition">在故障转移流程的第 2 步中，包括：<block ref="60464bee8fcac84cb209df68a2b05fba" prefix=" " category="inline-code"></block>在 AppMirrorRelationship CR 文件中，将该字段的值设置为您在上面的步骤 3 中记录的基本名称。</block>
  <block id="753f99fdafabdea1282917a0d7df52d4" category="list-text">执行反向重新同步步骤<block ref="07428cadd63a52910df8ba314efe2f56" category="inline-xref-macro-rx"></block>。</block>
  <block id="ab486212bb19e45c8e71532739574a22" category="list-text">在新源集群上启用保护计划。</block>
  <block id="aea4fd534bd3152673956c6bbd7c115c" category="paragraph">由于反向复制，会发生以下操作：</block>
  <block id="a23cf6af7e31f808d57bb74c992226c6" category="list-text">对原始源应用程序的 Kubernetes 资源进行快照。</block>
  <block id="08c383efd49395a644fa60036a0853a2" category="list-text">通过删除应用程序的 Kubernetes 资源（保留 PVC 和 PV），优雅地停止原始源应用程序的 pod。</block>
  <block id="0053c8b169583fc7b29e0dfbe82d59fd" category="list-text">在 pod 关闭后，会对应用程序的卷进行快照并进行复制。</block>
  <block id="b1907879d61e1f061c433469dfb8ddcf" category="list-text">SnapMirror关系已断开，目标卷已准备好进行读/写操作。</block>
  <block id="b6c3873d17157e3e4a0b1ef02b3cef69" category="list-text">该应用程序的 Kubernetes 资源是从关闭前的快照中恢复的，使用的是在原始源应用程序关闭后复制的卷数据。</block>
  <block id="3cecdf93ba8c40eb3b09b7a7f9985e1d" category="list-text">复制过程以相反的方向重新建立。</block>
  <block id="827d6f4840be3ba668aa3eaee7c11d8d" category="section-title">将应用程序故障恢复到原始源集群</block>
  <block id="3a045f0ae84563b460627f43bb272936" category="paragraph">该过程从已完成故障转移至目标位置的关系开始，并涉及以下步骤：</block>
  <block id="9cbd7771b861e31b5edb23d83de4758c" category="list-text">从故障转移状态开始。</block>
  <block id="fe411ea35c29677771dcaad52985fc08" category="list-text">反向重新同步复制关系。</block>
  <block id="eb10e971ec83f13f35beb8166ae8958b" category="admonition">不要执行正常的重新同步操作，因为这将丢弃在故障转移过程中写入目标集群的数据。</block>
  <block id="de5da2c7cfd6c7eda31703be01d3513e" category="list-text">反转复制方向。</block>
  <block id="be41e0ea028981dcba35343dcbd34991" category="list-text">执行<block ref="07428cadd63a52910df8ba314efe2f56" category="inline-xref-macro-rx"></block>步骤。</block>
  <block id="e3f67484570d0b1b5736841718c5ab22" category="list-text">执行<block ref="80fca82e419d46692dbbc4fbbcd0c990" category="inline-xref-macro-rx"></block>步骤。</block>
  <block id="39d2beed854377dcad2ea22fe9e58477" category="section-title">删除复制关系</block>
  <block id="a6c87e2b66308cd117a39af0fdac9885" category="paragraph">您可以随时删除复制关系。删除应用程序复制关系后，将生成两个彼此独立的应用程序，它们之间没有任何关系。</block>
  <block id="23b4dec181e41ab3962cf73b28ffe58c" category="list-text">在当前目标集群上，删除 AppMirrorRelationship CR：</block>
  <block id="f36baffc9ca645fa1fe36124af4e39a7" category="summary">了解Trident的保护和恢复选项以及使用Trident创建的卷。对于每个有持久化需求的应用程序，都应该制定数据保护和恢复策略。</block>
  <block id="03c39d763ca15978d9ef16c2ba5fe98a" category="doc">数据保护和灾难恢复</block>
  <block id="ffe1fc42630bb81c5437556ccf118ba0" category="section-title">Trident复制和恢复</block>
  <block id="9c85886fa11238157a9de69d0caaf7f2" category="paragraph">您可以创建备份，以便在发生灾难时恢复Trident 。</block>
  <block id="a06c2dd9e460954c4c8e439ed6c16849" category="section-title">Trident复制</block>
  <block id="0cf2379589875f19fc411cdbbabab10c" category="paragraph">Trident使用 Kubernetes CRD 来存储和管理自己的状态，并使用 Kubernetes 集群 etcd 来存储其元数据。</block>
  <block id="082510018437a15b6d42065dfe5a5384" category="inline-link-macro">Kubernetes：备份 etcd 集群</block>
  <block id="ec3558916e2679d1a4b592e0ade35471" category="list-text">使用以下命令备份 Kubernetes 集群 etcd<block ref="901b02918d705c0966dae4033c132965" category="inline-link-macro-rx"></block> 。</block>
  <block id="405c5315f2ee81c7d907857a97bc9ccc" category="list-text">将备份文件放置在FlexVol volume上</block>
  <block id="f4d58905240b9c44d84e6ee73c8499ac" category="admonition">NetApp建议您使用SnapMirror关系将FlexVol所在的 SVM 与其他 SVM 连接起来，从而保护该 SVM。</block>
  <block id="df92604aa3f4e581e24f9f7e549cbe1e" category="section-title">Trident恢复</block>
  <block id="742d0be325a2cc0809fad668e223a40c" category="paragraph">使用 Kubernetes CRD 和 Kubernetes 集群 etcd 快照，您可以恢复Trident。</block>
  <block id="b30057689f3e745e5feeb142585ff30b" category="list-text">从目标 SVM 上，将包含 Kubernetes etcd 数据文件和证书的卷挂载到将要设置为主节点的主机上。</block>
  <block id="5fefcae3a4602913a273a904829295ce" category="list-text">复制 Kubernetes 集群所需的所有证书。<block ref="890b0e4d98741eac800c616b757217cb" prefix=" " category="inline-code"></block>以及 etcd 成员文件<block ref="3fa01691da932f6c45bf424027ffabb8" prefix=" " category="inline-code"></block>。</block>
  <block id="51fa31507539ecf10c55d8cc513269d0" category="inline-link-macro">Kubernetes：恢复 etcd 集群</block>
  <block id="3167e8459c0d46545dc7978a60ef4978" category="list-text">使用 etcd 备份恢复 Kubernetes 集群<block ref="c87a91d2cf6358248ae560cfa802edf4" category="inline-link-macro-rx"></block>。</block>
  <block id="54d0429fea223af0d32d9f061ed733c9" category="list-text">跑步<block ref="1ec8e1992e296a9bdb691f1931d391fe" prefix=" " category="inline-code"></block>验证所有Trident自定义资源是否已启动，并检索Trident对象以验证所有数据是否可用。</block>
  <block id="c87c1a25aa5e2ef1af216bc50d1fd391" category="section-title">SVM复制和恢复</block>
  <block id="0d3b37ff5855bf299f3c4a154373c1e2" category="inline-link">ONTAP SnapMirror</block>
  <block id="1f7c8c42e8abc1d393aa79f78603a7d4" category="paragraph">Trident无法配置复制关系，但是存储管理员可以使用<block ref="eae3571c3bcc896c3c2934b9eeb2171a" category="inline-link-rx"></block>复制 SVM。</block>
  <block id="9299ebdcbaefed4a9ea27b355bb0f75e" category="paragraph">发生灾难时，您可以激活SnapMirror目标 SVM 开始提供数据服务。系统恢复后，您可以切换回主服务器。</block>
  <block id="1de93d4bf941bc79aec631023559b9e7" category="paragraph">使用SnapMirror SVM 复制功能时，请考虑以下事项：</block>
  <block id="1868906f3a3fbcf756260737545805d6" category="list-text">对于启用了 SVM-DR 的每个 SVM，您应该创建一个独立的后端。</block>
  <block id="f9f808f1692cabf1bf803e07da9adbe7" category="list-text">配置存储类，仅在需要时选择复制后端，以避免将不需要复制的卷配置到支持 SVM-DR 的后端上。</block>
  <block id="6fa2f5991a9e2ee7d4668899f94e78e4" category="list-text">应用程序管理员应了解复制带来的额外成本和复杂性，并在开始此过程之前仔细考虑其恢复计划。</block>
  <block id="2b5ffe73affd6d09b3b5e160e117e5c9" category="section-title">SVM复制</block>
  <block id="9f4b9999b69320b559438c600d724ff9" category="inline-link-macro">ONTAP： SnapMirror SVM 复制</block>
  <block id="d628a099db3505c9d0435e12076d8a61" category="paragraph">您可以使用<block ref="89150b9d328c8330200fceb39b37760e" category="inline-link-macro-rx"></block>创建 SVM 复制关系。</block>
  <block id="5717b21c41683b40b5182faa442bafb8" category="paragraph">SnapMirror允许您设置选项来控制要复制的内容。您需要知道您在执行操作时选择了哪些选项。<block ref="36ddeb299c5dc6bcf247ffb9df4df208" category="inline-xref-macro-rx"></block> 。</block>
  <block id="524218dc9ff1ef52c9a0404971525b21" category="inline-link-macro">-identity-preserve true</block>
  <block id="8dc4e22513bbb97acc41295bfe46d5fe" category="list-text"><block ref="c758ffe020dc40d00c9a9c46ecbdd824" category="inline-link-macro-rx"></block>复制整个 SVM 配置。</block>
  <block id="d18f05a5c35a5a7d999263600f0356bf" category="inline-link-macro">-丢弃网络配置</block>
  <block id="97c20c3eb8c7569982dc9f84e7f31ba3" category="list-text"><block ref="afa9da8af32f091c8328b13559d456b1" category="inline-link-macro-rx"></block>不包括 LIF 和相关网络设置。</block>
  <block id="224ea277d21a44b59b0fa43747b4f6a6" category="inline-link-macro">-identity-preserve false</block>
  <block id="471621652d0597dca59f266effb8f90f" category="list-text"><block ref="1faf7e0b3f51b53ae01a4f860a9ed344" category="inline-link-macro-rx"></block>仅复制卷和安全配置。</block>
  <block id="876b144c54cd97607e6f6f4d8b15f39e" category="section-title">使用Trident进行 SVM 恢复</block>
  <block id="5c26def63f84646a9f77218eea10331a" category="paragraph">Trident无法自动检测 SVM 故障。如果发生灾难，管理员可以手动启动Trident故障转移到新的 SVM。</block>
  <block id="da29de46c3a7d3e66fc701b2781fcbce" category="list-text">取消已安排和正在进行的SnapMirror传输，断开复制关系，停止源 SVM，然后激活SnapMirror目标 SVM。</block>
  <block id="98bdea55e26fba2494cc5f163b6f8076" category="list-text">如果您指定<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block>或者<block ref="e932330dd004e680ebd1a75db84b73ce" prefix=" " category="inline-code"></block>配置 SVM 复制时，请更新以下内容：<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>在Trident后端定义文件中。</block>
  <block id="6141984e8f91176bd3a76175b02c1a09" category="list-text">确认<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>存在于Trident后端定义文件中。此参数无法更改。省略<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>这将导致后端更新失败。</block>
  <block id="51589b18e320f20306c944a08241dac1" category="list-text">使用以下命令更新所有必需的后端，以反映新的目标 SVM 名称：</block>
  <block id="d980e1fdfa951088567e6d057ba7dc9c" category="list-text">如果您指定<block ref="224ea277d21a44b59b0fa43747b4f6a6" prefix=" " category="inline-code"></block>或者<block ref="89680afd09991bc3d4db985c40c861c1" prefix=" " category="inline-code"></block>您必须重启所有应用程序 pod。</block>
  <block id="eb12f237ee9304f080e1a3b606030f2d" category="admonition">如果您指定<block ref="524218dc9ff1ef52c9a0404971525b21" prefix=" " category="inline-code"></block>当目标 SVM 激活时， Trident提供的所有卷开始提供数据服务。</block>
  <block id="cceb49886fed38f241928d51abab95a2" category="section-title">卷复制和恢复</block>
  <block id="815f28e53ebfb423dfe835a845095bf6" category="inline-link-macro">ONTAP SnapMirror复制和恢复</block>
  <block id="4afaf8cedd32fb155e98f0626311d8ab" category="paragraph">Trident无法配置SnapMirror复制关系，但是存储管理员可以使用<block ref="c3487d6df2463efc752acd6f5cc45a1f" category="inline-link-macro-rx"></block>复制Trident创建的卷。</block>
  <block id="c3c343b5a84229bd5095fd09f2afc5f5" category="inline-link-macro">tridentctl 卷导入</block>
  <block id="9cf6e031ec85179307403b10689113c9" category="paragraph">然后，您可以使用以下方法将恢复的卷导入到Trident中：<block ref="b0a81d9cb6f9ea994a428f959b11d3c6" category="inline-link-macro-rx"></block> 。</block>
  <block id="d8d9dfeae772da34290b750d0f848a26" category="admonition">不支持导入<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ， 或者<block ref="70d5dbddc55e3700ddbc8d21f0de22a3" prefix=" " category="inline-code"></block>司机。</block>
  <block id="b489b293d6cbe8b86835d3cac8c315fb" category="section-title">快照数据保护</block>
  <block id="f332d72a4b78e34e31131f3a98c98053" category="paragraph">您可以使用以下方法保护和恢复数据：</block>
  <block id="97fb495fd3b6672c40bb0092ca102eca" category="list-text">外部快照控制器和 CRD 用于创建持久卷 (PV) 的 Kubernetes 卷快照。</block>
  <block id="4227c1b28cc9c04bf3552b7aae57fc3c" category="paragraph"><block ref="4227c1b28cc9c04bf3552b7aae57fc3c" category="inline-link-macro-rx"></block></block>
  <block id="83cd672b9742ba621e93a8b69c4ab2d4" category="list-text">ONTAP快照用于恢复卷的全部内容，或恢复单个文件或 LUN。</block>
  <block id="ad336d1fccea3e918d07055edac855a3" category="inline-link-macro">ONTAP快照</block>
  <block id="0cb949d1baa06577db93328185a8f24d" category="paragraph"><block ref="0cb949d1baa06577db93328185a8f24d" category="inline-link-macro-rx"></block></block>
  <block id="3c520ff745f4964007340c06ce483d92" category="summary">部署Trident时，请遵循此处列出的建议。</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="doc">部署</block>
  <block id="d89d3b3161292ef0c65342cbe80e883f" category="section-title">部署到专用命名空间</block>
  <block id="13d28e8dfc702e3456e0767dff9a128a" category="inline-link">命名空间</block>
  <block id="4ac9935cf245d076d6ef4babd8659321" category="paragraph"><block ref="c41296e544cd0faaa4fe4e8b22535287" category="inline-link-rx"></block>造成不同应用程序之间的管理隔离，并阻碍资源共享。例如，一个命名空间中的 PVC 不能在另一个命名空间中使用。  Trident为 Kubernetes 集群中的所有命名空间提供 PV 资源，因此利用了具有提升权限的服务帐户。</block>
  <block id="853cf568613b7eec1486421468e18b9b" category="paragraph">此外，访问Trident pod 可能会使用户能够访问存储系统凭据和其他敏感信息。必须确保应用程序用户和管理应用程序无法访问Trident对象定义或 pod 本身。</block>
  <block id="2c8e89de5c6bf68b180cff5fea545167" category="section-title">使用配额和范围限制来控制存储消耗</block>
  <block id="74444eaf90c31d151645e59dcab0468d" category="inline-link">存储配额机制</block>
  <block id="1d81c150d54eae0c49d9cfeb8d493b0f" category="inline-link">射程限制</block>
  <block id="94104e476fe547cf6237480cacae5ed5" category="paragraph">Kubernetes 具有两个特性，这两个特性结合起来，为限制应用程序的资源消耗提供了一种强大的机制。这<block ref="bff513af91e6751aca3d34ef714e3b91" category="inline-link-rx"></block>管理员可以按命名空间实施全局和存储类特定的容量和对象数量消耗限制。此外，使用<block ref="dbe9770513b0f7245f1fe016d20ebb70" category="inline-link-rx"></block>确保 PVC 请求在转发给配置器之前，其值既在最小值也在最大值范围内。</block>
  <block id="4f9253eda0573e387f86d7777aafff03" category="inline-link">如何利用配额</block>
  <block id="923169151e05d28a3474b2a033666297" category="paragraph">这些值是按命名空间定义的，这意味着每个命名空间都应该定义与其资源需求相符的值。请点击此处查看相关信息<block ref="5b289b2ffde01314d8b0d038aabd709b" category="inline-link-rx"></block>。</block>
  <block id="698aa9df4c2c5470599821c3d10620dd" category="summary">Kubernetes 集群通常由两种类型的节点组成，每种节点负责不同的功能方面。</block>
  <block id="f53e7cca65962add5f429193e9cbdb7c" category="doc">整合Trident</block>
  <block id="ef77c788fd33425198e77cd3ce7c4525" category="paragraph">要集成Trident，需要集成以下设计和架构元素：驱动程序选择和部署、存储类设计、虚拟池设计、持久卷声明 (PVC) 对存储配置的影响、卷操作以及使用Trident部署 OpenShift 服务。</block>
  <block id="1fdc23c8579638d050b7b219da011f2b" category="section-title">驾驶员选择和部署</block>
  <block id="a3edb76d25dfeb8d67e4711eafd2b5ca" category="paragraph">为您的存储系统选择并部署后端驱动程序。</block>
  <block id="a57628924f909d4edd5cb81ee4f10896" category="section-title">ONTAP后端驱动程序</block>
  <block id="4ea57c8a88545a4fc2039131bc6fd74d" category="paragraph">ONTAP后端驱动程序的区别在于所使用的协议以及在存储系统上配置卷的方式。因此，在决定部署哪位驾驶员时要仔细考虑。</block>
  <block id="815a377da65ae5b66c84438c43416d82" category="paragraph">从更高的层面来看，如果您的应用程序具有需要共享存储的组件（多个 pod 访问同一个 PVC），则基于 NAS 的驱动程序将是默认选择，而基于块的 iSCSI 驱动程序则满足非共享存储的需求。根据应用程序的要求以及存储和基础设施团队的接受程度来选择协议。一般来说，对于大多数应用来说，它们之间几乎没有区别，因此通常取决于是否需要共享存储（多个 pod 需要同时访问）。</block>
  <block id="642b59503457da90c85cbb7a35e02089" category="paragraph">可用的ONTAP后端驱动程序有：</block>
  <block id="c2c889ded63fbe94cf7f1d5fe4747b2d" category="list-text"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个完整的ONTAP FlexVolume。</block>
  <block id="9418583a1b7e700d24bcc735aa4682b5" category="list-text"><block ref="caafdf62a2c609bfa5316118231a1007" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个 qtree，每个 FlexVolume 的 qtree 数量可配置（默认值为 200）。</block>
  <block id="bc8f11db54909209ba09d55ee0b46990" category="list-text"><block ref="844e84da8e822b4a33c4d8188da97937" prefix="" category="inline-code"></block>每个 PV 都配置为一个完整的ONTAP FlexGroup，并且分配给 SVM 的所有聚合都将被使用。</block>
  <block id="5e587346b7a212ee6429303276a1578b" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>每个已配置的 PV 都是其自身 FlexVolume 中的一个 LUN。</block>
  <block id="85f6f5093b037b5bde3201d8136ee585" category="list-text"><block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个 LUN，每个 FlexVolume 的 LUN 数量可配置（默认值为 100）。</block>
  <block id="f1d8371af632688748db007c98766ded" category="paragraph">在三个 NAS 驱动程序之间进行选择会对应用程序可用的功能产生一些影响。</block>
  <block id="9586fb9f48cc64f580092d7123d5acad" category="paragraph">请注意，在下表中，并非所有功能都通过Trident公开。如果需要某些功能，则必须由存储管理员在配置完成后应用这些功能。上标脚注区分了每个功能和驱动程序的具体功能。</block>
  <block id="6252699c8e049f40eaf187092727a531" category="cell">ONTAP NAS 驱动程序</block>
  <block id="9147e5e61a7b9260dec09f3a6eb3e5be" category="cell">Snapshot</block>
  <block id="999cc42b236c7aee1157ff02d6f1bcd5" category="cell">克隆</block>
  <block id="13bc190bfed9f972b3e33e3656737cdd" category="cell">动态出口策略</block>
  <block id="ab0c646b4c5e36d9bcf8239d97fd1843" category="cell">多附件</block>
  <block id="8f2db90dd4a6fbd95ba8f0bc54fd6b27" category="cell">QoS</block>
  <block id="9d723d04c40bfd81835c0766a698cf63" category="cell">调整大小</block>
  <block id="8c340dc334134096f68b880b42a8692c" category="cell">复制</block>
  <block id="00055dac2ba112b87a95a368075b9561" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block></block>
  <block id="6bfc395e3d384b30d9f43ca45b1eeff7" category="cell">是的脚注：5[]</block>
  <block id="7c078cb746c3dd22969c07747fd7f3fc" category="cell">是的脚注：1[]</block>
  <block id="cecdaed309330a9e7dea16b2076957ee" category="cell"><block ref="caafdf62a2c609bfa5316118231a1007" prefix="" category="inline-code"></block></block>
  <block id="2e465fe2a334bfbbd0254091d76e5cf5" category="cell">无脚注：3[]</block>
  <block id="2b8ac774302bd45e0ad531e434d8cd6d" category="cell"><block ref="844e84da8e822b4a33c4d8188da97937" prefix="" category="inline-code"></block></block>
  <block id="c2f3f489a00553e7a01d369c103c7251" category="cell">否</block>
  <block id="5b003b29dfd53276a5b816a47ab32348" category="paragraph">Trident为ONTAP提供 2 款 SAN 驱动程序，其功能如下所示。</block>
  <block id="f916141465c67326e5d7d980bff2880b" category="cell">ONTAP SAN 驱动程序</block>
  <block id="4f546cdc5f90f7d264cde89d14c6e015" category="cell">双向 CHAP</block>
  <block id="cd17e7ed84c40a0ff5ecb8b625b1f186" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block></block>
  <block id="e78e01b4457814be0584f80618e4659a" category="cell">是的脚注：4[]</block>
  <block id="73b781a615cea2647a87ff2035e296b1" category="cell"><block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix="" category="inline-code"></block></block>
  <block id="60fa17e80af13d37b16c3991f5b175a6" category="verse-content-simple">以上表格的脚注：是脚注1[]：非Trident管理；是脚注2[]：由Trident管理，但不支持PV粒度；否脚注3[]：非Trident管理且不支持PV粒度；是脚注4[]：支持原始块卷；是脚注5[]： Trident支持。</block>
  <block id="74b4b41be17ac9897921032dfd4e94a8" category="paragraph">非 PV 粒度的功能将应用于整个 FlexVolume，所有 PV（即共享 FlexVol 中的 qtree 或 LUN）将共享一个共同的计划。</block>
  <block id="b483d59c54aea739f0806cf2f30c057e" category="paragraph">如上表所示，大部分功能都体现在以下方面：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>是一样的。然而，因为<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序限制了以 PV 粒度控制计划的能力，这可能会特别影响您的灾难恢复和备份计划。对于希望在ONTAP存储上利用 PVC 克隆功能的开发团队而言，只有在使用以下配置时才有可能：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>或者<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>司机。</block>
  <block id="45f7f2e55c0930a28d1a9e481e602a09" category="admonition">这<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序还能够克隆PVC。</block>
  <block id="e44e590e4645ab9ef08fb84f61cede17" category="section-title">Cloud Volumes ONTAP后端驱动程序</block>
  <block id="986d46700a93c1b67573285912b2a857" category="paragraph">Cloud Volumes ONTAP提供数据控制以及企业级存储功能，适用于各种用例，包括文件共享和块级存储，支持 NAS 和 SAN 协议（NFS、SMB / CIFS 和 iSCSI）。 Cloud Volume ONTAP的兼容驱动程序有：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>。这些适用于 Azure 版 Cloud Volume ONTAP和 GCP 版 Cloud Volume ONTAP 。</block>
  <block id="fdde450e1a16aa1461e62c6fa5ac621f" category="section-title">Amazon FSx for ONTAP后端驱动程序</block>
  <block id="7844c41fb05be5427418dbab3d0bdc49" category="paragraph">Amazon FSx for NetApp ONTAP让您能够利用您熟悉的NetApp功能、性能和管理能力，同时享受在 AWS 上存储数据的简单性、敏捷性、安全性和可扩展性。  FSx for ONTAP支持许多ONTAP文件系统功能和管理 API。  Cloud Volume ONTAP的兼容驱动程序有：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>。</block>
  <block id="d079959bb7c738f4e1704de5ff69b897" category="section-title">NetApp HCI/ SolidFire后端驱动程序</block>
  <block id="e040ac9827d856d3ad8ae9ac0da92295" category="paragraph">这<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>该驱动程序与NetApp HCI/ SolidFire平台配合使用，可帮助管理员根据 QoS 限制为Trident配置 Element 后端。如果您希望设计后端以设置Trident所配置卷的特定 QoS 限制，请使用以下方法：<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block>后端文件中的参数。管理员还可以使用以下方法限制可在存储上创建的卷大小：<block ref="e083f2ed1275af0ce4336a068ebee72a" prefix=" " category="inline-code"></block>范围。目前，Element 存储功能（例如卷调整大小和卷复制）尚不支持通过以下方式进行存储：<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>司机。这些操作应该通过 Element Software 的 Web 用户界面手动完成。</block>
  <block id="77e9d6f249e4626d5b5c3aec863459d3" category="cell">SolidFire驱动程序</block>
  <block id="9ef2bbb12ff72558472202561a25058d" category="cell">CHAP</block>
  <block id="57ee8ed0b2796ea5f35b10f9ae5d68cd" category="cell"><block ref="c0d2a793e71b152662b3e8cd2da00620" prefix="" category="inline-code"></block></block>
  <block id="0929973a1c9993903f6193add75b3fcf" category="cell">是的脚注：2[]</block>
  <block id="3f89ded204a4589d3a6dc04e8b5f3199" category="verse-content-simple">脚注：是脚注1： Trident不管理 是脚注2：支持原始块卷</block>
  <block id="64648abd6d020446c9c8d556a1584d71" category="section-title">Azure NetApp Files后端驱动程序</block>
  <block id="e999eb209b6aaa7fd15151716377009a" category="paragraph">Trident使用<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>司机管理<block ref="d617d79fbb5ee3bc8bd280353eeb1349" category="inline-link-macro-rx"></block>服务。</block>
  <block id="67f0b796ae8988fe5446f8f925a4f9d8" category="inline-link-macro">用于Azure NetApp Files的Trident后端配置</block>
  <block id="46a410b97b05c5034e7d6dd503471548" category="paragraph">有关此驱动程序及其配置方法的更多信息，请参见此处。<block ref="be39645497306a87b14bbf7b3f50cd06" category="inline-link-macro-rx"></block> 。</block>
  <block id="4da613089cbda3d7c19cb4b3f67c1f5d" category="cell">Azure NetApp Files驱动程序</block>
  <block id="8098b34f582537833b36b58273c3545b" category="cell">展开</block>
  <block id="e228843381960c06d1035c4219901307" category="cell"><block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix="" category="inline-code"></block></block>
  <block id="57c2378ca2b5638498fcfce53847fb9c" category="verse-content-simple">脚注：是脚注：1[]：并非由Trident管理</block>
  <block id="d7f3ab8ebe0633127c883b84d0b2bc4a" category="section-title">Google Cloud 后端驱动程序上的Cloud Volumes Service</block>
  <block id="66a053f36417f94321dcee6851d216fb" category="paragraph">Trident使用<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>用于连接 Google Cloud 上的Cloud Volumes Service的驱动程序。</block>
  <block id="372b7e839ce4640b08b006c48ae95057" category="paragraph">这<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>驱动程序使用虚拟池来抽象后端，并允许Trident确定卷放置位置。管理员在以下位置定义虚拟池：<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件。存储类使用选择器按标签识别虚拟池。</block>
  <block id="ac8324606d3b8866904635470650c639" category="list-text">如果后端定义了虚拟池， Trident将尝试在 Google Cloud 存储池中创建卷，而这些虚拟池仅限于这些存储池。</block>
  <block id="9fc446e524c543fa3dd1400cdc43e4a1" category="list-text">如果后端未定义虚拟池， Trident将从该区域的可用存储池中选择一个 Google Cloud 存储池。</block>
  <block id="0fe1467ee5cd2261fbc5597882bb689e" category="paragraph">要在Trident上配置 Google Cloud 后端，您必须指定<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block>，<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block> ， 和<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block>在后端文件中。您可以在 Google Cloud 控制台中找到项目编号。  API 密钥取自您在 Google Cloud 上为Cloud Volumes Service设置 API 访问权限时创建的服务帐户私钥文件。</block>
  <block id="0ae6ba37bc9a9c5f0420b6d38d38f5a9" category="inline-link-macro">了解Trident对 GCP 版 CVS 的支持</block>
  <block id="a215dc15f2b1d935791b8a15eeda76fd" category="paragraph">有关 Google Cloud 上的Cloud Volumes Service服务类型和服务级别的详细信息，请参阅：<block ref="76c16eb2ef8acb446255be1d7b0a5f06" category="inline-link-macro-rx"></block> 。</block>
  <block id="b8777f333c4d18731d4e5746513dc8eb" category="cell">适用于 Google Cloud Drive 的Cloud Volumes Service</block>
  <block id="949a374fc5a78d436e3067ee2de19cbe" category="cell"><block ref="5935ea92cdd7d975b4e764b429f21c01" prefix="" category="inline-code"></block></block>
  <block id="e8257e01d592104a99a17c192f84e86a" category="cell">仅适用于 CVS-Performance 服务类型。</block>
  <block id="e6f7c10d8c16eee55f72ce71c4b10a2f" category="list-title">复制说明</block>
  <block id="232ed8614fde30f69091f058b325c923" category="list-text">复制功能并非由Trident管理。</block>
  <block id="706c8ebf7645c5a984d080882f157905" category="list-text">克隆卷将创建在与源卷相同的存储池中。</block>
  <block id="3af6198d49c40c18f13c73c5ce15cf34" category="section-title">存储类设计</block>
  <block id="388bdf78cbb5b6bf4248ddf5613f7cc3" category="paragraph">要创建 Kubernetes 存储类对象，需要对各个存储类进行配置和应用。本节讨论如何为您的应用程序设计存储类。</block>
  <block id="0dceb918cb4a4d7dcbe5af26d08e7657" category="section-title">具体后端利用</block>
  <block id="a09acd5f665bdf96b6dce47f8d4265e3" category="paragraph">在特定的存储类对象中可以使用过滤来确定要与该特定存储类一起使用的存储池或存储池集。存储类中可以设置三组过滤器：<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block> ，<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>和/或<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>。</block>
  <block id="452de30c1a2630700e271baac21f9ff5" category="paragraph">这<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>该参数有助于将存储限制在与任何指定属性匹配的存储池集合中。这<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>该参数用于扩展Trident用于配置的池集，以及由属性选择的池集。<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>参数。您可以单独使用其中一个参数，也可以同时使用这两个参数，以确保选择合适的存储池集。</block>
  <block id="74476e892d2681775eb41ec00a11e8da" category="paragraph">这<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>该参数用于专门排除符合属性要求的已列出泳池集合。</block>
  <block id="ebaf90f7386ae95e7960a2fc0084116e" category="section-title">模拟 QoS 策略</block>
  <block id="ab807e6bd2f9cb9872eed98161bdd4e1" category="paragraph">如果您希望设计存储类来模拟服务质量策略，请创建一个具有以下功能的存储类：<block ref="62933a2951ef01f4eafd9bdf4d3cd2f0" prefix=" " category="inline-code"></block>属性为<block ref="dfdf2b9d5b3a77a55769b11d8a0396fe" prefix=" " category="inline-code"></block>或者<block ref="d4576b3b305e1df6f8ef4517ec2f9615" prefix=" " category="inline-code"></block>。基于<block ref="62933a2951ef01f4eafd9bdf4d3cd2f0" prefix=" " category="inline-code"></block>根据存储类中提到的属性， Trident将选择合适的后端来提供服务。<block ref="dfdf2b9d5b3a77a55769b11d8a0396fe" prefix=" " category="inline-code"></block>或者<block ref="d4576b3b305e1df6f8ef4517ec2f9615" prefix=" " category="inline-code"></block>将聚合与媒体属性匹配，然后将卷的配置定向到特定的聚合上。因此，我们可以创建一个 PREMIUM 存储类，它将具有<block ref="62933a2951ef01f4eafd9bdf4d3cd2f0" prefix=" " category="inline-code"></block>属性集为<block ref="d4576b3b305e1df6f8ef4517ec2f9615" prefix=" " category="inline-code"></block>这可以归类为高级 QoS 策略。我们可以创建另一个存储类 STANDARD，其媒体属性设置为“hdd”，这可以归类为 STANDARD QoS 策略。我们还可以使用存储类中的“IOPS”属性将配置重定向到 Element 设备，该设备可以定义为 QoS 策略。</block>
  <block id="125ad0610423d53866d257eb097320e4" category="section-title">根据特定功能使用后端</block>
  <block id="0bc0e72aefbf8f8ec0b28cc0486f98a2" category="paragraph">存储类可以设计为在特定的后端上指导卷配置，其中启用了精简配置和厚配置、快照、克隆和加密等功能。要指定要使用的存储，请创建存储类，指定启用所需功能的相应后端。</block>
  <block id="e2dcff5242641fe99e5de74fa1bfd61c" category="paragraph">所有Trident后端均可使用虚拟池。你可以使用Trident提供的任何驱动程序，为任何后端定义虚拟池。</block>
  <block id="976ae934688a6ffde1862ea50e00d6f9" category="paragraph">虚拟池允许管理员在后端之上创建一个抽象层，可以通过存储类引用该抽象层，从而在后端上更灵活、更高效地放置卷。同一服务类别可以定义不同的后端。此外，可以在同一个后端创建多个具有不同特性的存储池。当使用具有特定标签的选择器配置存储类时， Trident会选择与所有选择器标签匹配的后端来放置卷。如果存储类别选择器标签与多个存储池匹配， Trident将从中选择其中一个来配置卷。</block>
  <block id="46eefe0a9f18e4edef4d602d3868ad26" category="section-title">虚拟泳池设计</block>
  <block id="47d9ed5ad2795e2453dc7725d8fdeadc" category="paragraph">创建后端时，通常可以指定一组参数。管理员无法创建具有相同存储凭据和不同参数集的另一个后端。随着虚拟池的引入，这个问题得到了缓解。虚拟池是在后端和 Kubernetes 存储类之间引入的级别抽象，以便管理员可以定义参数以及可以通过 Kubernetes 存储类作为选择器引用的标签，以与后端无关的方式。可以使用Trident为所有受支持的NetApp后端定义虚拟池。该列表包括SolidFire/ NetApp HCI、 ONTAP、GCP 上的Cloud Volumes Service以及Azure NetApp Files。</block>
  <block id="e531eef4bc68547759b647c917ac2567" category="admonition">定义虚拟池时，建议不要尝试在后端定义中重新排列现有虚拟池的顺序。此外，建议不要编辑/修改现有虚拟池的属性，而是定义一个新的虚拟池。</block>
  <block id="b6e026d8066036cf2628237905a58384" category="section-title">模拟不同的服务级别/QoS</block>
  <block id="9f65455ce006fe56e7588e4e14f1edb8" category="paragraph">可以设计虚拟池来模拟服务类。使用Azure NetApp Files云卷服务的虚拟池实现，让我们来研究如何设置不同的服务类。配置Azure NetApp Files后端，使用多个标签来表示不同的性能级别。放<block ref="28277e44c5db61612accdf326d137e96" prefix=" " category="inline-code"></block>将各个方面调整到相应的性能水平，并在每个标签下添加其他所需的方面。现在创建不同的 Kubernetes 存储类，将它们映射到不同的虚拟池。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>字段中，每个 StorageClass 都会指定哪些虚拟池可用于托管卷。</block>
  <block id="628fd4af2a4e2fce014efbf03b84bb71" category="section-title">指定一组特定的方面</block>
  <block id="f274bdd304a8c3825a2766a1f8ff8fa7" category="paragraph">可以从单个存储后端设计多个具有特定功能的虚拟池。为此，请在后端配置多个标签，并在每个标签下设置所需的方面。现在使用以下方式创建不同的 Kubernetes 存储类：<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>该字段将映射到不同的虚拟池。后端配置的卷将具有所选虚拟池中定义的方面。</block>
  <block id="421f7dd5bb37a6401aa6326ad33dae20" category="section-title">影响存储供应的PVC特性</block>
  <block id="fb241a03678f7f6dbc815840b0eb275b" category="paragraph">在创建 PVC 时，除请求的存储类别之外的某些参数可能会影响Trident 的配置决策过程。</block>
  <block id="5ab83f35784f154d55ea7ab58c8e503b" category="section-title">访问模式</block>
  <block id="f3882c83b41b76a9fac2c57407f3ac2b" category="paragraph">通过 PVC 请求存储时，必填字段之一是访问模式。所需的模式可能会影响用于托管存储请求的后端选择。</block>
  <block id="d0652515edf18bae4abe8c32cbada535" category="paragraph">Trident将尝试根据以下矩阵将所使用的存储协议与指定的访问方法进行匹配。这与底层存储平台无关。</block>
  <block id="cac415feda213697b27d3b6fce10d33a" category="cell">读写一次</block>
  <block id="c24ad3d99a666c95edd149419c958ee0" category="cell">只读多</block>
  <block id="caa8dc1f4bb28d2d11226494cd05a123" category="cell">读写多</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="cell">iSCSI</block>
  <block id="cefb8ccdebef1940174b22e9d0ab530b" category="cell">是的（原始块）</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="823f2153adc2211a0777560eafdcbad6" category="paragraph">如果向未配置 NFS 后端的Trident部署提交 ReadWriteMany PVC 请求，则不会配置任何卷。因此，请求者应该使用适合其应用的访问模式。</block>
  <block id="5a51acb2538e54805c54d37ebb49c75d" category="section-title">卷操作</block>
  <block id="26fad327e23b6b08dcc94300bfe1ed04" category="section-title">修改持久卷</block>
  <block id="7439c9a99660382e94c16c5272b9bfb0" category="paragraph">除两种例外情况外，持久卷是 Kubernetes 中的不可变对象。创建完成后，可以修改回收策略和大小。然而，这并不能阻止在 Kubernetes 之外修改卷的某些方面。为了针对特定应用定制卷，确保容量不会意外耗尽，或者出于任何原因将卷移动到不同的存储控制器，这样做可能是可取的。</block>
  <block id="ce8f76b595bb8163817ad21f0d964fe2" category="admonition">目前 Kubernetes 树内配置器不支持对 NFS、iSCSI 或 FC PV 进行卷大小调整操作。  Trident支持扩展 NFS、iSCSI 和 FC 卷。</block>
  <block id="b1d1874782626fe3f391628ea493e6ef" category="paragraph">PV的连接详情创建后无法修改。</block>
  <block id="e68591655c8031177206e1e75728853f" category="section-title">创建按需卷快照</block>
  <block id="5778c34e2378296c943901d6fc399424" category="paragraph">Trident支持按需创建卷快照，并支持使用 CSI 框架从快照创建 PVC。快照提供了一种便捷的方法来维护数据在特定时间点的副本，并且在 Kubernetes 中具有独立于源 PV 的生命周期。这些快照可用于克隆PVC。</block>
  <block id="f007c56a8eb121e8a696105e69aefa68" category="section-title">从快照创建卷</block>
  <block id="9aea71aa176b781fee80bdbfd4f20d46" category="paragraph">Trident还支持从卷快照创建持久卷。要实现这一点，只需创建一个 PersistentVolumeClaim 并指定<block ref="1ea7e575defdf6bc3f26a3f127e98170" prefix=" " category="inline-code"></block>作为创建卷所需的快照。 Trident将通过创建一个包含快照中数据的卷来处理此 PVC。借助此功能，可以跨区域复制数据、创建测试环境、完全替换损坏或已损坏的生产卷，或者检索特定文件和目录并将其传输到另一个附加卷。</block>
  <block id="55a3309b0b6646e0ea6b47195bd3d4bd" category="section-title">在集群中移动卷</block>
  <block id="ed6f39ab5224d264f94fc4324f391366" category="paragraph">存储管理员能够在ONTAP集群中，在聚合和控制器之间移动卷，而不会对存储用户造成任何干扰。只要目标聚合是Trident使用的 SVM 可以访问的目标聚合，此操作就不会影响Trident或 Kubernetes 集群。重要的是，如果聚合体是新添加到 SVM 中的，则需要通过将其重新添加到Trident来刷新后端。这将触发Trident重新清点 SVM，以便识别新的聚合体。</block>
  <block id="aec7eb75babd44ee65e8fe4e8f0b1096" category="paragraph">但是， Trident并不自动支持跨后端移动卷。这包括在同一集群中的 SVM 之间、集群之间，或者到不同的存储平台（即使该存储系统是连接到Trident 的存储系统）。</block>
  <block id="16c30c56fe00d20f49bb055490dff7aa" category="paragraph">如果将卷复制到另一个位置，则可以使用卷导入功能将当前卷导入到Trident中。</block>
  <block id="2243e252be826d6ec5e767668d9f961d" category="section-title">扩大规模</block>
  <block id="e168cabed41efc63d96f214d5cbe189a" category="paragraph">Trident支持调整 NFS、iSCSI 和 FC PV 的大小。这样用户就可以直接通过 Kubernetes 层调整卷的大小。所有主流NetApp存储平台，包括ONTAP、 SolidFire/ NetApp HCI和Cloud Volumes Service后端，均可进行卷扩展。为了便于日后扩展，请设置<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>在与该卷关联的 StorageClass 中。每当需要调整持久卷的大小时，请编辑以下内容：<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block>在持久卷声明中添加对所需卷大小的注释。  Trident会自动处理存储集群上卷的大小调整。</block>
  <block id="40a28a40c11a193f8911cf4143a6ae6a" category="section-title">将现有卷导入 Kubernetes</block>
  <block id="62e0abd2d56d565a2b31e85b446fa800" category="paragraph">卷导入功能允许将现有存储卷导入 Kubernetes 环境。目前这得到了以下方面的支持：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> ， 和<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>司机。将现有应用程序移植到 Kubernetes 或灾难恢复场景中，此功能非常有用。</block>
  <block id="6b810970c1e58f8070c318df43054f6c" category="paragraph">使用ONTAP时<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>司机们，请使用该命令<block ref="5b139f5309999fcf6a4bbc8389cbc865" prefix=" " category="inline-code"></block>将现有卷导入 Kubernetes 以便由Trident管理。导入卷命令中使用的 PVC YAML 或 JSON 文件指向一个存储类，该存储类将Trident标识为配置程序。使用NetApp HCI/ SolidFire后端时，请确保卷名称是唯一的。如果卷名称重复，请将卷克隆为唯一名称，以便卷导入功能可以区分它们。</block>
  <block id="39367d7a2c7f9b4acc498f4324db020c" category="paragraph">如果<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>或者<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>使用了驱动程序，请使用命令<block ref="37e8b35fb48ead6318ca6f2f83110554" prefix=" " category="inline-code"></block>将卷导入 Kubernetes 以便由Trident管理。这样就确保了卷号的唯一性。</block>
  <block id="4cb042ac9491457dd22d7368d4fa27c1" category="paragraph">执行上述命令后， Trident将在后端找到该卷并读取其大小。它会自动添加（必要时会覆盖）已配置的PVC的容积大小。然后Trident创建新的 PV，Kubernetes 将 PVC 绑定到 PV。</block>
  <block id="3a8b25f50e2dcc298175abc8f6a71f82" category="paragraph">如果部署的集装箱需要特定的进口 PVC，则该集装箱将保持待定状态，直到通过批量进口流程绑定 PVC/PV 对为止。  PVC/PV管对连接好后，如果没有其他问题，容器应该就能升起来。</block>
  <block id="6dd8f6c286b8e1a8c96c6309099f0003" category="section-title">注册服务</block>
  <block id="68ee1c4c0da20bfd1e946df20351d4b9" category="inline-link-macro">netapp.io</block>
  <block id="126ac9f6149081eb0e97c2e939eaad52" category="inline-link-macro">博客</block>
  <block id="34d357a7f8cc47e860d5fb0a317cf22d" category="paragraph">注册表存储的部署和管理已在文档中记录。<block ref="d5e1883ebd095c0eda96c44469e8197d" category="inline-link-macro-rx"></block>在<block ref="ceb73d0582d40281d79011a1e5343e89" category="inline-link-macro-rx"></block>。</block>
  <block id="62ac236856a5a6aefd15133e967514c6" category="section-title">日志服务</block>
  <block id="2f3052b6a2858bec8355ec56150f6a38" category="paragraph">与其他 OpenShift 服务一样，日志服务使用 Ansible 进行部署，配置参数由提供给 playbook 的清单文件（又名 hosts）提供。本文将介绍两种安装方法：在 OpenShift 初始安装期间部署日志记录和在 OpenShift 安装完成后部署日志记录。</block>
  <block id="3e01fdf7f18117c92347492814d988ee" category="admonition">从 Red Hat OpenShift 版本 3.9 开始，官方文档建议不要使用 NFS 作为日志服务，因为存在数据损坏方面的担忧。这是基于红帽公司对其产品的测试结果。 ONTAP NFS 服务器不存在这些问题，并且可以轻松地支持日志部署。最终，日志服务的协议选择取决于您，但要知道，在使用NetApp平台时，这两种协议都能很好地工作，如果您更喜欢 NFS，也没有理由避免使用 NFS。</block>
  <block id="57cad4852c9c2e439f61728e0391fe7b" category="paragraph">如果选择将 NFS 与日志服务一起使用，则需要设置 Ansible 变量。<block ref="12eeb466f53968af86875065cacb87df" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>防止安装程序运行失败。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="section-title">开始使用</block>
  <block id="16e90b2336fdfec64b19194247422194" category="paragraph">日志服务可以选择性地部署到应用程序以及 OpenShift 集群本身的核心操作中。如果您选择部署操作日志记录，请指定以下变量<block ref="e9fb6c5b679bcf493f004e7862e40370" prefix=" " category="inline-code"></block>作为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>将创建该服务的两个实例。控制操作日志实例的变量中包含“ops”，而控制应用程序日志实例的变量则不包含。</block>
  <block id="643f15e2581a728cb2a6d66953a357d7" category="paragraph">根据部署方法配置 Ansible 变量非常重要，以确保底层服务使用正确的存储。让我们来看看每种部署方法的选项。</block>
  <block id="2bf380408feee0a9443f217c907f0681" category="inline-link-macro">Red Hat OpenShift 日志记录文档</block>
  <block id="796814ebd3d324fe438f0c699c37c89e" category="admonition">下表仅包含与日志服务相关的存储配置变量。您还可以找到其他选择<block ref="202ad309c67a74272d432350a2d0cf76" category="inline-link-macro-rx"></block>应根据您的部署情况进行审查、配置和使用。</block>
  <block id="02098b11f876fe10c40b6106bd9864da" category="paragraph">下表中的变量将使 Ansible playbook 使用提供的详细信息为日志服务创建 PV 和 PVC。虽然这种方法不如在 OpenShift 安装后使用组件安装 playbook 灵活，但如果您有现有的卷可用，这也不失为一个选择。</block>
  <block id="47c14840d8e15331fa420b9b2f757cd9" category="cell">变量</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="9aa2fd43742cd5ed36b406b3f4b0fd8c" category="cell"><block ref="da877c5451281307ba496c6d47b9e58a" prefix="" category="inline-code"></block></block>
  <block id="3260b06ea72e4931f5fb5106001fcc28" category="cell">设置为<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>让安装程序为日志服务创建 NFS PV。</block>
  <block id="e95f43173c69a9ca544d4aaef28a4d90" category="cell"><block ref="a6e6be3176202f08f0df1683c85dbcf6" prefix="" category="inline-code"></block></block>
  <block id="f39a4edd3567c3db7a288d4b8203dbee" category="cell">NFS主机的主机名或IP地址。这应该设置为虚拟机的 dataLIF。</block>
  <block id="41aae586bb7044d7741fe9412aa81e03" category="cell"><block ref="de9d956706d370dbc262cec42d7dd029" prefix="" category="inline-code"></block></block>
  <block id="bf2d137d8c669b07aae26040c7e5c0e0" category="cell">NFS导出挂载路径。例如，如果体积连接为<block ref="54db3c53100205a4065b324343188651" prefix=" " category="inline-code"></block>你会将该路径用于此变量。</block>
  <block id="88a9f7d18fabb82d63ac43c64ae6e735" category="cell"><block ref="a9c9aa0bbb9f276fcffcb28987aafe46" prefix="" category="inline-code"></block></block>
  <block id="6f8782c23f3cb958d0de4fad76dabaed" category="cell">名称，例如<block ref="2e85c8d6d60b1938be08d95bf1d5ed6c" prefix=" " category="inline-code"></block>，创建 PV。</block>
  <block id="789e0dc4bfc00f5c885a698d6ab34dff" category="cell"><block ref="db6cd83d9bf6cb9184c2966426d87c8d" prefix="" category="inline-code"></block></block>
  <block id="b68f05ea52c8c80c07e6a4c0671c75bf" category="cell">例如，NFS 导出的大小。<block ref="f6e2fcb8998619722fdea77d356a4b3b" prefix=" " category="inline-code"></block> 。</block>
  <block id="2ab80b6965298dc6a178995bbedebe88" category="paragraph">如果您的 OpenShift 集群已经运行，因此Trident已经部署和配置，安装程序可以使用动态配置来创建卷。需要配置以下变量。</block>
  <block id="c2aecf833d743cbc47969cd85c67101e" category="cell"><block ref="5d0e211248d2b37acde90612e54b85c9" prefix="" category="inline-code"></block></block>
  <block id="540ad9a52084720ddb7f364fa8b304c6" category="cell">设置为 true 以使用动态配置卷。</block>
  <block id="45a481a75749c5331e7e9fd7d89e473d" category="cell"><block ref="5e135d629059162b7f62817ebf81f67b" prefix="" category="inline-code"></block></block>
  <block id="837ffa1e281409660ed25582c5b1963f" category="cell">PVC 中将使用的存储类别的名称。</block>
  <block id="cd3daa927272b5624e96d283365d5500" category="cell"><block ref="7ee69f3d6802d7d49dc834e2a48533f8" prefix="" category="inline-code"></block></block>
  <block id="8f80d278a79cbc84b80a091713006022" category="cell">PVC中要求的体积大小。</block>
  <block id="1bb0c7eeef4bbbefae080a294fd554b0" category="cell"><block ref="463a50d4707805ff518a7c1b614cae9b" prefix="" category="inline-code"></block></block>
  <block id="f870ec92e294a018a17afe7a614fb5bb" category="cell">日志记录服务使用的 PVC 前缀。</block>
  <block id="e8c62e1f0f0773ae5ba6a7acad696b2d" category="cell"><block ref="f4d06597471a7e461fa3aaaa2a053142" prefix="" category="inline-code"></block></block>
  <block id="46e65a11ac398c02b8fce45a7cd5cf36" category="cell">设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>为运维日志实例使用动态配置的卷。</block>
  <block id="8792c7234e14325cb68c493d20ab5154" category="cell"><block ref="30a3d0fdc8ecf82523d9f348d96c46ab" prefix="" category="inline-code"></block></block>
  <block id="d016f79f0ee104f3805d61e6a379fb9b" category="cell">运维日志实例的存储类名称。</block>
  <block id="048e768365962d7d520567f92aea8355" category="cell"><block ref="7c884ec8a4d2fd51c22984fae2fe09f1" prefix="" category="inline-code"></block></block>
  <block id="bc367f89ac597585e52d0eb58a5929ae" category="cell">操作实例的卷请求大小。</block>
  <block id="155871626071d69cb283985a9f36bad2" category="cell"><block ref="210255a36cb029002a696f21a04cf35d" prefix="" category="inline-code"></block></block>
  <block id="2a8f254749a466654f556c6466051133" category="cell">操作实例 PVC 的前缀。</block>
  <block id="e1b2d0d3228c29c069bcd139de306709" category="section-title">部署日志堆栈</block>
  <block id="0409a0cfdfa4f3b3033503b8309442ff" category="paragraph">如果您将日志记录部署作为 OpenShift 初始安装过程的一部分，那么您只需要遵循标准部署过程即可。  Ansible 将配置和部署所需的服务和 OpenShift 对象，以便在 Ansible 完成后立即提供该服务。</block>
  <block id="3a298688c4d78e1b7532d3859cd16a57" category="inline-link-macro">Red Hat OpenShift 容器平台 3.11 文档</block>
  <block id="620fb6046d1af07a3df48b291902887c" category="paragraph">但是，如果在初始安装之后进行部署，则需要使用 Ansible 的组件 playbook。此过程可能因 OpenShift 版本不同而略有差异，因此请务必阅读并遵循相关说明。<block ref="87091f5bcd27af3d8592e461d451be85" category="inline-link-macro-rx"></block>适用于您的版本。</block>
  <block id="3dbf527ac3caf41ab150ec99a1737217" category="section-title">指标服务</block>
  <block id="ee3d8ea22d8bf88f2f7fcd6d6dbf26d2" category="paragraph">指标服务为管理员提供有关 OpenShift 集群的状态、资源利用率和可用性的宝贵信息。此外，它对于 pod 自动扩展功能也是必要的，许多组织使用指标服务中的数据进行费用分摊和/或收益展示应用程序。</block>
  <block id="b8e4ea2ed30f2f3a9f05ef8e1cc243db" category="paragraph">与日志服务以及整个 OpenShift 一样，Ansible 也用于部署指标服务。此外，与日志服务一样，指标服务可以在集群的初始设置期间或集群运行后使用组件安装方法进行部署。以下表格包含了为指标服务配置持久存储时重要的变量。</block>
  <block id="69aa4440020e49c654aeb910f38c6bb9" category="admonition">下表仅包含与指标服务相关的存储配置变量。文档中还有许多其他选项，应根据您的部署情况进行查看、配置和使用。</block>
  <block id="4f692d78f978a73b157571022c1d1ba7" category="cell"><block ref="87ee48b0bd9cbef625c9e58d29953bd9" prefix="" category="inline-code"></block></block>
  <block id="30da7e263c0cffc34933d24a07fb097a" category="cell"><block ref="03fe9d76b0b5aef27365ed846a7686c0" prefix="" category="inline-code"></block></block>
  <block id="7a6f34ea0b1eec52267ce30c62d910ba" category="cell">NFS主机的主机名或IP地址。这应该设置为你的 SVM 的 dataLIF。</block>
  <block id="3bafc264ad2a901d3be052a7f1cf2e44" category="cell"><block ref="30a3002c7df05045a0206d9273a384c6" prefix="" category="inline-code"></block></block>
  <block id="459859e54ba90bc4145c54d1f1deecff" category="cell">NFS导出挂载路径。例如，如果体积连接为<block ref="84e465df2e745334cf363d2701acbc8c" prefix=" " category="inline-code"></block>你会将该路径用于此变量。</block>
  <block id="ca0f0d82f9c7cbc36df652cddd4b2f35" category="cell"><block ref="2708722d0be9e759610930ca4ba0ccda" prefix="" category="inline-code"></block></block>
  <block id="eb10d02b22b02d7f543f867b8d31e7b0" category="cell">名称，例如<block ref="346a344a8f42541e4f261b54ef920508" prefix=" " category="inline-code"></block>，用于创建 PV。</block>
  <block id="a3eeeafe923ac73e75b3bf33cdadb603" category="cell"><block ref="8085fdc8f39bb3d2c5b777041294d9bf" prefix="" category="inline-code"></block></block>
  <block id="a56c731cfe96d228c7c0bcc57bc80d3d" category="cell"><block ref="861e7642b92f41392f844c04bfffd5e0" prefix="" category="inline-code"></block></block>
  <block id="0da919d4045e4f38d294aaec73f5d57f" category="cell">用于指标 PVC 的前缀。</block>
  <block id="15bb3eef0b42a93e324977c289f2fd85" category="cell"><block ref="c3d37ddc32376761a7073bb028fe23f9" prefix="" category="inline-code"></block></block>
  <block id="75929c9d67f1407282b5618fca4589e7" category="cell">请求的卷册数量。</block>
  <block id="8ebb493e0ffdf7c1e850c67bc22f15c7" category="cell"><block ref="d2744c21ee3a719be8d523f86c2d1538" prefix="" category="inline-code"></block></block>
  <block id="aab0ec84a4da1dfd2b63896453f1e05d" category="cell">用于指标的存储类型，必须将其设置为动态，以便 Ansible 创建具有适当存储类的 PVC。</block>
  <block id="460aaf3805271ec2e5dc35755fe317b1" category="cell"><block ref="c79cb64517774919120c2dfa7c06e9a8" prefix="" category="inline-code"></block></block>
  <block id="0c55ca33e89539cd67eb0be3796547c5" category="cell">要使用的存储类的名称。</block>
  <block id="6c13e62eb53f29e7794d3807369299d2" category="section-title">部署指标服务</block>
  <block id="e8b2e1fd32346fcd38f11f84cd51d409" category="paragraph">在 hosts/inventory 文件中定义了相应的 Ansible 变量后，使用 Ansible 部署服务。如果您在安装 OpenShift 时进行部署，则 PV 将自动创建和使用。如果您使用组件 playbook 进行部署，则在 OpenShift 安装之后，Ansible 会创建所需的任何 PVC，并在Trident为其配置存储之后部署服务。</block>
  <block id="95c7854cff26589ad1555baa8672c001" category="inline-link-macro">红帽 OpenShift 部署指南</block>
  <block id="757eaf1f1a551aabeb24f57705261f85" category="paragraph">上述变量以及部署过程可能会随着 OpenShift 的每个版本而改变。请务必查看并遵循<block ref="1b29818189b1aff318eccaee960b09cb" category="inline-link-macro-rx"></block>请根据您的环境配置您的版本。</block>
  <block id="9560d298aea880d389acf56a45410c4b" category="summary">您可以配置加密来保护Trident和您的存储后端之间的流量。</block>
  <block id="c994f1e00d22f7d8d4e7b3e7f50f8002" category="doc">Kerberos 飞行中加密</block>
  <block id="c8ea4672c0efc6fee26c8648f609a829" category="paragraph">使用 Kerberos 传输中加密，您可以对托管集群和存储后端之间的流量启用加密，从而提高数据访问安全性。</block>
  <block id="420bac2406e93da0c7c791aca209017d" category="paragraph">Trident支持以ONTAP作为存储后端的 Kerberos 加密：</block>
  <block id="796f801ad41f96aeb2e1a1950ed629e4" category="list-text">*本地ONTAP* - Trident支持通过 NFSv3 和 NFSv4 连接对来自 Red Hat OpenShift 和上游 Kubernetes 集群的本地ONTAP卷进行 Kerberos 加密。</block>
  <block id="0a710c309a5f6dc65b056833a5208521" category="paragraph">您可以创建、删除、调整大小、创建快照、克隆、只读克隆和导入使用 NFS 加密的卷。</block>
  <block id="2aff02c8ceb99a9445937af9d4d8f286" category="section-title">配置本地ONTAP卷的飞行中 Kerberos 加密</block>
  <block id="330282591e8caa9814eb88ec524b89cf" category="paragraph">您可以为托管集群和本地ONTAP存储后端之间的存储流量启用 Kerberos 加密。</block>
  <block id="daf34fb0fcb74d9bcf85abcebcc8e1f2" category="admonition">仅使用以下方式支持对本地ONTAP存储后端的 NFS 流量进行 Kerberos 加密：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>存储驱动程序。</block>
  <block id="0ff02d27ae5cac1a12c6c403fd55443c" category="list-text">确保您可以访问<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>公用事业。</block>
  <block id="bef890ed7cc869346d4b483cd3e3ab00" category="list-text">请确保您拥有ONTAP存储后端的管理员权限。</block>
  <block id="160b05c1b85ce34d702a3568614baec1" category="list-text">请确保您知道要从ONTAP存储后端共享的卷的名称。</block>
  <block id="65066f84c75170b9c4abad6591a73548" category="inline-link">在数据 LIF 上启用 Kerberos</block>
  <block id="3d2c78553d28b3786f4ec9e513e0adba" category="list-text">请确保您已准备好ONTAP存储 VM，以支持 NFS 卷的 Kerberos 加密。请参阅<block ref="27faba9d44bb486b2290a75aafcee5c1" category="inline-link-rx"></block>以获取说明。</block>
  <block id="9fe985de654739fa6f48edb0d49059b4" category="inline-link">NetApp NFSv4 增强功能和最佳实践指南</block>
  <block id="9c6a0d551d50340cca48e6cfa4355566" category="list-text">请确保所有与 Kerberos 加密一起使用的 NFSv4 卷都已正确配置。请参阅NetApp NFSv4 域配置部分（第 13 页）。<block ref="fcbfe3012009d21ef9ba8407142f85b6" category="inline-link-rx"></block> 。</block>
  <block id="7c67bfc9153da2055f6d09209f9853c7" category="section-title">添加或修改ONTAP导出策略</block>
  <block id="3afa4a2a4546fcf1b9a361d1bff9763b" category="paragraph">您需要向现有的ONTAP导出策略添加规则，或者创建新的导出策略，以支持对ONTAP存储 VM 根卷以及与上游 Kubernetes 集群共享的任何ONTAP卷进行 Kerberos 加密。您添加的导出策略规则或您创建的新导出策略需要支持以下访问协议和访问权限：</block>
  <block id="e21233a7f0d7fedb5883aea1dfed27cf" category="paragraph-title">访问协议</block>
  <block id="e10f51f4d0eb1b58929237c03db4b832" category="paragraph">配置导出策略，支持 NFS、NFSv3 和 NFSv4 访问协议。</block>
  <block id="baedff73fdfff23f65e8b80727cd3088" category="paragraph-title">访问详情</block>
  <block id="892969be437eb53b05f372cc0ae74d6c" category="paragraph">您可以根据卷的需求配置三种不同版本的 Kerberos 加密之一：</block>
  <block id="fda32d078836aa6e69a3497be5f9cdca" category="list-text">*Kerberos 5* - （身份验证和加密）</block>
  <block id="7d55fc39e32469f330297f866ec40e41" category="list-text">*Kerberos 5i* - （身份验证和加密，具有身份保护功能）</block>
  <block id="ec7a355c2dad88f01ddce6c662ff507f" category="list-text">*Kerberos 5p* - （身份验证和加密，提供身份和隐私保护）</block>
  <block id="43c969c43b32e3dd3bcf607fcbe4eb43" category="paragraph">配置ONTAP导出策略规则，使其具有适当的访问权限。例如，如果集群将使用 Kerberos 5i 和 Kerberos 5p 混合加密方式挂载 NFS 卷，请使用以下访问设置：</block>
  <block id="0370275db54735bcb50d5bfce36de4e6" category="cell">只读访问权限</block>
  <block id="dbdb2754b99a3cb725e62ef04c72ee06" category="cell">读/写权限</block>
  <block id="a3a9521b6675631e988004e7b8ffe7b4" category="cell">超级用户访问权限</block>
  <block id="15395d0642f86c5992abbca5e56e2b29" category="cell">UNIX</block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="cell">已启用</block>
  <block id="f22873ba6efee4accc10bd5a3d3ca9eb" category="cell">Kerberos 5i</block>
  <block id="a98fd9001be872cb9763c171625ee881" category="cell">Kerberos 5p</block>
  <block id="9a83b6e7170a551799b737b273fde5e1" category="paragraph">有关如何创建ONTAP导出策略和导出策略规则，请参阅以下文档：</block>
  <block id="bb53c6c29f127a298da7dd86bf00bb89" category="inline-link">创建导出策略</block>
  <block id="2065c7b470f4d228b592158785fc8c0b" category="list-text"><block ref="2065c7b470f4d228b592158785fc8c0b" category="inline-link-rx"></block></block>
  <block id="8c47b652d31bca921bb367b0e3c5ec6d" category="inline-link">向导出策略添加规则</block>
  <block id="249db3ace916cc1363d388978a8b6c5e" category="list-text"><block ref="249db3ace916cc1363d388978a8b6c5e" category="inline-link-rx"></block></block>
  <block id="c21c2b66c343dfe9db6298e59c2cc767" category="section-title">创建存储后端</block>
  <block id="449396632614b1e0731c51704890f8bd" category="paragraph">您可以创建包含 Kerberos 加密功能的Trident存储后端配置。</block>
  <block id="0848c0a5d21711a3f8967a344553c492" category="paragraph">创建配置 Kerberos 加密的存储后端配置文件时，可以使用以下方式指定三种不同版本的 Kerberos 加密之一：<block ref="21f59c061af833af5de20556ce76052d" prefix=" " category="inline-code"></block>范围：</block>
  <block id="619885da64e4ba4b0df04a00d78079b7" category="list-text"><block ref="47587c842cb0a2574a5a4c7c644b006d" prefix="" category="inline-code"></block>（身份验证和加密）</block>
  <block id="aa734ef649b1255faccfc198980bf49a" category="list-text"><block ref="600550ee922e257041b75142ddab2319" prefix="" category="inline-code"></block>（身份验证和加密，以及身份保护）</block>
  <block id="4197df0e0ac8f9480069ee1e0dc22543" category="list-text"><block ref="b148e7f5a01830ae530070588af5e9e6" prefix="" category="inline-code"></block>（身份验证和加密，以及身份和隐私保护）</block>
  <block id="c99e9f5ade1b20705438ad6882d112c2" category="paragraph">只能指定一个 Kerberos 级别。如果在参数列表中指定多个 Kerberos 加密级别，则仅使用第一个选项。</block>
  <block id="926a7d5402fb3ed0da8fcd630e3a8f8c" category="list-text">在托管集群上，使用以下示例创建存储后端配置文件。将方括号 &lt;&gt; 中的值替换为您环境中的信息：</block>
  <block id="2cd636101227e18554e5c5351bf5bbe3" category="list-text">使用上一步创建的配置文件创建后端：</block>
  <block id="a61ed3c1ecae587dbee1f2c0ace81e3b" category="paragraph">如果后端创建失败，则后端配置存在问题。您可以通过运行以下命令查看日志以确定原因：</block>
  <block id="8427b84145b88f048d5caa532324cd11" category="paragraph">在您发现并纠正配置文件中的问题后，您可以再次运行创建命令。</block>
  <block id="3204b0a88f0c8e6cb89ef2653173ddf1" category="paragraph">您可以创建存储类来配置具有 Kerberos 加密的卷。</block>
  <block id="03111bbdda72125f143e084557265c1c" category="paragraph">创建存储类对象时，可以使用以下方式指定三种不同版本的 Kerberos 加密之一：<block ref="e1d3d66c5926aa7fbc3186da8f9b476b" prefix=" " category="inline-code"></block>范围：</block>
  <block id="85eee746a5d30d5149d419a3dfd2fe4e" category="list-text"><block ref="ebd2fabd7ee9d78e670334fba38c5a6b" prefix="" category="inline-code"></block>（身份验证和加密）</block>
  <block id="24dac19871e9929a42267b538a60ebe5" category="list-text"><block ref="82f5845550ca9ab77ce797c16bd7bca1" prefix="" category="inline-code"></block>（身份验证和加密，以及身份保护）</block>
  <block id="c36d9d41da2e174bfa8b3338450fb45c" category="list-text"><block ref="7a1dedb8f6c22fd4833b45267ad3b01a" prefix="" category="inline-code"></block>（身份验证和加密，以及身份和隐私保护）</block>
  <block id="4a2e7c9ecf75ac18d4daec2783256280" category="paragraph">只能指定一个 Kerberos 级别。如果在参数列表中指定多个 Kerberos 加密级别，则仅使用第一个选项。如果在存储后端配置中指定的加密级别与在存储类对象中指定的加密级别不同，则以存储类对象为准。</block>
  <block id="0bae6577bb0c45b6f2d82896713df9f9" category="list-text">创建一个 StorageClass Kubernetes 对象，请参考以下示例：</block>
  <block id="bd9c5e9bd5f130a6fbdbcaeb04656652" category="list-text">创建存储类：</block>
  <block id="2472867b1c2b8a486fe64cfc08afeba5" category="list-text">请确保已创建存储类：</block>
  <block id="0a44f30bac4e15e0464a80627bef5882" category="section-title">供应量</block>
  <block id="37bd6ab74d66efd877ea77c0e69e593c" category="paragraph">创建存储后端和存储类之后，现在可以配置卷了。有关说明，请参阅<block ref="70405bfb2744633a336a6c9abdd1df6e" category="inline-link-rx"></block>。</block>
  <block id="fe10ad21eb1ce607c403a8d609d5ab3e" category="section-title">使用Azure NetApp Files卷配置飞行中 Kerberos 加密</block>
  <block id="cd21e25bc313d3805456542eac624499" category="paragraph">您可以为托管群集与单个Azure NetApp Files存储后端或Azure NetApp Files存储后端虚拟池之间的存储流量启用 Kerberos 加密。</block>
  <block id="04379b5e9a5ec6b970752d2b8d0341c8" category="list-text">请确保已在受管 Red Hat OpenShift 集群上启用Trident 。</block>
  <block id="6c32a3d0f1a665987b98dde5a0f96d7d" category="inline-link">Azure NetApp Files文档</block>
  <block id="aa63a31f222305a4ce10d8c1020ab1fd" category="list-text">请确保您已按照以下说明准备好Azure NetApp Files存储后端以进行 Kerberos 加密：注意相关要求并按照说明进行操作。<block ref="54b351b1767d2d50eb8c87e19c20164c" category="inline-link-rx"></block> 。</block>
  <block id="4f07c8d51fef64025d4b746305177733" category="paragraph">您可以创建包含 Kerberos 加密功能的Azure NetApp Files存储后端配置。</block>
  <block id="5c6eaa8dd4c4134f6ad836e97ffdee13" category="paragraph">创建配置 Kerberos 加密的存储后端配置文件时，您可以将其定义为应用于以下两个级别之一：</block>
  <block id="bc0557be41ea94e344d7ece1f311b7d4" category="list-text">使用*存储后端级别*<block ref="6a60a6d9955ef9fce24cf4e86efed7af" prefix=" " category="inline-code"></block>场地</block>
  <block id="e30ee9a2b9976217a5fe28b412fe04d6" category="list-text">使用*虚拟池级别*<block ref="533988f6253fcffab6270c1aafb50970" prefix=" " category="inline-code"></block>场地</block>
  <block id="64864cec765a0e5c421369098904873c" category="paragraph">在虚拟池级别定义配置时，使用存储类中的标签选择池。</block>
  <block id="082ccae8192fda90d271d92200b3a7dd" category="paragraph">无论在哪个级别，您都可以指定三种不同版本的 Kerberos 加密之一：</block>
  <block id="853434fc4aabccb1e3341f56ef2a9424" category="list-text"><block ref="9ce0da43b8420d1a89f0d00da04312a2" prefix="" category="inline-code"></block>（身份验证和加密）</block>
  <block id="44ea74e03aa9994870273996b8770ef6" category="list-text"><block ref="6bbaa5deea5e26abf8837d31bd265b6f" prefix="" category="inline-code"></block>（身份验证和加密，以及身份保护）</block>
  <block id="e22427c81cd5155061fad66ed3f13f52" category="list-text"><block ref="42b55bed7d0514cd2e2189a3edc9d87b" prefix="" category="inline-code"></block>（身份验证和加密，以及身份和隐私保护）</block>
  <block id="c51fc706f0eb21d747d3ff2e2bb6c38b" category="list-text">在托管集群上，根据您需要定义存储后端的位置（存储后端级别或虚拟池级别），使用以下示例之一创建存储后端配置文件。将方括号 &lt;&gt; 中的值替换为您环境中的信息：</block>
  <block id="d51a5db438981d465f8fecc7ecbeb054" category="open-title">存储后端示例</block>
  <block id="83aab9b6ffc8c65b79350e009c49e5f4" category="open-title">虚拟池级别示例</block>
  <block id="d6e925b1fae42b853ba04f3810c28628" category="summary">您可以启用 Linux 统一密钥设置 (LUKS) 来加密Trident上的ONTAP SAN 和ONTAP SAN ECONOMY 卷。  Trident支持 LUKS 加密卷的卷大小调整和密钥（口令）轮换。</block>
  <block id="b6969fa89b54a37ee3628194aebbbea3" category="doc">Linux 统一密钥设置 (LUKS)</block>
  <block id="3d987bdfee54b4cc132665887eab7b60" category="paragraph">您可以启用 Linux 统一密钥设置 (LUKS) 来加密Trident上的ONTAP SAN 和ONTAP SAN ECONOMY 卷。  Trident支持 LUKS 加密卷的密码短语轮换和卷扩展。</block>
  <block id="a44b6b00e5eebd7494e1fd00658685e2" category="inline-link-macro">美国国家标准与技术研究院</block>
  <block id="35ae21817657169af402c244d1974dfd" category="paragraph">在Trident中，LUKS 加密卷使用 aes-xts-plain64 密码和模式，这是推荐的。<block ref="79a538d5fda32e1565131ca044d589f6" category="inline-link-macro-rx"></block> 。</block>
  <block id="e995d56efd9e31d97825dd79be4d1383" category="inline-link-macro">了解ASA r2 存储系统</block>
  <block id="19bf8687ff63071d6f6661c290cba7c2" category="admonition">ASA r2 系统不支持 LUKS 加密。有关ASA r2 系统的信息，请参阅<block ref="40f055dd42976ff294174231df35e37e" category="inline-link-macro-rx"></block>。</block>
  <block id="83188252104d97bbc732f23aa3b26ae2" category="inline-link-macro">GitLab：加密设置</block>
  <block id="525588be7f6bc2cf7b3b257ced2b19c7" category="list-text">工作节点必须安装 cryptsetup 2.1 或更高版本（但低于 3.0）。欲了解更多信息，请访问<block ref="39c06d5570d5dfd5c63abe15a0d8d2fb" category="inline-link-macro-rx"></block>。</block>
  <block id="1b5e17f09c6b94c6a943765fe4bf9d6c" category="list-text">出于性能方面的考虑， NetApp建议工作节点支持高级加密标准新指令 (AES-NI)。要验证是否支持 AES-NI，请运行以下命令：</block>
  <block id="0520b57116af979714f913239aa512a5" category="inline-link-macro">英特尔：高级加密标准指令集（AES-NI）</block>
  <block id="64e4c9865ee7451edfc34d72da12ee7d" category="paragraph">如果没有返回任何内容，则说明您的处理器不支持 AES-NI。有关 AES-NI 的更多信息，请访问：<block ref="e77f47a78a9c4677daf14d5366b503b4" category="inline-link-macro-rx"></block> 。</block>
  <block id="83f59a8c99f92feae93c90d4f7bd0d68" category="section-title">启用 LUKS 加密</block>
  <block id="b9a97083b1f9ee5d9d6fd1ec4025a836" category="paragraph">您可以使用 Linux 统一密钥设置 (LUKS) 为ONTAP SAN 和ONTAP SAN ECONOMY 卷启用按卷主机端加密。</block>
  <block id="06c4db929b729ddf158ceb5cc15b122b" category="inline-link-macro">ONTAP SAN 配置选项</block>
  <block id="d197aff07a41df5dbefcace33058435c" category="list-text">在后端配置中定义 LUKS 加密属性。有关ONTAP SAN 后端配置选项的更多信息，请参阅<block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block>。</block>
  <block id="227eef96675ec0e7595951c060437608" category="list-text">使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>使用 LUKS 加密定义存储池。例如：</block>
  <block id="a99f022d7515cf14d9d2e49a72198c5c" category="list-text">创建一个包含 LUKS 密码短语的密钥。例如：</block>
  <block id="e646e16bee8b32e6ea29e30d01970a6c" category="section-title">限制</block>
  <block id="6d8e596656bc0dc6684415f94bee7e6a" category="paragraph">LUKS 加密卷无法利用ONTAP重复数据删除和压缩功能。</block>
  <block id="ab946346d7b6ebd4a84d96bb78dcd833" category="section-title">导入 LUKS 卷的后端配置</block>
  <block id="32a9b32fc41708606002471c1eb3f55c" category="paragraph">要导入 LUKS 卷，您必须设置<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>在后端。这<block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix=" " category="inline-code"></block>此选项用于告知Trident该卷是否符合 LUKS 标准。<block ref="b326b5062b2f0e69046810717534cb09" prefix="(" category="inline-code"></block>或不符合 LUKS 标准<block ref="68934a3e9455fa72420237eb05902327" prefix="(" category="inline-code"></block>）如下例所示。</block>
  <block id="64049136ec90cc479c7521e9b6e172eb" category="section-title">用于导入 LUKS 卷的 PVC 配置</block>
  <block id="b49b86551096c421a3bc5d3b79eede84" category="paragraph">要动态导入 LUKS 卷，请设置注释<block ref="36720d50814e4335401b2047257bfedf" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>并在 PVC 中包含一个支持 LUKS 的存储类，如本例所示。</block>
  <block id="f9d3cd939395358ac0f0bd3a1043656c" category="section-title">轮换 LUKS 密码短语</block>
  <block id="5173c14a913aecabc2aa4a398abfd3a1" category="paragraph">您可以轮换 LUKS 密码短语并确认轮换。</block>
  <block id="870809044094847738d2e3b2d3490240" category="admonition">在您确认任何卷、快照或密钥不再引用该密码短语之前，请勿忘记该密码短语。如果引用的密码短语丢失，您可能无法挂载卷，数据将保持加密状态且无法访问。</block>
  <block id="623002c2cdb3e388098c78e4a56c5f74" category="paragraph">当指定新的 LUKS 密码短语后创建挂载卷的 pod 时，就会发生 LUKS 密码短语轮换。当创建一个新的 pod 时， Trident会将卷上的 LUKS 密码短语与密钥中的活动密码短语进行比较。</block>
  <block id="a09edd6ec72e24ea93fe0643001ce09b" category="list-text">如果卷上的密码短语与密钥中的活动密码短语不匹配，则会发生轮换。</block>
  <block id="85341a765feac19c14ddb5733a16bb0f" category="list-text">如果卷上的密码短语与密钥中的活动密码短语匹配，则<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block>参数被忽略。</block>
  <block id="e11fe3d05d72f7812c946ac80ae339ed" category="list-text">添加<block ref="c774c2255b7e3b1f75cd200c366d4148" prefix=" " category="inline-code"></block>和<block ref="59ab79bfd6177f0b40d74d58d4a94d89" prefix=" " category="inline-code"></block>StorageClass 参数。例如：</block>
  <block id="7fe288bcd08368971a3839f1de636c7c" category="list-text">识别卷或快照上已存在的密码短语。</block>
  <block id="bd7a9717d29c5ddcab1bc175eda1e298" category="listing-title">卷</block>
  <block id="c0526adc9b28d758d8fab9d4a5b998ef" category="list-text">更新卷的 LUKS 密钥，以指定新的和以前的密码短语。确保<block ref="119d124de86f53dbdf015ff1809c10e1" prefix=" " category="inline-code"></block>和<block ref="4146f2b31b5baccc1599d6209e20b87f" prefix=" " category="inline-code"></block>与之前的密码短语匹配。</block>
  <block id="4f8a79fea6c3cc09f49769b8473808f7" category="list-text">创建一个新的 pod，挂载该卷。这是启动旋转所必需的步骤。</block>
  <block id="bcf837455c951c49bd9138ead166c489" category="list-text">确认密码短语已轮换。</block>
  <block id="fd69c5cf902969e6fb71d043085ddee6" category="paragraph-title">结果</block>
  <block id="0c7eac961f50eef2d0c82d382fdd18b3" category="paragraph">当卷和快照上仅返回新密码短语时，密码短语就会轮换。</block>
  <block id="6ff457ceee4568584dc3fd66c1ae658a" category="admonition">例如，如果返回两个密码短语。<block ref="b5b0f81d5dbb45d3dd031f1b02af8bf3" prefix=" " category="inline-code"></block>旋转不完整。您可以触发一个新的舱体来尝试完成轮换。</block>
  <block id="b3f9d5f1e12f2ba5ecd2ece1e9084f3f" category="section-title">启用卷扩展</block>
  <block id="e5307495a3aec6528b42d3f3e835a761" category="paragraph">您可以对 LUKS 加密卷启用卷扩展。</block>
  <block id="aeec1a5a7dc7624995570096ce8156ef" category="inline-link-macro">Kubernetes 1.25：使用密钥实现 CSI 卷的节点驱动扩展</block>
  <block id="1282398415278cc77bc47970640d4188" category="list-text">启用<block ref="b0e105de2a2f0820528649fee8d2e331" prefix=" " category="inline-code"></block>功能门（beta 1.25+）。参考 <block ref="35e3bd84b2522e04fd4ead86130c9227" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="e4de718025be845e2dec22064bb4eece" category="list-text">添加<block ref="91985ce21cd787a6ab2a13cc97f58968" prefix=" " category="inline-code"></block>和<block ref="641c8d6753dd78e60ebb61a20e6a2742" prefix=" " category="inline-code"></block>StorageClass 参数。例如：</block>
  <block id="e718558948d1441cf3873df6fb7b10c3" category="paragraph">启动在线存储扩展时，kubelet 会将相应的凭据传递给驱动程序。</block>
  <block id="0cf736e750e01f7d7ddbc08fe8297576" category="summary">请按照此处列出的建议，确保您的Trident安装安全可靠。</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="doc">安全性</block>
  <block id="e047f381a9811c1d60a8a3750b2d0cda" category="paragraph">请按照此处列出的建议，确保您的Trident安装安全可靠。</block>
  <block id="2d40d7a116d252bb16ef5b074c9c28ee" category="section-title">在Trident自身的命名空间中运行它</block>
  <block id="7d4a55ae858dcca9ad616f33e6035cc6" category="paragraph">防止应用程序、应用程序管理员、用户和管理应用程序访问Trident对象定义或 pod 非常重要，以确保可靠的存储并阻止潜在的恶意活动。</block>
  <block id="59eb6cc525324355d85d541c963c8697" category="paragraph">为了将其他应用程序和用户与Trident隔离，请始终将Trident安装在其自身的 Kubernetes 命名空间中。<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix="(" category="inline-code"></block> ）。将Trident放在自己的命名空间中，可以确保只有 Kubernetes 管理员才能访问Trident pod 和存储在命名空间 CRD 对象中的工件（例如后端和 CHAP 密钥，如果适用）。您应该确保只有管理员才能访问Trident命名空间，从而获得对以下方面的访问权限：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>应用。</block>
  <block id="f40aef657c875e42158050f63dcfbb6f" category="section-title">使用 CHAP 身份验证与ONTAP SAN 后端配合使用</block>
  <block id="9d9837d692b44e524c96b427964bea85" category="paragraph">Trident支持基于 CHAP 的ONTAP SAN 工作负载身份验证（使用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>司机）。  NetApp建议使用Trident的双向 CHAP 进行主机与存储后端之间的身份验证。</block>
  <block id="5f82f4ab2783617b6e62bdd43d4a4e49" category="inline-link-macro">准备配置后端ONTAP SAN 驱动程序</block>
  <block id="10c80ca6b662fb62c61b4f3551fa4460" category="paragraph">对于使用 SAN 存储驱动程序的ONTAP后端， Trident可以通过以下方式设置双向 CHAP 并管理 CHAP 用户名和密钥：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。请参阅<block ref="647d5f494fdd01a14f263aa1b49a3db4" category="inline-link-macro-rx"></block>了解Trident如何在ONTAP后端配置 CHAP。</block>
  <block id="d4e0ad8fd8e11d87eb431051692db344" category="section-title">使用 CHAP 身份验证连接NetApp HCI和SolidFire后端</block>
  <block id="a77f6a8d6a33d8d8102cdeed9631b96d" category="paragraph">NetApp建议部署双向 CHAP，以确保主机与NetApp HCI和SolidFire后端之间的身份验证。 Trident使用一个包含每个租户两个 CHAP 密码的秘密对象。安装Trident后，它会管理 CHAP 密钥并将其存储在一个位置。<block ref="3ddc70b4b408f6dd5bbd5fe7d6008993" prefix=" " category="inline-code"></block>相应 PV 的 CR 对象。创建 PV 时， Trident使用 CHAP 密钥启动 iSCSI 会话，并通过 CHAP 与NetApp HCI和SolidFire系统通信。</block>
  <block id="99dfe9c8c9bd791b7382d67a440c38be" category="admonition">Trident创建的卷不与任何卷访问组关联。</block>
  <block id="9559c7656e8a28d235478856aa8e44ce" category="section-title">将Trident与 NVE 和 NAE 结合使用</block>
  <block id="c638f77e97a62d0d11f775816222d62a" category="inline-link-macro">配置NetApp卷加密概述</block>
  <block id="b65b10bf779c45e4940c255ecf83bdc3" category="paragraph">NetApp ONTAP提供静态数据加密，以保护敏感数据，防止磁盘被盗、退回或重新利用。有关详细信息，请参阅<block ref="e0b51490e5d435c82abc702d0a4ca15c" category="inline-link-macro-rx"></block>。</block>
  <block id="4a8deb2ba46901e5599a8d9ca85ca254" category="list-text">如果后端启用了 NAE，则在Trident中配置的任何卷都将启用 NAE。</block>
  <block id="8ef3114bf1395e8f04d7b3404982499e" category="list-text">您可以将 NVE 加密标志设置为<block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block>创建支持 NAE 的卷。</block>
  <block id="351e2b20bd9ea864b69cd832f3a4a5df" category="list-text">如果后端未启用 NAE，则在Trident中配置的任何卷都将启用 NVE，除非 NVE 加密标志设置为 。<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> （后端配置中的默认值）。</block>
  <block id="6fd5fcab13431f04cede0c124a46282a" category="paragraph">在启用 NAE 的后端上使用Trident创建的卷必须使用 NVE 或 NAE 加密。</block>
  <block id="1bb1c0791a9e9cff8de216ed44b1de31" category="list-text">您可以将 NVE 加密标志设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>在Trident后端配置中，可以覆盖 NAE 加密，并按卷使用特定的加密密钥。</block>
  <block id="18eea8a0000e827a336c57c06568e4d5" category="list-text">将 NVE 加密标志设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>在启用 NAE 的后端上创建启用 NAE 的卷。您无法通过将 NVE 加密标志设置为 来禁用 NAE 加密。<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> 。</block>
  <block id="9feef6eaebf84b29639dd7c179735c8c" category="list-text">您可以通过显式设置 NVE 加密标志，在Trident中手动创建 NVE 卷。<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> 。</block>
  <block id="b6c7fef7b7bcf035a4f4ad02ff8808c2" category="paragraph">有关后端配置选项的更多信息，请参阅：</block>
  <block id="e87ded5ef8bc8adbc3c135528636f4f2" category="list-text"><block ref="e87ded5ef8bc8adbc3c135528636f4f2" category="inline-link-macro-rx"></block></block>
  <block id="676ad90ce2543d29917d8a5a6fc02e01" category="inline-link-macro">ONTAP NAS 配置选项</block>
  <block id="fce586d9f649fb529d0a1846495ba259" category="list-text"><block ref="fce586d9f649fb529d0a1846495ba259" category="inline-link-macro-rx"></block></block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="doc">存储配置</block>
  <block id="ecd7650a65b79124ad23fb7eed8faa7e" category="paragraph">NetApp产品组合中的每个存储平台都具有独特的功能，无论应用程序是否采用容器化，都能从中受益。</block>
  <block id="e6dc22cf3c59dda6e09524b2b133f336" category="section-title">平台概览</block>
  <block id="050fb8b0306d7532dbf8c15b8cba9745" category="paragraph">Trident可与ONTAP和 Element 配合使用。没有哪个平台比其他平台更适合所有应用和场景，但是，在选择平台时，应该考虑应用的需求以及管理设备的团队的需求。</block>
  <block id="ac5112696fd64ee051846c666ebebebe" category="paragraph">您应该遵循您所使用协议的主机操作系统的最佳实践。  （可选）您可以考虑将应用程序最佳实践（如果可用）与后端、存储类别和 PVC 设置相结合，以优化特定应用程序的存储。</block>
  <block id="efc9d085ca2f3a152c786357e9359c03" category="section-title">ONTAP和Cloud Volumes ONTAP最佳实践</block>
  <block id="a3f99d5d44515cf922e6b525de736173" category="paragraph">了解配置ONTAP和Cloud Volumes ONTAP for Trident 的最佳实践。</block>
  <block id="76d50c7d0f100e6264e0d57727d099f1" category="paragraph">以下建议是为容器化工作负载配置ONTAP的指导原则，这些工作负载使用由Trident动态配置的卷。每项都应根据您的环境进行考虑和评估，以确定其适用性。</block>
  <block id="3fb21976d2729216782dd61ffed84a54" category="section-title">使用专用于Trident 的SVM。</block>
  <block id="fa4e21d3612a3f737c7a4ac7ebf24950" category="paragraph">存储虚拟机 (SVM) 为ONTAP系统上的租户提供隔离和管理分离。将 SVM 专用于应用程序可以实现权限委派，并可以应用限制资源消耗的最佳实践。</block>
  <block id="3dc5510a67688b81f0d6d0db440da909" category="paragraph">SVM的管理有多种选择：</block>
  <block id="fe425a9419fa4d05d42131c26306e4f1" category="list-text">在后端配置中提供集群管理接口，以及相应的凭据，并指定 SVM 名称。</block>
  <block id="e2160df70bcda0ee43cb3c66dc22c719" category="list-text">使用ONTAP系统管理器或 CLI 为 SVM 创建专用管理界面。</block>
  <block id="2bf2fa2c1c3a6e10095db72759cc9983" category="list-text">与 NFS 数据接口共享管理角色。</block>
  <block id="5cf4c2e89b362842d77f4e4209c4ef99" category="paragraph">在每种情况下，接口都应该在 DNS 中，并且在配置Trident时应该使用 DNS 名称。这有助于实现某些灾难恢复场景，例如无需网络身份保留的 SVM-DR。</block>
  <block id="6a392b5e005fffe32231c94dc96a1605" category="inline-link">SVM-DR</block>
  <block id="2b4a6ee2db063653d6076884295a3854" category="paragraph">对于 SVM 而言，采用专用管理 LIF 还是共享管理 LIF 没有偏好，但是，您应该确保您的网络安全策略与您选择的方法保持一致。无论如何，管理 LIF 应该可以通过 DNS 访问，以实现最大的灵活性。<block ref="f5e9502989ce78934689806ebb69606a" category="inline-link-rx"></block>可与Trident配合使用。</block>
  <block id="4a0ee008d3379206a925ade3a9e707dd" category="section-title">限制最大体积数</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe</block>
  <block id="cd41030284d3ee7b99fc16831ed79650" category="paragraph">ONTAP存储系统有最大卷数限制，该限制会根据软件版本和硬件平台而有所不同。请参阅<block ref="bb9c67b5a4c15a85b5e6aa6c9afd0285" category="inline-link-rx"></block>请根据您的具体平台和ONTAP版本确定确切的限制。当卷计数耗尽时，不仅Trident的配置操作会失败，而且所有存储请求的配置操作都会失败。</block>
  <block id="39da19b7dd55941b6cdabf34befc0b4c" category="paragraph">三叉戟的<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序为每个创建的 Kubernetes 持久卷 (PV) 提供 FlexVolume。这<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序大约每 200 个 PV 创建一个 FlexVolume（可在 50 到 300 之间配置）。这<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序大约每 100 个 PV 创建一个 FlexVolume（可在 50 到 200 之间配置）。为了防止Trident消耗存储系统上所有可用的卷，您应该对 SVM 设置限制。您可以从命令行执行此操作：</block>
  <block id="f36680e3d3cb96c74d2f1a54c3c4a0fa" category="paragraph">价值<block ref="1829fafb02997aa2b4d309a69b7cdbfa" prefix=" " category="inline-code"></block>价格会根据您所在环境的几个具体因素而有所不同：</block>
  <block id="5f6d1abb6889904ee0375b2fc6c8f078" category="list-text">ONTAP集群中现有卷的数量</block>
  <block id="029383c13d9ad2c5ba18a16f8fbe2002" category="list-text">您预计在Trident之外为其他应用程序配置的卷数</block>
  <block id="02f4ac473b944a63551d51d727b5bb49" category="list-text">Kubernetes 应用程序预计使用的持久卷数量</block>
  <block id="1d3555f20ac0a2897a1596631b5fb27a" category="paragraph">这<block ref="1829fafb02997aa2b4d309a69b7cdbfa" prefix=" " category="inline-code"></block>该值是ONTAP集群中所有节点上配置的总卷数，而不是单个ONTAP节点上的卷数。因此，您可能会遇到某些情况，即ONTAP集群节点的Trident配置卷可能比其他节点多得多或少得多。</block>
  <block id="46710fe77f663864a23e02a880a9ae53" category="inline-link">聚合</block>
  <block id="8d102642e270f6e890338a2cfc4a188d" category="paragraph">例如，一个双节点ONTAP集群最多可以托管 2000 个FlexVol卷。将最大音量计数设置为 1250 似乎非常合理。然而，如果仅仅<block ref="acf6cbef6ee0ef07ee3fe13269233be8" category="inline-link-rx"></block>如果从一个节点分配给 SVM，或者从一个节点分配的聚合无法进行配置（例如，由于容量不足），则另一个节点将成为所有Trident配置卷的目标。这意味着该节点的容量限制可能在达到上限之前就已经达到。<block ref="1829fafb02997aa2b4d309a69b7cdbfa" prefix=" " category="inline-code"></block>达到值后，将影响Trident和使用该节点的其他卷操作。  *您可以通过确保集群中每个节点的聚合数据以相等的数量分配给Trident使用的SVM来避免这种情况。*</block>
  <block id="8e1b080c70f6bd5a6a7f2755f82fb95b" category="paragraph">NetApp Trident在使用时支持克隆卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ， 和<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>存储驱动程序。使用时<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>或者<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>驱动程序不支持克隆。从现有卷创建新卷将创建一个新的快照。</block>
  <block id="9470f4768dd90ef0be0fb76cb2f6e04b" category="admonition">避免克隆与不同存储类关联的PVC。在同一个 StorageClass 内执行克隆操作，以确保兼容性并防止出现意外行为。</block>
  <block id="7ef3217c984ef7f973d389e434be312c" category="section-title">限制Trident创建的最大体积。</block>
  <block id="031b203330c3abb94f6fa406ff721de4" category="paragraph">要配置Trident可创建的卷的最大大小，请使用以下方法：<block ref="e083f2ed1275af0ce4336a068ebee72a" prefix=" " category="inline-code"></block>参数<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>定义。</block>
  <block id="1c19414de17c9992b25b0a1b02a52715" category="paragraph">除了控制存储阵列的卷大小之外，您还应该利用 Kubernetes 功能。</block>
  <block id="1b75c146ff0568d5fc11072b08cfe580" category="section-title">限制Trident创建的FlexVols的最大尺寸。</block>
  <block id="913d5950907a31c9d3ea6cd0a3b6a524" category="paragraph">要配置用作 ontap-san-economy 和 ontap-nas-economy 驱动程序池的 FlexVols 的最大大小，请使用以下方法：<block ref="c8f83e727d4a4255a6485c24776e86bb" prefix=" " category="inline-code"></block>参数<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>定义。</block>
  <block id="85c0f9773e01224a56713ea4e6d83b86" category="section-title">配置Trident使用双向 CHAP</block>
  <block id="2ae7281d275fb0db889e8ad073e94629" category="paragraph">您可以在后端定义中指定 CHAP 发起方和目标用户名和密码，并让Trident在 SVM 上启用 CHAP。使用<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>在后端配置中设置参数， Trident使用 CHAP 对ONTAP后端的 iSCSI 连接进行身份验证。</block>
  <block id="2596e59ce5cd0d1b0066656f191365d0" category="section-title">创建并使用 SVM QoS 策略</block>
  <block id="560417d4f795b7e1176a40db8e4ccca8" category="inline-link">阻止欺凌行为</block>
  <block id="4870168b0713fe3089cf587858fc3b40" category="paragraph">利用应用于 SVM 的ONTAP QoS 策略，可以限制Trident已配置卷可消耗的 IOPS 数量。这有助于<block ref="1b59d76842e8b78d6111d3e73e9cd404" category="inline-link-rx"></block>或者失控的容器影响Trident SVM 之外的工作负载。</block>
  <block id="d6ab867679686745d96bea839929a6de" category="paragraph">只需几个步骤即可为 SVM 创建 QoS 策略。请参阅您所用ONTAP版本的文档以获取最准确的信息。下面的示例创建了一个 QoS 策略，将 SVM 可用的总 IOPS 限制为 5000。</block>
  <block id="c790de304b7ca0097f2133cf9da4e657" category="paragraph">此外，如果您的ONTAP版本支持，您可以考虑使用 QoS 最低要求来保证容器化工作负载的吞吐量。自适应QoS与SVM层策略不兼容。</block>
  <block id="38c0b69f6b2ee691e1ba568134513414" category="paragraph">分配给容器化工作负载的 IOPS 数量取决于许多方面。其中包括：</block>
  <block id="ddbd18591c9b7378c6187dbd9179e1f0" category="list-text">使用存储阵列的其他工作负载。如果还有其他与 Kubernetes 部署无关的工作负载正在使用存储资源，则应注意确保这些工作负载不会意外受到不利影响。</block>
  <block id="5da5727b396cee5b024364d989fe253b" category="list-text">预期工作负载将在容器中运行。如果对 IOPS 要求高的工作负载将在容器中运行，则低 QoS 策略会导致糟糕的用户体验。</block>
  <block id="e6f229b5d5d2421c4306920759828212" category="paragraph">需要注意的是，在 SVM 级别分配的 QoS 策略会导致分配给 SVM 的所有卷共享同一个 IOPS 池。如果一个或少数几个容器化应用程序对 IOPS 有很高的要求，它可能会欺负其他容器化工作负载。如果情况属实，您可能需要考虑使用外部自动化工具来分配按卷划分的 QoS 策略。</block>
  <block id="ac2167b1e02d575eb6ddfe4e58f5cdcf" category="admonition">只有当您的ONTAP版本低于 9.8 时，才应将 QoS 策略组分配给 SVM。</block>
  <block id="9992cae6c17055c750a849c5f6135eb2" category="section-title">为Trident创建 QoS 策略组</block>
  <block id="76a3e54f72b3a7224429f111e58f836c" category="inline-link">通过服务质量 (QoS) 保证吞吐量。</block>
  <block id="ed108e0380671c3131e1a4795b982a45" category="paragraph">服务质量 (QoS) 保证关键工作负载的性能不会因竞争工作负载而降低。 ONTAP QoS 策略组为卷提供 QoS 选项，并允许用户为一个或多个工作负载定义吞吐量上限。有关 QoS 的更多信息，请参阅<block ref="721a1778a2025ec5868484b3888c0186" category="inline-link-rx"></block>。您可以在后端或存储池中指定 QoS 策略组，这些策略组将应用于在该池或后端中创建的每个卷。</block>
  <block id="0394fb1288eac4cd3d40bcd991e079e9" category="paragraph">ONTAP有两种类型的 QoS 策略组：传统型和自适应型。传统策略组在 IOPS 中提供固定的最大（或最小，在后续版本中）吞吐量。自适应 QoS 可根据工作负载大小自动调整吞吐量，随着工作负载大小的变化，保持 IOPS 与 TB|GB 的比率不变。在大型部署中管理成百上千个工作负载时，这提供了显著的优势。</block>
  <block id="f5acc65a21daed9bb8e91cb5cdd0ae52" category="paragraph">创建QoS策略组时，请考虑以下事项：</block>
  <block id="6d5fcf300cd9e9239c26ce37b0919fca" category="list-text">你应该设置<block ref="36c38058d66835923c982c773a817f0b" prefix=" " category="inline-code"></block>关键在于<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>后端配置块。请参见以下后端配置示例：</block>
  <block id="32160c2368452bf7d86bcffae7f142be" category="list-text">您应该按卷应用策略组，以便每个卷都能获得策略组指定的全部吞吐量。不支持共享策略组。</block>
  <block id="f3497351aae46692e603fedb2f2cd146" category="inline-link">ONTAP命令参考</block>
  <block id="94ac1e66ef8b79949d7fe240ca1fc49e" category="paragraph">有关 QoS 策略组的更多信息，请参阅<block ref="c7075dcfeceb3e1e55c7a25ddec6d166" category="inline-link-rx"></block>。</block>
  <block id="d5d2a5bc92eea85a4dd11a642ed8a170" category="section-title">限制对 Kubernetes 集群成员的存储资源访问</block>
  <block id="6146d9e1c8e067801be76f7b7027b42f" category="paragraph">限制对Trident创建的 NFS 卷、iSCSI LUN 和 FC LUN 的访问是 Kubernetes 部署安全态势的关键组成部分。这样做可以防止不属于 Kubernetes 集群的主机访问卷并可能意外修改数据。</block>
  <block id="9602ec8691c1a564016f9fd8086139f1" category="paragraph">重要的是要理解命名空间是 Kubernetes 中资源的逻辑边界。假设同一命名空间内的资源可以共享，但是，重要的是，没有跨命名空间的功能。这意味着，即使 PV 是全局对象，当绑定到 PVC 时，也只能由同一命名空间中的 pod 访问。  *务必确保在适当情况下使用命名空间来实现代码分离。*</block>
  <block id="1162be0546226cff2cbd973cd2140d33" category="paragraph">对于大多数组织而言，在 Kubernetes 环境中数据安全的主要担忧是容器中的进程可以访问挂载到主机上的存储，但该存储并非为容器所预期的。<block ref="962cfea7b49ca7b2d398d891b4313cb5" category="inline-link-rx"></block>旨在防止此类妥协。但是，特权容器是一个例外。</block>
  <block id="7b10e929cc2e0061dfb50042a0203c79" category="inline-link">Pod 安全策略</block>
  <block id="76db1afb772160283f7f86cdd67c35f8" category="paragraph">特权容器是指拥有比普通容器高得多的主机级权限的容器。这些功能默认情况下不会被禁用，因此请确保使用以下命令禁用该功能：<block ref="e5ab4ede40a4a6a5f5684247585b5fb0" category="inline-link-rx"></block> 。</block>
  <block id="5fabba1d91abcfb09b6049897727e91c" category="paragraph">对于需要从 Kubernetes 和外部主机访问的卷，存储应以传统方式进行管理，PV 由管理员引入，而不是由Trident管理。这样可以确保只有当 Kubernetes 和外部主机都已断开连接并且不再使用该卷时，才会销毁存储卷。此外，还可以应用自定义导出策略，从而允许从 Kubernetes 集群节点和 Kubernetes 集群外部的目标服务器进行访问。</block>
  <block id="8a6112da5167fe6f44136715f1d86c36" category="paragraph">对于具有专用基础架构节点（例如 OpenShift）或其他无法调度用户应用程序的节点的部署，应使用单独的导出策略来进一步限制对存储资源的访问。这包括为部署到这些基础设施节点的服务（例如，OpenShift Metrics 和 Logging 服务）以及部署到非基础设施节点的标准应用程序创建导出策略。</block>
  <block id="e38f5be5ff6a8a362870a032acdf5d2f" category="section-title">使用专门的出口政策</block>
  <block id="8f971d8f40dd91f1f3041a0d7faf5f85" category="paragraph">您应该确保每个后端都存在导出策略，该策略仅允许访问 Kubernetes 集群中的节点。Trident可以自动创建和管理出口政策。这样， Trident将其提供的卷的访问限制到 Kubernetes 集群中的节点，并简化了节点的添加/删除。</block>
  <block id="28af9e32119f59018dd5d887ad93ccd4" category="paragraph">或者，您也可以手动创建导出策略，并向其中填充一条或多条导出规则，以处理每个节点访问请求：</block>
  <block id="4ae1e64986504dce6897746ebc9d2786" category="list-text">使用<block ref="7d47f98e53b93d7fb8a050185d494363" prefix=" " category="inline-code"></block>ONTAP CLI 命令创建导出策略。</block>
  <block id="cd0a9fca1fb3ba0fcdd98d0e87cb78a9" category="list-text">使用以下方式向出口策略添加规则：<block ref="729c5e15acc8b31618fe3265de1c624b" prefix=" " category="inline-code"></block> ONTAP CLI 命令。</block>
  <block id="bc3a2f6421da1e870583cfb0b9cf4a91" category="paragraph">运行这些命令可以限制哪些 Kubernetes 节点可以访问数据。</block>
  <block id="74257eabdceb63f8522f7c68b103da3a" category="section-title">禁用<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block>对于应用SVM</block>
  <block id="fdbf43c52ad3e72902872b8ada5c6dde" category="paragraph">这<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block>此功能使 NFS 客户端能够向 SVM 查询可用 NFS 导出列表。部署到 Kubernetes 集群的 pod 可以发出<block ref="55fb64f15dd3d0c53de3a4d095218569" prefix=" " category="inline-code"></block>对目标执行命令，并接收可用挂载点列表，包括它无法访问的挂载点。虽然这本身并不构成安全隐患，但它确实提供了不必要的信息，可能会帮助未经授权的用户连接到 NFS 导出。</block>
  <block id="08f1d9a2f49f56965b640bc15796cd61" category="paragraph">您应该禁用<block ref="d51321f13693d09d4a9cbb2758b42d12" prefix=" " category="inline-code"></block>通过使用 SVM 级ONTAP CLI 命令：</block>
  <block id="648e0e1a6a98e76bdfe9780c42dacb6b" category="section-title">SolidFire最佳实践</block>
  <block id="89f93e411a40f5c6365a4703e004f15b" category="paragraph">了解配置Trident的SolidFire存储的最佳实践。</block>
  <block id="52f311b56fcd9d4fb074918af9b7c7f9" category="section-title">创建 Solidfire 帐户</block>
  <block id="b0dd2707e9f12b5e1fda314748ffa386" category="paragraph">每个SolidFire帐户代表一个唯一的卷所有者，并接收自己的一组质询握手身份验证协议 (CHAP) 凭证。您可以通过使用帐户名称和相应的 CHAP 凭据或通过卷访问组来访问分配给帐户的卷。一个账户最多可以分配两千卷，但一卷只能属于一个账户。</block>
  <block id="eaf4b71058f7db58997dfe694c62a96a" category="section-title">创建 QoS 策略</block>
  <block id="fd640dfd679c3a7e40aa99c3e08c8294" category="paragraph">如果您想要创建并保存可应用于多个卷的标准化服务质量设置，请使用SolidFire服务质量 (QoS) 策略。</block>
  <block id="41be5238fc563c2aac0a0e6ee4cf6e96" category="paragraph">您可以按卷设置 QoS 参数。通过设置定义 QoS 的三个可配置参数，可以保证每个卷的性能：最小 IOPS、最大 IOPS 和突发 IOPS。</block>
  <block id="48e4bd34fd7a9e1233ea82bc818a3161" category="paragraph">以下是 4Kb 块大小的可能最小、最大和突发 IOPS 值。</block>
  <block id="8e4988a1e5f387efce6f20e4f25a8e40" category="cell">IOPS 参数</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="96a22bf638896c990d26e043087fb6b0" category="cell">最小值</block>
  <block id="c9fb55be94277b8390352c215f32d44c" category="cell">最大值（4Kb）</block>
  <block id="b05f9ccd772b396ac1f5a05345a9d4f8" category="paragraph">最小 IOPS</block>
  <block id="2b30c179facf62f8a2bdbd1b09b37b96" category="paragraph">保证一定容量的性能水平。</block>
  <block id="c0c7c76d30bd3dcaefc96f40275bdc0a" category="cell">50</block>
  <block id="3f74a886c7f841699690962c497d4f30" category="paragraph">15000</block>
  <block id="4f5a6f8b41826526724ba294b8e056bd" category="paragraph">最大 IOPS</block>
  <block id="4e41c5ccaf1affa697729ea4d1e88554" category="paragraph">性能不会超过此限制。</block>
  <block id="e05695d29cb4a9339534e5a9c273fa14" category="paragraph">200,000</block>
  <block id="affd4aba1c5f696e972368c9eb698c65" category="paragraph">突发 IOPS</block>
  <block id="2734923c054f38d8ca66133414af4469" category="paragraph">短时突发场景下允许的最大IOPS。</block>
  <block id="e2eb05f1ef7720127ac371ceddc6f433" category="admonition">尽管最大 IOPS 和突发 IOPS 可以设置为高达 200,000，但卷的实际最大性能受集群使用情况和每个节点性能的限制。</block>
  <block id="fa9b1a3006e0ba9ad904c059c0b9add6" category="inline-link">SolidFire服务质量</block>
  <block id="acd73d692aa90cacfe480ba8ba39cd5d" category="paragraph">数据块大小和带宽对 IOPS 数量有直接影响。随着数据块大小的增加，系统会将带宽增加到足以处理更大数据块大小的水平。随着带宽的增加，系统能够达到的IOPS数量会减少。请参阅<block ref="c8976c50ed9f016849fdce232777cd31" category="inline-link-rx"></block>有关服务质量和性能的更多信息。</block>
  <block id="b4657825f74ed622384dddf3a1d7d3b7" category="section-title">SolidFire身份验证</block>
  <block id="9d3b5ff1cde828a63203f0465a34a967" category="paragraph">Element 支持两种身份验证方法：CHAP 和卷访问组 (VAG)。 CHAP 使用 CHAP 协议对主机进行后端身份验证。卷访问组控制对其所配置卷的访问。  NetApp建议使用 CHAP 进行身份验证，因为它更简单且没有扩展限制。</block>
  <block id="fc9e812321a3f9b0eab1b702a08bab4e" category="admonition">带有增强型 CSI 配置器的Trident支持使用 CHAP 身份验证。  VAG 只能在传统的非 CSI 模式下使用。</block>
  <block id="d23eaa75b7bd1405526da0e18b7290ac" category="paragraph">CHAP 身份验证（验证发起者是否为预期的卷用户）仅在基于帐户的访问控制中受支持。如果您使用 CHAP 进行身份验证，则有两种选择：单向 CHAP 和双向 CHAP。单向 CHAP 通过使用SolidFire帐户名和发起方密钥来验证卷访问。双向 CHAP 选项提供了最安全的卷身份验证方式，因为卷通过帐户名和发起方密钥验证主机身份，然后主机通过帐户名和目标密钥验证卷身份。</block>
  <block id="42d135bea104c1079cebd1543c89e970" category="paragraph">但是，如果无法启用 CHAP 并且需要 VAG，则创建访问组并将主机启动器和卷添加到访问组。添加到访问组的每个 IQN 都可以使用或不使用 CHAP 身份验证来访问组中的每个卷。如果 iSCSI 发起程序配置为使用 CHAP 身份验证，则使用基于帐户的访问控制。如果 iSCSI 发起程序未配置为使用 CHAP 身份验证，则使用卷访问组访问控制。</block>
  <block id="b4931a42b69dbf4e721e7b97873b1ebb" category="section-title">哪里可以找到更多信息？</block>
  <block id="2c3a4d5c923121574c10ea22c0474a01" category="inline-link">NetApp库</block>
  <block id="65840df7365892d2abe1280cb6cdb1d2" category="paragraph">下面列出了一些最佳实践文档。搜索<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block>适用于最新版本。</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="paragraph">ONTAP</block>
  <block id="f9dd52d280693dc59e53b6e1fb7bd801" category="inline-link">NFS 最佳实践和实施指南</block>
  <block id="190dbae19c88b1e68bf03f7783c5d5d1" category="list-text"><block ref="190dbae19c88b1e68bf03f7783c5d5d1" category="inline-link-rx"></block></block>
  <block id="fe7898282075be6913421f0b11f5c0e1" category="inline-link">SAN 管理</block>
  <block id="cd2793aaeed5e7f0429f516ecf5eb130" category="list-text"><block ref="8a4b824281db82475bec9857f32bde41" category="inline-link-rx"></block>（适用于 iSCSI）</block>
  <block id="5ca34d6ffc2a555b689542e3fbeeb7af" category="inline-link">RHEL 的 iSCSI Express 配置</block>
  <block id="36588ac65dcdb9b93916fb0ab708edb3" category="list-text"><block ref="36588ac65dcdb9b93916fb0ab708edb3" category="inline-link-rx"></block></block>
  <block id="ca7ab5ec4cba84fbef55956bb38759ce" category="paragraph">*Element软件*</block>
  <block id="e809d9f88c2933195c4d2ab379c1b5dc" category="inline-link">配置适用于 Linux 的SolidFire</block>
  <block id="ce0470e08aa854a8f93fa119434e8422" category="list-text"><block ref="ce0470e08aa854a8f93fa119434e8422" category="inline-link-rx"></block></block>
  <block id="d64280eb12d42bb67976ffba6d268e7b" category="paragraph">NetApp HCI</block>
  <block id="3bc72bedcc42d144356d4f933c48485d" category="inline-link">NetApp HCI部署先决条件</block>
  <block id="85bfffc1a1f7aaabd6cf58841640c308" category="list-text"><block ref="85bfffc1a1f7aaabd6cf58841640c308" category="inline-link-rx"></block></block>
  <block id="b52e411998b7d3a95ad5bd8a320bf271" category="inline-link">访问NetApp部署引擎</block>
  <block id="9d0da73b02655dd7861121905db229e2" category="list-text"><block ref="9d0da73b02655dd7861121905db229e2" category="inline-link-rx"></block></block>
  <block id="9aaca8cfd79770bc4944ccc477e37141" category="paragraph">*应用最佳实践信息*</block>
  <block id="27a5e02bc2fadee43ace94805739a0c8" category="inline-link">ONTAP上 MySQL 的最佳实践</block>
  <block id="430c6bcb8516befc45fb8173b0ca4e1f" category="list-text"><block ref="430c6bcb8516befc45fb8173b0ca4e1f" category="inline-link-rx"></block></block>
  <block id="17efdd7d210511985714be299d595292" category="inline-link">SolidFire上 MySQL 的最佳实践</block>
  <block id="d03b53d8ec563c37e16ee8c900a75b96" category="list-text"><block ref="d03b53d8ec563c37e16ee8c900a75b96" category="inline-link-rx"></block></block>
  <block id="3aefe1a041af945f1fe8673bf775057b" category="inline-link">NetApp SolidFire和 Cassandra</block>
  <block id="d7d36869f2f4aa1eb99a10008e153f20" category="list-text"><block ref="d7d36869f2f4aa1eb99a10008e153f20" category="inline-link-rx"></block></block>
  <block id="6e580111d3a8c12cdcd9522a4d3484c6" category="inline-link">Oracle 在SolidFire的最佳实践</block>
  <block id="f8b52d963f246a75dc6c8b78c954a4fd" category="list-text"><block ref="f8b52d963f246a75dc6c8b78c954a4fd" category="inline-link-rx"></block></block>
  <block id="6448cf37496207be126495e5b05851de" category="inline-link">SolidFire上的PostgreSQL最佳实践</block>
  <block id="b6780b7b2561935ff862fe7126cde751" category="list-text"><block ref="b6780b7b2561935ff862fe7126cde751" category="inline-link-rx"></block></block>
  <block id="b062996d6ca590abe798d3db75561f79" category="paragraph">并非所有应用程序都有具体的指导原则，因此与您的NetApp团队合作并使用以下方法至关重要：<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block>查找最新文档。</block>
  <block id="5ee08ab883e000ce6b739dbb0b6ff376" category="summary">了解更多关于 Kubernetes 系统组成部分的信息。</block>
  <block id="607ae6360b32f1bd6e559e915d414fab" category="doc">Kubernetes 概念</block>
  <block id="d60f0fff1c23a02458849862f593357e" category="inline-link">Kubernetes系统</block>
  <block id="a7018a5fd7b610274c7786aa5402e64d" category="paragraph">了解更多关于各个部分的信息<block ref="f01a74527fa0343e793eb393c9d4809a" category="inline-link-rx"></block>。</block>
  <block id="04333ff788951193122a833ecd614950" category="summary">有几个资源对象决定了 Kubernetes 与Trident、 Trident与存储以及 Kubernetes 与存储之间的关系。其中一些对象通过 Kubernetes 进行管理，另一些对象通过Trident进行管理。</block>
  <block id="da1e63dd673a1932cebb48b6a81bbbb1" category="doc">Kubernetes 和Trident对象</block>
  <block id="d107eefb0ce66911b186b03b9e9c337e" category="paragraph">您可以使用 REST API 通过读取和写入资源对象与 Kubernetes 和Trident进行交互。有几个资源对象决定了 Kubernetes 与Trident、 Trident与存储以及 Kubernetes 与存储之间的关系。其中一些对象通过 Kubernetes 进行管理，另一些对象通过Trident进行管理。</block>
  <block id="62499e0de79c4d07c7915a36f9faa0d8" category="section-title">这些物体之间是如何相互作用的？</block>
  <block id="b9ea565816618011ca591fc191fe5e63" category="paragraph">要了解这些对象、它们的用途以及它们如何交互，最简单的方法或许是跟踪 Kubernetes 用户发出的单个存储请求：</block>
  <block id="ec7d6500a82a56ee8f5fff02eafa7af7" category="list-text">用户创建<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>请求一个新的<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>来自 Kubernetes 的特定大小<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>这是管理员之前配置好的。</block>
  <block id="6b25cc026b6f29464d3fce0f6ec67805" category="list-text">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>将其配置器标识为Trident ，并包含告诉Trident如何为请求的类配置卷的参数。</block>
  <block id="5b078d6b19593ee6c55f428e2c85faa7" category="list-text">Trident审视自身<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>名称相同，用于标识匹配项<block ref="b81146e6af95bf6e22cf57459890216f" prefix=" " category="inline-code"></block>和<block ref="a410a2a085f482e6dc04e225e54ee323" prefix=" " category="inline-code"></block>它可以用来为该类配置卷。</block>
  <block id="ff099186f912c7abb21bcf68690c98d7" category="list-text">Trident在匹配的后端配置存储并创建两个对象：a<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>在 Kubernetes 中，它告诉 Kubernetes 如何查找、挂载和处理卷；在Trident中，它维护着两者之间的关系。<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>以及实际存储。</block>
  <block id="6d2ae40bc02e88464563ae42ae22d54c" category="list-text">Kubernetes 绑定了<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>新的<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>。包含以下部件的舱体<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>将该持久卷挂载到它运行的任何主机上。</block>
  <block id="490c1b0e3a604c81abb3db1b778ec07b" category="list-text">用户创建<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>利用现有的PVC管材，<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>这表明Trident存在问题。</block>
  <block id="9f4e11d34d158ebd365226367c8b15d9" category="list-text">Trident识别与 PVC 关联的卷，并在其后端创建该卷的快照。它还创造了一个<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>指示 Kubernetes 如何识别快照。</block>
  <block id="c6a606bdd6882cd42de13f2ba3614285" category="list-text">用户可以创建<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>使用<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>作为来源。</block>
  <block id="8ecb92f33c033b00fcf3c18e59c4b177" category="list-text">Trident会识别所需的快照，并执行与创建快照相同的步骤。<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>和<block ref="bd7a9717d29c5ddcab1bc175eda1e298" prefix=" " category="inline-code"></block>。</block>
  <block id="428895404a5e57e01a138a5df672d0fc" category="inline-link">持久卷</block>
  <block id="173423532ed9a565a05f32db2c8f8172" category="admonition">如需进一步了解 Kubernetes 对象，我们强烈建议您阅读以下内容：<block ref="92dc8ed82beb7484ab6097a3e91b0deb" category="inline-link-rx"></block> Kubernetes 文档的这一部分。</block>
  <block id="c4e2f712f33e39883cdadc27311ff798" category="section-title">Kubernetes<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>对象</block>
  <block id="794a32773794ee6c545794c065d1a88b" category="paragraph">Kubernetes<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block> object 是 Kubernetes 集群用户发出的存储请求。</block>
  <block id="43cf8e1465c61efc8b1b9bf71aa9931c" category="paragraph">除了标准规范之外， Trident还允许用户指定以下卷特定的注释，以便覆盖您在后端配置中设置的默认值：</block>
  <block id="1527fede1d561a899313c8cb3eb1e7bf" category="cell">卷选项</block>
  <block id="db8a0bbeae97b94338c1b7a61e2a1ec3" category="cell">支持的驱动程序</block>
  <block id="f3780100617165ed98557e3a6d2be72d" category="cell">trident.netapp.io/fileSystem</block>
  <block id="44d4d4eb1f08d8eb29766160086f61dd" category="cell">文件系统</block>
  <block id="19ab49765cdd2c8ab592eb40eeff08cf" category="cell">ontap-san、solidfire-san、ontap-san-economy</block>
  <block id="979f70bf9da982ee97ac075df4f048c3" category="cell">trident.netapp.io/cloneFromPVC</block>
  <block id="b4ead50a5ca4f307f7d61da7763ad204" category="cell">克隆源卷</block>
  <block id="cca7544fa2044ea81b43c1e0896bf58e" category="cell">ontap-nas、ontap-san、solidfire-san、azure-netapp-files、gcp-cvs、ontap-san-economy</block>
  <block id="46ec89aa5290ead7b514dd5182caa0a7" category="cell">trident.netapp.io/splitOnClone</block>
  <block id="58c1c86186ef8de4f6e12d8f3aed8b64" category="cell">splitOnClone</block>
  <block id="80f05e749a4f524e8c8a05fa19d5df0e" category="cell">ontap-nas，ontap-san</block>
  <block id="d6f010e4b4bf9748dcaa34feb70188ce" category="cell">trident.netapp.io/protocol</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="cell">protocol</block>
  <block id="100b8cad7cf2a56f6df78f171f97a1ec" category="cell">任何</block>
  <block id="e9898504ff0569325d48acaee7e9ced9" category="cell">trident.netapp.io/exportPolicy</block>
  <block id="647ce4e5394e2e595e46b4fc50a628e9" category="cell">出口政策</block>
  <block id="61396290e72fa7d707996351c8815bd6" category="cell">ontap-nas、ontap-nas-economy、ontap-nas-flexgroup</block>
  <block id="2902d12b1fe6d9ef5bd1a3474f2356e9" category="cell">trident.netapp.io/snapshotPolicy</block>
  <block id="0a236e7685e50a59df980d0a30929d6c" category="cell">快照策略</block>
  <block id="7f3bf2672240703dc69740ce11443cf2" category="cell">ontap-nas、ontap-nas-economy、ontap-nas-flexgroup、ontap-san</block>
  <block id="6224177007fc13e9e0d3789985ed165a" category="cell">trident.netapp.io/snapshotReserve</block>
  <block id="bb0d75280f9b683f2f1f0767fd0aff9b" category="cell">快照储备</block>
  <block id="870594bba77423ccae9ad70861e02951" category="cell">ontap-nas、ontap-nas-flexgroup、ontap-san、gcp-cvs</block>
  <block id="1cb43054bed661d8c8457ddbb43e1b1b" category="cell">trident.netapp.io/snapshotDirectory</block>
  <block id="1ae33c448502ac3d326593aee304c21f" category="cell">快照目录</block>
  <block id="ec1739ebad429a70f25efc292c347f8e" category="cell">trident.netapp.io/unixPermissions</block>
  <block id="c005e78d4bd808038335c32dd84cf7da" category="cell">unix权限</block>
  <block id="69d900d222446aab8591b45a7363c9e7" category="cell">trident.netapp.io/blockSize</block>
  <block id="480d1b61a0432d1319f7504a3d7318dd" category="cell">块大小</block>
  <block id="c0d2a793e71b152662b3e8cd2da00620" category="cell">solidfire-san</block>
  <block id="fc5f8320f80474f09bdd1e3c3849123e" category="paragraph">如果创建的PV具有<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>根据回收策略，当 PV 被释放时（即用户删除 PVC 时）， Trident会同时删除 PV 和支持卷。如果删除操作失败， Trident会将 PV 标记为失败，并定期重试该操作，直到操作成功或手动删除 PV 为止。如果光伏发电使用<block ref="8d6d1e80894475845ded00dcd1f8cc41" prefix=" " category="inline-code"></block>策略方面， Trident会忽略它，并假定管理员会从 Kubernetes 和后端清理它，从而允许在删除卷之前对其进行备份或检查。请注意，删除 PV 不会导致Trident删除备份卷。您应该使用 REST API 将其删除。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="(" category="inline-code"></block> ）。</block>
  <block id="5dad99bb31feaed11fecbe29cf682e51" category="paragraph">Trident支持使用 CSI 规范创建卷快照：您可以创建卷快照并将其用作数据源来克隆现有的 PVC。这样，就可以将 PV 的特定时间点副本以快照的形式暴露给 Kubernetes。然后可以使用这些快照创建新的PV。看看<block ref="e9de36458dcd95988ba2d0b4f6d8ee2f" prefix=" " category="inline-code"></block>看看这种方法是否可行。</block>
  <block id="a03c5f2c1a3d118d44bc3e92d52663bb" category="paragraph">Trident还提供<block ref="77167d63af133b47bca3bbacd580fa44" prefix=" " category="inline-code"></block>和<block ref="58c1c86186ef8de4f6e12d8f3aed8b64" prefix=" " category="inline-code"></block>用于创建克隆的注释。您可以使用这些注解来克隆 PVC，而无需使用 CSI 实现。</block>
  <block id="96e0288ecc3c91f97de46420e70a4f8f" category="paragraph">例如：如果用户已经有一个名为 PVC 的<block ref="81c3b080dad537de7e10e0987a4bf52e" prefix=" " category="inline-code"></block>用户可以创建一个名为“新PVC”的<block ref="f68f5a5c173ec94fcc1da047d933d613" prefix=" " category="inline-code"></block>通过使用注释，例如<block ref="dd145212234939588777c41b78a948b2" prefix=" " category="inline-code"></block>。有了这组注释， Trident会克隆与 mysql PVC 对应的卷，而不是从头开始配置卷。</block>
  <block id="ff0fa770e22db25a156c5e2d7f017283" category="paragraph">请考虑以下几点：</block>
  <block id="23db1fababbb1ae99bf5bf19e6f6f47b" category="list-text">NetApp建议克隆空闲卷。</block>
  <block id="f89d76e06e88814705882a1faad838fb" category="list-text">PVC 及其克隆应该位于同一个 Kubernetes 命名空间中，并且具有相同的存储类。</block>
  <block id="f769a6b54b1d1476b6628ebd1c4b98c4" category="list-text">随着<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>对于驱动程序来说，设置 PVC 注释可能是有益的。<block ref="46ec89aa5290ead7b514dd5182caa0a7" prefix=" " category="inline-code"></block>与<block ref="979f70bf9da982ee97ac075df4f048c3" prefix=" " category="inline-code"></block>。和<block ref="46ec89aa5290ead7b514dd5182caa0a7" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident将克隆卷与父卷分离，从而将克隆卷的生命周期与其父卷完全解耦，但代价是损失了一些存储效率。未设置<block ref="46ec89aa5290ead7b514dd5182caa0a7" prefix=" " category="inline-code"></block>或者将其设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>这样做可以减少后端空间占用，但代价是在父卷和克隆卷之间创建依赖关系，使得除非先删除克隆卷，否则无法删除父卷。在克隆空数据库卷时，拆分克隆是有意义的，因为预计该卷及其克隆卷将有很大的不同，并且无法从ONTAP提供的存储效率中受益。</block>
  <block id="5f117d85f5b23527c781bb26a4b15109" category="paragraph">这<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block>目录包含可用于Trident的 PVC 定义示例。请参阅<block ref="62155edb2842dfbdb69802620baa3865" category="inline-xref-macro-rx"></block>有关Trident音量相关参数和设置的完整说明。</block>
  <block id="40f23ed795a1a88d4da7ac2ef847ff7f" category="section-title">Kubernetes<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>对象</block>
  <block id="6cb5412cc2fe8210c4d14d6d6b08ab79" category="paragraph">Kubernetes<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>该对象代表一块可供 Kubernetes 集群使用的存储空间。它的生命周期与使用它的舱体无关。</block>
  <block id="292289b7334983e53d9fb9bd00d30820" category="admonition">Trident创造<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>根据其配置的卷，自动将对象注册到 Kubernetes 集群。您无需自行管理它们。</block>
  <block id="443f09ca4d0d1cc13b5baa064b90c0b7" category="paragraph">当您创建 PVC 时，指的是基于 Trident 的<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>Trident使用相应的存储类配置一个新卷，并为该卷注册一个新的 PV。在配置已配置卷和相应的 PV 时， Trident遵循以下规则：</block>
  <block id="b27c91fe87605abbb0d5240430518a1c" category="list-text">Trident会为 Kubernetes 生成一个 PV 名称，以及一个用于配置存储的内部名称。无论哪种情况，名称在其范围内都是独一无二的，这一点都令人放心。</block>
  <block id="9c2f88a5c4297bd88ead0cd6314fe886" category="list-text">容量大小与 PVC 中要求的容量大小尽可能接近，但可能会向上取整到最接近的可分配数量，具体取决于平台。</block>
  <block id="7df5b64daec466033329296995f05735" category="section-title">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>对象</block>
  <block id="0d35625a483152791f4e2d0b751a09cc" category="paragraph">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>对象通过名称指定。<block ref="455385b545189aa1f74511b5dc40d1eb" prefix=" " category="inline-code"></block>为存储配置一组属性。存储类本身标识要使用的配置器，并以配置器能够理解的方式定义该组属性。</block>
  <block id="f7738d717849274e5992d460fd2c0a75" category="paragraph">它是管理员需要创建和管理的两个基本对象之一。另一个是Trident后端对象。</block>
  <block id="e51377a773f4713e536b061eaa2d4b04" category="paragraph">Kubernetes<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>使用Trident的对象看起来像这样：</block>
  <block id="39edc8618b50008d4cb2050414d6921f" category="paragraph">这些参数是 Trident 特有的，用于告诉Trident如何为该类配置卷。</block>
  <block id="b16da8ed7f6c8cce3011dc2b6c7bd1a4" category="paragraph">存储类参数如下：</block>
  <block id="f2bbdf9f72c085adc4d0404e370f0f4c" category="cell">属性</block>
  <block id="b651efdb98a5d6bd2b3935d0c3f4a5e2" category="cell">必填项</block>
  <block id="736b91750e516139acc13c5eb6564f92" category="cell">属性</block>
  <block id="59a1e7292a0114529fb1b3401b37bc28" category="cell">映射[字符串]字符串</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">不可以</block>
  <block id="1b40216e6fe613bd013bf8710182e650" category="cell">请参阅以下属性部分。</block>
  <block id="c614017642b6cfd9e6a25c7df122d917" category="cell">存储池</block>
  <block id="b8f32852327d2ffce86ae3ead4fdfb52" category="cell">map[string]StringList</block>
  <block id="bdd0ddb870ed9de6f6e7d3a75200e9f7" category="cell">后端名称到存储池列表的映射</block>
  <block id="145d1b89a9f9ed8bdc16d1f7a814cace" category="cell">附加存储池</block>
  <block id="6907a73ad9068ddf5f99d022102220bb" category="cell">后端名称到存储池列表的映射</block>
  <block id="7df974d787ead594df017a11672f2f0e" category="cell">排除存储池</block>
  <block id="99ba77776c83983f5ecbd2b51f2b43ef" category="cell">后端名称到存储池列表的映射</block>
  <block id="f74d4b2b456fb453c0980710290f66eb" category="paragraph">存储属性及其可能的值可以分为存储池选择属性和 Kubernetes 属性。</block>
  <block id="2fdf10f3f64b631cd3a137740de02f8b" category="section-title">存储池选择属性</block>
  <block id="1f5912cd581dba393d5eecc43059adf4" category="paragraph">这些参数决定了应使用哪些 Trident 管理的存储池来配置给定类型的卷。</block>
  <block id="c82a6100dace2b41087ba6cf99a5976a" category="cell">价值观</block>
  <block id="6bb24468956384c482a8b5a901fb6383" category="cell">提供</block>
  <block id="15c2d85f1fae22a3c3a0594510a1f611" category="cell">要求</block>
  <block id="7aa57840938d59b415c1e10dcd1f7173" category="cell">由……支持</block>
  <block id="0e72be2e13bf8a2ff8078d3435e5aa7c" category="cell">媒体^1^</block>
  <block id="9ccd7f94313a98beb95801927907a0ab" category="cell">机械硬盘、混合硬盘、固态硬盘</block>
  <block id="9bf3032f6854fb376cd8e3e92e11b077" category="cell">Pool 包含此类媒体；混合型媒体是指两者兼具。</block>
  <block id="5c79c761bae4c27e96c04e54d1da1e91" category="cell">指定的媒体类型</block>
  <block id="c9cb5e737e2746339fd0b462332c8740" category="cell">ontap-nas、ontap-nas-economy、ontap-nas-flexgroup、ontap-san、solidfire-san</block>
  <block id="b713baf75bcf13859037b5274d27d4b8" category="cell">供应类型</block>
  <block id="6026fbd9abd05590949de220154e3262" category="cell">薄的，厚的</block>
  <block id="3064025fe3541bec9942e14fcaedfab7" category="cell">池支持这种配置方法</block>
  <block id="cf65591e3da90317fc132ea7464105d8" category="cell">指定的配置方法</block>
  <block id="054b5072368dea4f8748909c16c7de98" category="cell">厚：全部 ontap；薄：全部 ontap 和 solidfire-san</block>
  <block id="55b56fb238360663afa6230ad82e74a0" category="cell">后端类型</block>
  <block id="dbdc06f8742b98dcacdf7fdb1af111ea" category="paragraph">ontap-nas、ontap-nas-economy、ontap-nas-flexgroup、ontap-san、solidfire-san、gcp-cvs、azure-netapp-files、ontap-san-economy</block>
  <block id="0e1201d4d96df2d9d03c9c66b90874a1" category="cell">池属于这种类型的后端</block>
  <block id="c4efe19137f43450149d48fddbab6c28" category="cell">指定的后端</block>
  <block id="a04622349b3ede0d4176ca2c2e161763" category="cell">所有司机</block>
  <block id="695633290d050f31cec0c9d4bd4a57fe" category="cell">snapshots</block>
  <block id="c506ff134babdd6e68ab3e6350e95305" category="cell">布尔值</block>
  <block id="ac1ffb15effdc77a86029972670d022f" category="cell">真，假</block>
  <block id="4ac43bef181074fbd4a1f3620b46f77f" category="cell">存储池支持带快照的卷</block>
  <block id="13410bff9f7871113a6af273e2a1b97f" category="cell">已启用快照的卷</block>
  <block id="33dece0bdda0f88a645c739f3714c038" category="cell">ontap-nas、ontap-san、solidfire-san、gcp-cvs</block>
  <block id="bc3832c405ec6cb9c831849328240f3b" category="cell">个克隆</block>
  <block id="609d32aa243917905f282544b543752a" category="cell">存储池支持卷克隆</block>
  <block id="bcb81802de31cf9c717de3c1d6c2f610" category="cell">已启用克隆的卷</block>
  <block id="5bdf74912a51c34815f11e9a3d20b609" category="cell">加密</block>
  <block id="5f2f2cc138a8bc7067c7f61ab4db0f4d" category="cell">存储池支持加密卷</block>
  <block id="0bda31a93b84fd2b45a90df39c4c8049" category="cell">已启用加密的卷</block>
  <block id="dcc09b4a72e31323b652676ce4677771" category="cell">ontap-nas、ontap-nas-economy、ontap-nas-flexgroups、ontap-san</block>
  <block id="79073619fba8242703524f16870ff858" category="cell">IOPS</block>
  <block id="fa7153f7ed1cb6c0fcf2ffb2fac21748" category="cell">整数</block>
  <block id="86e5d65893929e5d38b4bdcb9fb48ecd" category="cell">正整数</block>
  <block id="bf57d1db8292b2855fa998a86562cfa7" category="cell">Pool 能够保证在此范围内的 IOPS</block>
  <block id="342a7ce5bb7debc6ba84dc2a3bced587" category="cell">容量保证了这些IOPS</block>
  <block id="895f3d78c77292d9761bdabdc3cf0c99" category="paragraph">^1^： ONTAP Select系统不支持此系统</block>
  <block id="5b3c68bde0b3658758a8ebf47ec6abf1" category="paragraph">在大多数情况下，所请求的值会直接影响配置；例如，请求厚配置会导致厚配置卷的生成。但是，Element 存储池使用其提供的最小和最大 IOPS 来设置 QoS 值，而不是使用请求的值。在这种情况下，请求的值仅用于选择存储池。</block>
  <block id="311fa7e17587a62a6fdcb110253feed7" category="paragraph">理想情况下，你可以使用<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block>单独建模，以满足特定类别的需求所需的存储质量。  Trident会自动发现并选择符合所有条件的存储池<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block>您指定的。</block>
  <block id="d0c865b74e0c4b4b387506e9e95d22b2" category="paragraph">如果您发现自己无法使用<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block>要自动为课程选择合适的池子，您可以使用<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>和<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>参数用于进一步细化池子，甚至选择一组特定的池子。</block>
  <block id="06a87a25fa98442cf561762851213f7e" category="paragraph">您可以使用<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>参数用于进一步限制与任何指定参数匹配的池集合。<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block> 。换句话说， Trident使用了由以下方式识别的池的交集：<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block>和<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>配置参数。您可以单独使用其中一个参数，也可以同时使用两个参数。</block>
  <block id="0c66a737e57eb6ac0885d2ba6d87cc12" category="paragraph">您可以使用<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>此参数用于扩展Trident用于配置的池集，而不管 Trident 选择的任何池。<block ref="736b91750e516139acc13c5eb6564f92" prefix=" " category="inline-code"></block>和<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>参数。</block>
  <block id="2ed95c63c6e58641d710e098e7e23154" category="paragraph">您可以使用<block ref="7df974d787ead594df017a11672f2f0e" prefix=" " category="inline-code"></block>用于筛选Trident用于资源配置的池集合的参数。使用此参数会移除所有匹配的池。</block>
  <block id="9f8bfd75f7eb5b95503bb0abedf83b40" category="paragraph">在<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>和<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>参数，每个条目都采用以下形式<block ref="54b40b3e6f1384da4e4c920869e31d56" prefix=" " category="inline-code"></block>， 在哪里<block ref="f6beb3e72ef13817e534adfcb53abf8d" prefix=" " category="inline-code"></block>是指定后端存储池的逗号分隔列表。例如，一个值<block ref="145d1b89a9f9ed8bdc16d1f7a814cace" prefix=" " category="inline-code"></block>可能看起来像<block ref="f4f4f3be41d583caff484e84868faa12" prefix=" " category="inline-code"></block>。这些列表接受后端值和列表值的正则表达式值。您可以使用<block ref="de7f24c692bef12dc6db5ad320f2f284" prefix=" " category="inline-code"></block>获取后端及其连接池的列表。</block>
  <block id="c087dddd46fcf0fbbf390abeff2216c3" category="section-title">Kubernetes属性</block>
  <block id="d05956159ee82aafaaacfe08d33d3be6" category="paragraph">这些属性对Trident在动态配置期间选择存储池/后端没有任何影响。相反，这些属性只是提供 Kubernetes 持久卷支持的参数。工作节点负责文件系统创建操作，可能需要文件系统实用程序，例如 xfsprogs。</block>
  <block id="0e6ac0d7fca9c59e6545312a071555b6" category="cell">相关驱动因素</block>
  <block id="ae6b2a160dd2fafdee385c348edee0c1" category="cell">Kubernetes 版本</block>
  <block id="7cfbb6f07899c8071ff38e69dca190e2" category="cell">文件系统类型</block>
  <block id="010e61d0b40eeb84b96a1321e8f0bab7" category="cell">ext4、ext3、xfs</block>
  <block id="7928a56d4874d982a06a59e3f30f6935" category="cell">块卷的文件系统类型</block>
  <block id="f888aa18c19e41f8c1263fa99ca8b94c" category="cell">solidfire-san、ontap-nas、ontap-nas-economy、ontap-nas-flexgroup、ontap-san、ontap-san-economy</block>
  <block id="b1c94ca2fbc3e78fc30069c8d0f01680" category="cell">全部</block>
  <block id="6add71a247c8f4513060920be14857bc" category="cell">允许卷扩展</block>
  <block id="675e3f37a9adfd7ab6433906c490fa06" category="cell">启用或禁用对增大PVC尺寸的支持</block>
  <block id="2e647c10640a301eccdc45d7ad72507d" category="cell">ontap-nas、ontap-nas-economy、ontap-nas-flexgroup、ontap-san、ontap-san-economy、solidfire-san、gcp-cvs、azure-netapp-files</block>
  <block id="c791531450eeeb073b30215d9c306a00" category="cell">1.11+</block>
  <block id="086b513e7d83c4cf32a8bd3550679276" category="cell">容量绑定模式</block>
  <block id="fd656a4f359aa12808a6d0ceb5792342" category="cell">立即，等待首位消费者</block>
  <block id="5e7777e1f9cfa3a93159ee44cf3f1f5a" category="cell">选择何时进行卷绑定和动态配置</block>
  <block id="741970ef3d523752ab543427956bb1b8" category="cell">1.19 - 1.26</block>
  <block id="8264769021597389583b0a7d1fa7e076" category="inline-link-macro">Kubernetes：为 Pod 或容器配置安全上下文</block>
  <block id="9ec97307849e95766ab72c5a34828c08" category="list-text">这<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>该参数用于控制 SAN LUN 所需的文件系统类型。此外，Kubernetes 还利用了以下信息：<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>在存储类中表示文件系统存在。可以通过以下方式控制卷所有权：<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>仅当<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>已设置。请参阅<block ref="7940a62969e5aeae7f6e32b04e7a11e3" category="inline-link-macro-rx"></block>有关如何使用设置卷所有权的概述<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>语境。  Kubernetes 将应用<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>仅当满足以下条件时才有值：</block>
  <block id="6dd29ca7439e52dcf2fbc569066b3d67" category="list-text"><block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix="" category="inline-code"></block>设置在存储类中。</block>
  <block id="45d2174daba36b76955e69d2eddf26ca" category="list-text">PVC接入方式为RWO。</block>
  <block id="ba5b62efad4f90a8f4bb806cba4a3ea4" category="paragraph">对于 NFS 存储驱动程序，文件系统已作为 NFS 导出的一部分存在。为了使用<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>存储类仍然需要指定一个<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>您可以将其设置为<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>或任何非空值。</block>
  <block id="c2b0df577877e25491f6e1ed397c87df" category="list-text">请参阅<block ref="7c28a1514d14039d3824999236c4890d" category="inline-link-macro-rx"></block>有关扩容的更多详情。</block>
  <block id="2435c5eb0d842c13f635d4b1d6667a52" category="list-text">Trident安装程序包提供了几个示例存储类定义，可供Trident使用。<block ref="532e65fde9b7cd84dd9a7a9be1e1ddbb" prefix="" category="inline-code"></block> 。删除 Kubernetes 存储类会导致相应的Trident存储类也被删除。</block>
  <block id="db36743614e87531d560fe8ae0bc6c7d" category="section-title">Kubernetes<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>对象</block>
  <block id="65d18b5db5d5f35e4ddc5c696687d1bd" category="paragraph">Kubernetes<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>物体类似于<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>。它们有助于定义多种存储类别，并被卷快照引用，以将快照与所需的快照类别关联起来。每个卷快照都与一个卷快照类相关联。</block>
  <block id="031e09713b698739db52cb150ef97605" category="paragraph">一个<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>应由管理员定义以创建快照。创建卷快照类时，定义如下：</block>
  <block id="879cd061c6bf448cd6fc39dd56947611" category="paragraph">这<block ref="e2d45d57c7e2941b65c6ccd64af4223e" prefix=" " category="inline-code"></block>向 Kubernetes 指定请求卷快照的<block ref="6c7238e4718cba62616087e70f5e30ec" prefix=" " category="inline-code"></block>类由Trident处理。这<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>指定必须删除快照时要执行的操作。什么时候<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>当删除快照时，存储集群上的卷快照对象以及底层快照也会被删除。或者，将其设置为<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>意味着<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>并保留物理快照。</block>
  <block id="63f2f0978770be469911c5f1722d82ca" category="section-title">Kubernetes<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>对象</block>
  <block id="7ba558df52a052235cf288011e5d667c" category="paragraph">Kubernetes<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block> object 是创建卷快照的请求。  PVC 代表用户对卷的请求，卷快照则是用户对现有 PVC 创建快照的请求。</block>
  <block id="f67af493d1fd83b472d5f27307b2f3d9" category="paragraph">当收到卷快照请求时， Trident会自动在后端创建卷快照，并通过创建唯一标识符来公开该快照。<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>目的。您可以从现有的 PVC 创建快照，并在创建新的 PVC 时将这些快照用作数据源。</block>
  <block id="0f3fb6e27b9de1539a220130039ade03" category="admonition">VolumeSnapshot 的生命周期与源 PVC 无关：即使源 PVC 被删除，快照仍然会存在。删除具有关联快照的 PVC 时， Trident会将此 PVC 的后备卷标记为“正在删除”状态，但不会将其完全删除。当所有关联的快照都被删除后，该卷也会被移除。</block>
  <block id="1ca312948dba5b1321da24bc362f4148" category="section-title">Kubernetes<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象</block>
  <block id="e562bdcf97dce6973a736651f45eb054" category="paragraph">Kubernetes<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>该对象表示从已配置的卷中获取的快照。它类似于<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>表示存储集群上已配置的快照。类似于<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>和<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>当创建快照时，对象会……<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象与……保持一对一的映射关系<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>该对象请求创建快照。</block>
  <block id="af741aec1c66e51c00d35a38f92471de" category="paragraph">这<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象包含唯一标识快照的详细信息，例如：<block ref="39133e4ee9648ecb1a2dae934a22788a" prefix=" " category="inline-code"></block> 。这<block ref="39133e4ee9648ecb1a2dae934a22788a" prefix=" " category="inline-code"></block>是PV名称和名称的独特组合<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>目的。</block>
  <block id="b22c73e808eef321ee9941ec2e58b64f" category="paragraph">当收到快照请求时， Trident会在后端创建快照。快照创建完成后， Trident会进行配置。<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象，从而将快照暴露给 Kubernetes API。</block>
  <block id="aea10b5a282698ad4477a7113234ae65" category="inline-link-macro">导入卷快照</block>
  <block id="4551cdad3ae48d3a807028a224a3617f" category="admonition">通常情况下，你不需要管理<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>目的。但也有例外情况，比如你想……<block ref="0b4cdf17ac3e4123330cb8e51ec533a2" category="inline-link-macro-rx"></block>在Trident之外创建。</block>
  <block id="24cf288d698c32f6be78d78ed4ae2da4" category="section-title">Kubernetes<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>对象</block>
  <block id="03925a5c554c5613d08fccbd8b32b9f8" category="paragraph">Kubernetes<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>物体类似于<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>。它们有助于定义多种存储类别，并被卷组快照引用，以将快照与所需的快照类别关联起来。每个卷组快照都与一个卷组快照类相关联。</block>
  <block id="fff4777b7ca5b9c8c8cf5e2bcba4f07c" category="paragraph">一个<block ref="b05416d74805ad470e82fbd185a80f60" prefix=" " category="inline-code"></block>应由管理员定义以创建快照组。使用以下定义创建卷组快照类：</block>
  <block id="8245adeb076e6d9db9f6ac77dfb4c7e3" category="paragraph">这<block ref="e2d45d57c7e2941b65c6ccd64af4223e" prefix=" " category="inline-code"></block>向 Kubernetes 指定请求卷组快照的权限。<block ref="122a52194c4daa3ace072fcb995c4dca" prefix=" " category="inline-code"></block>类由Trident处理。这<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>指定当必须删除组快照时要执行的操作。什么时候<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>当删除快照时，卷组快照对象以及存储集群上的基础快照也会被删除。或者，将其设置为<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>意味着<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>并保留物理快照。</block>
  <block id="0eb0a72ef062acee4c89d5b3ff32da7f" category="section-title">Kubernetes<block ref="7afb2b9a0abcf6292858fe2f3450e700" prefix=" " category="inline-code"></block>对象</block>
  <block id="94d3b435d2b11531835e041026e7588f" category="paragraph">Kubernetes<block ref="7afb2b9a0abcf6292858fe2f3450e700" prefix=" " category="inline-code"></block>该对象是创建多个卷的快照的请求。就像 PVC 代表用户对卷的请求一样，卷组快照是用户对现有 PVC 创建快照的请求。</block>
  <block id="317c0b5a54de9fa8dd62802a550228c3" category="paragraph">当收到卷组快照请求时， Trident会自动在后端管理卷的组快照创建，并通过创建唯一标识符来公开该快照。<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>目的。您可以从现有的 PVC 创建快照，并在创建新的 PVC 时将这些快照用作数据源。</block>
  <block id="3edcdec1ed853ba69f1224c7c43702c5" category="admonition">VolumeGroupSnapshot 的生命周期与源 PVC 无关：即使源 PVC 被删除，快照仍然会保留。删除具有关联快照的 PVC 时， Trident会将此 PVC 的后备卷标记为“正在删除”状态，但不会将其完全删除。当所有关联的快照都被删除时，卷组快照也会被删除。</block>
  <block id="8ea50d112474393280399a928479890a" category="section-title">Kubernetes<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象</block>
  <block id="bf0839da8b1efda893b043a219a1630e" category="paragraph">Kubernetes<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>该对象表示从已配置的卷中获取的组快照。它类似于<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>表示存储集群上已配置的快照。类似于<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>和<block ref="858e55ea2e6429120a862313c50a9f5f" prefix=" " category="inline-code"></block>当创建快照时，对象会……<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象与……保持一对一的映射关系<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>该对象请求创建快照。</block>
  <block id="85cb66a45776909e333f8847ee91255d" category="paragraph">这<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象包含用于标识快照组的详细信息，例如：<block ref="e8dbdd2405d28658285ebd383044be1a" prefix=" " category="inline-code"></block>以及存储系统上存在的各个 volumeSnapshotHandles。</block>
  <block id="a4314d759b2ba28d3d385366f2595052" category="paragraph">当收到快照请求时， Trident会在后端创建卷组快照。卷组快照创建完成后， Trident会进行配置。<block ref="4a238bd658ede8bc190a54f7df8c3483" prefix=" " category="inline-code"></block>对象，从而将快照暴露给 Kubernetes API。</block>
  <block id="4171707fb2a131f0fae96196310c5e3b" category="section-title">Kubernetes<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block>对象</block>
  <block id="7c43d52062b795d2d8e7f33b9dbbf671" category="paragraph">Kubernetes 自定义资源是 Kubernetes API 中的端点，由管理员定义，用于对类似对象进行分组。 Kubernetes 支持创建自定义资源来存储对象集合。您可以通过运行以下命令来获取这些资源定义。<block ref="1201c6fb7452320c42006b3c6341e824" prefix=" " category="inline-code"></block> 。</block>
  <block id="09d4c17e4e0e002375326eee41d0f77f" category="paragraph">Kubernetes 将自定义资源定义 (CRD) 及其关联的对象元数据存储在其元数据存储中。这样就无需为Trident单独开设商店了。</block>
  <block id="805098fafaaebe033d70c80fe542e3af" category="paragraph">Trident的使用<block ref="99bc4b850e05bafd67cf5f5f49344c1e" prefix=" " category="inline-code"></block>用于保存Trident对象标识的对象，例如Trident后端、 Trident存储类和Trident卷。这些对象由Trident管理。此外，CSI 卷快照框架引入了一些定义卷快照所需的 CRD。</block>
  <block id="9f59afd5e4687b9960361128f049dae4" category="paragraph">CRD 是 Kubernetes 的一种构造。上述资源的对象由Trident创建。举个简单的例子，当使用以下方式创建后端时<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>相应的<block ref="0509578b4c12ac2fc745903388753e2c" prefix=" " category="inline-code"></block>创建 CRD 对象供 Kubernetes 使用。</block>
  <block id="7cdfd680fe492e028cde251c38475469" category="paragraph">关于Trident的CRD，需要记住以下几点：</block>
  <block id="adecfe476427253e9c680a7c5150a9cc" category="list-text">安装Trident时，会创建一组 CRD，可以像使用任何其他资源类型一样使用这些 CRD。</block>
  <block id="d7b7b183151bdcc8d68efef8a53c02cb" category="list-text">使用以下方式卸载Trident时<block ref="ac8650577d1b744589a6a11b60ac38c7" prefix=" " category="inline-code"></block>使用命令后， Trident pod 会被删除，但创建的 CRD 不会被清理。请参阅<block ref="3e5b286354565ddfee44ed92d763b424" category="inline-link-macro-rx"></block>了解如何将Trident完全移除并从头开始重新配置。</block>
  <block id="a8a62fe3b16797ce253b78f83dc73a18" category="section-title">Trident<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>对象</block>
  <block id="cfc01756266d8d0e43eb3a9f2753f472" category="paragraph">Trident为 Kubernetes 创建匹配的存储类<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>指定对象<block ref="08044207e9f63bb0fd474dab347a776c" prefix=" " category="inline-code"></block>在他们的供应领域。存储类名称与 Kubernetes 的名称匹配。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>它所代表的对象。</block>
  <block id="64cf33bfeab6c6bd8aa626b86fda9cbd" category="admonition">使用 Kubernetes 时，这些对象会在 Kubernetes 集群启动时自动创建。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>已注册使用Trident作为配置器的配置器。</block>
  <block id="51fa0a833f47d8f00ee2677c6fa7b075" category="paragraph">存储类别包含对卷的一系列要求。  Trident会将这些要求与每个存储池中存在的属性进行匹配；如果匹配，则该存储池是使用该存储类别配置卷的有效目标。</block>
  <block id="04d84bba5a5e103ae9c192c03a7ad2f3" category="paragraph">您可以使用 REST API 创建存储类配置，直接定义存储类。但是，对于 Kubernetes 部署，我们期望在注册新的 Kubernetes 实例时创建它们。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>物体。</block>
  <block id="21283df20640a21f468122a427ef1bfc" category="section-title">Trident后端对象</block>
  <block id="3c244b984a2188556c1115a5a27dbe1b" category="paragraph">后端代表存储提供商， Trident在其上配置卷；单个Trident实例可以管理任意数量的后端。</block>
  <block id="d71c5fad4769c19422c07158e24510ba" category="admonition">这是您可以自行创建和管理的两种对象类型之一。另一个是 Kubernetes。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>目的。</block>
  <block id="6386b0f17b85463db72887bca8ae2bb7" category="inline-link-macro">配置后端</block>
  <block id="7a82af4e68a9aca0b21f107f4c0836ee" category="paragraph">有关如何构建这些对象的更多信息，请参阅：<block ref="2e76dfee6bc1b5ee4173b3c5bbcd99e5" category="inline-link-macro-rx"></block> 。</block>
  <block id="8a4410d54113ca147b35c633207444b7" category="section-title">Trident<block ref="5e5d444b688db40e013a7d0b8b3c0898" prefix=" " category="inline-code"></block>对象</block>
  <block id="54fd1dc39c3eecd913b4c9140522996c" category="paragraph">存储池代表每个后端可用于配置的不同位置。对于ONTAP而言，这些对应于 SVM 中的聚合。对于NetApp HCI/ SolidFire，这些对应于管理员指定的 QoS 频段。对于Cloud Volumes Service，这些对应于云提供商区域。每个存储池都有一组独特的存储属性，这些属性定义了其性能特征和数据保护特征。</block>
  <block id="4ab1440e71a70a97c4966bcc0095f02b" category="paragraph">与此处的其他对象不同，存储池候选对象始终会自动发现和管理。</block>
  <block id="f08d82cd2f4fa097db43220a04f62434" category="section-title">Trident<block ref="bd7a9717d29c5ddcab1bc175eda1e298" prefix=" " category="inline-code"></block>对象</block>
  <block id="3ca0a694ceba360e6f67566a611b37fb" category="paragraph">卷是配置的基本单元，包括后端端点（例如 NFS 共享）以及 iSCSI 和 FC LUN。在 Kubernetes 中，这些直接对应于<block ref="3f91308865b7567ae097573f6d0519e9" prefix=" " category="inline-code"></block>。创建卷时，请确保它具有存储类（决定卷的部署位置）和大小。</block>
  <block id="2e53db54827c8c05b7bfe9cb31f299d9" category="list-text">在 Kubernetes 中，这些对象是自动管理的。您可以查看这些信息，了解Trident 的部署情况。</block>
  <block id="22fcc98910d0241e9835f502b7cb2398" category="list-text">删除带有关联快照的 PV 时，相应的Trident卷将更新为 *正在删除* 状态。要删除Trident卷，您应该删除该卷的快照。</block>
  <block id="05353bc86910df31b2da9c8d3d26aad1" category="paragraph">卷配置定义了已配置卷应具有的属性。</block>
  <block id="ce9af1e3f0493eb7d5ffdf584ed763ba" category="cell">Trident API 版本（“1”）</block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">可以</block>
  <block id="017dbd2b0a2195c3e8052cdff67bad39" category="cell">要创建的卷的名称</block>
  <block id="78ec9b60245b46a4f05158076962ace9" category="cell">存储类</block>
  <block id="fa00f346deccdbebef2b3cc0702d41de" category="cell">配置卷时要使用的存储类</block>
  <block id="f7bd60b75b29d79b660a2859395c1a24" category="cell">大小</block>
  <block id="264c52ca068dfed30f5826bb054839f4" category="cell">要配置的卷的大小（以字节为单位）</block>
  <block id="4f18882934f0472b4bfa32928bf92f14" category="cell">使用的协议类型：“文件”或“块”</block>
  <block id="252c6d364cc1a0437939a4f01b0717ae" category="cell">内部名称</block>
  <block id="2857a43e58983276d059c0e6e2fcb0e9" category="cell">存储系统中对象的名称；由Trident生成</block>
  <block id="051fb2c3f62667c87a197ae412a4dbeb" category="cell">ontap（nas、san）和 solidfire-*：要克隆的卷的名称</block>
  <block id="e94d46d7c89bcb7e6ac2e2df4d21bafb" category="cell">ontap（nas，san）：将克隆体从其父体中分离出来</block>
  <block id="819549a86d14e849e1d0042c9156d781" category="cell">ontap-*：要使用的快照策略</block>
  <block id="e38882545bfedafc7e8ec5973b2e6dd8" category="cell">ontap-*：为快照预留的卷百分比</block>
  <block id="fc86db1233bfa77d5143dcaae9842cb1" category="cell">ontap-nas*：要使用的导出策略</block>
  <block id="48e1d8180a61943f438c259b2b6715f8" category="cell">ontap-nas*：快照目录是否可见</block>
  <block id="3f7c94eec4bbf43962e1667f5a334469" category="cell">ontap-nas*：初始 UNIX 权限</block>
  <block id="4b2d5d83aef608a3fb59ec6eda8bea26" category="cell">solidfire-*：块/扇区大小</block>
  <block id="62fe71ae4f6a04a6937feb48ba5dc4f4" category="cell">文件系统类型</block>
  <block id="c12963ed77d398c8f97e09be58a20fed" category="paragraph">Trident生成<block ref="252c6d364cc1a0437939a4f01b0717ae" prefix=" " category="inline-code"></block>创建卷时。这包括两个步骤。首先，它会添加存储前缀（默认值）。<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block>或后端配置中的前缀）添加到卷名称，从而得到如下形式的名称<block ref="c1698e7d39f974847e6db255afc061d7" prefix=" " category="inline-code"></block>。然后它会对名称进行清理，替换后端不允许的字符。对于ONTAP后端，它会将连字符替换为下划线（因此，内部名称变为<block ref="1edd19f408fb01912396584374aad28a" prefix=" " category="inline-code"></block>）。对于 Element 后端，它会将下划线替换为连字符。</block>
  <block id="49539689cebb34166a417b3b666818e5" category="paragraph">您可以使用卷配置通过 REST API 直接配置卷，但在 Kubernetes 部署中，我们预计大多数用户将使用标准的 Kubernetes 管理配置。<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>方法。  Trident会在配置过程中自动创建此卷对象。</block>
  <block id="9b53117639a1995b2872ed6bca3dec8e" category="section-title">Trident<block ref="d4e2713d1b1725a1592f9268589f990d" prefix=" " category="inline-code"></block>对象</block>
  <block id="a1b3787bbd275b7ed5812d022dd36932" category="paragraph">快照是卷在特定时间点的副本，可用于配置新卷或恢复状态。在 Kubernetes 中，这些直接对应于<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>物体。每个快照都与一个卷相关联，该卷是快照数据的来源。</block>
  <block id="cdf5c8d3dd31e49b82a5b3e2c4a65280" category="paragraph">每个<block ref="d4e2713d1b1725a1592f9268589f990d" prefix=" " category="inline-code"></block>对象包含以下属性：</block>
  <block id="27118326006d3829667a400ad23d5d98" category="cell">字符串</block>
  <block id="de73fbae2864dd61c921cf0648a9717a" category="cell">Trident快照对象的名称</block>
  <block id="8e744456fb3d02d69442038d3e771460" category="cell">存储系统上Trident快照对象的名称</block>
  <block id="617a43eb0446f84414df73cce2997fa1" category="cell">volumeName</block>
  <block id="b58c8ff1e837af6dafa971bf3d320646" category="cell">创建快照的持久卷的名称</block>
  <block id="2c2aed4b417a0f9c189d7ad6414ae28c" category="cell">volumeInternalName</block>
  <block id="db1a117103c348ebaec41f9e249554c3" category="cell">存储系统上关联的Trident卷对象的名称</block>
  <block id="73f3d5934fdd36989f24cbae94ab423b" category="paragraph">当 Kubernetes<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>创建对象请求后， Trident 的工作原理是在后端存储系统上创建快照对象。这<block ref="252c6d364cc1a0437939a4f01b0717ae" prefix=" " category="inline-code"></block>此快照对象是通过组合前缀生成的。<block ref="9df5757552a92dfd36506c9ef1ef6553" prefix=" " category="inline-code"></block>和<block ref="e7d22294bdcb7133967c3548ece982e5" prefix=" " category="inline-code"></block>的<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>对象（例如，<block ref="c0d30538d15b43e0140bcf4251703864" prefix=" " category="inline-code"></block> ）。<block ref="617a43eb0446f84414df73cce2997fa1" prefix=" " category="inline-code"></block>和<block ref="2c2aed4b417a0f9c189d7ad6414ae28c" prefix=" " category="inline-code"></block>通过获取支持卷的详细信息来填充。</block>
  <block id="7eff879bfca572dbfc347fa226402a22" category="section-title">Trident<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>目的</block>
  <block id="554741cc944c4e5f022fcbc0fa74e635" category="paragraph">Trident守护进程消耗一个<block ref="e2c3c5140d40bff7c63d42afa55e20cb" prefix=" " category="inline-code"></block>优先级等级——Kubernetes 中可用的最高优先级等级——以确保Trident能够在节点优雅关闭期间识别和清理卷，并允许Trident daemonset pod 在资源压力高的集群中抢占优先级较低的工作负载。</block>
  <block id="ee17e6c68211ace703b5692f81c2e6c4" category="paragraph">为了实现这一目标， Trident采用了一种<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>确保Trident守护进程集上的“system-node-critical”优先级类得到满足。在部署和创建守护进程集之前， Trident会查找<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象，如果未发现，则应用它。</block>
  <block id="253c5669d0ddb02485528df359bfb37d" category="paragraph">如果您需要对默认资源配额和优先级类别进行更多控制，您可以生成一个<block ref="21b1223568b2ae7cd1db3ffddbe3b3fd" prefix=" " category="inline-code"></block>或配置<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>使用 Helm Chart 的对象。</block>
  <block id="b6ba871f235b09a3d76844b7b5901586" category="paragraph">以下是一个 `ResourceQuota` 对象优先考虑Trident守护进程集的示例。</block>
  <block id="4f4b1cca8d1c78f8ba309694d46d80f2" category="inline-link-macro">Kubernetes：资源配额</block>
  <block id="1894d1b67a8b86d7f876f515c238d5a6" category="paragraph">有关资源配额的更多信息，请参阅<block ref="1fb556021be57083646a3e3c0079c64c" category="inline-link-macro-rx"></block>。</block>
  <block id="4f89992961c018acecad7b373dcce336" category="section-title">清理<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>如果安装失败</block>
  <block id="222924a66611c61f2a2192a2bab92ecf" category="inline-link-macro">卸载</block>
  <block id="dbcf7f603282c175a634104f7dbd55f2" category="paragraph">在极少数情况下，如果安装失败，<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>对象已创建，首次尝试<block ref="3bd802fb95da78515b3c3d98916ee73c" category="inline-link-macro-rx"></block>然后重新安装。</block>
  <block id="c4af59b1638f70f51816423f72df4dba" category="paragraph">如果这样不行，就手动删除。<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>目的。</block>
  <block id="b9984d1eca39b86eb39cedf7db8f8c62" category="section-title">消除<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block></block>
  <block id="b09f29e72667c7bbfee7df15e0918219" category="paragraph">如果您希望自行控制资源分配，您可以移除Trident。<block ref="0b79951d94d2a7fc1f7ba55091959bda" prefix=" " category="inline-code"></block>使用以下命令对象：</block>
  <block id="6f9b6f4ef23610d31af9db2f8015cd91" category="summary">Kubernetes Pod 安全标准 (PSS) 和 Pod 安全策略 (PSP) 定义了权限级别并限制了 Pod 的行为。 OpenShift 安全上下文约束 (SCC) 类似地定义了 OpenShift Kubernetes Engine 特有的 pod 限制。为了实现这种自定义功能， Trident会在安装过程中启用某些权限。</block>
  <block id="bc3c69459955aa51e6720ee4098db2c2" category="doc">Pod 安全标准 (PSS) 和安全上下文约束 (SCC)</block>
  <block id="75f5ed582d115d8da9d2b70f7279ae9c" category="paragraph">Kubernetes Pod 安全标准 (PSS) 和 Pod 安全策略 (PSP) 定义了权限级别并限制了 Pod 的行为。 OpenShift 安全上下文约束 (SCC) 类似地定义了 OpenShift Kubernetes Engine 特有的 pod 限制。为了实现这种自定义功能， Trident会在安装过程中启用某些权限。以下各节详细介绍了Trident设置的权限。</block>
  <block id="80af9ab2cf8f28973d329b09a2aa3bf3" category="inline-link-macro">Kubernetes：安全性</block>
  <block id="bf490af1c404d2415dfe93c23b646bfb" category="admonition">PSS 取代了 Pod 安全策略 (PSP)。 PSP 在 Kubernetes v1.21 中已被弃用，并将于 v1.25 中移除。更多信息，请参阅<block ref="18a97095ea40d42decd22f31a2040afe" category="inline-link-macro-rx"></block>。</block>
  <block id="92699490afddc06ebad285ff002fc80d" category="section-title">必需的 Kubernetes 安全上下文和相关字段</block>
  <block id="ed5dea09095f671b801bee34ea28a319" category="cell">权限</block>
  <block id="b315e1c68490baab38c1a28e00fe0f5a" category="cell">特权</block>
  <block id="62868c5d24fd89e2fd8046454e18b6c4" category="inline-link-macro">Kubernetes：挂载传播</block>
  <block id="8711d10d95f02e2915623a51693eaaac" category="cell">CSI 要求挂载点是双向的，这意味着Trident节点 pod 必须运行特权容器。更多信息，请参阅<block ref="36e6e997c8e1e33355ee35fb5cf65f2b" category="inline-link-macro-rx"></block>。</block>
  <block id="92a5c8ffa6bee2a9377f18499950da23" category="cell">主机网络</block>
  <block id="154cdce0e5451a5578085caa8a7e7a3e" category="cell">iSCSI守护进程需要它。<block ref="f88921f58beaaae5bcb9dffac54bf5ad" prefix=" " category="inline-code"></block>管理 iSCSI 挂载点，并使用主机网络与 iSCSI 守护进程通信。</block>
  <block id="2ff982b19c53a275ae05f015dafe166d" category="cell">主机 IPC</block>
  <block id="eac6730a7bdbb0156f167d1a073b4a7c" category="cell">NFS 使用进程间通信 (IPC) 与 NFSD 进行通信。</block>
  <block id="b25a60a6190808e0d6e849ca6325b91c" category="cell">主机 PID</block>
  <block id="81f58ff2750ef607f5ace37340e32983" category="cell">开始需要<block ref="3fc52a01383634d8618b7d25147b3990" prefix=" " category="inline-code"></block>适用于 NFS。  Trident会查询主机进程以确定是否<block ref="3fc52a01383634d8618b7d25147b3990" prefix=" " category="inline-code"></block>在挂载 NFS 卷之前运行。</block>
  <block id="82ec2cd6fda87713f588da75c3b1d0ed" category="cell">功能</block>
  <block id="4aeb7a1484240b8d479aee0a012de3a4" category="cell">这<block ref="89e03940e064509cce675def4874338e" prefix=" " category="inline-code"></block>该功能作为特权容器的默认功能的一部分提供。例如，Docker 为特权容器设置了以下功能：<block ref="279f844076697173760b840190800fa7" prefix=" " category="inline-code"></block><block ref="ca9d7807fbdd864698fc848190c05c7a" prefix=" " category="inline-code"></block></block>
  <block id="b2dbe899d8bf9b4c25f337efe8b1ce7c" category="cell">赛康普</block>
  <block id="8c4d735e96caff70ec2fb4b6da0b8647" category="cell">在特权容器中，Seccomp 配置文件始终为“Unconfined”；因此，它无法在Trident中启用。</block>
  <block id="1a3d8802d280d4ec910f54042cd62998" category="cell">SELinux</block>
  <block id="55067c9b7862cdb9b724bac1e11f114e" category="cell">在 OpenShift 上，特权容器运行在<block ref="4c6c95436260ecf7ab3cf7558410a157" prefix=" " category="inline-code"></block>（“超级特权容器”）域，而非特权容器则运行在……域中。<block ref="ce0991860b118fa3ab777cbb62c7caa5" prefix=" " category="inline-code"></block>领域。在<block ref="34c54dce528ae11502f7c2908c0e4a21" prefix=" " category="inline-code"></block>， 和<block ref="c42c2c095fe432fac047b16b37a0c05c" prefix=" " category="inline-code"></block>安装完成后，所有容器都在运行。<block ref="4c6c95436260ecf7ab3cf7558410a157" prefix=" " category="inline-code"></block>域，这实际上禁用了 SELinux。因此， Trident不会增加<block ref="0221dccbaacc71551feb621f4ebfae36" prefix=" " category="inline-code"></block>到容器中。</block>
  <block id="52a8b954485e8bf8ebe32865d17563a6" category="cell">DAC</block>
  <block id="6ddc0f1aebd745677bb51e725f080883" category="cell">特权容器必须以 root 用户身份运行。非特权容器以 root 用户身份运行，以访问 CSI 所需的 Unix 套接字。</block>
  <block id="479f0a2e760ff0014bb53fcbe4b5dfbf" category="section-title">舱体安全标准 (PSS)</block>
  <block id="b021df6aac4654c454f46c77646e745f" category="cell">标签</block>
  <block id="ede4d9142f78c8313ce1ea912023214a" category="cell"><block ref="c50055ec8e6213f61bd81cfda31f072f" prefix="" category="inline-code"></block> <block ref="76404c03a86906ee3beb617ed963367c" prefix=" " category="inline-code"></block></block>
  <block id="0ccd226f7ad098ef19857dcf15eed611" category="cell">允许将Trident控制器和节点添加到安装命名空间中。请勿更改命名空间标签。</block>
  <block id="0634b3cd8d233df0b38fe73154f03a86" category="cell"><block ref="65f4d8e6b012530443d6a9f6f2b9ce47" prefix="" category="inline-code"></block> <block ref="c9618b80f22dd4422aedf605ca48825e" prefix=" " category="inline-code"></block></block>
  <block id="830d087702172a8173337c2f014f24b3" category="admonition">更改命名空间标签可能会导致 Pod 无法调度，出现“创建时出错：...”或“警告：trident-csi-...”等错误。如果发生这种情况，请检查命名空间标签是否为<block ref="bd638b36d2814f488c1497cfe49eceea" prefix=" " category="inline-code"></block>已更改。如果是这样，请重新安装Trident。</block>
  <block id="a2e4b41e2525b6345ec43bbfe91c66fb" category="section-title">Pod 安全策略 (PSP)</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="0c3c80a8b192c50af55549addaec04e9" category="cell"><block ref="18dfe779aeef79958856ed305c2bdf2c" prefix="" category="inline-code"></block></block>
  <block id="13d1281eff2b6a57e6fe877e0379a8f0" category="cell">特权容器必须允许权限提升。</block>
  <block id="f3acfbe4d2b93ab163024b31a31b1a6e" category="cell"><block ref="320921b707f3348e6c98b4280fa1a31d" prefix="" category="inline-code"></block></block>
  <block id="e4938c724a08c7ba91677f8cb5e069f0" category="cell">Trident不使用内联 CSI 临时卷。</block>
  <block id="ce2c8aed9c2fa0cfbed56cbda4d8bf07" category="cell">空</block>
  <block id="2eb7a988516ab2e49fd1dd1d0f505ba4" category="cell"><block ref="cdefa1888948b5a72fea2994aeca2cab" prefix="" category="inline-code"></block></block>
  <block id="7f18f0f8e3ec21ef031ae007e78292f1" category="cell">非特权Trident容器不需要比默认集更多的功能，而特权容器将被授予所有可能的功能。</block>
  <block id="577f713a1a3fd5fe6851754c1e780b62" category="cell"><block ref="5439f69262a770a5f83afbdcce16c7e8" prefix="" category="inline-code"></block></block>
  <block id="5a40ff04e0748fc5c56343bfccb1bf43" category="inline-link-macro">FlexVolume驱动器</block>
  <block id="117394bda9c12e1ab1e0ddefda7340f6" category="cell">Trident不使用<block ref="5cf2fb2d9c4de828b06e030ea5b9ff75" category="inline-link-macro-rx"></block>因此，它们不包含在允许的音量列表中。</block>
  <block id="e26fd3e84b999df4093d0b9f1cf8bbdb" category="cell"><block ref="5ecb32286b22ea1d317e0328f6ca17f3" prefix="" category="inline-code"></block></block>
  <block id="87c065485525cde8c75f60bd233a546b" category="cell">Trident节点 pod 会挂载节点的根文件系统，因此设置此列表没有任何好处。</block>
  <block id="88e5e12dbdeac08e751e562ed902d6af" category="cell"><block ref="c503c5204b219327ad1ec993eafeb60b" prefix="" category="inline-code"></block></block>
  <block id="b989e7796e7fe01d9a48795f499ee3e8" category="cell">Trident不使用任何<block ref="9b2836a126a08612261801d15525c966" prefix=" " category="inline-code"></block>。</block>
  <block id="2cc90cbcd409b90ed2d4270b587b4611" category="cell"><block ref="1f5590dd9e5fe118cb2d0fafdd4a2c76" prefix="" category="inline-code"></block></block>
  <block id="6784c364453355e4499a625166f9d76e" category="cell">Trident不需要任何不安全措施<block ref="005b1e0eff7e0d04731c1a9c38e1645f" prefix=" " category="inline-code"></block>。</block>
  <block id="43dbe35647dc1ec91f9ab70bb9c67eb7" category="cell"><block ref="11ed1e398eb4fb87f6dd82eb0c2c484b" prefix="" category="inline-code"></block></block>
  <block id="21b6f9c280cf0efb8619e386208ee181" category="cell">特权容器无需添加任何功能。</block>
  <block id="782434a33bb3747f8aa86293dc2ae86c" category="cell"><block ref="3262227f241b5104dae49e3b6794a48e" prefix="" category="inline-code"></block></block>
  <block id="4e1db4d4f52542bf76625bb1724050ca" category="cell">权限提升权限是在每个Trident pod 中处理的。</block>
  <block id="7b18008579516cbef313996f0c7a3f5e" category="cell"><block ref="8de935bade437bae01a87d360814f8b2" prefix="" category="inline-code"></block></block>
  <block id="1507e7ba036aa98fd30589e618a7a4eb" category="cell">不<block ref="005b1e0eff7e0d04731c1a9c38e1645f" prefix=" " category="inline-code"></block>允许。</block>
  <block id="042337cb48219589a279b3bf0ba9107a" category="cell"><block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix="" category="inline-code"></block></block>
  <block id="07556f620d0b827238e3ef0142c49b78" category="cell">Trident容器以root权限运行。</block>
  <block id="ac0f2e366ea63da20af91efebbac6563" category="cell"><block ref="9510eecf0d7bfd6ddcc0af8dcab468c3" prefix="" category="inline-code"></block></block>
  <block id="0041ceee5434032966a8b03eae8738ac" category="cell"><block ref="caa805d341a15bff93c4a9a29f49b191" prefix="" category="inline-code"></block></block>
  <block id="41c30833eb5d5997e9b7a31ee0c66616" category="cell">挂载 NFS 卷需要主机 IPC 与主机通信<block ref="040547f5d1afb7594b15ac44c8996d28" prefix=" " category="inline-code"></block></block>
  <block id="9bffb5bb38918d1a1d3ae47e97dfc0c4" category="cell"><block ref="e3b493bcbdc62af28f127a151a9fb487" prefix="" category="inline-code"></block></block>
  <block id="42a138ad382896646a09fac2eb0167c6" category="cell">iscsiadm 需要主机网络才能与 iSCSI 守护进程通信。</block>
  <block id="13135fc0519a6dd0521fa0c0e2445184" category="cell"><block ref="d5eeda68602776a6cc184dc06e8008fb" prefix="" category="inline-code"></block></block>
  <block id="608c4a2fdcf8e14356058df9005ae8ad" category="cell">需要主机 PID 来进行检查<block ref="3fc52a01383634d8618b7d25147b3990" prefix=" " category="inline-code"></block>正在节点上运行。</block>
  <block id="7d820b24ee2bfd41495fba608bfe1fb0" category="cell"><block ref="79602710f0451e93a37a68d73146cdfd" prefix="" category="inline-code"></block></block>
  <block id="7afcaaf2763ecc0e6dee9f0b63026a58" category="cell">Trident不使用任何主机端口。</block>
  <block id="cb8c6f5ff29df99724d3704d1af54bbd" category="cell"><block ref="bd638b36d2814f488c1497cfe49eceea" prefix="" category="inline-code"></block></block>
  <block id="aadb34687d099e9a40c9ad3bbaca9b52" category="cell">Trident节点 pod 必须运行特权容器才能挂载卷。</block>
  <block id="cd8e4b4bb856b53433b1d0369136d7c3" category="cell"><block ref="a36ad2513fd5bed82000a11cd072c70c" prefix="" category="inline-code"></block></block>
  <block id="7621dbe4e923ccb1331f44e5fc326954" category="cell">Trident节点 pod 必须写入节点文件系统。</block>
  <block id="7214fd778499c002452dfa1de7a63694" category="cell"><block ref="8ef4c526d5dbf854568be0215948562b" prefix="" category="inline-code"></block></block>
  <block id="0a687403dd751d7bcf9d36eb39b73187" category="cell">Trident节点 pod 运行的是特权容器，不能放弃任何功能。</block>
  <block id="e0cfa7f1a22bfc61e3c23d9b472cb229" category="cell"><block ref="24f066518afeea78c9e3e1935e2b4afa" prefix="" category="inline-code"></block></block>
  <block id="72a9e1b9b252e5cf0980f359420147d4" category="cell"><block ref="e70b97e1fe755b3b63eee3148167d06a" prefix="" category="inline-code"></block></block>
  <block id="0be043db3067cfba9e355c71f0d47963" category="cell"><block ref="a1933ffc7c56d4bad559d4aada4b5cf4" prefix="" category="inline-code"></block></block>
  <block id="2b13c797fbca116e0445fe9ed04aa753" category="cell"><block ref="119a538c01fd566d2c6b0a773680c029" prefix="" category="inline-code"></block></block>
  <block id="90eaf8074aef1d40fdd4ebb096ba3445" category="cell">Trident不使用<block ref="578e49a043cd014389265d3d5745237b" prefix=" " category="inline-code"></block>。</block>
  <block id="af697e6f277a737b01025e1b3ac8fd44" category="cell"><block ref="35fa9c57956b497d442646153f18643f" prefix="" category="inline-code"></block></block>
  <block id="b2fe00f20eadde0a1ed6fcbd7f899a41" category="cell">Trident不设置<block ref="0221dccbaacc71551feb621f4ebfae36" prefix=" " category="inline-code"></block>因为目前容器运行时和 Kubernetes 发行版在处理 SELinux 方面存在差异。</block>
  <block id="07b8b968ede124e1134951b502139223" category="cell"><block ref="69ca32a3f2c3aed6de1cc5ea72ab45eb" prefix="" category="inline-code"></block></block>
  <block id="707325d27093188691659cc218115f02" category="cell"><block ref="078831e29f354e83fac6da3db6ed6b7b" prefix="" category="inline-code"></block></block>
  <block id="fd284b15eb12231bdce65744e6704677" category="cell">Trident pods 需要这些音量插件。</block>
  <block id="c28fb07c7c2463112f74e84cdea6df77" category="cell"><block ref="7af598b967dfa9a65aa6bc1172ac2793" prefix="" category="inline-code"></block></block>
  <block id="12ed56c889a6b18b5fce1be5bd30b1c8" category="section-title">安全上下文约束 (SCC)</block>
  <block id="244a3eb95cc1438e96d275b17eaa5bca" category="cell"><block ref="34f1a1024ebe43028f3959a44bacfc6b" prefix="" category="inline-code"></block></block>
  <block id="bdf1cf802b14a9ec8b930e1603663b2a" category="cell">Trident节点 pod 会挂载节点的根文件系统。</block>
  <block id="bb46f3196a53f2e3664f53addee28df1" category="cell"><block ref="96a892a9f3eea0ca79b145a0eaf9dbb2" prefix="" category="inline-code"></block></block>
  <block id="040a3e4977d39efd21138ca276545e91" category="cell">挂载 NFS 卷需要主机 IPC 与主机通信<block ref="040547f5d1afb7594b15ac44c8996d28" prefix=" " category="inline-code"></block>。</block>
  <block id="75a4305006cbe99edf6e6ec43424a3f9" category="cell"><block ref="90837134a0fa2189e147709cb1c8ee73" prefix="" category="inline-code"></block></block>
  <block id="3dc9b606cf3a7a8fc44c8489687131d1" category="cell"><block ref="1f50d8422285f1e4485caf89884871d1" prefix="" category="inline-code"></block></block>
  <block id="31773567f0268170ecfa4c74f91c5b74" category="cell"><block ref="e3370203a64857bb982dfad1f53f32dd" prefix="" category="inline-code"></block></block>
  <block id="606a5f1c705c363af0a1f97e60feaddc" category="cell"><block ref="2290fe08023a5a24bfa0749418021ce3" prefix="" category="inline-code"></block></block>
  <block id="5be47a456f397efee757d8dd4e0c8726" category="cell"><block ref="1471e4e05a4db95d353cc867fe317314" prefix="" category="inline-code"></block></block>
  <block id="c2ca437ef2abb914a8fc2ebb1b926ef6" category="cell">此 SCC 专用于Trident ，并与其用户绑定。</block>
  <block id="fae56626a2743154c04411ee3d701833" category="cell"><block ref="64ed99ed2cd72b59717e6297314edfc3" prefix="" category="inline-code"></block></block>
  <block id="5987c8a1437c5254a436c29c94220b55" category="cell"><block ref="5c9160146b43f9e1879772881e219a6a" prefix="" category="inline-code"></block></block>
  <block id="2c8f9f1b9abdfa728b8f5d50686e4da0" category="cell">特权容器始终以“非限制”模式运行。</block>
  <block id="f94a437fb7858e092079378f93ef2c71" category="cell"><block ref="9bc65c2abec141778ffaa729489f3e87" prefix="" category="inline-code"></block></block>
  <block id="402b7d2d5aea5e79576f9a964df89a32" category="cell">提供了一个条目，用于将此 SCC 绑定到Trident命名空间中的Trident用户。</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">不适用</block>
  <block id="50af2a553c2117ddd78da33865c6e35b" category="cell"><block ref="05b8f3cd42ccc5f3a4847a902e506823" prefix="" category="inline-code"></block></block>
  <block id="1b1944fe544c06f29c78d07fcfbf4683" category="summary">了解更多关于Trident通信所使用的端口的信息。</block>
  <block id="190c8d0a8c0f9d99e2a5cee87981451c" category="paragraph">了解更多关于Trident用于通信的端口的信息。</block>
  <block id="af4e755c6284fa61e563c93320e97aaa" category="paragraph">Trident使用以下端口在 Kubernetes 内部进行通信：</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">端口</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="7e6b20d014d1c659e4eaf20dc2dcd7eb" category="cell">8443</block>
  <block id="69bbf3571db03f0487c04a8254d15c75" category="cell">反向通道 HTTPS</block>
  <block id="bc3c4a6331a8a9950945a1aa8c95ab8a" category="cell">8001</block>
  <block id="e5a4c481cc6f5935efb2c9d381f2e342" category="cell">Prometheus 指标端点</block>
  <block id="67ff32d40fb51f1a2fd2c4f1b1019785" category="cell">8000</block>
  <block id="10f5b805a46ea829cc3b9d8560a224ae" category="cell">Trident REST 服务器</block>
  <block id="35cf0f704286108deb76366a16415140" category="cell">17546</block>
  <block id="fb1396f82d0096741ea1b06f8cee2340" category="cell">Trident守护进程集 pod 使用的存活/就绪探测端口</block>
  <block id="2a531c1a1d290bb0e5f5a511bb48ad45" category="admonition">安装过程中可以使用以下方法更改活性/就绪探针端口：<block ref="d2090696319f15a4c659a414db8cd2cd" prefix=" " category="inline-code"></block>旗帜。务必确保工作节点上的其他进程没有使用该端口。</block>
  <block id="cf99312afccffdb3b97f892cb91990a0" category="summary">如果您更喜欢与 Trident 的 REST API 进行交互，可以直接使用 REST 端点。</block>
  <block id="5eee484e5d1a379b56272cbb68f0b4a6" category="doc">Trident REST API</block>
  <block id="319c1a7b5479ffa2a028b658ad5b7033" category="inline-link-macro">tridentctl 命令和选项</block>
  <block id="01244d6a0ae311e8f26e37eff3b90b3a" category="paragraph">尽管<block ref="8321852d17a287399cb52ef30f4b21eb" category="inline-link-macro-rx"></block>这是与Trident REST API 交互的最简单方法，如果您愿意，也可以直接使用 REST 端点。</block>
  <block id="7a72a102c2990b674624e8b6ec834e4d" category="section-title">何时使用 REST API</block>
  <block id="d802062141c45c0c8ed9e54ff53f4878" category="paragraph">REST API 适用于在非 Kubernetes 部署中使用Trident作为独立二进制文件的高级安装。</block>
  <block id="daef2c20475904ee3d06d11ab5e5cc0a" category="paragraph">为了更好的安全性，Trident<block ref="aba3d4b49c454e1974970e7b5514b001" prefix=" " category="inline-code"></block>在 pod 内运行时，默认仅限于 localhost。要改变这种行为，你需要设置 Trident 的<block ref="38df54fe961fa2bf2a7f82a5854fabad" prefix=" " category="inline-code"></block>在其 pod 配置中设置参数。</block>
  <block id="eee97547fb40d9c4df018377ac6478bb" category="section-title">使用 REST API</block>
  <block id="4e1a255728b39675b43f116f4cfb488b" category="paragraph">要查看这些 API 的调用示例，请传递调试信息。<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix="(" category="inline-code"></block> ） 旗帜。更多信息，请参阅<block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block>。</block>
  <block id="8b3c7aa88e751573c842f17535525f19" category="paragraph">API 的工作原理如下：</block>
  <block id="7528035a93ee69cedb1dbddb2f0bfcc8" category="section-title">GET</block>
  <block id="943c9b081b44587d874271006286d321" category="list-text"><block ref="22b708d2eccf39e1774f3e179bc6aee0" prefix="" category="inline-code"></block></block>
  <block id="0211fd9d40454137caed274c8b3d6054" category="list-text">列出该类型的所有对象。</block>
  <block id="a1ed61bb0432fb6b25e4789166744818" category="list-text"><block ref="57e9ee33b6310b193ba789f5dada20cc" prefix="" category="inline-code"></block></block>
  <block id="aa5aa416edde45fdd91bf4eff5a47d7f" category="list-text">获取指定对象的详细信息。</block>
  <block id="a02439ec229d8be0e74b0c1602392310" category="section-title">POST</block>
  <block id="fe25634ce7a9cad53e5d4b1d7a3039a6" category="list-text"><block ref="bb2b5a5fa2bc8d2525063f1afa7571a5" prefix="" category="inline-code"></block></block>
  <block id="777bb10b09d21c1e8001a8a8aa5767d8" category="list-text">创建指定类型的对象。</block>
  <block id="e0fcace21bf76f1a9c21940cb093720e" category="list-text">创建对象需要 JSON 配置。有关每种对象类型的详细说明，请参阅：<block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block> 。</block>
  <block id="5b2f45c3d098b61927afda859c9144f8" category="list-text">如果对象已存在，则行为会有所不同：后端会更新现有对象，而所有其他对象类型都会使操作失败。</block>
  <block id="32f68a60cef40faedbc6af20298c1a1e" category="section-title">DELETE</block>
  <block id="7f43e795c3bf1beb79462cd9164057e4" category="list-text"><block ref="051be5ede889caf3958ca683df6f8d5f" prefix="" category="inline-code"></block></block>
  <block id="99e18f16be02084849198b503c3e3c29" category="list-text">删除指定的资源。</block>
  <block id="de7f4e4d8a5861d8381abc8bfafc64c2" category="admonition">与后端或存储类关联的卷将继续存在；这些卷必须单独删除。更多信息，请参阅<block ref="47a3478e106194126b8a4a249a182714" category="inline-link-macro-rx"></block>。</block>
  <block id="9cd971ecdea9d32fa28fcdca5951a02c" category="summary">Trident为Trident编排器公开了几个命令行选项，并通过某些端口进行通信。</block>
  <block id="7d4fab76513c90b603a722620cde60fe" category="doc">命令行选项</block>
  <block id="33649eaebf2b1cded3cfe2ae660b3db8" category="paragraph">Trident为Trident编排器提供了几个命令行选项。您可以使用这些选项来修改您的部署。</block>
  <block id="8db7df66ab1d7ab5f1dc947acdb5fae4" category="section-title">日志记录</block>
  <block id="9b9ef5337f7c7fbad5389e8b34d3fb1f" category="list-text"><block ref="9b945915b0cddbee22047fd529d642f6" prefix="" category="inline-code"></block></block>
  <block id="f4078e4654ff3cac1121079492b0c3f4" category="list-text">启用调试输出。</block>
  <block id="ca4acdfba197b4053e99386e85bf4cc4" category="list-text"><block ref="818bc08a4822af612b7904cc24a4d3bf" prefix="" category="inline-code"></block></block>
  <block id="5c8767809eb386e1ab0473de8292544f" category="list-text">设置日志级别（debug、info、warn、error、fatal）。默认显示信息。</block>
  <block id="4da29764ff4997096420f0ae6861b27c" category="list-text"><block ref="4012723fd7948507761ae4f00f8a6ce5" prefix="" category="inline-code"></block></block>
  <block id="7db7db05fbaa2896d81a59e8f38fc27a" category="list-text">使用此选项或<block ref="b88c1426ddf914ab0ed819649aed75fc" prefix=" " category="inline-code"></block>启用 Kubernetes 支持。设置此项后， Trident将使用其所在 pod 的 Kubernetes 服务帐户凭据来联系 API 服务器。只有当Trident作为 Pod 在启用了服务帐户的 Kubernetes 集群中运行时，此方法才有效。</block>
  <block id="1d0a1baeeb99a2ab2b62995cd2ca3fc7" category="list-text"><block ref="b9d0a374603a1c8cc2464bf870d134f0" prefix="" category="inline-code"></block></block>
  <block id="df659a37411eac4669a05e25173aa8b7" category="list-text">使用此选项或<block ref="4012723fd7948507761ae4f00f8a6ce5" prefix=" " category="inline-code"></block>启用 Kubernetes 支持。指定后， Trident将使用提供的不安全地址和端口连接到 Kubernetes API 服务器。这使得Trident可以部署在 pod 之外；但是，它仅支持与 API 服务器的不安全连接。为了安全连接，请将Trident部署在带有以下组件的 pod 中：<block ref="4012723fd7948507761ae4f00f8a6ce5" prefix=" " category="inline-code"></block>选项。</block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="section-title">Docker</block>
  <block id="4248fc4f101e2b3fe6bdb19065701fa5" category="list-text"><block ref="5cc3c48cd4a7b7c28609e7cad16a63c6" prefix="" category="inline-code"></block></block>
  <block id="fc3445d927bff3ae43a549a8e6534c5c" category="list-text">注册 Docker 插件时使用的驱动程序名称。默认为<block ref="16dfba14481ba8b67fd1c1d9e0f32d2a" prefix=" " category="inline-code"></block>。</block>
  <block id="fc9918a81547fe43ace70de85a7bebac" category="list-text"><block ref="3c296b703ef0b6971051fafa0adeec00" prefix="" category="inline-code"></block></block>
  <block id="65ec7391e16f9bd6e659149b86819a17" category="list-text">监听此端口，而不是 UNIX 域套接字。</block>
  <block id="9489e1104464d83e0ce20703b6791e94" category="list-text"><block ref="5fe5cde67e990859d4973ee6fedbf6f0" prefix="" category="inline-code"></block></block>
  <block id="edd29d0afafb06480d68d40a7a22ffa5" category="list-text">必填项；您必须指定后端配置文件的路径。</block>
  <block id="50780f47f6839d47d60bc4555ee00c3f" category="section-title">休息</block>
  <block id="668ae2bb5fbfb42f8d89e94482a4de47" category="list-text"><block ref="786783eafb02594c9668a3cbbc65d473" prefix="" category="inline-code"></block></block>
  <block id="46fedf27957de15ad13ad14b25adb901" category="list-text">指定 Trident REST 服务器应该监听的地址。默认为本地主机。当监听本地主机并在 Kubernetes pod 内运行时，REST 接口无法从 pod 外部直接访问。使用<block ref="dfbd0635d992733a865e819be2cf08be" prefix=" " category="inline-code"></block>使 REST 接口能够通过 pod IP 地址访问。</block>
  <block id="99f1d9ee8daaf03f69217b44950e3442" category="list-text"><block ref="ca77c8464c642146b691455db7a16df6" prefix="" category="inline-code"></block></block>
  <block id="33be5112b1ca3c0147264576f7d2e571" category="list-text">指定 Trident REST 服务器应监听的端口。默认值为 8000。</block>
  <block id="a2714fafd1caea03119590a34bc711c6" category="list-text"><block ref="79d400f844e73cb6e88dabddc36edc38" prefix="" category="inline-code"></block></block>
  <block id="14d37f351bc2789fc70a93a3114308f0" category="list-text">启用 REST 接口。默认为真。</block>
  <block id="e3ab8ff46f9c86474b01bf93b504507e" category="summary">NetApp不断改进和增强其产品和服务。以下是Trident最新版本的一些最新功能、改进和错误修复。</block>
  <block id="490414e0366b091220802d406e52c076" category="doc">什么是新的</block>
  <block id="fc679dfce4052095eac6de2f7f86cd16" category="paragraph">发行说明提供了有关NetApp Trident最新版本的新功能、增强功能和错误修复的信息。</block>
  <block id="e4c4d344a524d21b898e4d04b6539aa7" category="admonition">这<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>安装程序 zip 文件中提供的 Linux 二进制文件是经过测试和支持的版本。请注意，<block ref="43b9d8ea18c48c3a64c4e37338fc668f" prefix=" " category="inline-code"></block>提供的二进制文件<block ref="1e6add150fa42ebd470891f1547d31f0" prefix=" " category="inline-code"></block>压缩文件中的部分内容未经测试或支持。</block>
  <block id="c70a7b422c141acedc1060dd737c17a5" category="section-title">25.06.2 中的新增功能</block>
  <block id="41cf959adc98386b54829d71a6ed5d37" category="section-title">修复</block>
  <block id="3e49406f91b1756e000630d03496d0da" category="list-text">*Kubernetes*：修复了从 Kubernetes 节点分离卷时发现不正确的 iSCSI 设备的严重问题。</block>
  <block id="76adb46eab5f5dd5b58c3c8a62320c12" category="section-title">25.06.1 中的变更</block>
  <block id="b94d4c5305d8d32a875a24a5b1501274" category="admonition">对于使用SolidFire的客户，请不要升级到 25.06.1，因为取消发布卷时存在已知问题。25.06.2 即将发布以解决此问题。</block>
  <block id="f47cb8e173cabaf3981c7356253eaf5f" category="list-text">*Kubernetes*：</block>
  <block id="56f0b7f1d902abcea5e9a924acc8cf68" category="list-text">修复了在从子系统取消映射之前未检查 NQN 的问题。</block>
  <block id="74ede3b036d836536636c89ae6208dc1" category="list-text">修复了多次尝试关闭 LUKS 设备导致无法分离卷的问题。</block>
  <block id="e593abd973cbfe8b821587be547d75a8" category="list-text">修复了当设备路径自创建以来发生变化时 iSCSI 卷取消暂存的问题。</block>
  <block id="ba928ee331d175497be64b1981e81596" category="list-text">阻止跨存储类的卷克隆。</block>
  <block id="4f8bdbf86c4afec9c1de4e403735e1df" category="list-text">*OpenShift*：修复了 OCP 4.19 中 iSCSI 节点准备失败的问题。</block>
  <block id="d3c869af5d0f4ee5e35def393587ffea" category="inline-link-macro">第1008期</block>
  <block id="4437218698cd37b58221a09f0b779bab" category="list-text">增加了使用SolidFire后端克隆卷时的超时时间（<block ref="ff387119bc332768d9a3831513d005d5" category="inline-link-macro-rx"></block> ）。</block>
  <block id="3dca4d7450a120a0a20749c485d209b2" category="section-title">25.06 中的变化</block>
  <block id="c1748037d10cffabb8e95e4ccf77c613" category="section-title">增强功能</block>
  <block id="b73e3aa94514d51e32ca4c9fa306ce1e" category="inline-link-macro">使用卷组快照</block>
  <block id="cbe74dc7c890979d924675df2fa27a35" category="list-text">新增对 CSI 卷组快照的支持<block ref="ee21100dace47d83bcefcb7dea09cdd3" prefix=" " category="inline-code"></block>适用于ONTAP的卷组快照 Kubernetes API - SAN iSCSI 驱动程序。看<block ref="b136941d5c2c98d5e9ff86fd07e97048" category="inline-link-macro-rx"></block>。</block>
  <block id="9c3e7c7a7d7349669946d43b4988c3ed" category="admonition">VolumeGroupSnapshot 是 Kubernetes 中的一项测试版功能，其 API 也处于测试版阶段。  VolumeGroupSnapshot 所需的最低 Kubernetes 版本为 1.32。</block>
  <block id="5e93028f6e11493fcce0c15271413cc3" category="list-text">除了 iSCSI 之外，还增加了对ONTAP ASA r2 的 NVMe/TCP 支持。看<block ref="0ffed2115293f61a0df2b3c8f01851e1" category="inline-link-macro-rx"></block>。</block>
  <block id="d5bb517310bc551b239857e32401ac1f" category="inline-link-macro">启用安全的 SMB</block>
  <block id="674d1c5daba14e57bb12199e316a830d" category="list-text">为ONTAP-NAS 和ONTAP-NAS-Economy 卷添加了安全的 SMB 支持。现在可以将 Active Directory 用户和组与 SMB 卷一起使用，以增强安全性。看<block ref="4f989a35378d98430cb4c4899de0cc08" category="inline-link-macro-rx"></block>。</block>
  <block id="6bcdf917188bd0a976b410952a796d4b" category="list-text">增强Trident节点并发性，以提高 iSCSI 卷节点操作的可扩展性。</block>
  <block id="03384ffa27aceef186890eaae584f3c4" category="list-text">额外<block ref="b5073479eb6368548b299ea4d08aa8b7" prefix=" " category="inline-code"></block>打开 LUKS 卷时，允许执行 discard/TRIM 命令以回收空间。</block>
  <block id="f216940dceac21552e55089b0f450059" category="list-text">提高格式化 LUKS 加密卷时的性能。</block>
  <block id="aca9eafb022610d731f3f94197f227fd" category="list-text">增强了对失败但部分格式化的 LUKS 设备的 LUKS 清理功能。</block>
  <block id="fdba6fb56d2b6fb4d3d2af782f7f8e33" category="list-text">增强了Trident节点对NVMe卷挂载和分离的幂等性。</block>
  <block id="ab129514c6ec5bf9326f9283a0c4b73d" category="list-text">额外<block ref="93e2011fcb40991e51f3f8427fdcfb82" prefix=" " category="inline-code"></block>字段到ONTAP -SAN-Economy 驱动程序的Trident卷配置。</block>
  <block id="50e2eea9ba53d70147772db1c5d25f79" category="inline-link-macro">使用SnapMirror复制卷</block>
  <block id="68e904dfe8bbc558c556cc39aaca54b6" category="list-text">为 NVMe 后端添加了对SnapMirror卷复制的支持。看<block ref="0837d9a30d067376d83aa60bb79334f8" category="inline-link-macro-rx"></block>。</block>
  <block id="99feca4f342726633c553b7037f4effd" category="section-title">实验性增强</block>
  <block id="78eb403f568b0e64b07699199ebc4992" category="admonition">不可用于生产环境。</block>
  <block id="3dd4403c2b5ea69ecfbe030e29eee853" category="list-text">[技术预览] 通过以下方式启用并发的Trident控制器操作<block ref="663f61c1cf47f8a531c8d769e8bf59f4" prefix=" " category="inline-code"></block>功能标志。这样一来，控制器操作就可以并行运行，从而提高繁忙或大型环境的性能。</block>
  <block id="8a54b5275af086a6a2bb3983856d3f56" category="admonition">此功能为实验性功能，目前仅支持使用ONTAP-SAN 驱动程序（iSCSI 和 FCP 协议）的有限并行工作流程。</block>
  <block id="969ab4db9d9d63b4573cc75a0b550b21" category="list-text">【技术预览】为 ANF 驱动程序添加了手动 QOS 支持。</block>
  <block id="fa420d9ecbb50720fc93ab14f7943b42" category="list-text">修复了 CSI NodeExpandVolume 的一个问题，即当底层 SCSI 磁盘不可用时，多路径设备的大小可能会不一致。</block>
  <block id="69e0fec3be54a3b91103c8c7b788339f" category="list-text">修复了ONTAP-NAS 和ONTAP-NAS-Economy 驱动程序的重复导出策略清理失败的问题。</block>
  <block id="6e02211c85412fa0d990bce8af9e671f" category="list-text">修复了 GCNV 卷默认使用 NFSv3 的问题<block ref="e477739f39dbd2f1e1c5268912135e92" prefix=" " category="inline-code"></block>未设置；现在同时支持 NFSv3 和 NFSv4 协议。如果<block ref="e477739f39dbd2f1e1c5268912135e92" prefix=" " category="inline-code"></block>如果未提供，则将使用主机的默认 NFS 版本（NFSv3 或 NFSv4）。</block>
  <block id="aaa014969ef27003313b67f83fe7091d" category="inline-link-macro">第831期</block>
  <block id="cd620e798a4bbf9171d504843ebb70d0" category="list-text">修复了使用 Kustomize 安装Trident时出现的部署问题（<block ref="ae3bb668f87d2aa74a2bfe43dedc0001" category="inline-link-macro-rx"></block> ）。</block>
  <block id="81a9708305846c55b26ba31f647ab071" category="inline-link-macro">第1016期</block>
  <block id="11cdedcfa10c010ee258407d4a2535c9" category="list-text">修复了从快照创建的 PVC 缺少导出策略的问题（<block ref="dfbabc79dc25039e80d49a5ce74702bc" category="inline-link-macro-rx"></block> ）。</block>
  <block id="1e655d3e31833883db169632edf4c07d" category="list-text">修复了 ANF 卷大小无法自动按 1 GiB 增量对齐的问题。</block>
  <block id="c2c862a452feb157ea36fc61c62cb6d5" category="list-text">修复了使用 Bottlerocket 时 NFSv3 出现的问题。</block>
  <block id="21a4addc7283b0fef748a52987809884" category="list-text">修复了使用SolidFire后端克隆卷时出现的超时问题（<block ref="ff387119bc332768d9a3831513d005d5" category="inline-link-macro-rx"></block> ）。</block>
  <block id="1d85be817e7793c5b5423dbe7a618b9b" category="list-text">修复了ONTAP-NAS-Economy 卷在调整大小失败的情况下仍可扩展至 300 TB 的问题。</block>
  <block id="9bfdfc993711fd8c92649ae6040af106" category="list-text">修复了使用ONTAP REST API 时克隆拆分操作同步执行的问题。</block>
  <block id="d7061136425214e6ed7ba38910be5772" category="section-title">弃用：</block>
  <block id="eb0a31990fe8d3afbb4177136e0a9c3b" category="list-text">*Kubernetes*：已将最低支持的 Kubernetes 版本更新至 v1.27。</block>
  <block id="df6370ee6ad8bc05b4c28dc223a119ea" category="list-text">提高了恢复速度，并提供了更频繁执行完整备份的选项。</block>
  <block id="6d133839389fad9d044a57e7cd98852e" category="list-text">改进了应用程序定义的粒度，并可通过组版本类型 (GVK) 筛选进行选择性恢复。</block>
  <block id="d22659d02ebeb222423ac210fcf66e17" category="list-text">使用 AppMirrorRelationship (AMR) 和NetApp SnapMirror时，可实现高效的重新同步和反向复制，从而避免完全 PVC 复制。</block>
  <block id="9f36be3db329921235443aaf292d3420" category="list-text">新增了使用 EKS Pod Identity 创建 AppVault 存储桶的功能，无需为 EKS 集群指定存储桶凭据的密钥。</block>
  <block id="608712f29e31abc332f5d43892969412" category="list-text">增加了在恢复命名空间时跳过恢复标签和注释的功能（如果需要）。</block>
  <block id="6d520f4b800d8a65184cb0662edd01eb" category="list-text">AppMirrorRelationship (AMR) 现在将检查源 PVC 扩展，并根据需要对目标 PVC 执行相应的扩展。</block>
  <block id="68782d548164f602a09d8cf18a70a1a6" category="list-text">修复了之前快照的快照注释值被应用到新快照的错误。所有快照注释现已正确应用。</block>
  <block id="dec377bcea0a22bcf50bcfa52f5bd102" category="list-text">默认情况下，为数据移动器加密（Kopia / Restic）定义了一个密钥，如果未定义则不会定义。</block>
  <block id="2b587d6f0a98259d243f20158ba733b9" category="list-text">为 S3 应用库创建添加了改进的验证和错误消息。</block>
  <block id="38ada36ef84c3af0ce6c4562c412938e" category="list-text">AppMirrorRelationship (AMR) 现在只复制处于绑定状态的 PV，以避免复制失败。</block>
  <block id="e06ab528ad98b563963e366c18280c8d" category="list-text">修复了在具有大量备份的 AppVault 上获取 AppVaultContent 时显示错误的问题。</block>
  <block id="8009158785ac016dca3550bd3aadcf47" category="list-text">为避免故障，KubeVirt VMSnapshots 被排除在恢复和故障转移操作之外。</block>
  <block id="96c54179d89a7223d86e09ea0181939b" category="list-text">修复了 Kopia 的一个问题，即由于 Kopia 的默认保留计划覆盖了用户在计划中设置的内容，导致快照被过早删除。</block>
  <block id="ccc6e323e1b274244c3180ae807ca261" category="section-title">25.02.1 中的变更</block>
  <block id="d72c3d84865c2955b89cbf6e0ec00ada" category="inline-link-macro">第983期</block>
  <block id="ac76c3fcac41a10bd5f709108875e6c6" category="list-text">修复了 trident-operator 在使用非默认镜像仓库时 sidecar 镜像名称和版本填充不正确的问题 (<block ref="524f95fe3800e5d3ef82e615d679c539" category="inline-link-macro-rx"></block> ）。</block>
  <block id="d6dc63ac67744b1aac236b69c66dfde2" category="inline-link-macro">第961期</block>
  <block id="7bc2d7846b2e95d3f64a4d4f4b53cc3c" category="list-text">修复了ONTAP故障转移恢复期间多路径会话无法恢复的问题（<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block> ）。</block>
  <block id="212dff1a74c955a52357c5a67478720d" category="section-title">25.02 中的变化</block>
  <block id="f732fd09d1f97b63aaad6d5a80382f0c" category="list-text">增加了对ONTAP ASA r2 的 iSCSI 支持。</block>
  <block id="87959ecf0c52ae4baca9f7e962286ec1" category="list-text">增加了对在非正常节点关闭情况下强制分离ONTAP-NAS 卷的支持。新的ONTAP-NAS 卷现在将使用由Trident管理的按卷导出策略。为现有卷提供升级路径，使其在取消发布时过渡到新的导出策略模型，而不会影响正在运行的工作负载。</block>
  <block id="09abe7a508b1461d2b42cd082e9680aa" category="list-text">添加了 cloneFromSnapshot 注解。</block>
  <block id="9746cecbe2eafd28277700bbaea79ccf" category="list-text">增加了对跨命名空间卷克隆的支持。</block>
  <block id="1cd9d07d7ac9faf3b1d1e464094fed79" category="list-text">增强 iSCSI 自愈扫描修复功能，可通过精确的主机、通道、目标和 LUN ID 启动重新扫描。</block>
  <block id="c2653fd16e9e4da4d4d738616dcb956a" category="list-text">增加了对 Kubernetes 1.32 的支持。</block>
  <block id="2e110255627afe2fff57458d9bb2205b" category="list-text">*OpenShift*：</block>
  <block id="ddbeca6e89eb34fdc94eeec79b9f6a43" category="list-text">为 ROSA 集群上的 RHCOS 添加了自动 iSCSI 节点准备支持。</block>
  <block id="4e602d306baa843baf9ed9bd9ce452b1" category="list-text">为ONTAP驱动程序添加了对 OpenShift 虚拟化的支持。</block>
  <block id="e5f47a8bc4c6e320936843808b4b8392" category="list-text">ONTAP-SAN驱动程序新增了光纤通道支持。</block>
  <block id="00a0b47f2d2eb76897798a0b983daf88" category="list-text">新增NVMe LUKS支持。</block>
  <block id="890fc08a388302375744ade0476c1409" category="list-text">所有基础图像均已切换为临时图像。</block>
  <block id="35805c702a0d37de58fd020d28318c88" category="list-text">添加了 iSCSI 连接状态发现和日志记录功能，用于记录 iSCSI 会话应该登录但实际未登录的情况（<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block> ）。</block>
  <block id="121a804f61cdaf83f9c80e5b2ecf5658" category="list-text">添加了对使用 google-cloud-netapp-volumes 驱动程序的 SMB 卷的支持。</block>
  <block id="92ce3c86905470d0feaa428d8438bf74" category="list-text">增加了对ONTAP卷在删除时跳过恢复队列的支持。</block>
  <block id="7b97d5f955a87ceaab8fdc5ee542dd5d" category="list-text">新增了使用 SHA 值而非标签覆盖默认图像的功能。</block>
  <block id="8064b658df7d1098fbc06c88a182a398" category="list-text">为 tridentctl 安装程序添加了 image-pull-secrets 标志。</block>
  <block id="a6b7ff9774a7997f58d8eeff9907ae1f" category="inline-link-macro">第965期</block>
  <block id="6cb0e6987f921e8d1b11fc9850d89d90" category="list-text">修复了自动导出策略中缺失的节点 IP 地址（<block ref="54a0e12625c53fbb79b83159edf0dab4" category="inline-link-macro-rx"></block> ）。</block>
  <block id="2ad835ef65ba9fef1c3b178d86eb59b1" category="list-text">修复了ONTAP-NAS-Economy 的自动导出策略过早切换到按卷策略的问题。</block>
  <block id="a794d83b092a8031769c2bcf2a88ceb5" category="inline-link-macro">第913期</block>
  <block id="cfc9cd0ab1d20f67db270bed8d63126c" category="list-text">修复后端配置凭证，以支持所有可用的 AWS ARN 分区（<block ref="00fe04b68c89d56b5fe9076943919a54" category="inline-link-macro-rx"></block> ）。</block>
  <block id="375e43b9a6d4ec413731b638ec0945b5" category="inline-link-macro">第924期</block>
  <block id="50da178eec9235ba0a85999374d51cba" category="list-text">在Trident操作符中添加了禁用自动配置器协调的选项（<block ref="95579fcabb606a95f307c6ba89588c08" category="inline-link-macro-rx"></block> ）。</block>
  <block id="16aa6756a13a48723b3d2bc4bf50c104" category="inline-link-macro">第976期</block>
  <block id="60b04b91abae29736bd23b21579be5cb" category="list-text">为 csi-resizer 容器添加了 securityContext（<block ref="a97be45bfcdf3eeaee81dc9917811f8f" category="inline-link-macro-rx"></block> ）。</block>
  <block id="7df125a00671c08a40e0225c8e7bfe51" category="list-text">为 Kubevirt 环境增加了在应用程序级别控制冻结行为的功能。</block>
  <block id="bde8e1e3de96ead9884d920004bad3bf" category="list-text">增加了对配置AutoSupport代理连接的支持。</block>
  <block id="3a3a7f688efad3284b8088de98d9c990" category="list-text">增加了为数据移动加密（Kopia / Restic）定义密钥的功能。</block>
  <block id="7bd24598cff0819911511e7a4114afc9" category="list-text">增加了手动运行执行钩子的功能。</block>
  <block id="b5b9bc3aab84e4b648c1432f95ac9294" category="list-text">为 AppVault 对象添加了对 HTTP / HTTPS 出口代理的支持。</block>
  <block id="e7ce2b289382a615113880a71867a2fb" category="list-text">扩展资源过滤器，以排除集群范围的资源。</block>
  <block id="230ae1ea7310e8fa80a6cd9e6208085e" category="list-text">为 S3 AppVault 凭证添加了对 AWS 会话令牌的支持。</block>
  <block id="639c61df343e77e3de0b8188942cb635" category="list-text">增加了对快照执行钩子之后资源收集的支持。</block>
  <block id="31ddfac7cfd4824f2708b4b925145a29" category="list-text">改进了临时卷的管理，使其跳过ONTAP卷恢复队列。</block>
  <block id="b9b8b880b51afd88c2f4e04a85fe762e" category="list-text">SCC 注释现已恢复为原始值。</block>
  <block id="b045f8636f0c21a7fefb437149e20dc9" category="list-text">支持并行操作，提高了恢复效率。</block>
  <block id="8f35f1b8a50531165f36731d30906b11" category="list-text">增强了对大型应用程序执行钩子超时的支持。</block>
  <block id="ef5363598e9b6f09c42a4f11b7798e31" category="section-title">24.10.1 中的变更</block>
  <block id="fe28e2a5f749261aca15de7b9e5841d0" category="list-text">*Kubernetes*：新增对 Kubernetes 1.32 的支持。</block>
  <block id="3da21bcb163e7e142caada3e22ac014f" category="list-text">更新了Trident和 Trident-ASUP 依赖项，以解决 CVE-2024-45337 和 CVE-2024-45310。</block>
  <block id="eeda04a5133a10ebd4956c7d83dfd389" category="list-text">在 iSCSI 自愈期间，移除间歇性不健康的非 CHAP 门户的注销操作 (<block ref="0939f851f18acedadb7fdffdec6d140b" category="inline-link-macro-rx"></block> ）。</block>
  <block id="c7e79f1db15a592daab7f7427aef79d5" category="section-title">24.10 中的变化</block>
  <block id="f219960762ce1ea892bf48746515e583" category="list-text">Google Cloud NetApp Volumes驱动程序现已正式推出，适用于 NFS 卷，并支持区域感知配置。</block>
  <block id="09dc81fef04f949a006210deaff2f205" category="list-text">GCP Workload Identity 将用作Google Cloud NetApp Volumes与 GKE 的云身份。</block>
  <block id="179837f123bf751c03460e6d2e0927c2" category="list-text">额外<block ref="ef225248e79c14501d51a4941b5ae5d1" prefix=" " category="inline-code"></block>向ONTAP-SAN 和ONTAP-SAN-Economy 驱动程序添加配置参数，允许用户指定 LUN 格式选项。</block>
  <block id="b500d40dfa3ea14369fdaf59d3b1c835" category="list-text">将Azure NetApp Files卷的最小大小减少到 50 GiB。  Azure 新的最小系统规模预计将于 11 月正式推出。</block>
  <block id="2e6f95101e443ed93c211c35457a90e6" category="list-text">额外<block ref="80fd16da9d17abac4374b362f2e409fe" prefix=" " category="inline-code"></block>配置参数，用于将ONTAP-NAS-Economy 和ONTAP-SAN-Economy 驱动程序限制为预先存在的 Flexvol 池。</block>
  <block id="bf300dbe4f3e7fba7ef23cdf029d7f54" category="list-text">增加了对所有ONTAP驱动程序中 SVM 聚合的添加、删除或重命名的检测。</block>
  <block id="193dc4f3e19f36ad5c6f2ad43ea53a42" category="list-text">向 LUKS LUN 添加了 18 MiB 开销，以确保报告的 PVC 大小可用。</block>
  <block id="b0587c4582678977a894feccef58eb73" category="list-text">改进了ONTAP-SAN 和ONTAP-SAN-Economy 节点阶段和取消阶段错误处理，允许取消阶段操作在阶段失败后移除设备。</block>
  <block id="914e332f78206303c5897d6de3d31dc4" category="list-text">添加了自定义角色生成器，允许客户在ONTAP中为Trident创建极简角色。</block>
  <block id="54a5a20d9182724aeda126c68ff2d500" category="inline-link-macro">第792期</block>
  <block id="ae953ee35cc48d929d62cd63fe1a5db9" category="list-text">增加了额外的故障排除日志记录<block ref="2a18927ad567a1bf015ee23d2f7d416f" prefix=" " category="inline-code"></block>（<block ref="0ac90c45cb5e08b111534147dc8d07bf" category="inline-link-macro-rx"></block> ）。</block>
  <block id="c4407b1cc5192fe600872654a5ffe223" category="list-text">为 Kubernetes 原生工作流添加了新的Trident功能：</block>
  <block id="7e7397a7b79323762c61941fc0e6b5f9" category="list-text">数据保护</block>
  <block id="5866b98c049a53ea6dc7f50f9349f434" category="list-text">数据迁移</block>
  <block id="645a84975202e30700b572b49a5ee29d" category="list-text">灾难恢复</block>
  <block id="11d5920d0c0b3a97e764f84dc92ef110" category="list-text">应用移动性</block>
  <block id="85be3851760f745038ec3bba18d62914" category="list-text">新增标志<block ref="8a3f78e98fdbc7da7e036e7ae4598a23" prefix=" " category="inline-code"></block>指示安装程序设置Trident用于与 Kubernetes API 服务器通信的 QPS 值。</block>
  <block id="46b4e7bf1e76e8eeb88747ded42b6d4f" category="list-text">额外<block ref="1606f6268af560ddbfffdd3790afb4d2" prefix=" " category="inline-code"></block>向安装程序发出信号，以便自动管理 Kubernetes 集群节点上的存储协议依赖项。已测试并验证与 Amazon Linux 2023 iSCSI 存储协议的兼容性</block>
  <block id="ee2cc86dbfffd3b53ed4701a6b458dfb" category="list-text">增加了对ONTAP-NAS-Economy 卷在非正常节点关闭场景下强制分离的支持。</block>
  <block id="326a8f228f219b0e904c9d182f05edc0" category="list-text">新的ONTAP-NAS-Economy NFS 卷在使用时将采用基于 qtree 的导出策略<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>后端选项。 Qtree 仅在发布时才会映射到节点限制性导出策略，以提高访问控制和安全性。当Trident从所有节点取消发布卷时，现有的 qtree 将切换到新的导出策略模型，这样就不会影响正在进行的工作负载。</block>
  <block id="62900e6f021ab726737e77fc086ef8d8" category="list-text">增加了对 Kubernetes 1.31 的支持。</block>
  <block id="b4da90c52a04dd004929d86ec62cc931" category="list-text">ONTAP-SAN驱动程序新增了对光纤通道支持的技术预览。</block>
  <block id="d17c6ce149a6479587ff459c15a1f857" category="inline-link-macro">第839期</block>
  <block id="0d72ada08f4f4a9200f5e98c300ac3f5" category="list-text">修复了 Rancher 准入 webhook 阻止Trident Helm 安装的问题（<block ref="db779c46d1b4e6ce40c3816626258ba8" category="inline-link-macro-rx"></block> ）。</block>
  <block id="c4a8381892da41f8d4badcb947360547" category="inline-link-macro">第898期</block>
  <block id="2403ede55427cd43025cacf6e3c01d80" category="list-text">固定 Helm Chart 值中的亲和力键（<block ref="54ec46fe50699b7fd3f7ef30c485e12a" category="inline-link-macro-rx"></block> ）。</block>
  <block id="72ce7c26f0607a9f5bd8ca30e55cacef" category="inline-link-macro">第899期</block>
  <block id="cede03cb51e9bbed6dcab643181d12d7" category="list-text">已修复 tridentControllerPluginNodeSelector/tridentNodePluginNodeSelector 无法处理“true”值（<block ref="5d339a433df6492948708982baf428fa" category="inline-link-macro-rx"></block> ）。</block>
  <block id="f11d62f384cbec26d8ed4550c153bf05" category="inline-link-macro">第901期</block>
  <block id="a0b1bd692e916f05f2ede181b41aa8a9" category="list-text">克隆过程中创建的已删除临时快照（<block ref="ef65b2f52a8de25e7edcbd74532daf2c" category="inline-link-macro-rx"></block> ）。</block>
  <block id="7d873532774b92f91f5b02b26b6ab15f" category="list-text">新增对 Windows Server 2019 的支持。</block>
  <block id="c1932a20d0117f7b70be58add390f98b" category="inline-link-macro">第767期</block>
  <block id="b205e07db438d75480a1439aaea49b90" category="list-text">修复了Trident仓库中的 `go mod tidy`（<block ref="b886e4c1dbe24e4b012cebe88d7f5dfa" category="inline-link-macro-rx"></block> ）。</block>
  <block id="a4233200da50a08b295311036bb03ac1" category="section-title">弃用</block>
  <block id="0c1b395b1875f8cc0a3a3065e200951a" category="list-text">*Kubernetes:*</block>
  <block id="86c0118c20bbec39a37e58e07b4ca78e" category="list-text">已将支持的最低 Kubernetes 版本更新至 1.25。</block>
  <block id="8b1b4442b4204fbf84931236c6402e37" category="list-text">已移除对 POD 安全策略的支持。</block>
  <block id="4f52a386be5239d16bac5e9e054c7686" category="section-title">产品品牌重塑</block>
  <block id="487dc96e91d89134e7a216bab529a019" category="paragraph">从 24.10 版本开始， Astra Trident更名为Trident （Netapp Trident）。此次品牌重塑不会影响Trident的任何功能、支持的平台或互操作性。</block>
  <block id="b56fb7b6833a5dc3a047885cd9fb56b3" category="section-title">24.06 中的变化</block>
  <block id="68fed7a5dad5dbe38e73f242591f9cdc" category="inline-link-macro">第341期</block>
  <block id="79695bf027de5b53252ad567db19afc0" category="list-text">**重要提示**：<block ref="e083f2ed1275af0ce4336a068ebee72a" prefix=" " category="inline-code"></block>该参数现在限制ONTAP经济型驱动程序中的 qtree/LUN 大小。使用新的<block ref="c8f83e727d4a4255a6485c24776e86bb" prefix=" " category="inline-code"></block>用于控制这些驱动程序中 Flexvol 大小的参数。  （<block ref="43e193e4ec566def2b1890b13e291e7f" category="inline-link-macro-rx"></block> ）。</block>
  <block id="f8a74109e040a7d2fe11f386046e7f0f" category="inline-link-macro">第883期</block>
  <block id="d9b039cc0482c40024b1c3e5b5bfab48" category="list-text">增加了 iSCSI 自愈功能，以便在使用已弃用的 igroup 时通过精确的 LUN ID 启动 SCSI 扫描 (<block ref="1db457cca48a821c9957caae88cdf1d0" category="inline-link-macro-rx"></block> ）。</block>
  <block id="624c548303efc06e3245885cb046ce02" category="list-text">增加了对卷克隆和调整大小操作的支持，即使后端处于挂起模式也允许执行这些操作。</block>
  <block id="59757b96b5b7c76f5131b54a97bfb34b" category="list-text">增加了将Trident控制器的用户配置日志设置传播到Trident节点 pod 的功能。</block>
  <block id="bf8ced7df51ab8a52eb2f62a26930270" category="list-text">Trident增加了对ONTAP 9.15.1 及更高版本默认使用 REST 而不是 ONTAPI (ZAPI) 的支持。</block>
  <block id="53e2f13be42e180fc96be9feca214cc0" category="list-text">ONTAP存储后端新增了对自定义卷名称和元数据的支持，用于创建新的持久卷。</block>
  <block id="f22dddc969b204ba1f08fd5b6dccf9e5" category="list-text">增强了<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>（ANF）驱动程序，当 NFS 挂载选项设置为使用 NFS 版本 4.x 时，默认自动启用快照目录。</block>
  <block id="b480f0e15ab56f178942ac571ef3d0b4" category="list-text">增加了对 NFS 卷的 Bottlerocket 支持。</block>
  <block id="2b1f345aa37d468275a96267dbf3cc86" category="list-text">新增对Google Cloud NetApp Volumes的技术预览支持。</block>
  <block id="e422e290c66eca7f882976f830b781b4" category="list-text">增加了对 Kubernetes 1.30 的支持。</block>
  <block id="0d9957366afc474c1adc655929d57fcc" category="list-text">为Trident DaemonSet 添加了在启动时清理僵尸挂载点和残留跟踪文件的功能（<block ref="1db457cca48a821c9957caae88cdf1d0" category="inline-link-macro-rx"></block> ）。</block>
  <block id="d329ee31cea82ba7b18282e9874fd6fb" category="inline-link-macro">第849期</block>
  <block id="7bdef3d1e5eba62c2c49345689cb034e" category="list-text">添加了PVC注释<block ref="36720d50814e4335401b2047257bfedf" prefix=" " category="inline-code"></block>用于动态导入 LUKS 卷（<block ref="8164e77c784c82617684b3113cbe7b39" category="inline-link-macro-rx"></block> ）。</block>
  <block id="88cc43db200dd9a0ba8b9f3d2b3494c5" category="list-text">为 ANF 驱动程序添加了拓扑感知功能。</block>
  <block id="bd97885496639b0f4498d4131198ac36" category="list-text">新增对 Windows Server 2022 节点的支持。</block>
  <block id="32c6cb7d24cfe592a3da026077c89057" category="list-text">修复了由于过期交易导致的Trident安装失败问题。</block>
  <block id="5f9e29078ffd406f09be67dadfa65c81" category="inline-link-macro">第892期</block>
  <block id="d2e65e05e52ae58b1bc83b9f92667bc4" category="list-text">修复了 tridentctl 忽略来自 Kubernetes 的警告消息的问题（<block ref="74b3b54ef301f7904eaa2691276657ad" category="inline-link-macro-rx"></block> ）。</block>
  <block id="6d20ebb6924fd1c28927afadfd523477" category="inline-link-macro">第887期</block>
  <block id="268938527c6b78a7ed673063e5a861e7" category="list-text">更换了Trident控制器<block ref="4727953cbcafc9a49db2d5e1fbb4878a" prefix=" " category="inline-code"></block>优先<block ref="cfcd208495d565ef66e7dff9f98764da" prefix=" " category="inline-code"></block>（<block ref="f7f5a51d8afc55795aa860b78e4c6437" category="inline-link-macro-rx"></block> ）。</block>
  <block id="e0d3d678b5ec46031ee8c6afb7413c9e" category="inline-link-macro">问题[#885</block>
  <block id="85034b8ca1df8fbc112b8206cf773406" category="list-text">ONTAP驱动程序现在接受小于 20 MiB 的卷大小（<block ref="91ddf20e925712134071a4cc83fc66a3" category="inline-link-macro-rx"></block> ）。</block>
  <block id="629823c949babd4c929b5092cd5e2745" category="list-text">修复了Trident ，以防止在ONTAP -SAN 驱动程序调整大小操作期间FlexVol卷缩小。</block>
  <block id="62a3f40ae48e77863d3e5bdef59c1adb" category="list-text">修复了 NFS v4.1 中 ANF 卷导入失败的问题。</block>
  <block id="6a89b6f002954f791e28c8dd2f2afcc8" category="section-title">24.02 中的变化</block>
  <block id="ad8deb3ead6fe765f774fdb1b4d51494" category="list-text">新增对云身份的支持。</block>
  <block id="1ed2e28ed5e329359ed11fa6b3213f12" category="list-text">将使用 AKS 和 ANF - Azure 工作负载标识作为云标识。</block>
  <block id="685239028773625de0a3fdc18c584dcc" category="list-text">EKS 与 FSxN - 将使用 AWS IAM 角色作为云身份。</block>
  <block id="f81abe23ec78b1087f167b2fcf413105" category="list-text">增加了从 EKS 控制台将Trident作为插件安装到 EKS 集群的支持。</block>
  <block id="a78644e58f124252a596fb7bd5a3f0e3" category="inline-link-macro">第864期</block>
  <block id="45691f8c8852e7e9f8cf8e2ca1fd1a31" category="list-text">增加了配置和禁用 iSCSI 自愈功能 (<block ref="eebe101dfd60623e764ed89e9c35e13c" category="inline-link-macro-rx"></block> ）。</block>
  <block id="77a876e8901fcb15dc01c057f3102ab6" category="inline-link-macro">第453期</block>
  <block id="f327f341da3048e9e44264cc06a32d7e" category="list-text">为ONTAP驱动程序添加了Amazon FSx特性，以启用与 AWS IAM 和 SecretsManager 的集成，并使Trident能够删除带有备份的 FSx 卷 (<block ref="7c3258c670b686f5f475bd6b06dfec79" category="inline-link-macro-rx"></block> ）。</block>
  <block id="210645e9f461c75a53d611ad7ca29990" category="list-text">新增对 Kubernetes 1.29 的支持。</block>
  <block id="40c23d891efbf79122ffcbfdd4e1fc28" category="inline-link-macro">第866期</block>
  <block id="b39a2f3ca5558cdf70a39aaa44921e02" category="list-text">修复了未启用 ACP 时的 ACP 警告消息（<block ref="8b8bf8931a263b3cadfea0d794486463" category="inline-link-macro-rx"></block> ）。</block>
  <block id="694637a910367ab017767d1135910517" category="list-text">在ONTAP驱动程序中，当克隆与快​​照关联时，在删除快照期间执行克隆拆分之前，增加了 10 秒的延迟。</block>
  <block id="52a6fa0a11a7afe868a3a84e42cff7a1" category="list-text">从多平台镜像清单中移除了 in-toto 认证框架。</block>
  <block id="1fc7da31107247b07ab3abf335b217de" category="section-title">23.10 中的变化</block>
  <block id="2564a762d021b4beae21f01627773c0f" category="inline-link-macro">第834期</block>
  <block id="e53ddb8a6947ad5b93f8c82a86836f16" category="list-text">对于 ontap-nas 和 ontap-nas-flexgroup 存储驱动程序，如果新请求的大小小于总卷大小，则固定卷扩展（<block ref="6140c2bc2ecfc555b47da5841f5fd8ae" category="inline-link-macro-rx"></block> ）。</block>
  <block id="d52fe9ebb96cf9ce91bf00e0caa773de" category="inline-link-macro">第722期</block>
  <block id="676394929bfe922b6aff300499cef5a9" category="list-text">固定卷大小，以便在导入 ontap-nas 和 ontap-nas-flexgroup 存储驱动程序时仅显示卷的可用大小（<block ref="1ec6a9e212fa13524af3f3c296d6bb72" category="inline-link-macro-rx"></block> ）。</block>
  <block id="c2b105e6592336c26afd4f39319a222e" category="list-text">修复了ONTAP -NAS-Economy 的FlexVol名称转换问题。</block>
  <block id="81a270127bea2c4d04088d2a999f883e" category="list-text">修复了 Windows 节点重启后Trident初始化出现的问题。</block>
  <block id="b680f5ddc32b78c78329f3f15a836381" category="paragraph">增加了对 Kubernetes 1.28 的支持。</block>
  <block id="2284dc5d4add6f82e5bc0121aa82a816" category="list-text">增加了对使用 Azure 托管标识 (AMI) 和 azure-netapp-files 存储驱动程序的支持。</block>
  <block id="be1e775eed9a7023c7facbd3f3cd32cd" category="list-text">为ONTAP-SAN 驱动程序添加了对 NVMe over TCP 的支持。</block>
  <block id="24a3b687404991a8b5d83740bfde9f9c" category="inline-link-macro">第558期</block>
  <block id="86826a04ec735c436222d55949b27e52" category="list-text">增加了当后端被用户设置为暂停状态时暂停卷配置的功能（<block ref="4ad3a18b49b4979346d26b5940c21a0f" category="inline-link-macro-rx"></block> ）。</block>
  <block id="d4eb6933e70b3c49a70e1d8427489044" category="section-title">23.07.1 中的变更</block>
  <block id="63bfc0691d397470e5b0b05f2a9bcbe4" category="inline-link-macro">第740期</block>
  <block id="06918a8f55f386d79e64a70ca217b501" category="paragraph">*Kubernetes：*修复了守护进程集删除问题，以支持零停机升级（<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block> ）。</block>
  <block id="ca6a658f1db1af30f178530c90cbe8fc" category="section-title">23.07 中的变化</block>
  <block id="c8af8b49eb3be9ce411280db66de8a12" category="list-text">修复了Trident升级，使其忽略处于终止状态的旧 pod（<block ref="6f993c83118cc4a1dd5351c8501e26c9" category="inline-link-macro-rx"></block> ）。</block>
  <block id="cf182305f6f941fa317842399de1ca4a" category="inline-link-macro">第795期</block>
  <block id="4f2f189f428da83c5c5d7e21123fb37a" category="list-text">为“transient-trident-version-pod”定义添加了容忍度（<block ref="cc0c8d3c31e9e289114ade0ef394e90b" category="inline-link-macro-rx"></block> ）。</block>
  <block id="0f6d5d982c20f6f746c8e4019cc039f8" category="list-text">修复了 ONTAPI (ZAPI) 请求，以确保在获取 LUN 属性时查询 LUN 序列号，从而在节点暂存操作期间识别和修复幽灵 iSCSI 设备。</block>
  <block id="d5d58a85f5f4a2ac889804742dd7cbb0" category="inline-link-macro">第816期</block>
  <block id="057a4c7c1e2ca8cd3deafe12ee9f2083" category="list-text">修复了存储驱动程序代码中的错误处理（<block ref="9862a2577d865ba18fdd2c972f46545b" category="inline-link-macro-rx"></block> ）。</block>
  <block id="97327b29ec21422eaecf8ba479782331" category="list-text">修复了使用带有 use-rest=true 的ONTAP驱动程序时配额调整的问题。</block>
  <block id="4e6566ec95776d26fcd04a8b88c3e2bc" category="list-text">修复了 ontap-san-economy 中的 LUN 克隆创建问题。</block>
  <block id="dcfc8521cd4d3b29941e756366e00988" category="list-text">恢复发布信息字段<block ref="380d41b2be72ecdeb109d9d8bf377a97" prefix=" " category="inline-code"></block>到<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block>添加了用于填充和恢复（某些情况下）的逻辑<block ref="cad41ea6c72f7b62b784d199bdd6ec73" prefix=" " category="inline-code"></block>场地。</block>
  <block id="4f2d668b01cf06eca683c287dd7e5082" category="list-text">新增对导入预配置快照的支持。</block>
  <block id="c47a181e80e553128675166326adecf7" category="inline-link-macro">第817期</block>
  <block id="5f595b574bc00c971991f9f665431b60" category="list-text">最小化部署和守护进程集 Linux 权限（<block ref="aef28cf398bf45d3657483afbc3d3240" category="inline-link-macro-rx"></block> ）。</block>
  <block id="62dcabbe3f6dc07f213482f5acada256" category="list-text">不再报告“在线”卷和快照的状态字段。</block>
  <block id="4ff2bb4ecc0b6d51be0477f9d63d5273" category="inline-link-macro">第 801 期</block>
  <block id="9fde208cd399f14480a57fc99b20d291" category="inline-link-macro">#543</block>
  <block id="0696447eb82cdf62dcb8b6c916f35746" category="list-text">如果ONTAP后端离线，则更新后端状态（<block ref="961e04dd6eabff35abb325a6607994ca" category="inline-link-macro-rx"></block> ，<block ref="fc57c79b0b6691b508ed06011d9f5581" category="inline-link-macro-rx"></block> ）。</block>
  <block id="277ca88d500a9627118781ff85088e70" category="list-text">LUN 序列号始终在 ControllerVolumePublish 工作流程中检索和发布。</block>
  <block id="810ba7b767989fc4c733ae7e9e3460cd" category="list-text">增加了额外的逻辑来验证 iSCSI 多路径设备的序列号和大小。</block>
  <block id="76ba5d25ded4cc29f1dbfeb16ad652f4" category="list-text">对 iSCSI 卷进行额外验证，以确保正确的多路径设备已取消暂存。</block>
  <block id="3f46c22d346dcb4ef51b664a9e105030" category="section-title">实验增强</block>
  <block id="866a2a7036f4701ef7fe25f161516e81" category="paragraph">为ONTAP-SAN 驱动程序添加了对 NVMe over TCP 的技术预览支持。</block>
  <block id="5b6cf869265c13af8566f192b4ab3d2a" category="section-title">文档</block>
  <block id="8e2ae59abc43c08fd49c55abd4da0925" category="paragraph">在组织结构和格式方面都进行了许多改进。</block>
  <block id="fbfae4e9fcac672dd7f5304651cd7713" category="list-text">已移除对 v1beta1 快照的支持。</block>
  <block id="662d0c4b0dab9a3aa7e86162000ad383" category="list-text">移除对 CSI 之前的卷和存储类的支持。</block>
  <block id="8c20e8f4703bb12917ce6ae87f5c65a1" category="list-text">已将支持的最低 Kubernetes 版本更新至 1.22。</block>
  <block id="30e50aa1d9f8718f34cb0ecbef4ec9ea" category="section-title">23.04 中的变化</block>
  <block id="3317f97754f7308b6a0e2a12c0241d39" category="admonition">仅当 Kubernetes 版本启用了非优雅节点关闭功能门时，才支持对ONTAP-SAN-* 卷强制分离。必须在安装时使用以下方式启用强制分离：<block ref="d75e90115a6343745df96039920422fc" prefix=" " category="inline-code"></block> Trident安装程序标志。</block>
  <block id="19466ff921af5aa01da62b42cdaaf617" category="list-text">修复了Trident Operator 在规范中指定时使用 IPv6 localhost 进行安装的问题。</block>
  <block id="5b313836498a7a26e99e4f084ee1baec" category="inline-link-macro">第799期</block>
  <block id="8743cc1328bba53ea356fd3e593a3f9c" category="list-text">修复了Trident Operator 集群角色权限，使其与捆绑包权限保持同步（<block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block> ）。</block>
  <block id="3a35c66b59df0fa02e2490983b964261" category="list-text">修复了在 RWX 模式下将原始块卷附加到多个节点的问题。</block>
  <block id="21b2b5bca26be7b23af4468b85c68b34" category="list-text">修复了FlexGroup克隆支持和 SMB 卷的卷导入问题。</block>
  <block id="c16e7ed05955f3a772cc5e37988626a6" category="inline-link-macro">第811期</block>
  <block id="c8b742414af3be73bd16e0c1ed978ae5" category="list-text">修复了Trident控制器无法立即关闭的问题（<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block> ）。</block>
  <block id="e82b00f6dda8d75f6267522d6e8e21b3" category="list-text">添加了修复程序，用于列出与使用 ontap-san-* 驱动程序配置的指定 LUN 关联的所有 igroup 名称。</block>
  <block id="97848233b9fe6ae43be1728a4e603020" category="list-text">添加了允许外部进程运行完成的修复程序。</block>
  <block id="3f32e3199847516d3773942171a3320e" category="inline-link-macro">第537期</block>
  <block id="8ac5248178b612abfaaec81ca7b06c94" category="list-text">修复了 s390 架构的编译错误（<block ref="a2e3737cce03fa6e94f8357a427b1da2" category="inline-link-macro-rx"></block> ）。</block>
  <block id="70d039054d2873e8b0f28587cb19086a" category="inline-link-macro">第781期</block>
  <block id="48b91d8b8b87d6d8c95cbc34bbae12e7" category="list-text">修复了卷挂载操作期间日志级别不正确的问题<block ref="8bb65f034421623db4038f879681c20b" category="inline-link-macro-rx"></block>）。</block>
  <block id="6c85ef6d99d7dc6999989d8228ad56d9" category="inline-link-macro">第802期</block>
  <block id="6edadfcf2d991f369cdf934677bb161a" category="list-text">修复了潜在的类型断言错误（<block ref="e6bc1d779eb6c87e7246c3841e50b482" category="inline-link-macro-rx"></block> ）。</block>
  <block id="bc5611c731b034c5f323419d0258aa44" category="list-text">Kubernetes：</block>
  <block id="afcf8fa41398f15ad38c5874372e9b4c" category="list-text">新增对 Kubernetes 1.27 的支持。</block>
  <block id="67db0e94c8905c93eda71f86cb532e07" category="list-text">新增对导入 LUKS 卷的支持。</block>
  <block id="6de845032edacfacdf7599428fce6ce3" category="list-text">增加了对 ReadWriteOncePod PVC 访问模式的支持。</block>
  <block id="9297bb6ec4e523b7875643c53cc9f528" category="list-text">增加了对在非正常节点关闭场景下强制分离ONTAP-SAN-* 卷的支持。</block>
  <block id="bf75c88234d165d6aa37891adda4465a" category="inline-link-macro">第758期</block>
  <block id="8ba74f6fd31160a630f1dc4eeb7d2e20" category="list-text">所有ONTAP-SAN-* 卷现在都将使用按节点 igroup。只有在 LUN 主动发布到这些节点时，才会将其映射到 igroup，以提高我们的安全态势。当Trident认为在不影响活动工作负载的情况下安全地将现有卷切换到新的 igroup 方案时，将会择机进行切换（<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block> ）。</block>
  <block id="79e79d7d8fe825308bd0e601daaa1131" category="list-text">通过从ONTAP -SAN-* 后端清理未使用的 Trident 管理的 igroup，提高了Trident 的安全性。</block>
  <block id="18596399dedf47a387f514e9c9862876" category="list-text">为 ontap-nas-economy 和 ontap-nas-flexgroup 存储驱动程序添加了对Amazon FSx SMB 卷的支持。</block>
  <block id="42bbebea36c49138518f54240583f571" category="list-text">增加了对 ontap-nas、ontap-nas-economy 和 ontap-nas-flexgroup 存储驱动程序的 SMB 共享的支持。</block>
  <block id="4332590e7a6bcbdc2a06dc0e18c0731b" category="inline-link-macro">第732期</block>
  <block id="5a8fc8277a0f6ed003c225aa1e7c48b6" category="list-text">增加了对 arm64 节点的支持（<block ref="c2778c70230759cdeecc0357ca334a05" category="inline-link-macro-rx"></block> ）。</block>
  <block id="69ef45b431e1a60332ee3ce7e1a67645" category="list-text">改进了Trident的关闭流程，首先停用API服务器（<block ref="6916c682464f601a812aa726b7255568" category="inline-link-macro-rx"></block> ）。</block>
  <block id="be70537c794b0fc1d909e1bf6ffbbc59" category="list-text">在 Makefile 中添加了对 Windows 和 arm64 主机的跨平台构建支持；请参阅 BUILD.md。</block>
  <block id="6f03549bdf867b6dbabec83da444ffcf" category="paragraph">**Kubernetes：**配置 ontap-san 和 ontap-san-economy 驱动程序时，将不再创建后端范围的 igroups（<block ref="9c63b965233843690f19867523ba780c" category="inline-link-macro-rx"></block> ）。</block>
  <block id="7558c614baceb6010756b848dd26325e" category="section-title">23.01.1 中的变更</block>
  <block id="b2fc842cefdc715af09b8d184e09db56" category="list-text">修复了Trident Operator 集群角色权限，使其与捆绑包权限保持同步。<block ref="25d51e363866fb30c759c73e05114b0d" category="inline-link-macro-rx"></block> 。</block>
  <block id="190a9f9a8311c8a23bff1fd7a5693342" category="section-title">23.01 中的变化</block>
  <block id="84874d4f1fcbda2a79fad9c2be463612" category="admonition">Trident现已支持 Kubernetes 1.27。请先升级Trident ，再升级 Kubernetes。</block>
  <block id="1a87abd79c966e67f73bbe738ffa4e59" category="inline-link-macro">第 783 期、第 794 期</block>
  <block id="3e45ffbc961fc6c429b6e91f16331ee5" category="list-text">Kubernetes：添加了排除 Pod 安全策略创建的选项，以修复通过 Helm 安装Trident 的问题（<block ref="f91cf268a0811064670bc9d51a6e2016" category="inline-link-macro-rx"></block> ）。</block>
  <block id="a47f012619aa18f9e2c0fbb53d5878d9" category="list-text">增加了对 Kubernetes 1.26 的支持。</block>
  <block id="d87b63603588c1795f58658ee14e505f" category="inline-link-macro">第757期</block>
  <block id="8e3bb4ae68afca021f39502f7954a450" category="list-text">提高了Trident RBAC资源的整体利用率（<block ref="92a5fe29b2be509e7db5f2091f236ee0" category="inline-link-macro-rx"></block> ）。</block>
  <block id="2508a7d2b2da760ab909b40a284aff9f" category="list-text">增加了自动化功能，用于检测和修复主机节点上损坏或过期的 iSCSI 会话。</block>
  <block id="80a9d5ab26eec41d6d6967415e991c91" category="list-text">增加了对扩展 LUKS 加密卷的支持。</block>
  <block id="1e209dc1ac5964d0a9b1f9c2e9f2fc83" category="list-text">Kubernetes：为 LUKS 加密卷添加了凭证轮换支持。</block>
  <block id="1ae87fd6923d3446058e089c56a6c49d" category="list-text">为 ontap-nas 存储驱动程序添加了对Amazon FSx for NetApp ONTAP 的SMB 卷的支持。</block>
  <block id="8ce5e316405255bac435287fc5b61f0e" category="list-text">增加了在使用 SMB 卷时对 NTFS 权限的支持。</block>
  <block id="e67f9f12d1f7c510d94da478c87b7d19" category="list-text">为具有 CVS 服务级别的 GCP 卷添加了存储池支持。</block>
  <block id="493569102442ea9186ac1061bb527388" category="list-text">在使用 ontap-nas-flexgroup 存储驱动程序创建 FlexGroups 时，增加了对可选使用 flexgroupAggregateList 的支持。</block>
  <block id="4e48fbbb41f5d5816d9638612c6e4171" category="list-text">改进了 ontap-nas-economy 存储驱动程序在管理多个FlexVol卷时的性能</block>
  <block id="c26c6c796afe3b5c10e0c830715daf3a" category="list-text">已为所有ONTAP NAS 存储驱动程序启用 dataLIF 更新。</block>
  <block id="56f71deb4744b8ffc7a92bde36d3f4d4" category="list-text">更新了Trident Deployment 和 DaemonSet 的命名约定，以反映主机节点操作系统。</block>
  <block id="6ea33f83a7d973b1fa7de807364662d4" category="list-text">Kubernetes：已将支持的最低 Kubernetes 版本更新为 1.21。</block>
  <block id="fcb4221a7bd32f5d31d2e30a8443eac9" category="list-text">配置时不应再指定 DataLIF。<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>或者<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>司机。</block>
  <block id="562840ed450b90bfe87c70479237a8da" category="section-title">22.10 中的变化</block>
  <block id="8bf4d4f1641bc0ae0e1ce84b2301ad3c" category="paragraph">*升级到Trident 22.10之前，请务必阅读以下重要信息。*</block>
  <block id="3c8c581ba3964d04278eae9be921969f" category="admonition-title">&lt;strong&gt;关于Trident 22.10 的关键信息&lt;/strong&gt;</block>
  <block id="2ec2ecd5679471f4915360aaa9562646" category="list-text">Trident现已支持 Kubernetes 1.25。在升级到 Kubernetes 1.25 之前，必须先将Trident升级到 22.10。</block>
  <block id="3fe15650bf774497f976b0dcd6e74e95" category="list-text">Trident现在严格强制要求在 SAN 环境中使用多路径配置，建议值为<block ref="db729c5c8df447087e5a84b961df14f6" prefix=" " category="inline-code"></block>在 multipath.conf 文件中。</block>
  <block id="84ec6afbbe3e33afb3eba2b0375718b1" category="inline-link-macro">第759期</block>
  <block id="e07bc583b0f70b05fdbb1008303e8f85" category="list-text">修复了使用ONTAP后端创建的特定问题<block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix=" " category="inline-code"></block>22.07.0 升级期间字段无法上线 (<block ref="294e408500bc8358b70c680986c23bdb" category="inline-link-macro-rx"></block> ）。</block>
  <block id="958424a347179b6856de7610a2b99b8d" category="inline-link-macro">第548期</block>
  <block id="9663034bca37c0603d813726d885503d" category="inline-link-macro">第760期</block>
  <block id="26d08c0516dec92a4420f06d4da4fcf1" category="list-text">**Docker：**修复了导致 Docker 卷插件在某些环境下无法启动的问题（<block ref="78b7b57a86c570439562f2c638103de5" category="inline-link-macro-rx"></block>和<block ref="968dd574470c019c42c32878b5799fe9" category="inline-link-macro-rx"></block>）。</block>
  <block id="3165be312bab247f04681069367db65a" category="list-text">修复了ONTAP SAN 后端特有的 SLM 问题，以确保仅发布属于报告节点的 dataLIF 子集。</block>
  <block id="8f9d66f5cbbd4fc027dbd00d46032c8e" category="list-text">修复了附加卷时发生不必要的 iSCSI LUN 扫描的性能问题。</block>
  <block id="3e84d49b37065ae841277ed78e8fb1bb" category="list-text">移除了Trident iSCSI 工作流程中的细粒度重试，以便快速失败并减少外部重试间隔。</block>
  <block id="08e9e62a917aaf944b6ff85929a9f1dd" category="list-text">修复了当相应的多路径设备已被刷新时，刷新 iSCSI 设备会返回错误的问题。</block>
  <block id="b1ae71d1cd3967fcca9453f4087b19ef" category="list-text">新增对 Kubernetes 1.25 的支持。在升级到 Kubernetes 1.25 之前，必须先将Trident升级到 22.10。</block>
  <block id="98f7f8fbd26f9272ad6a29f2fb6c930b" category="list-text">为Trident部署和 DaemonSet 添加了单独的 ServiceAccount、ClusterRole 和 ClusterRoleBinding，以便将来进行权限增强。</block>
  <block id="609df46dff884c3eec4386eb8db4e358" category="inline-link-macro">跨命名空间卷共享</block>
  <block id="d041a310ba7cc2599250e64801594107" category="list-text">增加了对<block ref="ca184a2eda203b6d98158bdf24e5cf7d" category="inline-link-macro-rx"></block>。</block>
  <block id="09065204259df86d4fe38c35ea23f5af" category="list-text">所有Trident<block ref="aa44e980d222d5134b5e0d8a062e1543" prefix=" " category="inline-code"></block>存储驱动程序现在可以与ONTAP REST API 配合使用。</block>
  <block id="8485ea08789af7b6b7b44e024b526f9b" category="list-text">新增运算符 yaml<block ref="5a02ebff4889c2de0379a0fb10bed282" prefix="(" category="inline-code"></block> ) 没有<block ref="316707d12484dd3afede08839dee49bc" prefix=" " category="inline-code"></block>支持 Kubernetes 1.25。</block>
  <block id="26e871bef43095263845143b043aee4f" category="inline-link-macro">支持 LUKS 加密卷</block>
  <block id="816cf1fb2aa5f808ab09b4740f8ec199" category="list-text">额外<block ref="d387032e9d71b36f3d6219f60f33a659" category="inline-link-macro-rx"></block>为了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>存储驱动程序。</block>
  <block id="30b044636a9c63ab4b202192eec30c1c" category="list-text">新增对 Windows Server 2019 节点的支持。</block>
  <block id="38b9dc57f44121e6d970b34eede9ad0d" category="inline-link-macro">支持 Windows 节点上的 SMB 卷</block>
  <block id="adbfe36f6399f2846983b2901604a962" category="list-text">额外<block ref="40be42d37bc6014716dcd0a1d368ffb5" category="inline-link-macro-rx"></block>通过<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>存储驱动程序。</block>
  <block id="66f2c42a4ca561f5472459301bc7d096" category="list-text">ONTAP驱动程序的自动MetroCluster切换检测功能现已普遍可用。</block>
  <block id="af8a9d07c7391207db96957ab59cb459" category="list-text">**Kubernetes：** 已将支持的最低 Kubernetes 版本更新为 1.20。</block>
  <block id="d667cfc8e8d6ec0c2352fe97b0f09e40" category="list-text">已移除Astra数据存储 (ADS) 驱动程序。</block>
  <block id="9b363ea2db99fe0dc5e9b43f47a37f20" category="list-text">已移除对以下功能的支持<block ref="a6105c0a611b41b08f1209506350279e" prefix=" " category="inline-code"></block>和<block ref="8c319f28d81d1527a9428e9a5c2195f5" prefix=" " category="inline-code"></block>选项<block ref="19b30dc119e514235b739e076be9b3cc" prefix=" " category="inline-code"></block>配置 iSCSI 工作节点多路径时。</block>
  <block id="1407cfeeb5e3916e1435ddea0f1c0a28" category="section-title">22.07 中的变化</block>
  <block id="05759468b045fc55d22e8e6881dca01f" category="paragraph">Kubernetes</block>
  <block id="a885c202ff7951e3ed11491edbe869b2" category="inline-link-macro">GitHub 问题 #700</block>
  <block id="b649490c5687c23484f5e4043e17b9c5" category="list-text">修复了在使用 Helm 或Trident Operator 配置Trident时处理节点选择器的布尔值和数值的问题。  （<block ref="4be853b49b0a07556a73959d38037d90" category="inline-link-macro-rx"></block> ）</block>
  <block id="0ae28ee1c5edfd4bee3e296a8261ed8b" category="inline-link-macro">GitHub 问题 #736</block>
  <block id="69ce5488c3078e15fc6e51116d1d17ba" category="list-text">修复了处理非 CHAP 路径错误的问题，以便 kubelet 在失败时重试。<block ref="a21b5d75e3a2341288a5ed769d7d4ca2" category="inline-link-macro-rx"></block> ）</block>
  <block id="701ba87ab75dde70f4604769defc7d00" category="list-text">将 CSI 镜像的默认注册表从 k8s.gcr.io 过渡到 registry.k8s.io</block>
  <block id="95b61962ec35cc252a4791e4101c5aaa" category="list-text">ONTAP-SAN 卷现在将使用每个节点的 igroup，并且仅在主动发布到这些节点时才将 LUN 映射到 igroup，以提高我们的安全态势。当Trident认为在不影响当前工作负载的情况下安全地将现有卷切换到新的 igroup 方案时，将会择机进行。</block>
  <block id="90e3cd7cff1c9f6f4b8d2a509b127d44" category="list-text">在Trident安装中包含 ResourceQuota，以确保在 PriorityClass 消耗默认受到限制时， Trident DaemonSet 能够被调度。</block>
  <block id="838a6d7e89b7c366cfc25d3b2115b901" category="inline-link-macro">GitHub 问题 #717</block>
  <block id="5ab207578468b7bbc201024492654253" category="list-text">为Azure NetApp Files驱动程序添加了对网络功能的支持。  （<block ref="e0e89f8bd936a5eb3adce74cac88eab0" category="inline-link-macro-rx"></block> ）</block>
  <block id="cab6f6f91105d87aa3f65650df43c553" category="inline-link-macro">GitHub 问题 #228</block>
  <block id="00ea108f36897d9ed3523b970b09e6ea" category="list-text">ONTAP驱动程序新增了技术预览版自动MetroCluster切换检测功能。  （<block ref="0c9c84232975bfb33d3481050e5ef924" category="inline-link-macro-rx"></block> ）</block>
  <block id="0b4fe975279063a2d1790cd061a8b8d1" category="list-text">**Kubernetes：** 已将支持的最低 Kubernetes 版本更新为 1.19。</block>
  <block id="108e9d089b04380952a04c1021cdad80" category="list-text">后端配置不再允许在单个配置中使用多种身份验证类型。</block>
  <block id="3f39a3207529d5f8129199a33e60ef87" category="section-title">搬家</block>
  <block id="de278730ee66ed696db3f71d20aa30a5" category="list-text">AWS CVS 驱动程序（自 22.04 版本起已弃用）已被移除。</block>
  <block id="16cbbf51150ac75556b3850ff4a5a013" category="list-text">从节点 pod 中移除不必要的 SYS_ADMIN 功能。</block>
  <block id="9f0be62f4bbebd42af8782e0151af649" category="list-text">将 nodeprep 简化为简单的主机信息和主动服务发现，以尽力确认 NFS/iSCSI 服务在工作节点上可用。</block>
  <block id="d3889fc650fa47326b5f1d0c56f50970" category="inline-link-macro">舱体安全标准</block>
  <block id="5e65f8ef909da6c604c403e32b1b48ee" category="paragraph">一个新的<block ref="305368b4f0d008a807e095ab9da58448" category="inline-link-macro-rx"></block>（PSS）部分已添加，详细说明了Trident在安装时启用的权限。</block>
  <block id="278dc4a29aa2b881b9dc4b45a82929c5" category="section-title">22.04 中的变化</block>
  <block id="1709d6f66b1414fcc9f298c36d33f86b" category="paragraph">NetApp不断改进和增强其产品和服务。以下是Trident的一些最新功能。有关先前版本，请参阅<block ref="25da125dffad1d6323c21354bccf0203" category="inline-link-rx"></block>。</block>
  <block id="7072ec708b0ea7e3243747d8b79c0d20" category="admonition">如果您是从任何先前的Trident版本升级，并且使用Azure NetApp Files，则<block ref="d5189de027922f81005951e6efe0efd5" prefix="" category="inline-code"></block>配置参数现在是必填的单例字段。</block>
  <block id="cb60f101c87f3def78d0fef168389244" category="inline-link-macro">GitHub 问题 #681</block>
  <block id="2901fba3b85d37ea6000d90e72366ba6" category="list-text">改进了 iSCSI 发起程序名称的解析。  （<block ref="3947f141b94c1867221790f45a6ee173" category="inline-link-macro-rx"></block> ）</block>
  <block id="8804e61e26be921d78a1632ad8607a4c" category="inline-link-macro">GitHub 问题 #598</block>
  <block id="d0aad022e470a22fe71fa5616ce002f8" category="list-text">修复了不允许使用 CSI 存储类参数的问题。  （<block ref="032ea6b8f2fceffcd025bdcae99652ae" category="inline-link-macro-rx"></block> ）</block>
  <block id="34fb36c5e51f4530848bc5114cf29aa7" category="inline-link-macro">GitHub 问题 #671</block>
  <block id="951995417edc5c2968955384b925b27e" category="list-text">修复了Trident CRD 中重复的键声明。  （<block ref="6e73ffca3c5d1dc68cd639612845812c" category="inline-link-macro-rx"></block> ）</block>
  <block id="55cd7443e4a1278a57f612df28b8eee3" category="inline-link-macro">GitHub 问题 #629</block>
  <block id="ec74c645b7b5f9d3051f68de156927d9" category="list-text">修复了不准确的 CSI 快照日志。  （<block ref="9b20149e8d36c115b9349e728abebd54" category="inline-link-macro-rx"></block> ））</block>
  <block id="a98b2ebbcbb381d3abc81e2ecfb2054c" category="inline-link-macro">GitHub 问题 #691</block>
  <block id="28341d7630f486a1b72b5b97d39ce589" category="list-text">修复了在已删除节点上取消发布卷的问题。  （<block ref="439c8b5253b3b0fa8d2ddb79f44cd784" category="inline-link-macro-rx"></block> ）</block>
  <block id="fbb82269f3871bc5751dda6ade9cd9ea" category="inline-link-macro">GitHub 问题 #656</block>
  <block id="e02171b3da303c0d6b9bd3102650bb07" category="list-text">增加了对块设备上文件系统不一致性的处理。  （<block ref="b6c419ed0f79d6957e3796ca0e0742cb" category="inline-link-macro-rx"></block> ）</block>
  <block id="1bae87f1c9d9a094dce218672331de02" category="inline-link-macro">GitHub 问题 #715</block>
  <block id="4aeb6a7748e689a0ce92c16344bb6285" category="list-text">修复了设置时自动拉取支撑图像的问题<block ref="990dc1a09e10c7b5378e6bc8a1956cb8" prefix=" " category="inline-code"></block>安装过程中标记。  （<block ref="5f789d3f3d58c42cfbeb0b6394bac993" category="inline-link-macro-rx"></block> ）</block>
  <block id="302e5f91d375f03821f8fd6340563539" category="list-text">修复了Azure NetApp Files驱动程序无法克隆具有多个导出规则的卷的问题。</block>
  <block id="70703300e76c51632e4ea22ce53c74af" category="inline-link-macro">GitHub 问题 #698</block>
  <block id="99df1eeec5b67fac5a47fb610c720712" category="list-text">现在，与 Trident 安全端点的入站连接至少需要 TLS 1.3。  （<block ref="5ab4d3faf45db0d93ac1a5f7438f1c62" category="inline-link-macro-rx"></block> ）</block>
  <block id="723b30bcece2d0d47914a6eaf0c550cc" category="list-text">Trident现在会在其安全端点的响应中添加 HSTS 标头。</block>
  <block id="621b9733ee07089711b96dd6b0b7861a" category="list-text">Trident现在会尝试自动启用Azure NetApp FilesUnix 权限功能。</block>
  <block id="3786cba0bc294f586b13783c69b08371" category="inline-link-macro">GitHub 问题 #694</block>
  <block id="c0f60be70f5b8a5bc6c7c8071f4481fb" category="list-text">*Kubernetes*： Trident daemonset 现在以 system-node-critical 优先级运行。  （<block ref="b04869f92878b510e393bc41361c825d" category="inline-link-macro-rx"></block> ）</block>
  <block id="3d0d8392962843a02a6fa979f76b5a91" category="paragraph">E系列驱动程序（自20.07版本起已禁用）已被移除。</block>
  <block id="72387bfdb0acfd8a27877f000a3abeac" category="section-title">22.01.1 中的变更</block>
  <block id="61465c1d4383dd4afdf168925e15e767" category="list-text">修复了在已删除节点上取消发布卷的问题。  （<block ref="5fee6ab43e8008edba54375694a29266" category="inline-link-macro-rx"></block> ）</block>
  <block id="e50f1057ba4b67b255c98fa09c5ba6f8" category="list-text">修复了在ONTAP API 响应中访问聚合空间的 nil 字段时发生的 panic 问题。</block>
  <block id="135c438d01a49275c458e22005e39c6e" category="section-title">22.01.0 中的变更</block>
  <block id="3c72f47eeb46270dd13a77b32ec10dd3" category="list-text">*Kubernetes:* 增加大型集群的节点注册退避重试时间。</block>
  <block id="0ef48234390855900384d0bc8a0a8a24" category="list-text">修复了 azure-netapp-files 驱动程序可能被多个同名资源混淆的问题。</block>
  <block id="a478d15e95ddd4ce45d4fe0b98b651a6" category="list-text">如果用方括号指定， ONTAP SAN IPv6 DataLIF 现在可以正常工作。</block>
  <block id="404cef2e43cb97ccef52692419ad6f6b" category="inline-link-macro">GitHub 问题 #489</block>
  <block id="7213ed07f5b718aa66cfac350f023a77" category="list-text">修复了尝试导入已导入卷时返回 EOF 导致 PVC 处于待处理状态的问题。  （<block ref="b9a2290d6389b9a605883cda4e717749" category="inline-link-macro-rx"></block> ）</block>
  <block id="0e258ce589a7c5edca46e96701e7a846" category="list-text">修复了在SolidFire卷上创建超过 32 个快照时Trident性能变慢的问题。</block>
  <block id="d0aaca968285d0d47ea0c5a0f7b9bab5" category="list-text">在创建 SSL 证书时，将 SHA-1 替换为 SHA-256。</block>
  <block id="1d61f4e1411b6940bc918fb56346f64d" category="list-text">修复了Azure NetApp Files驱动程序，使其允许重复的资源名称，并将操作限制在单个位置。</block>
  <block id="851679bec9b3e6c8e6284128fb750b1e" category="list-text">Kubernetes 增强功能：</block>
  <block id="2767b461b2b49786f390c9e0509d2d12" category="list-text">新增对 Kubernetes 1.23 的支持。</block>
  <block id="7f10502f6f15537f180f07f0c89d2642" category="inline-link-macro">GitHub 问题 #651</block>
  <block id="2ff7a365e7c341f8f381cd7c2a4e15f6" category="list-text">通过Trident Operator 或 Helm 安装Trident pod 时，添加调度选项。  （<block ref="15fbe6dcd60762941b28bc5990803bde" category="inline-link-macro-rx"></block> ）</block>
  <block id="90fdd892e78b26eb18a250c9c1bc19ff" category="inline-link-macro">GitHub 问题 #633</block>
  <block id="3ff8e54aa1f3735deb64771c4c65c420" category="list-text">允许 GCP 驱动程序中的跨区域卷。  （<block ref="efd445659801b6abfdba2997e23e5f4f" category="inline-link-macro-rx"></block> ）</block>
  <block id="fef8c75d6cd00955b0f1c84d40af01aa" category="inline-link-macro">GitHub 问题 #666</block>
  <block id="409ee85d2342bf416b29a45a7b9c4e59" category="list-text">为Azure NetApp Files卷添加了对“unixPermissions”选项的支持。  （<block ref="b2ee1a79cce917ad1d60b3bec442914a" category="inline-link-macro-rx"></block> ）</block>
  <block id="de6284c149d2e011da3909f1ef2af627" category="paragraph">Trident REST 接口只能监听和提供服务于 127.0.0.1 或 [::1] 地址</block>
  <block id="58a2e8c17107cc1ca9cb1317cd0c1ee9" category="section-title">21.10.1 中的变更</block>
  <block id="cdb544a92bee555749f43046d53ef34e" category="admonition">v21.10.0 版本存在一个问题，当节点被移除然后又被添加到 Kubernetes 集群时， Trident控制器可能会进入 CrashLoopBackOff 状态。此问题已在 v21.10.1 中修复（GitHub 问题 669）。</block>
  <block id="cd1bf2431d703fd3c62a278b9c812d56" category="list-text">修复了在 GCP CVS 后端导入卷时可能出现的竞争条件，该条件会导致导入失败。</block>
  <block id="8e1e1dad95de3dc781f25f58483acdf3" category="list-text">修复了当节点被移除然后又被添加到 Kubernetes 集群时， Trident控制器可能进入 CrashLoopBackOff 状态的问题（GitHub 问题 669）。</block>
  <block id="d7c32cb5ff2be4aaff3a8eaea9d18e0d" category="list-text">修复了未指定 SVM 名称时无法发现 SVM 的问题（GitHub 问题 612）。</block>
  <block id="43e92857220d1a7ea1da88250ea5e2e3" category="section-title">21.10.0 中的变更</block>
  <block id="a6e7aa999ba654c6844672ae59f5137a" category="list-text">修复了 XFS 卷的克隆无法挂载到与源卷相同的节点上的问题（GitHub 问题 514）。</block>
  <block id="abf7e791f62ca6d68b31527c63563786" category="list-text">修复了Trident在关闭时记录致命错误的问题（GitHub 问题 597）。</block>
  <block id="852acc81ea6fa7363b73c5313002de83" category="list-text">与 Kubernetes 相关的修复：</block>
  <block id="f94cc5159119c43751041256941deb2c" category="list-text">使用以下命令创建快照时，将卷的已用空间作为最小恢复大小返回：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序（GitHub 问题 645）。</block>
  <block id="742ce2e3c9c8496323bd1176af2838a4" category="list-text">修复了以下问题<block ref="c80aaf836310b4d6ad1f810928cbb5d2" prefix=" " category="inline-code"></block>卷大小调整后记录了错误（GitHub 问题 560）。</block>
  <block id="9a445ecbad9af70a94bd7558ba95e059" category="list-text">修复了舱体可能卡住的问题<block ref="720f84c3d4dcb9a556ac6adfd1e75b8c" prefix=" " category="inline-code"></block>状态（GitHub 问题 572）。</block>
  <block id="4f81c320a621b8c9d81c7334f2cffc71" category="list-text">修复了以下情况：<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> FlexVol可能充满了快照 LUN（GitHub 问题 533）。</block>
  <block id="169c3be63dd22b315ed7884e246338de" category="list-text">修复了使用不同镜像时自定义 YAML 安装程序的问题（GitHub 问题 613）。</block>
  <block id="1077a1a91a96498c2f56bc630e632eee" category="list-text">修复了快照大小计算（GitHub 问题 611）。</block>
  <block id="20179fee7c8b97f5118f8bb139c3e3ee" category="list-text">修复了所有Trident安装程序都能将普通 Kubernetes 识别为 OpenShift 的问题（GitHub 问题 639）。</block>
  <block id="27b76ffa775f907a1fd51f21a669551b" category="list-text">修复了Trident操作符，使其在 Kubernetes API 服务器无法访问时停止协调（GitHub 问题 599）。</block>
  <block id="1f9e922b6eff6cb06fca1ed9137eed38" category="list-text">增加了对<block ref="c005e78d4bd808038335c32dd84cf7da" prefix=" " category="inline-code"></block>可选择 GCP-CVS 性能卷。</block>
  <block id="294b850a76a040c20913e76c2fe6589a" category="list-text">为 GCP 中 600 GiB 到 1 TiB 范围内的规模优化 CVS 卷添加了支持。</block>
  <block id="0333eb54465646b87754facff75fdb5f" category="list-text">Kubernetes 相关增强功能：</block>
  <block id="c32aa411caa1ffd0e30a271f5be834d9" category="list-text">新增对 Kubernetes 1.22 的支持。</block>
  <block id="fa1fd8841173fa7ccde5059fb7c2f903" category="list-text">使Trident operator 和 Helm chart 能够与 Kubernetes 1.22 一起使用（GitHub 问题 628）。</block>
  <block id="dbaa551f190105e514f7816811f4b397" category="list-text">已添加操作员图像<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>images 命令（GitHub 问题 570）。</block>
  <block id="be575f1ff204f2800114965a5c0d8575" category="section-title">实验性改进</block>
  <block id="29ddf941d9825cc9283521ee90468595" category="list-text">增加了对卷复制的支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>司机。</block>
  <block id="e2f2b85987da5e2397c1e342a6fd9e28" category="list-text">新增了对 REST 的*技术预览*支持<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ， 和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>司机。</block>
  <block id="64a8f71bee95a6635e88bce00f1a2d3c" category="paragraph">已知问题是指可能妨碍您成功使用产品的问题。</block>
  <block id="da7c48c170570a143b062de762b69ac3" category="list-text">Trident现在强制执行空白<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block> <block ref="6d8a605a6037c779649e91ad03a19c1c" prefix="(" category="inline-code"></block>对于没有卷的<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>在其存储类中指定。使用 Kubernetes 1.17 或更高版本时， Trident支持提供一个空白的<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>适用于 NFS 卷。对于 iSCSI 卷，您需要设置<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>在强制执行 StorageClass 时<block ref="c7a6c0ee60c6f68dfe700feaacf15703" prefix=" " category="inline-code"></block>使用安全上下文。</block>
  <block id="e19cc53ffca782e210d63cc3ba607068" category="list-text">当在多个Trident实例中使用后端时，每个后端配置文件都应该有不同的配置。<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block> ONTAP后端的值，或者使用其他值<block ref="2e9183e3f034dbf1322a3385f151456e" prefix=" " category="inline-code"></block>适用于SolidFire后端。 Trident无法检测到其他Trident实例创建的卷。尝试在ONTAP或SolidFire后端创建现有卷都会成功，因为Trident将卷创建视为幂等操作。如果<block ref="ed66bef2b107983b6e4066fddf8c45c3" prefix=" " category="inline-code"></block>或者<block ref="2e9183e3f034dbf1322a3385f151456e" prefix=" " category="inline-code"></block>即使名称相同，在同一后端创建的卷也可能出现名称冲突。</block>
  <block id="f361d11207fb1bf400735cf23bd3eead" category="list-text">安装Trident时（使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>或Trident运算符）并使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>要管理Trident，您应该确保<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>环境变量已设置。这是为了指明 Kubernetes 集群。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>应该起到反作用。当使用多个 Kubernetes 环境时，您应该确保：<block ref="39e7fa5a13dbc25a4aa8c4b323cd657c" prefix=" " category="inline-code"></block>文件来源准确无误。</block>
  <block id="6d791d3b45515fd8619e489b938f39e8" category="inline-link">挂载选项</block>
  <block id="814077b936b9bc9d2731d0f5fd50fde3" category="list-text">要对 iSCSI PV 执行在线空间回收，工作节点上的底层操作系统可能需要将挂载选项传递给卷。对于 RHEL/Red Hat Enterprise Linux CoreOS (RHCOS) 实例来说，情况确实如此，这些实例需要<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block><block ref="2ee633fb26bfccf07d490458d29f92a2" category="inline-link-rx"></block>确保你的配置中包含 discard mountOption。<block ref="15699dd651c6fec3ed329f2bf55d54b4" category="inline-link-rx"></block><block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix="[" category="inline-code"></block> ^] 支持在线块丢弃。</block>
  <block id="fb03c645f52123146ba91e4a67fc8b1e" category="list-text">如果每个 Kubernetes 集群中有多个Trident实例， Trident将无法与其他实例通信，也无法发现它们创建的其他卷，如果集群中运行多个实例，则会导致意外和不正确的行为。每个 Kubernetes 集群应该只有一个Trident实例。</block>
  <block id="6d2a9758a5a695c93ba565384c106ee5" category="list-text">如果基于三叉戟<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>当Trident离线时，Kubernetes 中的对象会被删除；当Trident重新上线时，它不会从数据库中删除相应的存储类。您应该使用以下命令删除这些存储类<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>或者使用 REST API。</block>
  <block id="8064c72c81e13811dd14b604af2cba51" category="list-text">如果用户在删除相应的 PVC 之前删除了Trident提供的 PV， Trident不会自动删除支持卷。您应该通过以下方式移除音量：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>或者使用 REST API。</block>
  <block id="0821431aba133adbfa7fa0ca1781eedd" category="list-text">除非每个配置请求的聚合集都是唯一的，否则ONTAP不能同时配置多个FlexGroup 。</block>
  <block id="cf2e8e446588a928fb23cb0dbd820e8b" category="list-text">使用 IPv6 上的Trident时，您应该指定<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>和<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>在方括号内的后端定义中。例如，<block ref="cbd17d3c94dc0ed51eeeab01d2ae8741" prefix="" category="inline-code"></block> 。</block>
  <block id="b75a48587845391dbbe47d0dcc15d3c0" category="admonition">您无法指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>基于ONTAP SAN 后端。  Trident会发现所有可用的 iSCSI LIF，并使用它们来建立多路径会话。</block>
  <block id="18c20e5d2e368f36f420dd39019d460f" category="list-text">如果使用<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>使用 OpenShift 4.5 的驱动程序时，请确保底层工作节点使用 MD5 作为 CHAP 认证算法。  Element 12.7 提供符合 FIPS 标准的 CHAP 安全算法 SHA1、SHA-256 和 SHA3-256。</block>
  <block id="9c83e144e5481ac6766f4055e566594d" category="section-title">查找更多信息</block>
  <block id="8a247589aa6f5931b3416e5dd64ba361" category="inline-link">Trident GitHub</block>
  <block id="2e62261179042a713555c66362bf55b6" category="list-text"><block ref="2e62261179042a713555c66362bf55b6" category="inline-link-rx"></block></block>
  <block id="fd898492f5f83a18091a5e6c78cf2276" category="list-text"><block ref="fd898492f5f83a18091a5e6c78cf2276" category="inline-link-rx"></block></block>
  <block id="f353c2f2ba62c120d68a9fde333ef59f" category="summary">了解Azure NetApp Files的 NFS 和 SMB 后端配置选项，并查看配置示例。</block>
  <block id="17a48ec106d5505e674ccdf56fce1058" category="doc">Azure NetApp Files后端配置选项和示例</block>
  <block id="15b7c7ffe264d7b8c61915ff2a6ef96c" category="section-title">后端配置选项</block>
  <block id="7afa2d89ddb38b52ee6c828cd75c06c9" category="paragraph">Trident使用您的后端配置（子网、虚拟网络、服务级别和位置），在请求的位置中可用的容量池上创建Azure NetApp Files卷，并与请求的服务级别和子网相匹配。</block>
  <block id="fcc2bb4278d843dbf9fdbcf83a214131" category="admonition">* 从NetApp Trident 25.06 版本开始，手动 QoS 容量池作为技术预览版受到支持。*</block>
  <block id="b9acebca540d60eef74f6ffc3e4aa2e7" category="paragraph">Azure NetApp Files后端提供以下配置选项。</block>
  <block id="40e27006e7b709772172391a3d17b331" category="cell">始终为 1</block>
  <block id="5aae2c40b50d296edbd4ba9cfb462b49" category="cell">存储驱动程序的名称</block>
  <block id="3e566c45584d66d2ab94c2108f7c3488" category="cell">"azure-netapp-files"</block>
  <block id="f5b55596d3f53b1857a4980dac9db979" category="cell"><block ref="a3d5885ebdbdbb3f39c48e483cc04978" prefix="" category="inline-code"></block></block>
  <block id="5afd6479855e8d63f324b6ec2fa787b4" category="cell">自定义名称或存储后端</block>
  <block id="9dd18f393b35bf22098cf53e9c1c7fa6" category="cell">司机姓名 + "_" + 随机字符</block>
  <block id="665120e71659a6a32f990a3181688d1b" category="cell"><block ref="8c443e170595ba0feac007ffb92cb49a" prefix="" category="inline-code"></block></block>
  <block id="213e4b0f68f673550c1154cabddf4142" category="cell">Azure 订阅的订阅 ID（在 AKS 群集上启用托管标识时为可选）。</block>
  <block id="e07778d10cef90430253876cba7157e4" category="cell"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block></block>
  <block id="35140a26b22dd9ba254fba38858d8b10" category="cell">在 AKS 集群上使用托管身份或云身份时，应用程序注册中的租户 ID 是可选的。</block>
  <block id="949ba1045db0d48bd189044e672d8097" category="cell"><block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix="" category="inline-code"></block></block>
  <block id="68aab7c1f293b3f340c21d4598bbf943" category="cell">在 AKS 集群上使用托管身份或云身份时，应用程序注册中的客户端 ID 是可选的。</block>
  <block id="56ef18e84ab36c2bdc4546e6a2756673" category="cell"><block ref="2b53761249254ce6b502f521e5cc0683" prefix="" category="inline-code"></block></block>
  <block id="6224cbf7bf787bd81b6e12ade1b5069a" category="cell">在 AKS 集群上使用托管身份或云身份时，应用程序注册中的客户端密钥是可选的。</block>
  <block id="0322003a3502f221fdb74b059dfff46e" category="cell"><block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix="" category="inline-code"></block></block>
  <block id="1c65f12b4d30114593cc01384938cb5f" category="cell">之一<block ref="eb6d8ae6f20283755b339c0dc273988b" prefix=" " category="inline-code"></block>，<block ref="8d5e7e72f12067991186cdf3cb7d5d9d" prefix=" " category="inline-code"></block> ， 或者<block ref="7057376a419b3334cc7b8b7a9f064abb" prefix=" " category="inline-code"></block></block>
  <block id="b21b08bb55acd409e40e9b45edd3bb34" category="cell">““ （随机的）</block>
  <block id="fc7dd5b65d21ee7272a067c9404a8498" category="cell"><block ref="d5189de027922f81005951e6efe0efd5" prefix="" category="inline-code"></block></block>
  <block id="938c7b48cad00c77e1900399388741e8" category="cell">将在 Azure 中创建新卷的位置名称（在 AKS 群集上启用托管标识时为可选）。</block>
  <block id="016a4b469916e37291cfe2f7fab49aaf" category="cell"><block ref="6a3560738716ddd805d769d4460ca7aa" prefix="" category="inline-code"></block></block>
  <block id="66d09fbe1165f3d10b368cbe0cc029f4" category="cell">用于筛选已发现资源的资源组列表</block>
  <block id="36cbcb8a57112362b05d06b9fe037a6e" category="cell">（无滤镜）</block>
  <block id="d4b4343f054233d7d339bb1501425fd4" category="cell"><block ref="87d26f327b9deeb6141721bda7f8ca65" prefix="" category="inline-code"></block></block>
  <block id="61476ef20a8015760b9cb3c1bd0ea435" category="cell">用于筛选已发现资源的NetApp帐户列表</block>
  <block id="722c7b4409fa4d1fe6aaa2902ae66473" category="cell"><block ref="338b00a62e6d8d3234c056bf48b711d0" prefix="" category="inline-code"></block></block>
  <block id="225abbb59bc0bbaa2a5852ada333b31b" category="cell">用于筛选已发现资源的容量池列表</block>
  <block id="f2a5b99a63a463017b3e5f5848444d9a" category="cell">（无过滤，随机）</block>
  <block id="32ef1af5ccda7c2f6d85e55f5034f105" category="cell"><block ref="a88edbe6cce8d8f180d87bef83408312" prefix="" category="inline-code"></block></block>
  <block id="10afd0959cfa4a53bce9c8d395c40c48" category="cell">具有委派子网的虚拟网络的名称</block>
  <block id="ec045173f4df65e5e8951c3ca9579945" category="cell"><block ref="4f556606ab1f7cb51dd23811407facbd" prefix="" category="inline-code"></block></block>
  <block id="0b8deda0ecc5080e8c0ed0b475e983ba" category="cell">委派给的子网名称<block ref="0c20a1ae75c1cc4efae31193e0d47718" prefix=" " category="inline-code"></block></block>
  <block id="412427d9207c4cc4b01539aff3c50e7c" category="cell"><block ref="b0fdc9c7b96e4249152c61b506703142" prefix="" category="inline-code"></block></block>
  <block id="55eaeeb515ba1b8a42eb736b0e58f41f" category="cell">卷的 VNet 功能集，可能是<block ref="972e73b7a882d0802a4e3a16946a2f94" prefix=" " category="inline-code"></block>或者<block ref="eb6d8ae6f20283755b339c0dc273988b" prefix=" " category="inline-code"></block>。网络功能并非在所有地区都可用，可能需要通过订阅才能启用。指定<block ref="b0fdc9c7b96e4249152c61b506703142" prefix=" " category="inline-code"></block>未启用该功能会导致卷配置失败。</block>
  <block id="cc3d42de123c784e8d8e3c8404b943be" category="cell">对 NFS 挂载选项进行精细控制。对于 SMB 卷，此设置将被忽略。要使用 NFS 版本 4.1 挂载卷，请包含以下内容<block ref="c72da907ddca73ee114d92e5e098ce0e" prefix=" " category="inline-code"></block>在以逗号分隔的挂载选项列表中选择 NFS v4.1。存储类定义中设置的挂载选项会覆盖后端配置中设置的挂载选项。</block>
  <block id="2d1474e8b52ef42851337fb3fef4e1a1" category="cell">"nfsvers=3"</block>
  <block id="2288620b3dc019c6359bcc7f50b72ab3" category="cell">如果请求的卷大小大于此值，则配置失败。</block>
  <block id="567c7f0eca746ed7513764be5ecf6d03" category="cell">（默认情况下不强制执行）</block>
  <block id="f2f2c7c3c767da610bd95934104674f6" category="cell"><block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix="" category="inline-code"></block></block>
  <block id="91b3c29beb3641dce2fcf3d2382fac4f" category="cell">故障排除时要使用的调试标志。例子，<block ref="533cf7c7aac0ee35b2153c8cf933013b" prefix=" " category="inline-code"></block> 。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="37a6259cc0c1dae299a7866489dff0bd" category="cell">无效的</block>
  <block id="f0873081464f48da27a1068215270c60" category="cell"><block ref="296026821ada2ab8aebcf13547a63df5" prefix="" category="inline-code"></block></block>
  <block id="c0a4a0396978d1ad8816d2e358a2f05e" category="cell">配置 NFS 或 SMB 卷的创建。选项有<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>或空值。设置为 null 则默认使用 NFS 卷。</block>
  <block id="71e598dd105d32592243532b55392c55" category="cell"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block></block>
  <block id="4487bf4a5d2565e471a4ac1e0bba9af6" category="cell"><block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix="" category="inline-code"></block></block>
  <block id="3d4635d3cf4f27b0e87f3fe86a84744d" category="inline-link-macro">使用 CSI 拓扑</block>
  <block id="d9ecfcade7b244fc0100c0ff4359f5ea" category="cell">表示此后端支持的区域和区域列表。更多信息，请参阅<block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。</block>
  <block id="b4d452ddff320a381a09f71d2351e4c6" category="cell"><block ref="d6f0e0bdb2f24a4f559dd8f512235cb3" prefix="" category="inline-code"></block></block>
  <block id="669b3bc77d6c32aa7e2c1bfe7cc9b452" category="cell">表示 QoS 类型：自动或手动。* Trident 25.06 技术预览版*</block>
  <block id="06b9281e396db002010bde1de57262eb" category="cell">自动</block>
  <block id="ae4d8eab27ac4c80edb95b30fc583854" category="cell"><block ref="08566efed9fdb13392ea1b11d6b533a4" prefix="" category="inline-code"></block></block>
  <block id="4fe2efdffc54aa536c8714ad9bab97a2" category="cell">设置允许的最大吞吐量，单位为 MiB/秒。仅支持手动 QoS 容量池。* Trident 25.06 技术预览版*</block>
  <block id="3eef9a5398f4b353f217625ca5768cc0" category="cell"><block ref="60f649f49ce41c3f0123ddceb5c9f688" prefix="" category="inline-code"></block></block>
  <block id="8cacf42dcc11f9e7779267100d4fd305" category="inline-link-macro">为Azure NetApp Files卷配置网络功能</block>
  <block id="4ace77649689419cf09eed38ddf4e74c" category="admonition">有关网络功能的更多信息，请参阅<block ref="d4c16e3034c39d54544a2d5f2b2953d9" category="inline-link-macro-rx"></block>。</block>
  <block id="d37198994935307f0e4a95505678642e" category="section-title">所需权限和资源</block>
  <block id="de4b458ce26c7e2479c45bb915c621b5" category="paragraph">如果在创建 PVC 时收到“未找到容量池”错误，则可能是您的应用程序注册没有关联的必要权限和资源（子网、虚拟网络、容量池）。如果启用调试功能， Trident将记录在创建后端时发现的 Azure 资源。请确认是否使用了合适的角色。</block>
  <block id="1860dce26ad531b08f4b17950bbda6a7" category="paragraph">值<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block> ，<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block> ，<block ref="a88edbe6cce8d8f180d87bef83408312" prefix=" " category="inline-code"></block> ， 和<block ref="4f556606ab1f7cb51dd23811407facbd" prefix=" " category="inline-code"></block>可以使用简称或完全限定名称来指定。大多数情况下建议使用完全限定名称，因为短名称可能会匹配多个同名资源。</block>
  <block id="8771cfaef1f991e1642d0a1ece8dcfa3" category="paragraph">这<block ref="6a3560738716ddd805d769d4460ca7aa" prefix=" " category="inline-code"></block>，<block ref="87d26f327b9deeb6141721bda7f8ca65" prefix=" " category="inline-code"></block> ， 和<block ref="338b00a62e6d8d3234c056bf48b711d0" prefix=" " category="inline-code"></block>值是过滤器，用于将发现的资源集限制为该存储后端可用的资源，并且可以以任意组合指定。完全限定名称遵循以下格式：</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式</block>
  <block id="dde92bca1b59f0db813ef42a2688752e" category="cell">资源组</block>
  <block id="671e72ca3ef632233f4c27dfef1ec109" category="cell">&lt;资源组&gt;</block>
  <block id="ac252743de820aac9183d9f76d4bed67" category="cell">NetApp账户</block>
  <block id="2bf2783c6d0d867a9fe629138b38bd84" category="cell">&lt;资源组&gt;/&lt;NetApp 帐户&gt;</block>
  <block id="9eea1c08013c37f1499f428378764a08" category="cell">容量池</block>
  <block id="01c656d6b97f45a90022ee307283ae01" category="cell">&lt;资源组&gt;/&lt;NetApp 帐户&gt;/&lt;容量池&gt;</block>
  <block id="bf76cafc47141522dca89c4d6e25b822" category="cell">虚拟网络</block>
  <block id="8c9309282517a29ad09b10443d825c7c" category="cell">&lt;资源组&gt;/&lt;虚拟网络&gt;</block>
  <block id="9770c6469e9d27585d6c0c389ede7bc3" category="cell">子网</block>
  <block id="7addf9faaab78a084548d05b695cd2e2" category="cell">&lt;资源组&gt;/&lt;虚拟网络&gt;/&lt;子网&gt;</block>
  <block id="be1b9ef68f31ecee991e2282c1f24f0f" category="section-title">卷配置</block>
  <block id="6154de53659ccfe0ba0733effdb2da13" category="paragraph">您可以通过在配置文件的特定部分中指定以下选项来控制默认卷配置。参考 <block ref="c850cc933797a5d4472ae11f15a5ef5e" category="inline-xref-macro-rx"></block> 了解详情。</block>
  <block id="9c64942fe493cb70c474ff447429d8a4" category="cell"><block ref="c72971f17465d2a32345bc872af62a34" prefix="" category="inline-code"></block></block>
  <block id="ea221277b2f168f5e17d112765f4a1c0" category="cell">新卷的出口规则。<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block>必须是以逗号分隔的 IPv4 地址或 IPv4 子网的任意组合列表，采用 CIDR 表示法。对于 SMB 卷，此设置将被忽略。</block>
  <block id="1274e36c193ec0ce8b5c49d5e78ffd7b" category="cell">“0.0.0.0/0”</block>
  <block id="08ee53e1d5cefb7967a295e98036598e" category="cell">控制 .snapshot 目录的可见性</block>
  <block id="e5ac299cc3b14e1fac29518569ca9bb1" category="cell">新卷的默认大小</block>
  <block id="ef81b740be2293b7e3c41047afe98764" category="cell">100G</block>
  <block id="21590b83460bd480131384ef53bdccc4" category="cell">新卷的 Unix 权限（4 位八进制数字）。对于 SMB 卷，此设置将被忽略。</block>
  <block id="976a6dc52dbcabb541efa0a91e922604" category="cell">（预览功能，需订阅并加入白名单）</block>
  <block id="10c0eb6973453da95b4ef937f19ddb6c" category="section-title">示例配置</block>
  <block id="bca36ce39f61ce2d375cbdb66eab5162" category="paragraph">以下示例展示了基本配置，其中大多数参数都保留默认值。这是定义后端最简单的方法。</block>
  <block id="91644df8bfaf55210374666164ee92c9" category="example-title">最小配置</block>
  <block id="e9acc9c9f9c15bdc3abfff747835f188" category="paragraph">这是最基本的后端配置。通过此配置， Trident会发现配置位置中所有委派给Azure NetApp Files存储的NetApp帐户、容量池和子网，并将新卷随机放置在其中一个池和子网上。因为<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>省略了<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>默认设置生效，后端将为 NFS 卷进行配置。</block>
  <block id="639aa44ce5a6709a5719b427993c9657" category="paragraph">如果您刚开始使用Azure NetApp Files并进行尝试，此配置是理想的选择，但在实践中，您需要为预配的卷提供额外的范围。</block>
  <block id="eea342529fcf22d8fbdaf58545a9c617" category="example-title">为 AKS 管理身份</block>
  <block id="943aa8ce869cfeaf7f72cc41df7f891c" category="paragraph">此后端配置省略了<block ref="8c443e170595ba0feac007ffb92cb49a" prefix=" " category="inline-code"></block>，<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block> ，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block> ， 和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>在使用托管身份时，这些是可选的。</block>
  <block id="cdc0ef7f865a8837e4fd99ce3898f1d8" category="example-title">AKS 的云身份</block>
  <block id="1b6104dea07d224d6a76ba8bd88c586a" category="paragraph">此后端配置省略了<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block> ， 和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>在使用云身份时，这些是可选的。</block>
  <block id="f961873909dcbbea92f3791e505cd3cf" category="example-title">具有容量池过滤器的特定服务级别配置</block>
  <block id="c23ef0ddbc293eb69087843f50a25be6" category="paragraph">此后端配置将卷放置在 Azure 中<block ref="6356111305f5daab178fa6051b7a8ae7" prefix=" " category="inline-code"></block>位置<block ref="7057376a419b3334cc7b8b7a9f064abb" prefix=" " category="inline-code"></block>容量池。  Trident会自动发现该位置中委派给Azure NetApp Files的所有子网，并随机在其中一个子网上放置一个新卷。</block>
  <block id="b70d8bcceb91e3665bafe307a5b97682" category="example-title">具有手动 QoS 容量池的后端示例</block>
  <block id="3ffc8f9f72c24f82c0703e3b5a78db96" category="paragraph">此后端配置将卷放置在 Azure 中<block ref="6356111305f5daab178fa6051b7a8ae7" prefix=" " category="inline-code"></block>具有手动 QoS 容量池的位置。* NetApp Trident 25.06 中的技术预览*。</block>
  <block id="119dd5a342e981b13bf0024d5c6a6933" category="example-title">高级配置</block>
  <block id="a83f4a534ccef7ac1d209fb0015cd907" category="paragraph">此后端配置进一步缩小了卷放置范围到单个子网，并且还修改了一些卷配置默认值。</block>
  <block id="d61a62faa23948cd42b53cf6de97e445" category="example-title">虚拟池配置</block>
  <block id="baca3a42ff523348689308c7bd411b38" category="paragraph">此后端配置在单个文件中定义了多个存储池。当您有多个容量池支持不同的服务级别，并且想要在 Kubernetes 中创建代表这些级别的存储类时，这将非常有用。虚拟池标签用于根据以下因素区分池子：<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block> 。</block>
  <block id="65a6416f3ed9552fcc006c830dbeac72" category="example-title">支持的拓扑配置</block>
  <block id="fefaa3b6dca112cc6521c571cfc3803d" category="paragraph">Trident可根据区域和可用区为工作负载提供卷。这<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block>此后端配置中的块用于提供每个后端的区域和区域列表。此处指定的区域和区域值必须与每个 Kubernetes 集群节点上的标签中的区域和区域值相匹配。这些区域和分区代表存储类中可以提供的允许值的列表。对于包含后端提供的区域和可用区子集的存储类， Trident会在所述区域和可用区中创建卷。更多信息，请参阅<block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。</block>
  <block id="857fa84eb2e850753da87c8599addab3" category="section-title">存储类定义</block>
  <block id="cad675ae3fb846705512fe460e615ac3" category="paragraph">下列<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>上述定义指的是存储池。</block>
  <block id="260817022a7340fc89eae3e7dbed8f6a" category="section-title">使用示例定义<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block>场地</block>
  <block id="1abbfd87ab307af55b755fd27ce60191" category="paragraph">使用<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block>你可以为每个对象指定。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>用于托管卷的虚拟池。该卷将具有所选池中定义的方面。</block>
  <block id="4b7db799aa8307d15835ff36beb1b97c" category="section-title">SMB卷的示例定义</block>
  <block id="82b60bb483328d8efe9240dc8aa4a600" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block> ， 和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>您可以指定 SMB 卷并提供所需的 Active Directory 凭据。</block>
  <block id="67c909cf936115be1012171c5c38b8cf" category="example-title">默认命名空间上的基本配置</block>
  <block id="17903b7c199529a65f8f0b36aa084d2e" category="example-title">每个命名空间使用不同的密钥</block>
  <block id="6cb4c0cee2d8e6992a3a10d346015761" category="example-title">每个卷使用不同的密钥</block>
  <block id="5c766f1444b8b25e9f55f0dc6400b77e" category="admonition"><block ref="1023eff0970e3a4277fcde214fad86ef" prefix="" category="inline-code"></block>筛选支持 SMB 卷的存储池。<block ref="d71f62a5b903ebd8681263d310db1d6d" prefix=" " category="inline-code"></block>或者<block ref="9c8ff3d34f58e4965d72fb9c8a993707" prefix=" " category="inline-code"></block>NFS池过滤器。</block>
  <block id="c51cc3b801a879870aea846bdde1c7a3" category="section-title">创建后端</block>
  <block id="3ad256eea0abb551eaab63c84aa3d1f9" category="paragraph">创建后端配置文件后，运行以下命令：</block>
  <block id="d2aae26c4b1e25027872b1df4cee2081" category="summary">在配置Azure NetApp Files后端之前，需要确保满足以下要求。</block>
  <block id="aec47cf6a0cb83824b504b756eb4b71c" category="doc">准备配置Azure NetApp Files后端</block>
  <block id="84444089b52eed627a838de74ae8d652" category="section-title">NFS 和 SMB 卷的先决条件</block>
  <block id="97d64245613ba751b698ce77fd51779a" category="inline-link">Azure：设置Azure NetApp Files并创建 NFS 卷</block>
  <block id="d90582d42d65d5af05c3d40ad0eb4987" category="paragraph">如果您是第一次使用Azure NetApp Files或在新的位置使用，则需要进行一些初始配置来设置 Azure NetApp文件并创建 NFS 卷。参考<block ref="b6e93c3bfc36cf835c63e42e55586d97" category="inline-link-rx"></block>。</block>
  <block id="07e7004c50a67a3e4e366b4ca1c28e3d" category="paragraph">配置和使用<block ref="24a785881ff1cdf191a2239811dc9597" category="inline-link-rx"></block>后端需要以下组件：</block>
  <block id="4e92a2addd95bd2076226bce70449f6d" category="list-text"><block ref="8c443e170595ba0feac007ffb92cb49a" prefix="" category="inline-code"></block>，<block ref="bc54592d6183695b841c6d1880ec0bf8" prefix=" " category="inline-code"></block> ，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block> ，<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block> ， 和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>在 AKS 集群上使用托管身份时，这些是可选的。</block>
  <block id="5c0a5e9c97099065874a650cf8c67a66" category="list-text"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block> ， 和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>在 AKS 集群上使用云身份时，这些是可选的。</block>
  <block id="99c7065ab76131a7b7763287bb5b6735" category="inline-link-macro">微软：为Azure NetApp Files创建容量池</block>
  <block id="ee59ecaa79882c8dc8f7f897c113094a" category="list-text">容量池。参考<block ref="96caced282b604468ab13f86483cd9f6" category="inline-link-macro-rx"></block>。</block>
  <block id="7ed0731ff411d37210b51a78b95c1fc3" category="inline-link-macro">Microsoft：将子网委派给Azure NetApp Files</block>
  <block id="c896cfae248dc2b000cc04c39d8a8de6" category="list-text">委派给Azure NetApp Files 的子网。参考<block ref="795b5e8f62d2267a0996a3b260968048" category="inline-link-macro-rx"></block>。</block>
  <block id="66d640a9a050b05e6a914cbcd88a1e2e" category="list-text"><block ref="8c443e170595ba0feac007ffb92cb49a" prefix="" category="inline-code"></block>来自已启用Azure NetApp Files功能的 Azure 订阅。</block>
  <block id="b12fb354025b3dfa01277964eb72c060" category="inline-link-macro">应用程序注册</block>
  <block id="caa7dc98c21b44b17c214508b9b0fa3c" category="list-text"><block ref="bc54592d6183695b841c6d1880ec0bf8" prefix="" category="inline-code"></block>，<block ref="93c5bebdea9c94a0740fe6fd9bb250f0" prefix=" " category="inline-code"></block> ， 和<block ref="2b53761249254ce6b502f521e5cc0683" prefix=" " category="inline-code"></block>来自<block ref="63405c89f422580946169fa59c41e7ae" category="inline-link-macro-rx"></block>在 Azure Active Directory 中拥有对Azure NetApp Files服务的足够权限。应用程序注册应使用以下任一方式：</block>
  <block id="ee495045d2c4c5131217a0248a404b4d" category="inline-link-macro">Azure 预定义</block>
  <block id="856955b6cbc3fe2168b2dcd43fb0a5dd" category="list-text">所有者或贡献者角色<block ref="76b3209c91e1786a477c35a6e91cf55f" category="inline-link-macro-rx"></block>。</block>
  <block id="2fbc632d5939633cc9c3b254d116080f" category="inline-link-macro">自定义贡献者角色</block>
  <block id="b0ee19cc46a4fb3df97c1c676c0a5d57" category="inline-link-macro">使用 Azure 门户分配角色</block>
  <block id="cc13c2d3734cd4826a8ef70e17841621" category="list-text">一个<block ref="8ad3956583058d3582a7dd1281d1f882" category="inline-link-macro-rx"></block>订阅级别<block ref="e023f2926fb9af676f2809a760efeb14" prefix="(" category="inline-code"></block>）但权限仅限于Trident所需的权限。创建自定义角色后，<block ref="af58105ed429db29198b767444ed6d0d" category="inline-link-macro-rx"></block> 。</block>
  <block id="28389c00d52ebc3b9610c591613894a1" category="example-title">自定义贡献者角色</block>
  <block id="f494e4df0fff53e809d6563f8ec1782f" category="inline-link">委托子网</block>
  <block id="9837781971083d3fe119b0217014d301" category="list-text">蔚蓝<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block>包含至少一个<block ref="c5f14b2142014dc234282a513132bad4" category="inline-link-rx"></block>。截至Trident 22.01版本，<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block>参数是后端配置文件顶层的一个必填字段。虚拟池中指定的位置值将被忽略。</block>
  <block id="30cce5213fe0e4b50d664920d7075cdf" category="inline-link">用户分配的托管身份</block>
  <block id="345615c7e1785c38b1b2d2aadeef42bb" category="list-text">使用<block ref="12e3f82975710931e07ec1b3138bd8bf" prefix=" " category="inline-code"></block>得到<block ref="032e8204d9a4acfa22151783caa18894" prefix=" " category="inline-code"></block>从一个<block ref="f857b557e72afd63cd1e3ca2faab2a5b" category="inline-link-rx"></block>并指定该 ID<block ref="ab6b275be02c02a9982cb7a0c234629e" prefix=" " category="inline-code"></block> 。</block>
  <block id="77a4a369d552f7d3be163bda86f9113f" category="section-title">中小企业卷的附加要求</block>
  <block id="227e516e7258b6dcab3e7bcb4148f7f1" category="paragraph">要创建 SMB 卷，您必须具备以下条件：</block>
  <block id="d8c74c31c4550aed073521ba0fb8984a" category="inline-link-macro">Microsoft：创建和管理Azure NetApp Files管理器的 Active Directory 连接</block>
  <block id="6bb7e9dc5268dcbdde1a91b151d9a94b" category="list-text">Active Directory 已配置并连接到Azure NetApp Files。参考<block ref="2f3bcda54aaf4e8e45316bb04708293f" category="inline-link-macro-rx"></block>。</block>
  <block id="8ce7a57e3680dab09c67446ce08707de" category="list-text">一个 Kubernetes 集群，包含一个 Linux 控制器节点和至少一个运行 Windows Server 2022 的 Windows 工作节点。  Trident仅支持挂载到运行在 Windows 节点上的 pod 的 SMB 卷。</block>
  <block id="d118256fd34a78d74f0336eb83898964" category="list-text">至少需要一个包含 Active Directory 凭据的Trident密钥，以便Azure NetApp Files可以向 Active Directory 进行身份验证。生成秘密<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="7595de66780a622cdd37b4823afebc07" category="inline-link-macro">GitHub：CSI代理</block>
  <block id="c680a0c023a6d45186b9752a07e9938c" category="inline-link-macro">GitHub：适用于 Windows 的 CSI 代理</block>
  <block id="2d6b406e65ac91f2af09f4228e3efe4f" category="list-text">配置为 Windows 服务的 CSI 代理。要配置<block ref="0f8126c17871ed45f2a848f15d96a1bb" prefix=" " category="inline-code"></block>，请参阅<block ref="3ca23c6eadaac7aa23a492aef5e5d012" category="inline-link-macro-rx"></block>或者<block ref="0b56a9ad79a8fef177779e7d3d856994" category="inline-link-macro-rx"></block>适用于在 Windows 上运行的 Kubernetes 节点。</block>
  <block id="4d869f60891f92b0887fa0954bb83cf6" category="summary">您可以将Azure NetApp Files配置为Trident的后端。您可以使用Azure NetApp Files后端附加 NFS 和 SMB 卷。  Trident还支持使用托管标识对 Azure Kubernetes 服务 (AKS) 集群进行凭据管理。</block>
  <block id="28b0abcecaf7a63edb46e4e137337018" category="doc">配置Azure NetApp Files后端</block>
  <block id="2f73efb41160e66d2e4f5b500c984de8" category="section-title">Azure NetApp Files驱动程序详细信息</block>
  <block id="d0c2adbcdd991dec2899d7223e4800b7" category="paragraph">Trident提供以下Azure NetApp Files存储驱动程序，以便与集群通信。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="48cf24486d9a8e65a142b25682f19949" category="cell">驱动程序</block>
  <block id="888a77f5ac0748b6c8001822417df8b6" category="cell">协议</block>
  <block id="4f0e7dc30ffb3e25e75331c9afb2243a" category="cell">音量模式</block>
  <block id="d5e2d9f8d8f10044e38b71b49e675d2e" category="cell">支持的访问模式</block>
  <block id="15971126972a002fcddb2c507534e371" category="cell">支持的文件系统</block>
  <block id="3262251091b863054cfabf046c0e3493" category="paragraph">NFS SMB</block>
  <block id="ac52cf637478f3656a1fdee5c02324fd" category="paragraph">Filesystem</block>
  <block id="ad90b7d29d0d8a9c746868fe1f38ca90" category="paragraph">RWO、ROX、RWX、RWOP</block>
  <block id="7e7d2470a40e817070cd42bd81713c7b" category="paragraph"><block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix="" category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事项</block>
  <block id="6bc1d5588b10361a0f432d43d687c72b" category="list-text">Azure NetApp Files服务不支持小于 50 GiB 的卷。如果请求的卷较小， Trident会自动创建 50GiB 的卷。</block>
  <block id="2d5ff5cb87519a4e50ace141656cfcb1" category="list-text">Trident仅支持挂载到运行在 Windows 节点上的 pod 的 SMB 卷。</block>
  <block id="a57ed56fc7ee91a9263e1c2ae851ac11" category="inline-link-macro">托管身份</block>
  <block id="f82e660891c5d7411358cecf3f95d1b8" category="paragraph">Trident支持<block ref="74c572b9a9e05a7969e3f88bd692fcb8" category="inline-link-macro-rx"></block>适用于 Azure Kubernetes 服务集群。要利用托管身份提供的简化凭证管理功能，您必须具备以下条件：</block>
  <block id="9586e9fc5ee74b6ceeab5ab5484c95b6" category="list-text">使用 AKS 部署的 Kubernetes 集群</block>
  <block id="4dca0f5a5f78322a0f3bfa9c6b8f54ad" category="list-text">在 AKS Kubernetes 集群上配置的托管身份</block>
  <block id="ba4a4a15a9255fcbc02a1aae5442a70e" category="list-text">已安装的Trident包括<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>指定<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>。</block>
  <block id="4f5dbc74e3448e08fe0e7bfd62876fc8" category="open-title">Trident操作员</block>
  <block id="948b24b4e198f8ddc985605c69c55718" category="paragraph">要使用Trident操作员安装Trident ，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>到<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>。例如：</block>
  <block id="152090ff5e9a05ea7e1cf0c248449638" category="open-title">舵</block>
  <block id="6e3a55be7185a416b963c89e1313a21e" category="paragraph">以下示例安装Trident套装<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>使用环境变量连接到 Azure<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block> ：</block>
  <block id="fed6290ac938ca603cf5f4f680802954" category="open-title">&lt;code&gt;tridentctl&lt;/code&gt;</block>
  <block id="5914afb9381493b19e7d55f591b22f7e" category="paragraph">以下示例安装Trident并进行设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>标记<block ref="3a580f142203677f1f0bc30898f63f53" prefix=" " category="inline-code"></block>：</block>
  <block id="f77d4be42f8ef9e2474d677786cf6d7a" category="paragraph">云身份使 Kubernetes pod 能够通过作为工作负载身份进行身份验证来访问 Azure 资源，而无需提供显式的 Azure 凭据。</block>
  <block id="088be2b53cfa8710d751578d273c4af0" category="paragraph">要在 Azure 中利用云身份功能，您必须具备以下条件：</block>
  <block id="c5ac38b2b362dbfd1b55bdb2b7e9375b" category="list-text">在 AKS Kubernetes 集群上配置工作负载身份和 oidc-issuer</block>
  <block id="f4a04ca0cf488acdb4c47e4276e53b0d" category="list-text">已安装的Trident包括<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>指定<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>和<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>指定工作负载标识</block>
  <block id="cd1b43a026c160e8905dc5847d424f8f" category="paragraph">要使用Trident操作员安装Trident ，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>到<block ref="71d36c46e340ad9137b2691e267f5ecd" prefix=" " category="inline-code"></block>并设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>到<block ref="ab6b275be02c02a9982cb7a0c234629e" prefix=" " category="inline-code"></block>。</block>
  <block id="919b714a25b423ceadcf231ff05b607b" category="paragraph">使用以下环境变量设置 *cloud-provider (CP)* 和 *cloud-identity (CI)* 标志的值：</block>
  <block id="0d28255dc96cb23d422741096c09ce8e" category="paragraph"><block ref="256d12880dee7515c7ed6253fd0a228a" prefix="" category="inline-code"></block><block ref="bd5ed83ae12ddcfe924a6af54a0be554" prefix=" " category="inline-code"></block></block>
  <block id="0df381404177fadd38b0a15ef178cf09" category="paragraph">以下示例安装Trident并进行设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>使用环境变量连接到 Azure<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>并设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>使用环境变量<block ref="c9d280b28993d1d105c3fbafb5868a15" prefix=" " category="inline-code"></block>：</block>
  <block id="400e51795e42b1bfc94a14aeeeacc04a" category="paragraph">请使用以下环境变量设置 *云提供商* 和 *云身份* 标志的值：</block>
  <block id="91a7e225ea23690e36a162b9c8a45058" category="paragraph"><block ref="256d12880dee7515c7ed6253fd0a228a" prefix="" category="inline-code"></block><block ref="a5f4eea4d47cf2db58f43a66329ecf1e" prefix=" " category="inline-code"></block></block>
  <block id="7d7c872ffb338fffab0ed66d892cf48b" category="paragraph">以下示例安装Trident并进行设置<block ref="e33bb4eb32023da4a8ea7a1ba6927067" prefix=" " category="inline-code"></block>标记<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>， 和<block ref="c5af480af77c330e04a1fce1f6c2b03a" prefix=" " category="inline-code"></block>到<block ref="c9d280b28993d1d105c3fbafb5868a15" prefix=" " category="inline-code"></block>：</block>
  <block id="6531f27ba87f15c54cdf44dcb7ef3273" category="summary">后端定义了Trident与存储系统之间的关系。它告诉Trident如何与该存储系统通信，以及Trident应该如何从中配置卷。 Trident安装完成后，下一步是创建后端。这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>自定义资源定义 (CRD) 使您能够通过 Kubernetes 界面直接创建和管理Trident后端。您可以使用<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>或者适用于您的 Kubernetes 发行版的等效 CLI 工具。</block>
  <block id="a8e174c63ac21920b8405ffddc39214a" category="doc">使用 kubectl 创建后端</block>
  <block id="454631312fab234fc91bb2f85a751fac" category="section-title"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix="" category="inline-code"></block></block>
  <block id="672d26386c125fcd3bc8d1c008758043" category="paragraph"><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix="" category="inline-code"></block> <block ref="11c73f5ef965e27ad7f2162c6d862d00" prefix="(" category="inline-code"></block>，<block ref="f049287d4b5e8c2771cd45ad40d6bbd0" prefix=" " category="inline-code"></block> ，<block ref="e4f7bfc35d74ab4136d16191494e7ceb" prefix=" " category="inline-code"></block> ) 是一个前端、命名空间 CRD，使您能够使用 来管理Trident后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。现在，Kubernetes 和存储管理员可以直接通过 Kubernetes CLI 创建和管理后端，而无需使用专门的命令行实用程序。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="(" category="inline-code"></block> ）。</block>
  <block id="b44c2fd5cefc815abed7e31c0fa8c8ac" category="paragraph">在创建之后<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>对于该对象，会发生以下情况：</block>
  <block id="b7bd3d795dd544bcf8b44a16fc1ddab8" category="list-text">Trident会根据您提供的配置自动创建后端。这在内部表示为<block ref="d2eac341e6076c7146e5b2598b973d94" prefix=" " category="inline-code"></block> <block ref="ebf1bd0254e733981928851df08fca08" prefix="(" category="inline-code"></block>，<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block> ）CR。</block>
  <block id="96cf9ab1c0acdca2aa54ed2c55a7e95d" category="list-text">这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>与……有着独特的联系<block ref="d2eac341e6076c7146e5b2598b973d94" prefix=" " category="inline-code"></block>这是由Trident生产的。</block>
  <block id="1efc3a14ca6dc7c90db79e02f3abe7d5" category="paragraph">每个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>与……保持一对一映射关系<block ref="d2eac341e6076c7146e5b2598b973d94" prefix=" " category="inline-code"></block>前者是提供给用户设计和配置后端的界面；后者是Trident表示实际后端对象的方式。</block>
  <block id="17858cf125217a7fe7239b3271b587af" category="admonition"><block ref="d2eac341e6076c7146e5b2598b973d94" prefix="" category="inline-code"></block>CR 由Trident自动创建。你*不应该*修改它们。如果您想对后端进行更新，请通过修改以下文件来实现：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。</block>
  <block id="9c3385530cf6e460576e5f6e7cc1b912" category="paragraph">以下示例展示了格式：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR：</block>
  <block id="c84ef67352bb6783ff2881f9f2821c2a" category="inline-link">trident-installer</block>
  <block id="f13a06ff6eab87969a9f96765f31ed9c" category="paragraph">您还可以查看以下示例：<block ref="6511e50af21389f9e77db56e03f6dd72" category="inline-link-rx"></block>包含所需存储平台/服务的示例配置的目录。</block>
  <block id="06df669f3ef6f929e9b58c9f47b65310" category="inline-link-macro">存储驱动程序的后端配置信息</block>
  <block id="75d6668e40a552149b5d5868b03080c8" category="paragraph">这<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>接受后端特定的配置参数。在这个例子中，后端使用了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>存储驱动程序，并使用此处表格中列出的配置参数。有关所需存储驱动程序的配置选项列表，请参阅<block ref="5f2d139eefa7c36061f4d97161be02ea" category="inline-link-macro-rx"></block>。</block>
  <block id="92051c832f01d9070a7ed71d1ce523c5" category="paragraph">这<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>本节还包括<block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix=" " category="inline-code"></block>和<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>这些字段是新引入的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR：</block>
  <block id="5ab961de690e071f0dc1c0dabac7fd89" category="list-text"><block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix="" category="inline-code"></block>此参数为必填字段，包含用于向存储系统/服务进行身份验证的凭据。这设置为用户创建的 Kubernetes Secret。凭据不能以明文形式传递，否则将导致错误。</block>
  <block id="9f11e03722a7b912083c63fc68f4dd7b" category="list-text"><block ref="98e7d6463271d7848db255ae6467817a" prefix="" category="inline-code"></block>此字段定义了当……时应该发生的情况<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>被删除。它可以取以下两个值之一：</block>
  <block id="d09d50d3f84f9c585492818f491a2497" category="list-text"><block ref="099af53f601532dbd31e0ea99ffdeb64" prefix="" category="inline-code"></block>这会导致两者被删除。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR及其相关后端。这是默认值。</block>
  <block id="f0c89ce27bf4c43949ad8f26a4f586bb" category="list-text"><block ref="16d79ff80feadcf2f52096f073f2b94a" prefix="" category="inline-code"></block>当<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 被删除后，后端定义仍然存在，并且可以通过以下方式进行管理：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。将删除策略设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>允许用户降级到早期版本（21.04 之前），并保留已创建的后端。该字段的值可以在之后更新<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>已创建。</block>
  <block id="7f2208582df334d090d35357eb5d6901" category="admonition">后端名称是通过以下方式设置的：<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block> 。如果未指定，则后端名称设置为……的名称<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>对象（metadata.name）。建议使用显式方式设置后端名称。<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block> 。</block>
  <block id="d2605b6821beb27d0e7001414ade9773" category="admonition">用以下方式创建的后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>没有关联的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。您可以选择使用以下方式管理此类后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>通过创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR。必须注意指定完全相同的配置参数（例如：<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block> ，<block ref="670f8a39d00195ce172543b2794c522b" prefix=" " category="inline-code"></block> ，<block ref="4f361a1568cc7e740f7642f6f59e2fe0" prefix=" " category="inline-code"></block> ， 等等）。  Trident将自动绑定新创建的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>利用现有的后端。</block>
  <block id="625cc9b8ccc34496dc2b3fcffb7e384a" category="section-title">步骤概述</block>
  <block id="a867c4bbc8d632a517f22b7377b9b8ed" category="paragraph">使用以下方式创建新的后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>你应该这样做：</block>
  <block id="4db4699aa0126dfb06878d7e07c0abdf" category="inline-link">Kubernetes Secret</block>
  <block id="b681f7c062097827d9374fb7ef922a12" category="list-text">创建一个<block ref="fcce7b7bd05b6b012eabe3df8de04808" category="inline-link-rx"></block>该密钥包含Trident与存储集群/服务通信所需的凭据。</block>
  <block id="c39d193a9cc4084cc6c7964e1bb5efd8" category="list-text">创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。这包含有关存储集群/服务的具体信息，并引用上一步中创建的密钥。</block>
  <block id="286b0035cf59742ffe54696b798f2368" category="paragraph">创建后端后，您可以使用以下方式观察其状态<block ref="20d1f22897b2280e34f2e6aa25c7bab0" prefix=" " category="inline-code"></block>并收集更多细节信息。</block>
  <block id="494cb787cd1c1f78123323c1006f2081" category="section-title">步骤 1：创建 Kubernetes Secret</block>
  <block id="7ba8d326bd3ffe1308f04d8ab5bf3d1a" category="paragraph">创建一个包含后端访问凭据的密钥。这是每个存储服务/平台独有的。以下是一个例子：</block>
  <block id="04402bf69acac56c72a55c0e4ac2165c" category="paragraph">下表总结了每个存储平台密钥中必须包含的字段：</block>
  <block id="94cec86c6eef229009007e6d00d54ef1" category="cell">存储平台密钥字段描述</block>
  <block id="1e6947ac7fb3a9529a9726eb692c8cc5" category="cell">秘密</block>
  <block id="c11257eff6563de2c05e353770c514ca" category="cell">字段描述</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="paragraph">客户端ID</block>
  <block id="012e85295e2f1f744cfb8757f8dd4830" category="paragraph">应用注册中的客户端 ID</block>
  <block id="a3c559e0541e9bb860178ce6fe414224" category="cell">Cloud Volumes Service for GCP</block>
  <block id="ee64ef6c307cfcfe5c0f085471cd61fa" category="paragraph">私钥 ID</block>
  <block id="1e31c22f827d25c5973eee697baace79" category="paragraph">私钥的ID。具有 CVS 管理员角色的 GCP 服务帐户的部分 API 密钥</block>
  <block id="156a17333e77a3c504018cae5ada8c3b" category="paragraph">私钥</block>
  <block id="8e0708b67ba6ce0f70a948152e7e7895" category="paragraph">私钥。具有 CVS 管理员角色的 GCP 服务帐户的部分 API 密钥</block>
  <block id="25de05ab7f10e99b499db62e0b89ad33" category="cell">元素（NetApp HCI/ SolidFire）</block>
  <block id="2a6ba72e93aa7fa676d07973ed2716bb" category="paragraph">端点</block>
  <block id="41eba2d95ecaf35c8bd3a972c263ffe4" category="paragraph">针对SolidFire集群的 MVIP，包含租户凭证</block>
  <block id="14c4b06b824ec593239362517f538b29" category="paragraph">用户名</block>
  <block id="6e1b40351708d93ce8c387f6f8ca7533" category="paragraph">用于连接到集群/SVM 的用户名。用于基于凭证的身份验证</block>
  <block id="5f4dcc3b5aa765d61d8327deb882cf99" category="paragraph">password</block>
  <block id="4d3fd9a7ab4c84b857fc26b2633237d0" category="paragraph">连接到集群/SVM 的密码。用于基于凭证的身份验证</block>
  <block id="19dce7ac7f5290fc8fa218ad0c858df5" category="paragraph">客户端私钥</block>
  <block id="8c5e8d4f9acf9295e1a96feef0c0b516" category="paragraph">客户端私钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="039e9d80fa53ba861c06b590ba3f9d34" category="paragraph">chap用户名</block>
  <block id="a7128cd45d4a277fe5c6ed6f6c4238f7" category="paragraph">入站用户名。如果 useCHAP=true，则为必填项。为了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="f9d0dc78b203f2c1106dc0c7d58a5397" category="paragraph">chapInitiatorSecret</block>
  <block id="2f573af61fb37b4f1c5e2def2341b7c4" category="paragraph">CHAP 发起者密钥。如果 useCHAP=true，则此项为必填项。为了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="2ebe107bb3bc9551fbb0e5033046931c" category="paragraph">chapTargetUsername</block>
  <block id="e945f079b3e50bd5722f056b72282608" category="paragraph">目标用户名。如果 useCHAP=true，则此项为必填项。为了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="4ab84a55744951d967033db9b64f6b27" category="paragraph">chapTargetInitiatorSecret</block>
  <block id="61b50fba255c10a4a2b5f7cf8276849a" category="paragraph">CHAP 目标发起者密钥。如果 useCHAP=true，则此项为必填项。为了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="73d583a1445e1497ec3adaa011e2724c" category="paragraph">此步骤中创建的秘密将在以下位置引用：<block ref="52c7b8f36716d3230d8fac3536f346c7" prefix=" " category="inline-code"></block>领域的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>在下一步创建的对象。</block>
  <block id="e892fda55ead7e15eed753e850d35f12" category="section-title">步骤 2：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR</block>
  <block id="3394622f88ed2c82c85e92e908879095" category="paragraph">您现在可以开始创建您的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR。在这个例子中，后端使用了<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序是通过使用以下方式创建的：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>下图所示物体：</block>
  <block id="d6f4b4bedc693acd49ad08c1cf0cdad5" category="section-title">步骤 3：验证状态<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR</block>
  <block id="967688089cfc07a6c8e893bce5186445" category="paragraph">现在你已经创建了<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR，您可以核实状态。请参见以下示例：</block>
  <block id="edc9d2e179d9bd8effd5277699967aff" category="paragraph">后端已成功创建并绑定到<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR。</block>
  <block id="ecb5320e6f020f2c2dcad7a6268111ed" category="paragraph">相位可以取以下值之一：</block>
  <block id="afad9414d1bc420e58e3a72442b8f495" category="list-text"><block ref="685d1f2146dd079015e81918414e8971" prefix="" category="inline-code"></block>： 这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 与后端关联，该后端包含<block ref="217026e5af08bfde5815657113dbfc82" prefix=" " category="inline-code"></block>设置为<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 的 uid。</block>
  <block id="f2edf590deb30828e48e7290aa78e788" category="list-text"><block ref="edac80248b7bf68ccfaa9c78bfb81c32" prefix="" category="inline-code"></block>：用以下方式表示<block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block>。这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>该对象未绑定到后端。所有新创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 默认处于此阶段。阶段变化后，它无法再恢复到未绑定状态。</block>
  <block id="5008913e7135c645ebbfbd67112d3184" category="list-text"><block ref="ffbb410a55bb31f801dea6387e2745ac" prefix="" category="inline-code"></block>： 这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR的<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>已设置为删除。当<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 被删除后，状态变为正在删除。</block>
  <block id="2836a99ecae06907e08eb3b9502d45d6" category="list-text">如果后端不存在持久卷声明 (PVC)，则删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>这将导致Trident删除后端以及<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR。</block>
  <block id="ffd02eb489e62222a00391567d0bad81" category="list-text">如果后端存在一个或多个 PVC，则进入删除状态。这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR随后也进入删除阶段。后端和<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>只有在所有 PVC 都被删除后才会删除。</block>
  <block id="39d978e14d4d8c9f19589af0d4e72661" category="list-text"><block ref="b578b733cbb788fc6ad208314d2c4c2b" prefix="" category="inline-code"></block>与后端相关的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 被意外或故意删除，并且<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 仍然保留着对已删除后端的引用。这<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>无论如何，CR 仍然可以被删除。<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>价值。</block>
  <block id="7ddc4cac10b03b42fc0ff0fc7e00789f" category="list-text"><block ref="88183b946cc5f0e8c96b2e66e1c74a7e" prefix="" category="inline-code"></block>Trident无法确定与以下系统关联的后端的状态或是否存在：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR。例如，如果 API 服务器没有响应，或者如果<block ref="5f829d3562952527064a5c553cd09189" prefix=" " category="inline-code"></block>CRD 缺失。这可能需要干预。</block>
  <block id="fdf3d4560a801cb64c255cc2790fe9cc" category="inline-link-macro">后端更新和后端删除</block>
  <block id="57867491a75119ccf33f6ed8a434ff8e" category="paragraph">至此，后端已成功创建！此外，还可以处理以下几种操作：<block ref="9f5a7b55f1a44b55d5336cefd3bf688e" category="inline-link-macro-rx"></block> 。</block>
  <block id="4dca0b80562cc590644c1acfada17219" category="section-title">（可选）步骤 4：了解更多详情</block>
  <block id="22f66c61dd35abb0ae1840a7e38ae1b9" category="paragraph">您可以运行以下命令来获取有关后端的更多信息：</block>
  <block id="aab3a73056ee2962dff0130da0538454" category="paragraph">此外，您还可以获取 YAML/JSON 转储文件。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 。</block>
  <block id="5c3139ae9ab5d818511e9d321e73fece" category="paragraph"><block ref="5a5abb2eaa9c440d605c2a659dd2079f" prefix="" category="inline-code"></block>包含<block ref="a3d5885ebdbdbb3f39c48e483cc04978" prefix=" " category="inline-code"></block>以及<block ref="17b686c7edfa8cfaa60e094e4592491f" prefix=" " category="inline-code"></block>后端是根据以下情况创建的：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR。这<block ref="8d625027763e2e062eb5f57c8518040d" prefix=" " category="inline-code"></block>该字段表示上次操作的状态<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR（变更请求）可以由用户触发（例如，用户更改了某些内容）。<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block> ）或由Trident触发（例如，在Trident重启期间）。结果要么是成功，要么是失败。<block ref="7ee7184c970537ea83afe7f9bae4c61f" prefix=" " category="inline-code"></block>代表了以下关系的状态：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> CR 和后端。在上面的例子中，<block ref="7ee7184c970537ea83afe7f9bae4c61f" prefix=" " category="inline-code"></block>具有 Bound 值，这意味着<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR与后端相关。</block>
  <block id="7b7587593fc7d381339d450faa35dfa9" category="paragraph">您可以运行<block ref="78b137a0e31097f4e74b4d44c43efc40" prefix=" " category="inline-code"></block>获取事件日志详细信息的命令。</block>
  <block id="6dc07da7e54d697726bb349fb693fa8b" category="inline-link-macro">参见此处</block>
  <block id="c732962a4a01ea5f406ec66e50e98903" category="admonition">您无法更新或删除包含关联后端的后端。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>使用对象<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。要了解在以下两者之间切换所涉及的步骤：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>和<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>，<block ref="8d6bc70a41f48e3f72c3f5ea8752090b" category="inline-link-macro-rx"></block> 。</block>
  <block id="2941c38dbb7c39c325787067c0540247" category="summary">了解如何使用以下方式执行后端管理操作<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。</block>
  <block id="634b471e6af84767e06324552492b533" category="section-title">删除后端</block>
  <block id="cd9b0eee685820fd4ee1b3c0bea5cfb5" category="paragraph">通过删除一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>您指示Trident删除/保留后端（基于<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>）。要删除后端，请确保<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>已设置为删除。仅删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>确保<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为保留。这样可以确保后端仍然存在，并且可以通过以下方式进行管理：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="337d79852891a37d41285c9101c3fff4" category="paragraph">运行以下命令：</block>
  <block id="5f39834a6f39c7539a5edeb4e8f3ea48" category="paragraph">Trident不会删除正在使用的 Kubernetes Secrets。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 。 Kubernetes 用户负责清理密钥。删除机密信息时务必谨慎。只有当后端不再使用密钥时，才应该删除密钥。</block>
  <block id="d694c8966214ec6d0068c0ab2951b65c" category="section-title">查看现有后端</block>
  <block id="265ab4809f08d248e5045a8638ac7afa" category="paragraph">你也可以运行<block ref="86d87141fccdd14380a93351cf8a88e3" prefix=" " category="inline-code"></block>或者<block ref="d6b02c316f6c883e36a3c61bc723ec25" prefix=" " category="inline-code"></block>获取所有现有后端的列表。此列表还将包括使用以下方式创建的后端：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="93dbcf0189ff94d39230d2e3726969ab" category="section-title">更新后端</block>
  <block id="93700a3ea9dc6d858638cd66cd2f2bfa" category="paragraph">更新后端的原因可能有很多：</block>
  <block id="63f9a789e1c077aab804a2a5c20f1419" category="list-text">存储系统的凭证已更改。要更新凭据，需要更新 Kubernetes Secret，该 Secret 用于：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>对象必须更新。 Trident会自动使用提供的最新凭据更新后端。运行以下命令更新 Kubernetes Secret：</block>
  <block id="d1cc287cede970a7472833938f39b940" category="list-text">需要更新参数（例如正在使用的ONTAP SVM 的名称）。</block>
  <block id="bb5c9e20ecc2d96bd9d91107161bf89b" category="list-text">您可以更新<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>使用以下命令直接通过 Kubernetes 访问对象：</block>
  <block id="ccec41e7609b17a7fe58691b5cbf68ea" category="list-text">或者，您可以对现有内容进行更改。<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>使用以下命令进行回车：</block>
  <block id="d38f034e9aa082af3ec19c23caff4b0f" category="list-text">如果后端更新失败，后端将继续保持其最后一次已知的配置。您可以通过运行以下命令查看日志以确定原因。<block ref="f06ab1779eb739084ddf83006fb6f403" prefix=" " category="inline-code"></block>或者<block ref="f9d8dd15d0562f29d38ca5412f8d3a1b" prefix=" " category="inline-code"></block>。</block>
  <block id="5878b59fb3a8430928026b63b5ca336f" category="list-text">在您发现并纠正配置文件中的问题后，您可以重新运行更新命令。</block>
  <block id="72a5926b7fb086fe87e93771f6620556" category="summary">了解如何使用以下方式执行后端管理操作<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="748a22b5f1312291ad55429ba4b809a0" category="doc">使用 tridentctl 执行后端管理</block>
  <block id="aeeb03235358f0f4bf3be628bed08721" category="section-title">创建后端</block>
  <block id="34746f7a1d24170eeebf5510a045d43d" category="inline-link-macro">后端配置文件</block>
  <block id="99b7232073a67a8c82304f979e3dc83f" category="paragraph">创建之后<block ref="03c0b6ed8698193668e92f56e9be3efa" category="inline-link-macro-rx"></block>运行以下命令：</block>
  <block id="1cabe44c722167581b1e219de6c58341" category="paragraph">如果后端创建失败，则说明后端配置存在问题。您可以通过运行以下命令查看日志以确定原因：</block>
  <block id="b5f9999463782f0c36ecc89573a90a49" category="paragraph">在您发现并纠正配置文件中的问题后，您只需运行以下命令即可。<block ref="76ea0bebb3c22822b4f0dd9c9fd021c5" prefix=" " category="inline-code"></block>再次发出命令。</block>
  <block id="4f3ff24da375936278cfeceb396c61dd" category="paragraph">要从Trident中删除后端，请执行以下操作：</block>
  <block id="f6816a6570e6b6097177f9adc1f4805b" category="list-text">获取后端名称：</block>
  <block id="11f4ccb46eb9afc4b1187c376b53123f" category="list-text">删除后端：</block>
  <block id="1e0e0f35966b4297310419e9023a837b" category="admonition">如果Trident已从此后端配置了仍然存在的卷和快照，则删除后端将阻止从该后端配置新卷。后端将继续处于“删除”状态。</block>
  <block id="a6345aca446812b9124c47b385b33f43" category="paragraph">要查看Trident已知的后端，请执行以下操作：</block>
  <block id="cb325bc4dded2aa4744b594966262a99" category="list-text">要获取摘要，请运行以下命令：</block>
  <block id="9f073deeee70a1418443c3b8379c5c02" category="list-text">要获取所有详细信息，请运行以下命令：</block>
  <block id="27709162cf6b8ffced7bb1da6dd49df3" category="paragraph">创建新的后端配置文件后，运行以下命令：</block>
  <block id="4ca005817e9c882d0ef15d451a97dbf0" category="paragraph">如果后端更新失败，则说明后端配置有问题，或者您尝试了无效的更新。您可以通过运行以下命令查看日志以确定原因：</block>
  <block id="20b5ebaa2558437206eb6d1d47577805" category="paragraph">在您发现并纠正配置文件中的问题后，您只需运行以下命令即可。<block ref="3ac340832f29c11538fbe2d6f75e8bcc" prefix=" " category="inline-code"></block>再次发出命令。</block>
  <block id="d47f84a3cda326babf841866ad2326ab" category="section-title">确定使用后端存储的存储类</block>
  <block id="02fe9d429af25b46c16a1172d735124f" category="paragraph">这是一个您可以使用 JSON 回答的问题示例：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>后端对象的输出。这使用<block ref="d8757fb4e9ea07606d23a1ef5a4b8d4e" prefix=" " category="inline-code"></block>您需要安装该实用程序。</block>
  <block id="e00013adda7b5901ea3e44ae300fd73d" category="paragraph">这也适用于使用以下方式创建的后端：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 。</block>
  <block id="734b51d6b10d22bfb052a1b8e8a9bc56" category="summary">了解Trident中管理后端的不同方法。</block>
  <block id="4342473e01edd2e1440b8b76076f4c9e" category="doc">在后端管理选项之间切换</block>
  <block id="798f4548a52b3c91b25609a82ff6a12e" category="paragraph">随着<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>现在，管理员有两种独特的后端管理方式。这就引出了以下问题：</block>
  <block id="a7b407f571446f9f4a30f63e8160784a" category="list-text">可以使用以下方式创建后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>以……进行管理<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>？</block>
  <block id="3e1fc11d05c13404995af2b9fda64675" category="list-text">可以使用以下方式创建后端<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>可通过以下方式进行管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>？</block>
  <block id="6c6e605e09d47da14693d106977b6eb0" category="section-title">管理<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>使用后端<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block></block>
  <block id="d6da18e16f248df47ee8e5139ef0156a" category="paragraph">本节介绍管理使用以下方式创建的后端所需的步骤：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>直接通过 Kubernetes 接口创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>物体。</block>
  <block id="bee2ae6068ad50344ddb325737434004" category="paragraph">这适用于以下情况：</block>
  <block id="88512325ffcc13fbee60f3ca0669f67e" category="list-text">预先存在的后端，没有<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>因为它们是用……创造的<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="8eed1f3ae09f008e2dbfb4280a0c137c" category="list-text">使用以下方式创建的新后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>而其他<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>物体是存在的。</block>
  <block id="e0b4d05f7fb24e9606ae02b176974698" category="paragraph">在这两种情况下，后端都将继续存在， Trident将调度卷并对其进行操作。管理员此时有两种选择：</block>
  <block id="95328f21e7a6deb7bb94acb3866753a6" category="list-text">继续使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>管理使用它创建的后端。</block>
  <block id="82c1dd66573aab904c86b63e2d5486ad" category="list-text">使用以下方式创建的绑定后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>到一个新的<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。这样做意味着后端将使用以下方式进行管理：<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>而不是<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>。</block>
  <block id="d12d5022b29f44c340ee55411970fe10" category="paragraph">使用以下方式管理预先存在的后端<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>您需要创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>它与现有后端绑定。以下是其工作原理概述：</block>
  <block id="1abff208034794e09bab3e34ad393f6c" category="list-text">创建 Kubernetes Secret。该密钥包含Trident与存储集群/服务通信所需的凭据。</block>
  <block id="b863de09ccfaf2861ead350dd78a9933" category="list-text">创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。这包含有关存储集群/服务的具体信息，并引用上一步中创建的密钥。必须注意指定完全相同的配置参数（例如：<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block> ，<block ref="670f8a39d00195ce172543b2794c522b" prefix=" " category="inline-code"></block> ，<block ref="4f361a1568cc7e740f7642f6f59e2fe0" prefix=" " category="inline-code"></block> ， 等等）。<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block>必须设置为现有后端的名称。</block>
  <block id="44411eb1f3a70196b442f0ed4bb62820" category="section-title">步骤 0：确定后端</block>
  <block id="4bf283d1d1c781fbb7e90b237dc80ac4" category="paragraph">创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>如果要绑定到现有后端，则需要获取后端配置。在这个例子中，我们假设使用以下 JSON 定义创建了一个后端：</block>
  <block id="2181a22b3daf7866094f9f0d79da87d0" category="paragraph">创建一个包含后端凭据的 Secret，如下例所示：</block>
  <block id="78fb4311dea625690d7fb6274025625a" category="section-title">步骤 2：创建<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR</block>
  <block id="276e25c1cf06c603ba2d133ae2e39dde" category="paragraph">下一步是创建一个<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 将自动绑定到预先存在的<block ref="50f1baa55915aa000046e11e5aca6e3e" prefix=" " category="inline-code"></block>（如本例所示）。请确保满足以下要求：</block>
  <block id="0cbfd18f16db9afdef577eeddd6a8bee" category="list-text">后端名称在以下位置定义：<block ref="de48524ae3369aa3a3a220c9107c1d2b" prefix=" " category="inline-code"></block> 。</block>
  <block id="f261e4f2fe82344f35f04f9b3813e425" category="list-text">配置参数与原后端相同。</block>
  <block id="c632eed28bf53466df8b8a33aedab3af" category="list-text">虚拟池（如果存在）必须保持与原始后端相同的顺序。</block>
  <block id="8f50f98a5b56105263e2f7ab18dc0686" category="list-text">凭证通过 Kubernetes Secret 提供，而不是以明文形式提供。</block>
  <block id="05c8cd2e49ae2ecaee101c9bc5619d49" category="paragraph">在这种情况下，<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>将会像这样：</block>
  <block id="63d6f3ce15066b6232a788bb692bf721" category="paragraph">之后<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>已经创建，它的阶段必须是<block ref="685d1f2146dd079015e81918414e8971" prefix=" " category="inline-code"></block>。它还应该反映与现有后端相同的后端名称和 UUID。</block>
  <block id="d1a75f7c76623350486029378ab164c3" category="paragraph">后端现在将完全使用以下方式进行管理：<block ref="f695ccd8d6d09cfeee2cf7d06725f9e5" prefix=" " category="inline-code"></block><block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>目的。</block>
  <block id="a035fed1dd97545349b5fffbd9e3e88f" category="section-title">管理<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>使用后端<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="fcea92f3e948217919ca8b4051c2c61e" category="paragraph"><block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="" category="inline-code"></block>可用于列出使用以下方式创建的后端：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block> 。此外，管理员还可以选择通过以下方式完全管理此类后端：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>通过删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>并确保<block ref="665ed1e9e5fa7278d49de298928f771c" prefix=" " category="inline-code"></block>设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>。</block>
  <block id="ab0c73d8e0377b2df5b783d3a76f2249" category="paragraph">例如，假设我们使用以下方式创建了以下后端<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>：</block>
  <block id="4cfeb5a9099082a66a720c90a50036af" category="paragraph">从输出结果可以看出：<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>已成功创建并绑定到后端[观察后端的 UUID]。</block>
  <block id="0901a332c26ed210204bad23d45c8b6d" category="section-title">步骤 1：确认<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block></block>
  <block id="76d558fd5aada70a89c3e865ca420a68" category="paragraph">让我们来看看它的价值<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>。需要将其设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>。这确保了当<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR 被删除后，后端定义仍然存在，并且可以通过以下方式进行管理：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> 。</block>
  <block id="1ad97e0f65ef91102831baaa31630c76" category="admonition">除非另有说明，否则请勿进行下一步。<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>。</block>
  <block id="2f1beb23541bc11eb53ca6b33485d4f8" category="section-title">步骤二：删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR</block>
  <block id="8313f77478cb0df464604ae4435acce2" category="paragraph">最后一步是删除<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>CR。确认后<block ref="98e7d6463271d7848db255ae6467817a" prefix=" " category="inline-code"></block>设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>您可以继续删除：</block>
  <block id="112121684d9357cc8fb46c6007457443" category="paragraph">删除后<block ref="913a4b06671d1e04e6582a85afe3abbe" prefix=" " category="inline-code"></block>Trident只是移除该对象，而不会实际删除后端本身。</block>
  <block id="81feffd6e3f1dfe7d96f93bb83a3576f" category="paragraph">Trident会自动提供符合存储类定义要求的后端存储池。了解如何配置存储系统的后端。</block>
  <block id="2acbb5dd492d792d00383b0c76ade4ad" category="list-text"><block ref="2acbb5dd492d792d00383b0c76ade4ad" category="inline-link-macro-rx"></block></block>
  <block id="b73a4f3ea8538e5ef0b4078c119b3c8d" category="inline-link-macro">配置Google Cloud NetApp Volumes后端</block>
  <block id="2fc23e09b483dc4495beb473646c0273" category="list-text"><block ref="2fc23e09b483dc4495beb473646c0273" category="inline-link-macro-rx"></block></block>
  <block id="252e63ff646a0204671ca04a26b88e06" category="inline-link-macro">为 Google Cloud Platform 后端配置Cloud Volumes Service</block>
  <block id="c00b6e370d4496e06d2135275a992af5" category="list-text"><block ref="c00b6e370d4496e06d2135275a992af5" category="inline-link-macro-rx"></block></block>
  <block id="f2733a323df72dea4b230205225bdc13" category="inline-link-macro">配置NetApp HCI或SolidFire后端</block>
  <block id="b1064b6f7a5906eac23601dc24ba95a8" category="list-text"><block ref="b1064b6f7a5906eac23601dc24ba95a8" category="inline-link-macro-rx"></block></block>
  <block id="a3610578ce54198653d7e0b2cc53c05d" category="inline-link-macro">使用ONTAP或Cloud Volumes ONTAP NAS 驱动程序配置后端</block>
  <block id="f4f833852bac4217eff92d53c1bd24dc" category="list-text"><block ref="f4f833852bac4217eff92d53c1bd24dc" category="inline-link-macro-rx"></block></block>
  <block id="29db8b676d0a02f8179869506102c8ce" category="inline-link-macro">使用ONTAP或Cloud Volumes ONTAP SAN 驱动程序配置后端</block>
  <block id="df7d9b009cdb0a2623872cb3f905e161" category="list-text"><block ref="df7d9b009cdb0a2623872cb3f905e161" category="inline-link-macro-rx"></block></block>
  <block id="982a76bd7422f8b1ee773545fc01ea11" category="inline-link-macro">将Trident与Amazon FSx for NetApp ONTAP</block>
  <block id="729d88792170d42963cf63b9e9606321" category="list-text"><block ref="729d88792170d42963cf63b9e9606321" category="inline-link-macro-rx"></block></block>
  <block id="68a131c3971c1c8532edfb16be1b2903" category="summary">您可以设计一个 Kubernetes StorageClass 文件，并创建 StorageClass 来指示Trident如何配置卷。</block>
  <block id="e093f3bc5e5c7d5965cb1bf67aeee4c6" category="paragraph">配置 Kubernetes StorageClass 对象并创建存储类，以指示Trident如何配置卷。</block>
  <block id="95d4f411b57eb8201e27fa4636c30816" category="section-title">配置 Kubernetes StorageClass 对象</block>
  <block id="b8d89cc8455fbb137550c0819b7813c8" category="inline-link">Kubernetes StorageClass 对象</block>
  <block id="cc11289855049780fd7db136e693d82e" category="paragraph">这<block ref="da3f7f170e13df7f56e057fc4226aa85" category="inline-link-rx"></block>确定Trident是该类使用的配置器，并指示Trident如何配置卷。例如：</block>
  <block id="cfcd78d3f3ec6bdd1da5051dc5fbad51" category="paragraph">请参阅<block ref="879ce943b486ecaae1c4cb96b01133e9" category="inline-link-macro-rx"></block>有关存储类如何与……交互的详细信息<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>以及控制Trident如何分配容量的参数。</block>
  <block id="d955a256e02907c43d2afd5bfdb671ea" category="paragraph">创建 StorageClass 对象后，即可创建存储类。<block ref="1310ad9d78b8b659f76828400b5d8126" category="inline-xref-macro-rx"></block>提供一些您可以使用或修改的基本示例。</block>
  <block id="a221a060125881c2027807248f8302a2" category="list-text">这是一个 Kubernetes 对象，所以请使用<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>在 Kubernetes 中创建它。</block>
  <block id="060364df9713326935c57a6702c9084c" category="list-text">现在您应该在 Kubernetes 和Trident中都看到 *basic-csi* 存储类，并且Trident应该已经发现了后端上的存储池。</block>
  <block id="f31a577daf927c7edc5555c9ceabc983" category="section-title">存储类示例</block>
  <block id="64c314ed1bd24115a72a8a4284115a5c" category="inline-link">针对特定后端的简单存储类定义</block>
  <block id="45ae9b184f3067c00f4a660edac67a17" category="paragraph">Trident提供<block ref="78512e06e40b1d6e7b22821168623dd6" category="inline-link-rx"></block>。</block>
  <block id="d9ab9b10b2101546e16eeab0b981d10c" category="paragraph">或者，您可以编辑<block ref="9a35c6080acd99f860d0c669b1a980f9" prefix=" " category="inline-code"></block>安装程序附带的文件并替换<block ref="9c9a0798e59f3f4d7b08e45faef1e131" prefix=" " category="inline-code"></block>使用存储驱动程序名称。</block>
  <block id="689375d73a0e73673da4e52a37631d4d" category="summary">Trident可以利用 CSI 拓扑功能，有选择地创建卷并将其附加到 Kubernetes 集群中的节点。</block>
  <block id="4abea6bac3b0b48d11dd8dcd02a11bf9" category="inline-link">CSI拓扑功能</block>
  <block id="f9ee522bc68b30b3de2c706b1e656ea6" category="paragraph">Trident可以利用以下方式选择性地创建卷并将其附加到 Kubernetes 集群中的节点：<block ref="80b9a4f4a1bc9851317207ee3477041a" category="inline-link-rx"></block> 。</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">概述</block>
  <block id="fad4fe0757704f7cfbc0d68602a1a58b" category="paragraph">使用 CSI 拓扑功能，可以根据区域和可用区域将对卷的访问限制到节点子集。如今，云服务提供商允许 Kubernetes 管理员创建基于区域的节点。节点可以位于一个区域内的不同可用区，也可以跨多个区域。为了方便在多区域架构中为工作负载配置卷， Trident使用了 CSI 拓扑。</block>
  <block id="592af423a2f6a51f57c639ec7f7b245e" category="admonition">了解更多关于 CSI 拓扑功能的信息<block ref="ff042e7f24bd2adcec09d78466034177" category="inline-link-rx"></block>。</block>
  <block id="bbdcaf9b704dc7a7cf73e6000101b65a" category="paragraph">Kubernetes 提供了两种独特的卷绑定模式：</block>
  <block id="c7c66bdbe6c90a256243cb5346a324a5" category="list-text">和<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block>设置为<block ref="43f6615bbb2c40a5306ff804094420b1" prefix=" " category="inline-code"></block>Trident创建卷时没有任何拓扑感知。卷绑定和动态配置在创建 PVC 时处理。这是默认设置。<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block>适用于不强制执行拓扑约束的集群。持久卷的创建不依赖于请求 pod 的调度要求。</block>
  <block id="5fca24470d51aa51b0fb2d0f27c25c68" category="list-text">和<block ref="7d1aaf47144f9eb2fc66e328ddd3bad7" prefix=" " category="inline-code"></block>设置为<block ref="ed783cfa871a96ff337b1ae9a5f8bfa5" prefix=" " category="inline-code"></block>PVC 的持久卷的创建和绑定将被延迟，直到使用该 PVC 的 pod 被调度和创建。这样，就可以创建卷来满足拓扑要求所强制执行的调度约束。</block>
  <block id="3bbc2da928dcf77a048cdd745fe7d208" category="admonition">这<block ref="ed783cfa871a96ff337b1ae9a5f8bfa5" prefix=" " category="inline-code"></block>绑定模式不需要拓扑标签。这可以独立于 CSI 拓扑功能使用。</block>
  <block id="edff21c44983aaa85506a3dfe467c494" category="paragraph">要使用 CSI 拓扑结构，您需要以下组件：</block>
  <block id="c27e444dab3a08bf8ec59794897c1a27" category="inline-link-macro">支持的 Kubernetes 版本</block>
  <block id="1dedbfd605df8b562acc8f759a8e9acc" category="list-text">运行中的 Kubernetes 集群<block ref="229e1052bb9ecd8cf2680d6f44691174" category="inline-link-macro-rx"></block></block>
  <block id="e60c9ae411010a64108db4f1b8d793be" category="list-text">集群中的节点应带有标签，以体现拓扑感知能力。<block ref="e1ff98cb39abe026da77d207e1fd46de" prefix="(" category="inline-code"></block>和<block ref="c4d11894a6687c3a84f5daeda7154443" prefix=" " category="inline-code"></block>）。在安装Trident之前，集群中的节点上*应该存在这些标签*，以便Trident能够感知拓扑结构。</block>
  <block id="0bd58c9826639ac2db106c3b277a7e0f" category="section-title">步骤 1：创建拓扑感知后端</block>
  <block id="6110b46939d65cd5339476bd5fdbe7df" category="paragraph">Trident存储后端可以设计为根据可用区选择性地配置卷。每个后端都可以携带一个可选组件<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block>表示所支持的区域和地区列表的块。对于使用此类后端的 StorageClasses，只有在受支持的区域/区域中调度的应用程序请求时才会创建卷。</block>
  <block id="bd4b2f0d545a83fd434f5ba1f17dd087" category="paragraph">以下是一个后端定义示例：</block>
  <block id="db432089fc07064a10ae6334c0db7e97" category="admonition"><block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix="" category="inline-code"></block>用于提供每个后端区域和分区的列表。这些区域和分区代表了 StorageClass 中可以提供的允许值的列表。对于包含后端提供的区域和可用区子集的存储类， Trident会在后端创建一个卷。</block>
  <block id="217d95247b26701da7fd823884d84723" category="paragraph">你可以定义<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block>每个存储池也是如此。请参见以下示例：</block>
  <block id="c6c80256ac468b3d88d7b62d8753f192" category="paragraph">在这个例子中，<block ref="960db2ed82202a9706b97775a4269378" prefix=" " category="inline-code"></block>和<block ref="a84e5f25e7f6d5de9b82ce3f64d1b8fa" prefix=" " category="inline-code"></block>标签代表存储池的位置。<block ref="e1ff98cb39abe026da77d207e1fd46de" prefix=" " category="inline-code"></block>和<block ref="c4d11894a6687c3a84f5daeda7154443" prefix=" " category="inline-code"></block>决定存储池可以从何处使用。</block>
  <block id="54e204e8e05b6eb24d965741eb977e69" category="section-title">步骤 2：定义拓扑感知的存储类。</block>
  <block id="090f70d385b4a21aa6c8f2a0ca558616" category="paragraph">根据提供给集群中节点的拓扑标签，可以定义 StorageClasses 来包含拓扑信息。这将决定哪些存储池可作为 PVC 请求的候选对象，以及哪些节点子集可以使用Trident提供的卷。</block>
  <block id="ecb383148a1bc974cba3ac735a79f4c6" category="paragraph">请参见以下示例：</block>
  <block id="f8d5cb4864ad5d339fb567af550ff371" category="paragraph">在上述 StorageClass 定义中，<block ref="086b513e7d83c4cf32a8bd3550679276" prefix=" " category="inline-code"></block>设置为<block ref="ed783cfa871a96ff337b1ae9a5f8bfa5" prefix=" " category="inline-code"></block>。使用此 StorageClass 请求的 PVC 只有在 pod 中被引用后才会执行。和，<block ref="df6ccab784b5892507a7d11443254dc8" prefix=" " category="inline-code"></block>提供要使用的区域和范围。这<block ref="a88a8ddf9fecacf26383a3c60dc3e5fb" prefix=" " category="inline-code"></block>StorageClass 在存储上创建 PVC。<block ref="e3ed370204229201f6df345a5a590519" prefix=" " category="inline-code"></block>后端定义如上所述。</block>
  <block id="df340fb31051c975afb3518dfd32e07c" category="section-title">步骤 3：制作并使用 PVC</block>
  <block id="f98be29d352e7c38a6502e76bbfaf34c" category="paragraph">创建 StorageClass 并将其映射到后端后，现在可以创建 PVC。</block>
  <block id="c4b17c8733f9f36fdc682242d2b64ab2" category="paragraph">请参阅示例<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>以下：</block>
  <block id="427e01a8fca484c85a1e8e3a672b999a" category="paragraph">使用此清单创建 PVC 将产生以下结果：</block>
  <block id="e65f170821e3417d48579a28989a9260" category="paragraph">为了让Trident形成体积并将其与 PVC 结合，请使用 PVC 管。请参见以下示例：</block>
  <block id="9b8ff27bceb4601d1f866c4cf39fe449" category="paragraph">此 podSpec 指示 Kubernetes 将 pod 调度到存在于以下位置的节点上：<block ref="71a19c09ed1636680a56d8f8d9766808" prefix=" " category="inline-code"></block>在该区域中，选择任何存在的节点。<block ref="6b255e25f36cde4f15e99ca4978b2710" prefix=" " category="inline-code"></block>或者<block ref="ed5c4bc41bbc57e4165f20d56c997a77" prefix=" " category="inline-code"></block>区域。</block>
  <block id="c93345596f9f82deea04d17ef8c6ca89" category="paragraph">请查看以下输出：</block>
  <block id="19ef07597f79648211dbed100709836b" category="section-title">更新后端以包含<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block></block>
  <block id="476950aea923438779c9544953093cb9" category="paragraph">可以更新现有的后端，使其包含以下列表：<block ref="1f2a94e142bf020b1f7c6297ec12413f" prefix=" " category="inline-code"></block>使用<block ref="ad782b779edfd8199198bed41b3e3b6b" prefix=" " category="inline-code"></block>。这不会影响已经分配的容量，只会用于后续的PVC。</block>
  <block id="ded10f93b9e4453980b7009035c63418" category="inline-link">管理容器资源</block>
  <block id="47ea3356a13b3f6644e6c05450e9d5e1" category="list-text"><block ref="47ea3356a13b3f6644e6c05450e9d5e1" category="inline-link-rx"></block></block>
  <block id="6370f866cf64618c026027da41bd248e" category="inline-link">节点选择器</block>
  <block id="2a4ad9fc807789134426a1b2babc5733" category="list-text"><block ref="2a4ad9fc807789134426a1b2babc5733" category="inline-link-rx"></block></block>
  <block id="873bf2b9b61a741ce5b7326a3a053489" category="inline-link">亲和力和反亲和力</block>
  <block id="ec5df0a2adb621359563958138462e34" category="list-text"><block ref="ec5df0a2adb621359563958138462e34" category="inline-link-rx"></block></block>
  <block id="e1e08e40036f927a0e660c22aa837f88" category="inline-link">污点和容忍度</block>
  <block id="66b1e0aa9cd6e46c0b85fdf56a15154a" category="list-text"><block ref="66b1e0aa9cd6e46c0b85fdf56a15154a" category="inline-link-rx"></block></block>
  <block id="48dec026afe488df8faca35c5c3a39ea" category="summary">了解如何在Trident安装中创建和使用 Element 后端。</block>
  <block id="e3bf4f4da0c5a0a22b37a23b20b2789f" category="paragraph">了解如何在Trident安装中创建和使用 Element 后端。</block>
  <block id="4e7d6286f837d54a4e4154d4b21b0659" category="section-title">元素驱动程序详情</block>
  <block id="55d12319f030354c3d3da130783340d4" category="paragraph">Trident提供<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>用于与集群通信的存储驱动程序。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="d332cf1f1b1ca6601e95859b9d3b2434" category="paragraph">这<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>存储驱动程序支持_文件_和_块_卷模式。对于<block ref="ac52cf637478f3656a1fdee5c02324fd" prefix=" " category="inline-code"></block>volumeMode， Trident创建一个卷并创建一个文件系统。文件系统类型由 StorageClass 指定。</block>
  <block id="1b5e109e8afd1f9b7f5bbf951eea3442" category="cell">音量模式</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="paragraph">块</block>
  <block id="02017e70674a0c740b2b95fbb0cc2aa1" category="paragraph">没有文件系统。原始块设备。</block>
  <block id="fcd147679464b9eda6367f4e90e16ff8" category="paragraph">RWO，RWOP</block>
  <block id="a029cca698cbf05f07897f86c43cf9e8" category="paragraph"><block ref="310201b6353c5f38bc039e0e51b079d3" prefix="" category="inline-code"></block>，<block ref="66f137c5dc684da2a6a65917c86edd67" prefix=" " category="inline-code"></block> ，<block ref="40d1d2ce03569076bd0dc1e0ff90aa4c" prefix=" " category="inline-code"></block></block>
  <block id="6792aad2d8c086a9d25f5ad8ec090f35" category="paragraph">创建 Element 后端之前，您需要以下内容。</block>
  <block id="d1d184cecc23825cff20fabf3cdfb862" category="list-text">一个支持运行 Element 软件的存储系统。</block>
  <block id="4055116469942da7f6ed83abcf57d0a4" category="list-text">拥有NetApp HCI/ SolidFire集群管理员或租户用户权限，可以管理卷。</block>
  <block id="d5fa5f22855b065d96647dfb0c06d685" category="inline-link-macro">工作节点准备信息</block>
  <block id="d1b5b194ace83d9f896d8f8b6765def5" category="list-text">所有 Kubernetes 工作节点都应该安装相应的 iSCSI 工具。参考<block ref="073953144b84efd85603bb3d49521e06" category="inline-link-macro-rx"></block>。</block>
  <block id="9d370350f8d0178b5dfbec9def10d13a" category="paragraph">请参阅下表了解后端配置选项：</block>
  <block id="1c52b877ebb92e642f84ee1628240247" category="cell">始终是“solidfire-san”</block>
  <block id="31079062306e509fbecf7a2bd9485187" category="cell">"solidfire_" + 存储 (iSCSI) IP 地址</block>
  <block id="b07ca7de83de58a699966c9bc9003020" category="cell">存储（iSCSI）IP 地址和端口</block>
  <block id="eea443d4fcc24d4cd2cab08c2a6c062f" category="cell"><block ref="42cecfeff00cc916fef4f64e7b921079" prefix="" category="inline-code"></block></block>
  <block id="749df53d02481e75dd919dddf42fbbef" category="cell">要应用于卷的任意 JSON 格式标签集。</block>
  <block id="251f1fc42c38ca55f30e5e9d11dac168" category="cell">要使用的租户名称（如果找不到则创建）</block>
  <block id="4381b3c378885de93e2166f240096338" category="cell">将 iSCSI 流量限制到特定主机接口</block>
  <block id="9aa82da0cffe247b84587c1cc8e32746" category="cell">“默认”</block>
  <block id="5ff567e0863a47346f44f87ed793f508" category="cell"><block ref="1cc3921c0ab34ebcad1d7d62dc850c0a" prefix="" category="inline-code"></block></block>
  <block id="36f37bb9b250ed1fab33dfdced302bec" category="cell">使用 CHAP 对 iSCSI 进行身份验证。  Trident使用 CHAP。</block>
  <block id="32738663b16444872e4e5721c7c37660" category="cell"><block ref="86d1f8dbc0e863904895b40bd0ac1775" prefix="" category="inline-code"></block></block>
  <block id="c4ca01925aae0c37398f0b30a4ce1273" category="cell">要使用的访问组 ID 列表</block>
  <block id="1ed25c6118740d8ddd80ea0ce520e808" category="cell">查找名为“trident”的访问组的 ID</block>
  <block id="18320b2a705a7bed37a6bc0af4aee093" category="cell">如果请求的卷大小超过此值，则配置失败。</block>
  <block id="c72dc6713f14ba2541824417f46e1cd6" category="cell">故障排除时要使用的调试标志。例如，{"api":false, "method":true}</block>
  <block id="88dce60232453383ab0d1c3c59cc931d" category="admonition">请勿使用<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>除非您正在进行故障排除并且需要详细的日志转储。</block>
  <block id="891d26d5e7410db6c0a971245c6025c0" category="section-title">示例 1：后端配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>具有三种音量类型的驱动器</block>
  <block id="3185240fb49cba19667fbdf639f3271e" category="paragraph">本示例展示了一个使用 CHAP 认证的后端文件，并对三种具有特定 QoS 保证的卷类型进行了建模。最有可能的情况是，您会定义存储类来使用它们中的每一个。<block ref="79073619fba8242703524f16870ff858" prefix=" " category="inline-code"></block>存储类参数。</block>
  <block id="bfd7bf04b3d28a42267e8d1b30a05f01" category="section-title">示例 2：后端和存储类配置<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>带虚拟池的驱动程序</block>
  <block id="418ff75ccabac38370cc8570721746a3" category="paragraph">此示例显示了配置了虚拟池的后端定义文件以及引用这些虚拟池的存储类。</block>
  <block id="626a366c19963bb80ca04337415711f5" category="paragraph">Trident在配置时将存储池中存在的标签复制到后端存储 LUN。为了方便起见，存储管理员可以为每个虚拟池定义标签，并按标签对卷进行分组。</block>
  <block id="b003731e1d339366ed065ffe5a0f50ca" category="paragraph">在下方所示的示例后端定义文件中，所有存储池都设置了特定的默认值，这些默认值决定了：<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block>银级。虚拟池在以下位置定义：<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block>部分。在这个例子中，一些存储池设置了自己的类型，而一些存储池则覆盖了上面设置的默认值。</block>
  <block id="615c9f89b360c50cfba2b2de02584387" category="paragraph">以下 StorageClass 定义与上述虚拟池相关。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>字段中，每个 StorageClass 都会指定哪些虚拟池可用于托管卷。卷将具有所选虚拟池中定义的各个方面。</block>
  <block id="6b414187e193a000944e395beb010938" category="paragraph">第一个存储类<block ref="166028d9a95f5465a6ae917e6e089ce6" prefix="(" category="inline-code"></block>将映射到第一个虚拟池。这是唯一一家提供黄金级性能的泳池。<block ref="89bf6c97f9a3eaea76c86df0086361bc" prefix=" " category="inline-code"></block>黄金。最后一个存储类<block ref="b4457b3eeca98cadb51648f8fcef36cb" prefix="(" category="inline-code"></block>）指出任何提供银级性能的存储池。  Trident将决定选择哪个虚拟池，并确保满足存储需求。</block>
  <block id="4d0d37d727675761e4c0e324eb57ca2f" category="list-text"><block ref="4d0d37d727675761e4c0e324eb57ca2f" category="inline-link-macro-rx"></block></block>
  <block id="cb4d8d2a5476183e7996047b4bd621a5" category="summary">了解Google Cloud NetApp Volumes的 NFS 和 NFS 后端配置选项，并查看配置示例。</block>
  <block id="45868a9cc24b15883bb385cc21568b9c" category="doc">Google Cloud NetApp Volumes后端配置选项和示例</block>
  <block id="bf5d13740edaf72b96d340da8b520aa2" category="paragraph">了解Google Cloud NetApp Volumes的后端配置选项并查看配置示例。</block>
  <block id="4dd7128ceae058946c44bbbb0985ec6f" category="paragraph">每个后端都在单个 Google Cloud 区域中配置卷。要在其他区域创建卷，您可以定义其他后端。</block>
  <block id="24efddb2a68726b53abbc21ed25602ec" category="cell">价值<block ref="d45aebe724c55b101f2ae8924ba3d486" prefix=" " category="inline-code"></block>必须指定为“google-cloud-netapp-volumes”。</block>
  <block id="486c28964f4c2b1cb7d4cf8476c6f43b" category="cell">（可选）存储后端自定义名称</block>
  <block id="f476273c71e20fc5a845a5345a620117" category="cell">驱动程序名称 + "_" + API 密钥的一部分</block>
  <block id="5782f9a9357b5678058d6d3ceed21988" category="cell"><block ref="c614017642b6cfd9e6a25c7df122d917" prefix="" category="inline-code"></block></block>
  <block id="04075132f95c6ef305485ab113422c5a" category="cell">用于指定卷创建存储池的可选参数。</block>
  <block id="c96383270cbab23de47b4f0961f64929" category="cell"><block ref="80ef6899136dfcff295c16caa93c2138" prefix="" category="inline-code"></block></block>
  <block id="4149383e1cf45a36b373c5bded2ff6ba" category="cell">Google Cloud 帐户项目编号。该值可在 Google Cloud 门户网站首页找到。</block>
  <block id="4f50ef2995c3caa2284d837d375e4db0" category="cell">Trident创建 GCNV 卷的 Google Cloud 位置。创建跨区域 Kubernetes 集群时，在以下位置创建的卷：<block ref="d5189de027922f81005951e6efe0efd5" prefix=" " category="inline-code"></block>可用于跨多个 Google Cloud 区域的节点上调度的工作负载。跨区域运输会产生额外费用。</block>
  <block id="a34d72a685d5e27eb6bc18f54a7bab1d" category="cell"><block ref="c9ff119073ea2567730fb42e3a4fe805" prefix="" category="inline-code"></block></block>
  <block id="b22804421b3e5bca94f2a9979721eb60" category="cell">用于 Google Cloud 服务帐户的 API 密钥<block ref="e50dbf86780cfad5e007e4a95a6aa71e" prefix=" " category="inline-code"></block>角色。它包含 Google Cloud 服务帐户私钥文件的 JSON 格式内容（原封不动地复制到后端配置文件中）。这<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block>必须包含以下键的键值对：<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block> ，<block ref="b098ad43c65e68f3d8ce27a3c7e6f6e2" prefix=" " category="inline-code"></block> ，<block ref="a4a9fd77bfb3720e66b510bef7ffe71a" prefix=" " category="inline-code"></block> ，<block ref="2bfe9d72a4aae8f06a31025b7536be80" prefix=" " category="inline-code"></block> ，<block ref="478cc0e49bfbb9ded4ffc7ea662d3968" prefix=" " category="inline-code"></block> ，<block ref="98b215082431c21156af94f3aa69f838" prefix=" " category="inline-code"></block> ，<block ref="8201fe8e688f4f948a62370fd1b411d4" prefix=" " category="inline-code"></block> ， 和<block ref="61426bc7fdd11e59a5c98e7ee37e3dbb" prefix=" " category="inline-code"></block>。</block>
  <block id="b9cc8276829a756e7a22476617204267" category="cell">对 NFS 挂载选项进行精细控制。</block>
  <block id="4d9239a7fce916964ba8529021ab535f" category="cell">如果请求的卷大小大于此值，则配置失败。</block>
  <block id="1713a0b57aa7aa8811b66291bd6740ea" category="cell">存储池的服务级别及其容量。这些值是<block ref="897a779351421523cadbafccdce22efe" prefix=" " category="inline-code"></block>，<block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix=" " category="inline-code"></block> ，<block ref="a288195832f8717bca4671416014a464" prefix=" " category="inline-code"></block> ， 或者<block ref="287e9593819b2fcdf9945e7ccacd637d" prefix=" " category="inline-code"></block>。</block>
  <block id="b5cbbe3dadaab4a036fdb38af67ee936" category="cell">要应用于卷的任意 JSON 格式标签集</block>
  <block id="1631dca111b8c1a922c7f29d48eb7121" category="cell"><block ref="91e02cd2b8621d0c05197f645668c5c4" prefix="" category="inline-code"></block></block>
  <block id="c1a95f00cc65baba0b4226ef5a52eb6c" category="cell">Google Cloud 网络用于 GCNV 卷。</block>
  <block id="ed9bce6a4d879e7f479badb9932b75b3" category="cell">故障排除时要使用的调试标志。例子，<block ref="448bcae3131355f9b92b192b1057af2f" prefix=" " category="inline-code"></block> 。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="827683b582e1abfa2478a23d65a88a1f" category="cell">表示此后端支持的区域和区域列表。更多信息，请参阅<block ref="a735758eec435cad1c5672b75bd657c0" category="inline-link-macro-rx"></block>。例如：<block ref="1e97fdca2db62120d99c87c9fad7ac06" prefix=" " category="inline-code"></block></block>
  <block id="eb60cd2c0cff094ad0ecbe9d6fededcf" category="section-title">卷配置选项</block>
  <block id="afe8445a326424c54dfec7cc20994e8f" category="paragraph">您可以控制默认卷配置<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>配置文件部分。</block>
  <block id="95c5fc7684c0c685ae305908e8360de5" category="cell">新卷的出口规则。必须是以逗号分隔的 IPv4 地址列表，地址可以任意组合。</block>
  <block id="51b2015e6da8653f4041b71312ad43fe" category="cell">访问<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>目录</block>
  <block id="31ed61cc3c85d0bb697cd12b77f37fd1" category="cell">快照预留的卷百分比</block>
  <block id="3731633acfd0b9fb847e03ce2fdab4fa" category="cell">（接受默认值 0）</block>
  <block id="f666bd4432d66c3d0a6c3eb68602a507" category="cell">新卷的 Unix 权限（4 位八进制数字）。</block>
  <block id="9f857ec3fcdcb6ffcc762e0be5004aa2" category="paragraph">这是最基本的后端配置。通过这种配置， Trident会发现您已委派给配置位置中Google Cloud NetApp Volumes的所有存储池，并随机将新卷放置在其中一个存储池上。因为<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>省略了<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>默认设置生效，后端将为 NFS 卷进行配置。</block>
  <block id="b0663450e547d90a59ef16fd10b49313" category="paragraph">如果您刚开始使用Google Cloud NetApp Volumes并进行尝试，这种配置是理想的，但在实践中，您很可能需要为配置的卷提供额外的范围。</block>
  <block id="a61f1a0c3100fa19040c465723b8d138" category="example-title">SMB卷配置</block>
  <block id="2d55ceabc505d58735d6f639a0ddee3c" category="example-title">使用存储池过滤器进行配置</block>
  <block id="9f50e88dc1b2f50c32d6623a46186422" category="paragraph">此后端配置在单个文件中定义了多个虚拟池。虚拟池在以下位置定义：<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block>部分。当您有多个支持不同服务级别的存储池，并且想要在 Kubernetes 中创建代表这些存储级别的存储类时，它们非常有用。虚拟池标签用于区分不同的池子。例如，在下面的例子中<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block>标签和<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>类型用于区分虚拟池。</block>
  <block id="88b8febb44310d1976318cdfbfc8e272" category="paragraph">您还可以设置一些适用于所有虚拟池的默认值，并覆盖各个虚拟池的默认值。在下面的例子中，<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>和<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block>作为所有虚拟池的默认值。</block>
  <block id="6a34de146c5cb15d515a8eccfe1e159a" category="paragraph">更多信息，请参阅<block ref="2485f0c91682fe52be2f7fb65e682d5e" category="inline-link-macro-rx"></block>。</block>
  <block id="aae18f7253cac406ae284f53b287a9df" category="paragraph">要验证后端是否创建成功，请运行以下命令：</block>
  <block id="03b8a172613e4de074d79fb4f46074a3" category="paragraph">如果后端创建失败，则后端配置存在问题。您可以使用以下方式描述后端：<block ref="229abe1e223382a9207e6c5818f53303" prefix=" " category="inline-code"></block>运行以下命令查看日志以确定原因：</block>
  <block id="c80946da495de259ca1ba66a90f669f1" category="paragraph">在您发现并纠正配置文件中的问题后，您可以删除后端并再次运行创建命令。</block>
  <block id="7412fabe1fe110c48954fa7d913c7aa6" category="paragraph">以下是一个基本内容<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>上述后端所指的定义。</block>
  <block id="73edba1e6e192a3d47eeb049261cf706" category="paragraph">*使用以下示例定义<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block>场地：*</block>
  <block id="131942def57ce0eceb784a70e3a3c6b7" category="inline-link-macro">虚拟池</block>
  <block id="21f282d336bd6884d8049de5c63672b5" category="paragraph">使用<block ref="4d859186a09b1da3597e5901157d9400" prefix=" " category="inline-code"></block>你可以为每个对象指定。<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>这<block ref="6679d756882db6798c9460928c0b140b" category="inline-link-macro-rx"></block>用于托管卷。该卷将具有所选池中定义的方面。</block>
  <block id="017c90fe97524fad37b16a935c4a6d93" category="paragraph">有关存储类的更多详细信息，请参阅<block ref="70514be1adf68f525abe0b1ddd1123f6" category="inline-link-macro-rx"></block>。</block>
  <block id="aaa0c40b2c8011bdffe750a1ba36c398" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block> ， 和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>您可以指定 SMB 卷并提供所需的 Active Directory 凭据。任何 Active Directory 用户/密码，无论拥有任何权限或没有权限，都可以用作节点阶段密钥。</block>
  <block id="f9f2eb48a9034cb5dc809b4a8cfe0514" category="section-title">PVC定义示例</block>
  <block id="1fa71ec0db169cb1ef6cfabf7648910e" category="paragraph">要验证 PVC 是否已绑定，请运行以下命令：</block>
  <block id="42d7c2849e22a4d78da8b275f64f75aa" category="summary">在配置Google Cloud NetApp Volumes后端之前，您需要确保满足以下要求。</block>
  <block id="b50d4e4fb1b847d1270df87e42364fe0" category="doc">准备配置Google Cloud NetApp Volumes后端</block>
  <block id="0935df2153a18d9a4776751ebfb7cb82" category="section-title">NFS 卷的先决条件</block>
  <block id="a03c3224ff98ca5b518f8a11ed9d6f72" category="paragraph">如果您是第一次使用Google Cloud NetApp Volumes或在新的位置使用，则需要进行一些初始配置来设置Google Cloud NetApp Volumes并创建 NFS 卷。参考<block ref="d2edeebd0b5ddcd8a293f6eb7960f37c" category="inline-link-macro-rx"></block>。</block>
  <block id="ec8b4b1603705e8f5deb17b1f83c5b04" category="paragraph">配置Google Cloud NetApp Volumes后端之前，请确保您已具备以下条件：</block>
  <block id="cbd1a08f0c7e9ece495b85acebbda95f" category="list-text">已配置Google Cloud NetApp Volumes服务的 Google Cloud 帐户。参考<block ref="633097af004065de10009ea2f33900c4" category="inline-link-macro-rx"></block>。</block>
  <block id="d602f37c15ba943e502f28694eb5a2b1" category="inline-link-macro">确定项目</block>
  <block id="ecf1c0124555e123ac90e38128ef83e5" category="list-text">您的 Google Cloud 帐户项目编号。参考<block ref="64c0ff4c5d45f1d3f3d8ce4197eed1cc" category="inline-link-macro-rx"></block>。</block>
  <block id="aa22e5fd0429d1ecf78d5deedf0c6dc8" category="inline-link-macro">身份和访问管理角色和权限</block>
  <block id="d0e48e9528072c6ff90b82adeab94dea" category="list-text">拥有NetApp Volumes 管理员权限的 Google Cloud 服务帐户<block ref="04bf1a6a0250bc9d4cba09ee34106dfc" prefix="(" category="inline-code"></block>） 角色。参考<block ref="4f506c30a158c85db714d53536a12770" category="inline-link-macro-rx"></block>。</block>
  <block id="ec0fec1613e760b6689b9fb4990bdb46" category="inline-link-macro">创建服务帐户密钥</block>
  <block id="704f74ac9dc2a2a60c73df6b9d8a9eff" category="list-text">GCNV账户的API密钥文件。请参阅<block ref="068ee9c4fdcce4c0fd131a7dd8fe524f" category="inline-link-macro-rx"></block></block>
  <block id="ef2186bedd233e9b009e5d1764dc1e3c" category="inline-link-macro">存储池概览</block>
  <block id="33773afc759728866f9a57d82940a56c" category="list-text">储水池。参考<block ref="d347dce2da907b926fcf6a02a7257712" category="inline-link-macro-rx"></block>。</block>
  <block id="dd2c158264290c91be79556252aca308" category="inline-link-macro">设置对Google Cloud NetApp Volumes 的访问权限</block>
  <block id="7cef0ad261753740989fa192df2e19e9" category="paragraph">有关如何设置对Google Cloud NetApp Volumes 的访问权限的更多信息，请参阅：<block ref="5e9b4ec852ec4a511a1370be58118d01" category="inline-link-macro-rx"></block> 。</block>
  <block id="d7532ab2cf050869a37a3b301475208c" category="paragraph">现在您可以将Google Cloud NetApp Volumes配置为Trident的后端。您可以使用Google Cloud NetApp Volumes后端来附加 NFS 和 SMB 卷。</block>
  <block id="23fa813a6884f33dc0d2070ae5260e6a" category="section-title">Google Cloud NetApp Volumes驱动程序详情</block>
  <block id="6db42dae8341edee9e823963baa82d9d" category="paragraph">Trident提供<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>驱动程序与集群通信。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="5ab9649a1218ec1b35bfb38efbeaea76" category="cell"><block ref="94594b2ccbc8e0d220ad37504461650b" prefix="" category="inline-code"></block></block>
  <block id="dd0d8a6eeca2940c60cd0ac812afed1d" category="paragraph">云身份使 Kubernetes pod 能够通过作为工作负载身份进行身份验证来访问 Google Cloud 资源，而无需提供显式的 Google Cloud 凭据。</block>
  <block id="299b031aaa6fc8a06127791cf12decf9" category="paragraph">要在 Google Cloud 中利用云身份功能，您必须具备以下条件：</block>
  <block id="df181b0b41273ec7065dab05b4a6da10" category="list-text">使用 GKE 部署的 Kubernetes 集群。</block>
  <block id="239be7c008105ac7fd4ca34940e848dd" category="list-text">在 GKE 集群上配置工作负载标识，并在节点池上配置 GKE 元数据服务器。</block>
  <block id="cf1b0c32b7f8d889140a0a7a048bc29b" category="list-text">具有Google Cloud NetApp Volumes管理员 (roles/netapp.admin) 角色或自定义角色的 GCP 服务帐户。</block>
  <block id="b70329a4cd0d7e433e8af087eebce89a" category="list-text">Trident已安装，其中包括 cloudProvider（指定“GCP”）和 cloudIdentity（指定新的 GCP 服务帐户）。下面给出一个例子。</block>
  <block id="3bd49228e6aff48852b023fa1ceaf62c" category="paragraph">要使用Trident操作员安装Trident ，请编辑<block ref="244895464fd1d6c7ff5a2044c324c0fc" prefix=" " category="inline-code"></block>设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>到<block ref="9856712fdf7563a4074fc130ed9f0755" prefix=" " category="inline-code"></block>并设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>到<block ref="90f8fb110d694743ec7a069beef76b7b" prefix=" " category="inline-code"></block>。</block>
  <block id="a7080c23e8c14c73db47d3f3e492003c" category="paragraph"><block ref="9e6b25667a12ee82b7da8f90b3adfb4d" prefix="" category="inline-code"></block><block ref="e831869c37ce314b5ade82786bf3348f" prefix=" " category="inline-code"></block></block>
  <block id="7ba174e1291062b960ec1b8607b6e1e2" category="paragraph">以下示例安装Trident并进行设置<block ref="d19f2c0377f3ed7cab9377cf066cb7ef" prefix=" " category="inline-code"></block>使用环境变量连接到 GCP<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>并设置<block ref="89abe9fddbe3cf0f9bcd7779fe4aed69" prefix=" " category="inline-code"></block>使用环境变量<block ref="fab50dca589d1a68fdf56bd4ae0b4a83" prefix=" " category="inline-code"></block>：</block>
  <block id="bde178d22672aa38120646e529ed04b5" category="paragraph">以下示例安装Trident并进行设置<block ref="e33bb4eb32023da4a8ea7a1ba6927067" prefix=" " category="inline-code"></block>标记<block ref="e7b51407a2bfaa34b58afce0107e9a5f" prefix=" " category="inline-code"></block>， 和<block ref="c5af480af77c330e04a1fce1f6c2b03a" prefix=" " category="inline-code"></block>到<block ref="fab50dca589d1a68fdf56bd4ae0b4a83" prefix=" " category="inline-code"></block>：</block>
  <block id="ff87a1c47933f4d6895655dd61ad9d5c" category="summary">了解如何使用提供的示例配置，将 Google Cloud 的Cloud Volumes Service配置为Trident安装的后端。</block>
  <block id="53ba532dfa04fe29152221a3efb3e98f" category="doc">为 Google Cloud 后端配置Cloud Volumes Service</block>
  <block id="6385dfeab6eb1cdf5e0b269b83c02870" category="paragraph">了解如何使用提供的示例配置，将NetApp Cloud Volumes Service for Google Cloud 配置为Trident安装的后端。</block>
  <block id="8126e96f64b1a5de24d4cf6e4b09b986" category="section-title">Google Cloud 驱动程序详情</block>
  <block id="f501f5f541b4e828bada7eb37751ec96" category="paragraph">Trident提供<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>驱动程序与集群通信。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="bc3c06062e58c58165fa787186ae374c" category="section-title">了解Trident对 Google Cloud Cloud Volumes Service 的支持</block>
  <block id="1d326a2a7f267c800fe3eafb89e5c7cd" category="inline-link-macro">服务类型</block>
  <block id="fe7058df6a1b56e94957ef68f8ddf955" category="paragraph">Trident可以在以下两种格式之一中创建Cloud Volumes Service卷：<block ref="a3cd55e5a9ff014b76f6953040234c24" category="inline-link-macro-rx"></block> ：</block>
  <block id="3671a5060127094ad405aad9295e6609" category="inline-link-macro">三个服务级别</block>
  <block id="48cbfcdcce7c2c2d2876ce5a2c74ea32" category="list-text">*CVS-Performance*： Trident 的默认服务类型。这种性能优化型服务类型最适合重视性能的生产工作负载。 CVS-Performance 服务类型是一种硬件选项，支持最小 100 GiB 大小的卷。您可以选择其中之一<block ref="87d12cea36129673eb9128fd986958c5" category="inline-link-macro-rx"></block>：</block>
  <block id="1b3b34a1280074ca8311ff50bbacac6c" category="list-text"><block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix="" category="inline-code"></block></block>
  <block id="3f27980baf5bae9c9c40df09c54f6f23" category="list-text"><block ref="a288195832f8717bca4671416014a464" prefix="" category="inline-code"></block></block>
  <block id="091d891c1f040cef1072e2593b7f1f3b" category="list-text"><block ref="287e9593819b2fcdf9945e7ccacd637d" prefix="" category="inline-code"></block></block>
  <block id="1048ee58172376b84dda9c7505d858ea" category="inline-link-macro">两种服务级别</block>
  <block id="6c62a8c68facf167a61fbd54e9cceb5f" category="list-text">*CVS*：CVS 服务类型提供较高的区域可用性，但性能水平有限或中等。 CVS 服务类型是一种软件选项，它使用存储池来支持小至 1 GiB 的卷。存储池最多可包含 50 个卷，所有卷共享池的容量和性能。您可以选择其中之一<block ref="21d52e1e64b94d45bea308be30f5a76a" category="inline-link-macro-rx"></block>：</block>
  <block id="277d5dd64fbcc2dbcd79252b41d6113e" category="list-text"><block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix="" category="inline-code"></block></block>
  <block id="4bfd77bf3278584b71bc8c9deef39ca9" category="list-text"><block ref="75b65576cc4a19f0836b73610ad5957a" prefix="" category="inline-code"></block></block>
  <block id="b0cee72642f5457a71ddd0b49efb6d93" category="inline-link">适用于 Google Cloud 的Cloud Volumes Service</block>
  <block id="da195e41c537042ae77405110c4512ff" category="paragraph">配置和使用<block ref="5129d3f1116e9c5221bfcf965a1ede35" category="inline-link-rx"></block>后端需要以下组件：</block>
  <block id="66d7ad821e261a4b5099f37ced19ebb1" category="list-text">已配置NetApp Cloud Volumes Service的 Google Cloud 帐户</block>
  <block id="2c00ff9c7700dc3529c57f0a5281bbe2" category="list-text">您的 Google Cloud 帐户的项目编号</block>
  <block id="43752d169c5729fffa3a6557a0978cb8" category="list-text">拥有 Google Cloud 服务帐户<block ref="4a5395c87dd91b3242056f83b7cedb9b" prefix=" " category="inline-code"></block>角色</block>
  <block id="f56a3add505b7e123b55b814f7acc26b" category="list-text">您的Cloud Volumes Service帐户的 API 密钥文件</block>
  <block id="07cc9934740ba3dd46a0d7d2c9502d39" category="cell">"gcp-cvs"</block>
  <block id="6eb82a822b962404b9694b93f2967679" category="cell"><block ref="78ec9b60245b46a4f05158076962ace9" prefix="" category="inline-code"></block></block>
  <block id="d75d4a2bd644e06cc6588477267e33d8" category="cell">用于指定 CVS 服务类型的可选参数。使用<block ref="f9fa10ba956cacf91d7878861139efb9" prefix=" " category="inline-code"></block>选择 CVS 服务类型。否则， Trident会假定为 CVS-Performance 服务类型<block ref="3ca14c518d1bf901acc339e7c9cd6d7f" prefix="(" category="inline-code"></block>）。</block>
  <block id="4efa10ec47c98c5ed67e1a72f7515240" category="cell">仅限CVS服务类型。用于指定卷创建存储池的可选参数。</block>
  <block id="1a269fb3ec0496720ca75e984d8de40e" category="cell"><block ref="b5caf2c58446baec75b83bf637a98d1b" prefix="" category="inline-code"></block></block>
  <block id="f0559497c76611a262c1a6fa93592cd7" category="cell">如果使用共享 VPC 网络，则必须执行此操作。在这种情况下，<block ref="80ef6899136dfcff295c16caa93c2138" prefix=" " category="inline-code"></block>这是一个服务项目，而且<block ref="b5caf2c58446baec75b83bf637a98d1b" prefix=" " category="inline-code"></block>是宿主项目。</block>
  <block id="2086191016950a784040f7d22ab27f60" category="cell"><block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix="" category="inline-code"></block></block>
  <block id="dc7c0c7001706c97a9a03d5f77e6883e" category="cell">Trident创建Cloud Volumes Service卷的 Google Cloud 区域。创建跨区域 Kubernetes 集群时，在以下位置创建的卷：<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block>可用于跨多个 Google Cloud 区域的节点上调度的工作负载。跨区域运输会产生额外费用。</block>
  <block id="665f1a07bc016a07fdc13ef823fcdb03" category="cell">用于 Google Cloud 服务帐户的 API 密钥<block ref="4a5395c87dd91b3242056f83b7cedb9b" prefix=" " category="inline-code"></block>角色。它包含 Google Cloud 服务帐户私钥文件的 JSON 格式内容（原封不动地复制到后端配置文件中）。</block>
  <block id="af18429250667f805769a7755a008c1f" category="cell"><block ref="10231d8ea5ef7f2b145e34a646b05e79" prefix="" category="inline-code"></block></block>
  <block id="3430995d97c2d987bf88dfb93ddb34f7" category="cell">如果需要代理服务器才能连接到 CVS 帐户，请提供代理 URL。代理服务器可以是HTTP代理，也可以是HTTPS代理。对于 HTTPS 代理，会跳过证书验证，以允许在代理服务器中使用自签名证书。不支持启用身份验证的代理服务器。</block>
  <block id="c4105759a421b56f4e5aa47752aa6812" category="cell">CVS-Performance 或 CVS 服务级别（适用于新卷）。  CVS-Performance 值是<block ref="c00f0c4675b91fb8b918e4079a0b1bac" prefix=" " category="inline-code"></block>，<block ref="a288195832f8717bca4671416014a464" prefix=" " category="inline-code"></block> ， 或者<block ref="287e9593819b2fcdf9945e7ccacd637d" prefix=" " category="inline-code"></block>。  CVS 值是<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block>或者<block ref="75b65576cc4a19f0836b73610ad5957a" prefix=" " category="inline-code"></block>。</block>
  <block id="5c3d9364df4807427e3297a90edf2831" category="cell">CVS-Performance 默认值为“标准”。  CVS 默认值为“standardsw”。</block>
  <block id="5715e76155b75e9062107ef13c0576ed" category="cell">Google Cloud 网络用于Cloud Volumes Service卷。</block>
  <block id="ad438db80cb3bcd5f6fccdb1010b02f1" category="cell">故障排除时要使用的调试标志。例子，<block ref="9b8710f6da218ae915e4ba2ae63f23d0" prefix=" " category="inline-code"></block> 。除非您正在进行故障排除并需要详细的日志转储，否则请勿使用此功能。</block>
  <block id="a5f4597012dd7af2b717fd4cc2f687fe" category="cell"><block ref="df6ccab784b5892507a7d11443254dc8" prefix="" category="inline-code"></block></block>
  <block id="d2e98deb07632de971600ae032776fe8" category="cell">要启用跨区域访问，您的 StorageClass 定义如下：<block ref="df6ccab784b5892507a7d11443254dc8" prefix=" " category="inline-code"></block>必须包含所有地区。例如：<block ref="3e7c75911911d149520dd40104fd92d7" prefix=" " category="inline-code"></block></block>
  <block id="fdcd5d79603b7f7c0f9b4525dd19b6ab" category="cell">新卷的出口规则。必须是以逗号分隔的 IPv4 地址或 IPv4 子网的列表，采用 CIDR 表示法。</block>
  <block id="c07fbc0b2a1a865fe9e3a55c05b4f690" category="cell">"false"</block>
  <block id="e76dcf1d6497658a2994b5f1f65b7a83" category="cell">（接受 CVS 默认值 0）</block>
  <block id="d5c8102144978e060556ba194e006d1e" category="cell">新卷的规模。  CVS-Performance 最低要求为 100 GiB。  CVS 最小容量为 1 GiB。</block>
  <block id="400f2f53e7d26564783ac50a601d32cb" category="cell">CVS-Performance 服务类型默认为“100GiB”。  CVS 服务类型不设置默认值，但要求至少 1 GiB。</block>
  <block id="94e5c486f56b72f4237fe801615b4406" category="section-title">CVS-Performance 服务类型示例</block>
  <block id="dea6ff4202a54251e04f7b84647690b6" category="paragraph">以下示例提供了 CVS-Performance 服务类型的示例配置。</block>
  <block id="25f4894ddaab3c1182f12732d3bcf889" category="example-title">示例 1：最小配置</block>
  <block id="ae174742813090d1ddbc3ed75d27f7f2" category="paragraph">这是使用默认 CVS-Performance 服务类型和默认“标准”服务级别的最小后端配置。</block>
  <block id="8228a8de88271b4a6a07d5021ae4ff7c" category="example-title">示例 2：服务级别配置</block>
  <block id="38a24bdf59c77f7705c407c60f3ea81e" category="paragraph">此示例展示了后端配置选项，包括服务级别和卷默认值。</block>
  <block id="4565a2282ee3312eddd091b3a3f6a263" category="example-title">示例 3：虚拟池配置</block>
  <block id="ed7c2c2093c7c8deca88a6580c82633a" category="paragraph">此示例使用<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block>配置虚拟池和<block ref="f652904c3bfb48fb25a0a75f485f0ff6" prefix=" " category="inline-code"></block>指的是他们。请参阅<block ref="f986c11e10e5f3c768f256080a1f3f99" category="inline-xref-macro-rx"></block>查看存储类的定义方式。</block>
  <block id="935927e4b464388790a08251e1c2254d" category="paragraph">这里为所有虚拟池设置了特定的默认值，这些默认值决定了：<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block> 5%和<block ref="c72971f17465d2a32345bc872af62a34" prefix=" " category="inline-code"></block>至 0.0.0.0/0。虚拟池在以下位置定义：<block ref="ddecebdea58b5f264d27f1f7909bab74" prefix=" " category="inline-code"></block>部分。每个虚拟池都定义了自己的规则。<block ref="f1d0ae63f2e948a9e43dcc60303d595d" prefix=" " category="inline-code"></block>并且有些池会覆盖默认值。虚拟池标签用于根据以下因素区分池子：<block ref="c05f6c233521207f6fe311afef550c3c" prefix=" " category="inline-code"></block>和<block ref="152f5dc0f7ac734f8e8ee17d4a482462" prefix=" " category="inline-code"></block>。</block>
  <block id="5b797cdb3913e416eaea99109620eb0d" category="paragraph">以下 StorageClass 定义适用于虚拟池配置示例。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>您可以为每个 StorageClass 指定用于托管卷的虚拟池。该卷将具有所选池中定义的方面。</block>
  <block id="ea7cdbae94b0329e6731e1f3ae9fc4fc" category="example-title">存储类示例</block>
  <block id="48bbf2b27d410d92674b0f8f5d3447a0" category="list-text">第一个存储类<block ref="d3b08f69c5bb5aadd45b7ba9391c7447" prefix="(" category="inline-code"></block>) 映射到第一个虚拟池。这是唯一一个提供极致性能且快照储备为 10% 的存储池。</block>
  <block id="7630c5d33e3b852f758af8c20c4caefb" category="list-text">最后一个存储类<block ref="92c87bc6be7db462499a5a2258aa7ba9" prefix="(" category="inline-code"></block>) 调用任何提供 10% 快照保留的存储池。  Trident决定选择哪个虚拟池，并确保满足快照储备要求。</block>
  <block id="d371b8466ee11b2a14782e343e3ed344" category="section-title">CVS 服务类型示例</block>
  <block id="f7a4e685ebf6839fc43b3bbaeff96c33" category="paragraph">以下示例提供了 CVS 服务类型的示例配置。</block>
  <block id="96899a80429985fe87db6dedf997357e" category="example-title">示例 1：最小配置</block>
  <block id="2bab01748045e624b36f643d0a50b1c2" category="paragraph">这是使用最简后端配置<block ref="78ec9b60245b46a4f05158076962ace9" prefix=" " category="inline-code"></block>指定 CVS 服务类型和默认值<block ref="317ec56a799e879712bbd2d0fcbd3b93" prefix=" " category="inline-code"></block>服务水平。</block>
  <block id="d1f5fcc31a1c5bb592600c9f986af71c" category="example-title">示例 2：存储池配置</block>
  <block id="879b7d1da5135e7d94358584a7245e33" category="paragraph">此示例后端配置使用<block ref="c614017642b6cfd9e6a25c7df122d917" prefix=" " category="inline-code"></block>配置存储池。</block>
  <block id="a22a8450047f7b7aea2c76b348f6ba43" category="summary">您可以查看现有存储类、设置默认存储类、识别存储类后端以及删除存储类。</block>
  <block id="e8b9c3a9859a62e9a58431c3b61f75d5" category="doc">管理存储类</block>
  <block id="e606165355271961ba07945766fbf83a" category="section-title">查看现有存储类</block>
  <block id="7c237bc6c124137d25df2dec1cb3e528" category="list-text">要查看现有的 Kubernetes 存储类，请运行以下命令：</block>
  <block id="4aae22fbb9c0d354d0a9c15c6c126d89" category="list-text">要查看 Kubernetes 存储类详细信息，请运行以下命令：</block>
  <block id="ab10f4a91ef779d380fca281ef9df578" category="list-text">要查看 Trident 的同步存储类，请运行以下命令：</block>
  <block id="0953527d940d16d1979f49a4ac5bc746" category="list-text">要查看 Trident 的同步存储类详细信息，请运行以下命令：</block>
  <block id="ce32eb748bd7452bd6ee6d1d7ad6d3a7" category="section-title">设置默认存储类</block>
  <block id="f30a1542c01c3c493f3c01c88dfe5fcd" category="paragraph">Kubernetes 1.6 增加了设置默认存储类的功能。如果用户未在持久卷声明 (PVC) 中指定持久卷，则将使用此存储类来配置持久卷。</block>
  <block id="7c435ae4763642458286cb691812ea55" category="list-text">通过设置注解来定义默认存储类<block ref="2e87d06175a666e414e1b430b811ef2d" prefix=" " category="inline-code"></block>在存储类定义中设置为 true。根据规范，任何其他值或缺少注释均被解释为错误。</block>
  <block id="61fd76f55d29aaceb4a6ee09a318dc45" category="list-text">您可以使用以下命令将现有存储类配置为默认存储类：</block>
  <block id="800477137444bec636483de85335cbb5" category="list-text">同样，您可以使用以下命令移除默认的存储类注解：</block>
  <block id="2d2f31c3012657fd7b38b41312d1a0b8" category="paragraph">Trident安装程序包中也有一些包含此注释的示例。</block>
  <block id="e372af4ebeb99af557aa13609f47f47c" category="admonition">集群中一次只能存在一个默认存储类。从技术上讲，Kubernetes 并不阻止你拥有多个默认存储类，但它的行为就好像根本没有默认存储类一样。</block>
  <block id="6c36cb9c072dc4cb9e163c44568f6a91" category="section-title">确定存储类的后端</block>
  <block id="a78b12e067ec1975a317cab6fc947692" category="paragraph">这是一个您可以使用 JSON 回答的问题示例：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block> Trident后端对象的输出。这使用<block ref="d8757fb4e9ea07606d23a1ef5a4b8d4e" prefix=" " category="inline-code"></block>您可能需要先安装该实用程序。</block>
  <block id="0fe0aa7b9b7529f66030afb1629507bb" category="section-title">删除存储类</block>
  <block id="4bf50148821c75f616a96daca9255e6f" category="paragraph">要从 Kubernetes 中删除存储类，请运行以下命令：</block>
  <block id="65494a0b3404ce637afd88bcb7c82998" category="paragraph"><block ref="4c13babc60c6bf50b7fe85107bcf8af2" prefix="" category="inline-code"></block>应该替换成你的存储类。</block>
  <block id="2538c9a2100f674ce2db1e4b4c26315f" category="paragraph">通过此存储类别创建的任何持久卷都将保持不变， Trident将继续管理它们。</block>
  <block id="ad882e33b96ca33000804dbc738d1d50" category="admonition">Trident强制执行空白<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>因为它创造了大量的销量。对于 iSCSI 后端，建议强制执行<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block>在存储类中。您应该删除现有的 StorageClasses 并重新创建它们。<block ref="01cd995fd9a843d3ca767e057de28873" prefix=" " category="inline-code"></block>指定的。</block>
  <block id="0c2d4b956840e91a5026f299d11e6b2a" category="summary">Trident提供了一组 Prometheus 指标端点，您可以使用这些端点来监控 Trident 的性能。</block>
  <block id="f3bf54ffbc2b1eef233e6a26009af940" category="doc">监视Trident</block>
  <block id="023417a8020b969b0bbe5cc6cf816d22" category="paragraph">Trident提供了一组 Prometheus 指标端点，您可以使用这些端点来监控Trident 的性能。</block>
  <block id="5e65c891836aee4c311dc1e3dcbd072f" category="paragraph">Trident提供的指标使您能够执行以下操作：</block>
  <block id="35ada9c61125e74058c883f83c6c6867" category="list-text">密切关注 Trident 的健康状况和配置。您可以检查操作是否成功，以及是否能按预期与后端通信。</block>
  <block id="64dbac0ca36d9b1f6a8cf1e8a0123261" category="list-text">检查后端使用情况信息，了解后端配置了多少卷、消耗了多少空间等等。</block>
  <block id="7f6516030964b624d9c71fd9ec7f83dd" category="list-text">维护可用后端已配置卷量的映射表。</block>
  <block id="35ff0baf577051daffe0a27ab0d03c9e" category="list-text">赛道表现。您可以查看Trident与后端通信和执行操作所需的时间。</block>
  <block id="efe0d75090a22534acabc936f8669994" category="admonition">默认情况下，Trident 的指标会暴露在目标端口上。<block ref="bc3c4a6331a8a9950945a1aa8c95ab8a" prefix=" " category="inline-code"></block>在<block ref="ae3b848d2daecffc635ae20b0b882d8f" prefix=" " category="inline-code"></block>端点。安装Trident时，这些指标*默认启用*。</block>
  <block id="cb9109c9018f4c25d0545bac0f21176f" category="list-text">已安装Trident的 Kubernetes 集群。</block>
  <block id="eb8bfd69bb88378a6f4d987811890ce6" category="inline-link">容器化的 Prometheus 部署</block>
  <block id="42ae2e91a939ffa9bbda53c10bf5f89f" category="inline-link">本机应用程序</block>
  <block id="050899631250104f17d24b27cc8a12e5" category="list-text">普罗米修斯实例。这可能是一个<block ref="bd5b9e4bd7b88b90afb221fb760a777c" category="inline-link-rx"></block>或者您可以选择以某种方式运行 Prometheus<block ref="3f1d5beaea78c0fd8cb397fbeb1c88bd" category="inline-link-rx"></block> 。</block>
  <block id="68276ca40dfbfd36de911402152fa452" category="section-title">步骤 1：定义 Prometheus 目标</block>
  <block id="67cc72b550d17849cb7141b0b95aea77" category="paragraph">您应该定义一个 Prometheus 目标来收集指标并获取有关Trident管理的后端、它创建的卷等的信息。这<block ref="dc7964965bf1b3af43b28caf6231e550" category="inline-link-rx"></block>解释了如何将 Prometheus 和 Grafana 与Trident结合使用来检索指标。该博客解释了如何在 Kubernetes 集群中以 Operator 的形式运行 Prometheus，以及如何创建 ServiceMonitor 来获取Trident指标。</block>
  <block id="c33638e0de87536b08eeb94264671d0f" category="section-title">步骤 2：创建 Prometheus 服务监视器</block>
  <block id="81a21a88b42cd5c83d149a080a627bad" category="paragraph">要使用Trident指标，您应该创建一个 Prometheus ServiceMonitor 来监视<block ref="d9585690fd147c34fbd50c487a3520de" prefix=" " category="inline-code"></block>服务和监听<block ref="aa59d67c2123f094d0d6798ffe651c4d" prefix=" " category="inline-code"></block>港口。一个示例 ServiceMonitor 如下所示：</block>
  <block id="a36c5d8fdf28501b60d84fa4b009f7c9" category="paragraph">此 ServiceMonitor 定义检索由以下方式返回的指标：<block ref="d9585690fd147c34fbd50c487a3520de" prefix=" " category="inline-code"></block>服务，特别是寻找<block ref="aa59d67c2123f094d0d6798ffe651c4d" prefix=" " category="inline-code"></block>服务的端点。因此，Prometheus 现在已配置为能够理解 Trident 的指标。</block>
  <block id="b25be1046c4629be0262d9873a147d96" category="paragraph">除了Trident直接提供的指标外，kubelet 还公开了许多其他指标。<block ref="f706c2d1cef9479098166eec3d215483" prefix=" " category="inline-code"></block>通过其自身的指标端点获取指标。 Kubelet 可以提供有关已附加卷、Pod 以及它处理的其他内部操作的信息。参考<block ref="3f1f0977d0df3e8b343e403140284021" category="inline-link-rx"></block>。</block>
  <block id="1db2022a8a8de5d612eda8e3be0e1065" category="section-title">步骤 3：使用 PromQL 查询Trident指标</block>
  <block id="f5142e19a3b1edf809fce9d3b6aefc05" category="paragraph">PromQL 非常适合创建返回时间序列或表格数据的表达式。</block>
  <block id="8c6fb1be2521fd16337c11c626672678" category="paragraph">以下是一些您可以使用的 PromQL 查询：</block>
  <block id="b214fd0009b3929347f097bd843f0bfd" category="section-title">获取Trident健康信息</block>
  <block id="0665ea39a4ca4388763b36eda9a3986d" category="list-text">Trident服务器 HTTP 2XX 响应的百分比</block>
  <block id="26cd09e35e7d03c2f93f8d6a691c8567" category="list-text">** Trident REST 响应状态码百分比**</block>
  <block id="5919ab2f7a44a6b3f0a6741f7b0f3f86" category="list-text">** Trident执行操作的平均持续时间（毫秒）**</block>
  <block id="57421d698299c713c3afb841620271d8" category="section-title">获取Trident使用信息</block>
  <block id="f160a52d617adf6e6c5d379a9b8bca89" category="list-text">平均体积大小</block>
  <block id="eb978bfe01ec0c72ad231f3953e304a2" category="list-text">**各后端分配的总存储空间**</block>
  <block id="5f735ae12eafbe476178928f4645475b" category="section-title">获取个人用量</block>
  <block id="ee0898e9f0caa503f3eaa39c919f4c53" category="admonition">只有在同时收集 kubelet 指标的情况下才会启用此功能。</block>
  <block id="0bc301d2423b2ffaa38a5e275e4ec6f9" category="list-text">**各卷册的空间利用率**</block>
  <block id="3ed8ff2d40a8a68841cd7d548c47f079" category="section-title">了解Trident AutoSupport遥测技术</block>
  <block id="b5fb620a79591716feab3605e0045775" category="paragraph">默认情况下， Trident每天向NetApp发送 Prometheus 指标和基本后端信息。</block>
  <block id="41cc8a517566946bcfd42776583c2946" category="list-text">要阻止Trident向NetApp发送 Prometheus 指标和基本后端信息，请传递以下参数：<block ref="284e51f7c35ac8708577507873ff928e" prefix=" " category="inline-code"></block>在Trident安装过程中发出警报。</block>
  <block id="ca0f9a86ca33f1d6baa9051bd7f4ed21" category="inline-link">隐私政策</block>
  <block id="2293c34fd6ddef40c9c9ecb540c27898" category="list-text">Trident还可以按需通过以下方式将容器日志发送给NetApp支持：<block ref="8cf945b97dde0c7bfc643bea7edbff67" prefix=" " category="inline-code"></block> 。您需要触发Trident上传其日志。提交日志之前，您应该接受 NetApp 的条款。<block ref="91b6c0438017ba5fa21c286a96d5acb4" category="inline-link-rx"></block> 。</block>
  <block id="517af010cc9f1850ec10fc55631d3437" category="list-text">除非另有说明， Trident会获取过去 24 小时的日志。</block>
  <block id="5224919a4ae5ccf610fb0ee74e4e7a94" category="inline-link">Trident AutoSupport</block>
  <block id="cc368c6d3d859a01a63550429f01cb9c" category="list-text">您可以使用以下方式指定日志保留时间范围：<block ref="86339c2ed773d5bd944b82d3086d3477" prefix=" " category="inline-code"></block>旗帜。例如：<block ref="e238339d491d4840f7d8e509bdbb7b63" prefix=" " category="inline-code"></block> 。这些信息通过以下方式收集和发送：<block ref="9d80ca17f097c8e365550f4036ccf0e3" prefix=" " category="inline-code"></block>与Trident一起安装的容器。您可以从以下位置获取容器镜像：<block ref="1b00454f0ab35dcec2ee1a0061efc6e5" category="inline-link-rx"></block> 。</block>
  <block id="53084cad3d11df800502598c11e2d10b" category="inline-link">最终用户许可协议</block>
  <block id="b9a641d903e611a87a5e68ac7fdb0b84" category="list-text">Trident AutoSupport不会收集或传输个人身份信息 (PII) 或个人信息。它附带一个<block ref="173a360b412944768c2ab13e6c8fd1c7" category="inline-link-rx"></block>这并不适用于Trident容器镜像本身。您可以了解更多关于NetApp对数据安全和信任的承诺。<block ref="d3cc55401bc8303e01c6b0c43ba0733f" category="inline-link-rx"></block> 。</block>
  <block id="b508f8888445cd57bcf910ed51afb0dd" category="paragraph">Trident发送的有效载荷示例如下所示：</block>
  <block id="d2ec86f126f845e79aff07e70bf89472" category="list-text">AutoSupport消息会发送到 NetApp 的AutoSupport端点。如果您使用私有镜像仓库来存储容器镜像，则可以使用<block ref="53b228c1c8295f49b0c35325e14fcd6a" prefix=" " category="inline-code"></block>旗帜。</block>
  <block id="86c5a11fba83815412aec79f67f2d276" category="list-text">您还可以通过生成安装 YAML 文件来配置代理 URL。这可以通过使用<block ref="758aee5ba3aed3d4e9a31a16ea04b47a" prefix=" " category="inline-code"></block>创建 YAML 文件并添加<block ref="46f08f4431bbd907a039e14ddf39cf5f" prefix=" " category="inline-code"></block>论证<block ref="9d80ca17f097c8e365550f4036ccf0e3" prefix=" " category="inline-code"></block>容器<block ref="eb6cdeddd28243c1552ea3b1061b4410" prefix=" " category="inline-code"></block>。</block>
  <block id="19398926f4bb3de321ccfc2488d606dd" category="section-title">禁用Trident指标</block>
  <block id="8ec47dab227d183e0d3ad0cd529d289b" category="paragraph">要**禁用**指标报告，您应该生成自定义 YAML 文件（使用以下方式）：<block ref="5de93c87952cd098700fb8d46daed4d6" prefix=" " category="inline-code"></block>标记）并编辑它们以删除<block ref="7d91b1e10cf86478be03f54a8c39320a" prefix=" " category="inline-code"></block>阻止对<block ref="7883e3d8f80ff24d70c49bd975fb3f75" prefix=" " category="inline-code"></block>容器。</block>
  <block id="053cd9e68cf6c155e5b93616bc7e3e32" category="summary">了解如何在Trident安装中创建和使用ONTAP NAS 驱动程序。本节提供后端配置示例以及如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="6603621fd665e289ada4dbb1dcc5835c" category="paragraph">学习如何在Trident系统中创建和使用ONTAP NAS 驱动程序。本节提供后端配置示例以及将后端映射到 StorageClasses 的详细信息。</block>
  <block id="e996b7ab8a2ede8d8b06fc99b3a11062" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ， 或者<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block></block>
  <block id="a288b0971f8f6c63f5e6510bcebf421b" category="cell">驱动程序名称 + "_" + dataLIF</block>
  <block id="c31c728d8c1e31b350486f8db0ebd5df" category="cell">集群或 SVM 管理 LIF 的 IP 地址可以指定完全限定域名 (FQDN)。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。 IPv6 地址必须用方括号定义，例如：<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block> 。为了实现MetroCluster 的无缝切换，请参阅<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="cc1ae9a700356c7c519b4aee7dcbf53b" category="cell">"10.0.0.1", "[2001:1234:abcd::fefe]"</block>
  <block id="762a96bc52f41b6b53a4e2d27fd14560" category="cell">LIF协议的IP地址。 NetApp建议指定<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>。如果未提供， Trident将从 SVM 获取 dataLIF。您可以指定一个完全限定域名 (FQDN) 用于 NFS 挂载操作，从而创建轮询 DNS 以在多个 dataLIF 之间进行负载均衡。初始设置后可以更改。参考<block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。  IPv6 地址必须用方括号定义，例如：<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block> 。 *Metrocluster 除外。*查看<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="ae8df8316f5c485b7db4e7141e899701" category="cell">指定地址或从 SVM 派生，如果未指定（不推荐）</block>
  <block id="19611c32e434019e356af9e0da999936" category="cell">要使用的存储虚拟机 *Metrocluster 除外。*查看<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="ef65dd3301d78701f7cfcf8a01834f2f" category="cell">如果是 SVM 则推导而来<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>已指定</block>
  <block id="a0f3a965c12688befda99da850903dcb" category="cell"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block></block>
  <block id="5b487539b64483311ed87290e717353a" category="cell">启用自动导出策略创建和更新 [布尔值]。使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>可选功能包括： Trident可以自动管理出口策略。</block>
  <block id="b4ad0dff08149092bc3e4b16572af575" category="cell"><block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix="" category="inline-code"></block></block>
  <block id="aeeba745624a2ddc45043c3be805561e" category="cell">用于过滤 Kubernetes 节点 IP 的 CIDR 列表<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>已启用。使用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>可选功能包括： Trident可以自动管理出口策略。</block>
  <block id="e50e8adc0d4818a8ed496eb95b3aea51" category="cell">["0.0.0.0/0", "::/0"]`</block>
  <block id="cbdaf784161be9806a24fe78a8046c01" category="cell"><block ref="79fffaff4013c1e8c508e76646eca77b" prefix="" category="inline-code"></block></block>
  <block id="a84cbedc106b973917ae925d04533f97" category="cell">客户端证书的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="8545e54eea74cf2579fbe1cb56b11862" category="cell"><block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix="" category="inline-code"></block></block>
  <block id="4a54228eb2be79492f8f76bb814ddf63" category="cell">客户端私钥的 Base64 编码值。用于基于证书的身份验证</block>
  <block id="b071cd8105f8f59b777098388b7a3322" category="cell"><block ref="8468461bca00a47ab5ddba2afc45f52c" prefix="" category="inline-code"></block></block>
  <block id="ffe4ce29fe1a6176d496c40332e9cb98" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证</block>
  <block id="431f7ca0be64e2c321d4d4be79b721aa" category="inline-link-macro">使用 Active Directory 凭据向后端 SVM 验证Trident 的身份</block>
  <block id="ebce82cad933beb695765f374ca16800" category="cell">用于连接到集群/SVM 的用户名。用于基于凭据的身份验证。有关 Active Directory 身份验证，请参阅 <block ref="c266761f957eda011224921a8539eded" category="inline-link-macro-rx"></block>。</block>
  <block id="c48567e30df98d399ca8a25594294caa" category="cell">连接到集群/SVM 的密码。用于基于凭据的身份验证。有关 Active Directory 身份验证，请参阅 <block ref="c266761f957eda011224921a8539eded" category="inline-link-macro-rx"></block>。</block>
  <block id="e3f688f3aa653574b3253640aa98f47c" category="paragraph">在 SVM 中配置新卷时使用的前缀。设置后无法更新</block>
  <block id="64467ac9530ff26c4e6495117175346d" category="admonition">当使用 ontap-nas-economy 和 24 个或更多字符的 storagePrefix 时，qtree 将不会嵌入存储前缀，尽管它会包含在卷名称中。</block>
  <block id="86780ad6247dfbcd90ca1455ee592852" category="cell">“三叉戟”</block>
  <block id="0b74b16550d48484341fc52ad7af0c7d" category="paragraph">用于配置的聚合（可选；如果设置，则必须分配给 SVM）。对于<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序，此选项将被忽略。如果未分配，则可以使用任何可用的聚合来配置FlexGroup卷。</block>
  <block id="f01b478814d1117e017539a48474a29d" category="admonition">当 SVM 中的聚合数据更新时， Trident会自动轮询 SVM 进行更新，而无需重启Trident控制器。当您在Trident中配置特定聚合以配置卷时，如果该聚合被重命名或移出 SVM，则在轮询 SVM 聚合时， Trident中的后端将变为失败状态。您必须将聚合更改为 SVM 上存在的聚合，或者将其完全删除，才能使后端恢复联机。</block>
  <block id="09d5dcc1026143b7c8b97aead4ec1396" category="cell">如果使用率超过此百分比，则配置失败。  *不适用于Amazon FSx for ONTAP*。</block>
  <block id="9b791871c2696d3b7bc8c95a1d487b58" category="cell">flexgroupAggregateList</block>
  <block id="77a0d40a429011d223a093dd3cf8713e" category="paragraph">用于配置的聚合列表（可选；如果设置，则必须分配给 SVM）。分配给 SVM 的所有聚合都用于配置FlexGroup卷。支持 *ontap-nas-flexgroup* 存储驱动程序。</block>
  <block id="dbe23b2e968cff9eb3692844d1e75516" category="admonition">当 SVM 中的聚合列表更新时， Trident会通过轮询 SVM 自动更新该列表，而无需重新启动Trident控制器。当您在Trident中配置了特定的聚合列表来配置卷时，如果聚合列表被重命名或移出 SVM，则在轮询 SVM 聚合时， Trident中的后端将进入失败状态。您必须将聚合列表更改为 SVM 上存在的列表，或者将其完全删除，才能使后端恢复联机。</block>
  <block id="b9bc5d902a9cd0a94cdcf025103a3488" category="cell">如果请求的卷大小大于此值，则配置失败。此外，它还限制了 qtree 管理的卷的最大大小，以及<block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix=" " category="inline-code"></block>此选项允许自定义每个FlexVol volume的最大 qtree 数量。</block>
  <block id="280a6a6866847c57b1a98bbcdc929268" category="cell">（默认情况下不强制执行）</block>
  <block id="7e6a32bd8074b1aa2c8c0d2529140ae4" category="cell">故障排除时要使用的调试标志。例如，{"api":false, "method":true} 请勿使用<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>除非您正在进行故障排除并且需要详细的日志转储。</block>
  <block id="5160493063ea2e4f1b1a6e3b951b0a53" category="cell">以逗号分隔的 NFS 挂载选项列表。 Kubernetes 持久卷的挂载选项通常在存储类中指定，但如果存储类中没有指定挂载选项， Trident将回退到使用存储后端配置文件中指定的挂载选项。如果在存储类或配置文件中未指定任何挂载选项， Trident将不会在关联的持久卷上设置任何挂载选项。</block>
  <block id="a13306f726fdf72d2d992a7ebdc63b1b" category="cell">每个FlexVol 的最大 Qtree 数量必须在 [50, 300] 范围内</block>
  <block id="89ffa293e05655bd6be9d422345be38a" category="cell">“200”</block>
  <block id="7bb910e3cf11d0b34ca215aa399d3f23" category="cell"><block ref="5910159ef86741f119f7574a9064b5b0" prefix="" category="inline-code"></block></block>
  <block id="8f0dd7b65e6130f3f55d984ebc34bbdb" category="cell">您可以指定以下一项：使用 Microsoft 管理控制台或ONTAP CLI 创建的 SMB 共享的名称；允许Trident创建 SMB 共享的名称；或者您可以将参数留空以防止对卷的公共共享访问。对于本地部署的ONTAP，此参数是可选的。此参数是Amazon FSx for ONTAP后端所必需的，不能为空。</block>
  <block id="2bd69c3354973375e1abed3c9beb1eff" category="cell"><block ref="f777ab485270937cd9b9efc63021484f" prefix="" category="inline-code"></block></block>
  <block id="f703d18584e163e18762e4dc13ad96a0" category="cell"><block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix="" category="inline-code"></block></block>
  <block id="50a4fd89cedf0068776b972ce96fcceb" category="cell">使用ONTAP REST API 的布尔参数。<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident使用ONTAP REST API 与后端通信；当设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>Trident使用 ONTAPI (ZAPI) 调用与后端通信。此功能需要ONTAP 9.11.1 及更高版本。此外，所使用的ONTAP登录角色必须具有访问权限。<block ref="045ed0306c61104cb0777ccd31ce648b" prefix=" " category="inline-code"></block>应用。预定义项满足了这一点。<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>和<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block>角色。从Trident 24.06 版本和ONTAP 9.15.1 或更高版本开始，<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>默认值；更改<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>到<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用 ONTAPI (ZAPI) 调用。</block>
  <block id="a8d3b70256520cece459d618f0b69d22" category="cell"><block ref="b326b5062b2f0e69046810717534cb09" prefix="" category="inline-code"></block>适用于ONTAP 9.15.1 或更高版本，否则<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。</block>
  <block id="98b1298645505c6ec838667dff651c81" category="cell">在 ontap-nas-economy 后端使用 Qtrees 时可请求的最大FlexVol大小。</block>
  <block id="c598aba0725ffc7663bf0f4db1a3238f" category="cell"><block ref="80fd16da9d17abac4374b362f2e409fe" prefix="" category="inline-code"></block></block>
  <block id="dc3d22611e67d08cb39256f8980be582" category="cell">限制<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>后端创建新的FlexVol卷来包含它们的 Qtree。只有预先存在的 Flexvol 才能用于配置新的 PV。</block>
  <block id="6830d19c259617eba954cda2aa1d541d" category="cell"><block ref="c860a3f92e27bd5d0798ef97b9454101" prefix="" category="inline-code"></block></block>
  <block id="3c26595dc5f4e2d90bc81b000429b6a7" category="cell">具有对 SMB 共享完全访问权限的 Active Directory 管理员用户或用户组。使用此参数可为 SMB 共享提供管理员权限，并赋予其完全控制权限。</block>
  <block id="193a49bcfb561fea878daa5efe72cad9" category="section-title">卷配置的后端配置选项</block>
  <block id="c59183b2f668b355e81e7bb1256f92b3" category="paragraph">您可以使用以下选项控制默认配置。<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>配置部分。例如，请参见下面的配置示例。</block>
  <block id="7be7ec1f4262cda30e19c85af89449af" category="cell">Q树的空间分配</block>
  <block id="ebc576222020c2a2ae2fc769169f1d2a" category="cell">“真的”</block>
  <block id="c41b872c22969c2098a0056121589349" category="cell">空间预留模式；“无”（细）或“大量”（粗）</block>
  <block id="f6d62a8e69201d3806ac1ef24ec64c4d" category="cell">“没有任何”</block>
  <block id="77f69e470b8766d2dc5df4b7f469ed72" category="cell">要使用的快照策略</block>
  <block id="84d2c2c768bd1900489bad5fb46b4aac" category="cell"><block ref="36c38058d66835923c982c773a817f0b" prefix="" category="inline-code"></block></block>
  <block id="54b94bba5d336f4e3d5fd7e88544fad1" category="cell">要为创建的卷分配的 QoS 策略组。每个存储池/后端选择 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="952e3a12d35e717bf86a6000b0c08976" category="cell"><block ref="3e5432e43a275793680f854329e05b72" prefix="" category="inline-code"></block></block>
  <block id="5896cc977dd7b9854957e18a2a5bf072" category="cell">要为创建的卷分配的自适应 QoS 策略组。每个存储池/后端选择 qosPolicy 或 adaptiveQosPolicy 之一。  ontap-nas-economy 不支持此功能。</block>
  <block id="6b3e1a8dae111668b3e4e13c5949a7c0" category="cell">如果为“0”，<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>为“无”，否则为“</block>
  <block id="6f5c0c94b1a17baffd2c33facaa10db6" category="cell">创建时将克隆体从其母体中分离出来</block>
  <block id="760f7a1b05bc9d3d50c534dc491c07d4" category="cell">在新卷上启用NetApp卷加密 (NVE)；默认设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>。要使用此选项，必须在集群上获得 NVE 许可并启用 NVE。如果后端启用了 NAE，则在Trident中配置的任何卷都将启用 NAE。更多信息，请参阅：<block ref="5113a2fb1642ecd23870711ba25c4ad7" category="inline-link-macro-rx"></block> 。</block>
  <block id="7639141e9ab9cd89ef8bc0b16fd34e6a" category="cell">分层策略使用“无”</block>
  <block id="3e9a232d025270ed6767c385b8291871" category="cell">新卷模式</block>
  <block id="3eda001907760c018e29ddf4cb7aa3c8" category="cell">NFS 卷的端口号为“777”；SMB 卷的端口号为空（不适用）。</block>
  <block id="7e8aabb1dc00b7d4aac6d0876f6507f4" category="cell">控制对以下方面的访问<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>目录</block>
  <block id="c1a0e97f953c948568aed6c134fc9711" category="cell">出口政策的使用</block>
  <block id="375aa0b790f300787cdecf0f896b97f5" category="cell">新卷的安全样式。 NFS 支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>和<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>安全措施。中小企业支持<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>和<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block>安全措施。</block>
  <block id="4a359bdcdb3ce547581bdea3ce6c5bd7" category="cell">NFS 默认值为<block ref="4913a9178621eadcdf191db17915fbcb" prefix=" " category="inline-code"></block>。  SMB 默认值为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block>。</block>
  <block id="1a917db78e9060d4bb44a3e3d9a60cb3" category="cell"><block ref="feeb5473f4afb4f667dfc9d369c3b454" prefix="" category="inline-code"></block></block>
  <block id="ae7206c28f1d0ee5f9f116f1cfe22c54" category="cell">用于创建自定义卷名称的模板。</block>
  <block id="9cae9ee80bd5bcfdc5aefb0ffdbdf25b" category="admonition">将 QoS 策略组与Trident结合使用需要ONTAP 9.8 或更高版本。您应该使用非共享的 QoS 策略组，并确保该策略组单独应用于每个成员。共享的 QoS 策略组强制规定所有工作负载的总吞吐量上限。</block>
  <block id="e62f5d0a5a95571e25197caafe78cd98" category="section-title">卷配置示例</block>
  <block id="2043559d67ba802541907de326b5ecdd" category="paragraph">以下是一个定义了默认值的示例：</block>
  <block id="8c63942428249eaa15437c7e07b3dd1e" category="paragraph">为了<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="10be922aa0fd75bc53ab71eda9229763" prefix=" " category="inline-code"></block>Trident现在使用新的计算方法，以确保FlexVol 的尺寸与 snapshotReserve 百分比和 PVC 正确匹配。当用户请求 PVC 时， Trident会使用新的计算方法创建具有更多空间的原始FlexVol 。此计算方法可确保用户在 PVC 中获得其请求的可写空间，而不是少于其请求的空间。在 v21.07 之前，当用户请求 PVC（例如 5 GiB）时，如果快照预留百分比为 50%，则只能获得 2.5 GiB 的可写空间。这是因为用户请求的是整个卷。<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>是其中的百分比。在Trident 21.07 中，用户请求的是可写空间，而Trident定义了该空间。<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>将数值表示为占总体积的百分比。这不适用于<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>。请参阅以下示例了解其工作原理：</block>
  <block id="86ec808b80973d24eadfc617926f534e" category="paragraph">计算方法如下：</block>
  <block id="a9d0225032890b6fff6306b9c33e2cc9" category="paragraph">对于快照预留 = 50% 且 PVC 请求 = 5 GiB 的情况，总卷大小为 5/.5 = 10 GiB，可用大小为 5 GiB，这正是用户在 PVC 请求中请求的大小这<block ref="0c5606ed319753bb2d86a485f23c8f6d" prefix=" " category="inline-code"></block>该命令应显示与此示例类似的结果：</block>
  <block id="2f1534ee8d0c6ec998511ed37cfe0da9" category="image-alt">显示 volume show 命令的输出结果。</block>
  <block id="b2badedae3a2fdd602b26112668ed612" category="paragraph">升级Trident时，先前安装的现有后端将按上述方式配置卷。对于升级前创建的卷，您应该调整其大小才能观察到更改。例如，一个 2 GiB 的 PVC<block ref="01d8e11bde220373533705ed26796e25" prefix=" " category="inline-code"></block>之前的结果是一个提供 1 GiB 可写空间的卷。例如，将卷大小调整为 3 GiB，将在 6 GiB 的卷上为应用程序提供 3 GiB 的可写空间。</block>
  <block id="2aae2b6accd04335b3eeceb2193b34d6" category="section-title">最小配置示例</block>
  <block id="f35c0fe4b6581c16866c964cef229bfa" category="admonition">如果您在NetApp ONTAP上使用Amazon FSx和Trident，建议为 LIF 指定 DNS 名称而不是 IP 地址。</block>
  <block id="9561077d9ef091b88a253b8593eb8bfb" category="example-title">ONTAP NAS 经济示例</block>
  <block id="d24ddd1da817847ede47979e6e68c60e" category="example-title">ONTAP NAS Flexgroup 示例</block>
  <block id="16d35233bf6aa04a2ff7b9ec19d64661" category="example-title">MetroCluster示例</block>
  <block id="fd9313829353096dad83775c55ce66f8" category="paragraph">您可以配置后端，以避免在切换和切换回后端后手动更新后端定义。<block ref="6ffda35fd03109cc0d7cf7a1f79d2c30" category="inline-link-macro-rx"></block> 。</block>
  <block id="abc765e949697f25e96670a5cab132f3" category="paragraph">为了实现无缝切换和切换回，请指定 SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>并省略<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>和<block ref="924ff83ff1e671bacfb07ff12b845703" prefix=" " category="inline-code"></block>参数。例如：</block>
  <block id="8788fe54575b03d9b62dbb1a38a7a277" category="example-title">SMB 卷示例</block>
  <block id="dacbfb309aa16cb942510c02c224fdbc" category="example-title">基于证书的身份验证示例</block>
  <block id="78e5b29e139db71ceb7ca6bc99b5e228" category="paragraph">这是一个最小后端配置示例。<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block> ，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block> ， 和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block>（如果使用受信任的 CA，则为可选）<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>分别取客户端证书、私钥和受信任 CA 证书的 base64 编码值。</block>
  <block id="1ce00ab507a065e4febc57b244e25d18" category="example-title">自动出口政策示例</block>
  <block id="04475efebba67943de12a2269d2e0a7b" category="paragraph">本示例向您展示如何指示Trident使用动态导出策略来自动创建和管理导出策略。这对于以下情况也适用：<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>司机。</block>
  <block id="5ef13a507a243e20eb0469a9d7670527" category="example-title">IPv6 地址示例</block>
  <block id="0275de02c3bba722f4540469d23cc535" category="paragraph">这个例子表明<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>使用 IPv6 地址。</block>
  <block id="ee8af8063e9ea3725931d232730b8a8e" category="example-title">使用 SMB 卷的Amazon FSx for ONTAP示例</block>
  <block id="33ef55e82416e2c1c4beb9cba9560b02" category="paragraph">这<block ref="5910159ef86741f119f7574a9064b5b0" prefix=" " category="inline-code"></block>使用 SMB 卷的 FSx for ONTAP需要此参数。</block>
  <block id="b797b4560e6c4ae4e13d035bbce23b4d" category="example-title">使用 nameTemplate 的后端配置示例</block>
  <block id="1b9ef354b22d8a8b125247fd538da4b2" category="section-title">具有虚拟池的后端示例</block>
  <block id="71b79981e733eabd769324fa40c8fa6d" category="paragraph">在下方所示的示例后端定义文件中，所有存储池都设置了特定的默认值，例如：<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block>没有，<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block>为假，并且<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block>错误。虚拟池在存储部分中定义。</block>
  <block id="917b750655d8fd1d6c961e661535fa99" category="paragraph">Trident在“备注”字段中设置配置标签。  FlexVol上已设置评论<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>或FlexGroup<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> 。 Trident在配置时会将虚拟池上的所有标签复制到存储卷。为了方便起见，存储管理员可以为每个虚拟池定义标签，并按标签对卷进行分组。</block>
  <block id="71fcdf20b31ca43f6ef64c06530f313d" category="paragraph">在这些示例中，一些存储池会设置自己的参数。<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block> ，<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block> ， 和<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block>有些值会覆盖默认值，有些池会覆盖默认值。</block>
  <block id="574e53d92fdeaac37ba2d879a9b88f12" category="example-title">ONTAP NAS 示例</block>
  <block id="bdb252122df8a6e68a54782628d1944f" category="example-title">ONTAP NAS FlexGroup示例</block>
  <block id="f00b69018be0961b32ee24ec54fb56d1" category="section-title">将后端映射到存储类</block>
  <block id="eb2e955f1a984e2be0e3fa8cdbe6667c" category="paragraph">以下 StorageClass 定义指的是<block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>字段中，每个 StorageClass 都会指定哪些虚拟池可用于托管卷。卷将具有所选虚拟池中定义的各个方面。</block>
  <block id="01eacb47d802acac83a7e60311768055" category="list-text">这<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block>StorageClass 将映射到第一个和第二个虚拟池。<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>后端。只有这些泳池提供黄金级保护。</block>
  <block id="6b35cdd98b7f7e55e698a6d0628e18e0" category="list-text">这<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block>StorageClass 将映射到第三个和第四个虚拟池。<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>后端。除了黄金之外，只有这些金池提供其他级别的保护。</block>
  <block id="535efa214445261dfda5d5edc613e56b" category="list-text">这<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block>StorageClass 将映射到第四个虚拟池。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>后端。这是唯一一个为mysqldb类型应用程序提供存储池配置的存储池。</block>
  <block id="d0c5a28c77fc4e37f7271d37f7372724" category="list-text">该<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block>StorageClass 将映射到第三个虚拟池。<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>后端。这是唯一提供银级保护和 20000 积分的彩池。</block>
  <block id="0191eea3640b05213a7522d6581a2fd5" category="list-text">这<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block>StorageClass 将映射到第三个虚拟池。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>后端和第二个虚拟池<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>后端。这是唯一提供 5000 积分的彩池产品。</block>
  <block id="fb66862ac33cf61ecc10382c3a42dee3" category="paragraph">Trident将决定选择哪个虚拟池，并确保满足存储需求。</block>
  <block id="0bd54df5242a2a2e9eca045fc695b41f" category="section-title">更新<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>初始配置后</block>
  <block id="6e7bd344d0c1260e0145e18171b598bb" category="paragraph">初始配置完成后，您可以通过运行以下命令来更改 dataLIF，从而为新的后端 JSON 文件提供更新后的 dataLIF。</block>
  <block id="df9bc5d5fd5d258576244d9b760ef3d9" category="admonition">如果 PVC 连接到一个或多个舱体，则必须将所有相应的舱体放下，然后再将它们重新升起，以便新的 dataLIF 生效。</block>
  <block id="007eb2831357fc17158f683f6dcff454" category="section-title">安全的中小企业示例</block>
  <block id="d31bd17463bbf5861b916a74d031385b" category="section-title">使用 ontap-nas 驱动程序进行后端配置</block>
  <block id="0f4ec0551cca9ca01494fc00becd7670" category="section-title">使用 ontap-nas-economy 驱动程序进行后端配置</block>
  <block id="423fe93aaec50040bb6be02e84f7efdf" category="section-title">后端配置及存储池</block>
  <block id="932c29a089501176987cc43435fb9490" category="section-title">使用 ontap-nas 驱动程序的存储类示例</block>
  <block id="6710620e6b99c9d38a3eae8738824721" category="admonition">请确保添加<block ref="4ab6864fc58ecd8b598ee10dfe2ac311" prefix=" " category="inline-code"></block>实现安全的SMB。如果没有注释，无论后端或 PVC 中设置了什么配置，安全 SMB 都无法工作。</block>
  <block id="df600c813a46f3b822f7e5f064845591" category="section-title">使用 ontap-nas-economy 驱动程序的存储类示例</block>
  <block id="14026c1ce10412c2adbe88758af8fecd" category="section-title">包含单个 AD 用户的 PVC 示例</block>
  <block id="6588dbd33e470b3f0858ad0b7d2075c2" category="section-title">包含多个 AD 用户的 PVC 示例</block>
  <block id="ef0e40b987d8b9ad523bdde2bba5157a" category="summary">了解配置带有ONTAP NAS 驱动程序的ONTAP后端的要求、身份验证选项和导出策略。</block>
  <block id="fd05c90de484dbc1cb963df796886af4" category="doc">准备配置带有ONTAP NAS 驱动程序的后端</block>
  <block id="46d663191f16f782a681e5f6702a09d4" category="list-text">对于所有ONTAP后端， Trident要求至少将一个聚合分配给 SVM。</block>
  <block id="ffd4000c9e43a23d97e231d47f99dcd4" category="list-text">您可以运行多个驱动程序，并创建指向其中一个或另一个驱动程序的存储类。例如，您可以配置一个使用以下方式的 Gold 类：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>驾驶员和使用青铜级的驾驶员<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>一。</block>
  <block id="d7e54271baba05c2253c5c79a6155965" category="list-text">所有 Kubernetes 工作节点都必须安装相应的 NFS 工具。请参阅<block ref="f1f954e59a21e3ffe189e77dd2ee9f86" category="inline-link-macro-rx"></block>更多详情请见下文。</block>
  <block id="3791349e449ca2bc9a8b7b7ed4c843de" category="list-text">Trident仅支持挂载到运行在 Windows 节点上的 pod 的 SMB 卷。参考 <block ref="688177e6b45c5d27a545463079c58d82" category="inline-xref-macro-rx"></block> 了解详情。</block>
  <block id="c63609aba869239be30364b58d99b1a3" category="section-title">对ONTAP后端进行身份验证</block>
  <block id="bef1bdf06ff1fb19147e51880974a6c5" category="paragraph">Trident提供两种ONTAP后端身份验证方式。</block>
  <block id="f3554362e5b550c58586036685aca0f6" category="list-text">基于凭证：此模式需要对ONTAP后端拥有足够的权限。建议使用与预定义的安全登录角色关联的帐户，例如：<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>或者<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>确保与ONTAP版本最大程度兼容。</block>
  <block id="c3ac6347a688cffd729947263e3387fb" category="list-text">基于证书：此模式要求后端安装证书， Trident才能与ONTAP集群通信。此处，后端定义必须包含客户端证书、密钥和受信任 CA 证书（如果使用，建议使用）的 Base64 编码值。</block>
  <block id="1ea1b160621872df5909653ebde1bf7f" category="paragraph">您可以更新现有后端，以在基于凭据的方法和基于证书的方法之间进行切换。但是，一次只能支持一种身份验证方法。要切换到不同的身份验证方法，必须从后端配置中删除现有方法。</block>
  <block id="7335992f174c029a990442aca68aacbd" category="admonition">如果您尝试同时提供凭据和证书，则后端创建将失败，并出现错误，提示配置文件中提供了多个身份验证方法。</block>
  <block id="a2f8f419bf420960ef8cca73e1999e09" category="section-title">启用基于凭据的身份验证</block>
  <block id="3dcd67bbe9a272b52d3d7a0b30220f72" category="paragraph">Trident需要 SVM 范围/集群范围管理员的凭据才能与ONTAP后端通信。建议使用标准的、预定义的角色，例如：<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>或者<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>。这样可以确保与未来ONTAP版本向前兼容，这些版本可能会公开一些功能 API，供未来的Trident版本使用。虽然可以创建自定义安全登录角色并将其与Trident一起使用，但不建议这样做。</block>
  <block id="2312b8f77f99c346269b67308afc3649" category="paragraph">后端定义示例如下所示：</block>
  <block id="2a2ef6dcf08a8789a55301af5f71304c" category="paragraph">请注意，后端定义是唯一以纯文本形式存储凭据的地方。后端创建完成后，用户名/密码将使用 Base64 进行编码，并存储为 Kubernetes 密钥。后端创建/更新是唯一需要了解凭据的步骤。因此，这是一项仅限管理员执行的操作，由 Kubernetes/存储管理员执行。</block>
  <block id="052f76b486189a7b01340d5134eb7985" category="section-title">启用基于证书的身份验证</block>
  <block id="0778b06c5ea9fded4fd7b586b248dd86" category="paragraph">新的和现有的后端都可以使用证书与ONTAP后端通信。后端定义需要三个参数。</block>
  <block id="d5b9c9db262b1927d7914504f3587adb" category="list-text">clientCertificate：客户端证书的 Base64 编码值。</block>
  <block id="8f2b750dd6a57864f0e36828c248ddfc" category="list-text">clientPrivateKey：关联私钥的 Base64 编码值。</block>
  <block id="200c2d2a44dec6455fa1c947f9c1f534" category="list-text">trustedCACertificate：受信任 CA 证书的 Base64 编码值。如果使用受信任的 CA，则必须提供此参数。如果没有使用受信任的证书颁发机构，则可以忽略此步骤。</block>
  <block id="6b634823c19ebc37c9e4fdbf08de1fff" category="paragraph">典型的工作流程包括以下步骤。</block>
  <block id="c92e58d7dd251e6e6cdb16291a6dec90" category="list-text">生成客户端证书和密钥。生成时，将通用名称 (CN) 设置为要进行身份验证的ONTAP用户。</block>
  <block id="69b521cddbc52a2d14539e349e2930f0" category="list-text">向ONTAP集群添加受信任的 CA 证书。这可能已经由存储管理员处理了。如果没有使用受信任的证书颁发机构，则忽略此操作。</block>
  <block id="2f3945695e5ca88abb46af80d87c6972" category="list-text">在ONTAP集群上安装客户端证书和密钥（来自步骤 1）。</block>
  <block id="e81810c4035ad015ad3f0d8c4f2c6454" category="list-text">确认ONTAP安全登录角色支持<block ref="b6ba9fa6ea18201bf39ea635ecca9f13" prefix=" " category="inline-code"></block>身份验证方法。</block>
  <block id="997cff957213b9212a22d7cac2b4275d" category="list-text">使用生成的证书进行身份验证。请将 &lt; ONTAP管理 LIF&gt; 和 &lt;vserver 名称&gt; 替换为管理 LIF IP 地址和 SVM 名称。您必须确保 LIF 的服务策略已设置为<block ref="1e2cb0c539a96182e302d676a4b791be" prefix=" " category="inline-code"></block>。</block>
  <block id="83f2adf143dc8f5fbbb9d924f840c1ce" category="list-text">使用 Base64 对证书、密钥和受信任的 CA 证书进行编码。</block>
  <block id="8d36e570f1edac5ae19e6733e3fbb4d5" category="list-text">使用上一步获得的值创建后端。</block>
  <block id="2ab8ad0fce083cd02635b9126cf4353c" category="section-title">更新身份验证方法或轮换凭据</block>
  <block id="31aae55e68bb5034f8f948ec526b9ff3" category="paragraph">您可以更新现有后端，以使用不同的身份验证方法或轮换其凭据。这种方法是双向的：使用用户名/密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名/密码的后端。为此，您必须删除现有的身份验证方法并添加新的身份验证方法。然后使用包含所需参数的更新后的 backend.json 文件来执行<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>。</block>
  <block id="5e36c3d66bd47ae551071244dc48df17" category="admonition">轮换密码时，存储管理员必须首先更新ONTAP上用户的密码。接下来将进行后端更新。轮换证书时，可以为用户添加多个证书。然后更新后端以使用新证书，之后即可从ONTAP集群中删除旧证书。</block>
  <block id="9cce0e23fbc00d5ef4aa8264a88e346a" category="paragraph">更新后端不会中断对已创建卷的访问，也不会影响之后建立的卷连接。后端更新成功表明Trident可以与ONTAP后端通信并处理未来的卷操作。</block>
  <block id="1d67220b5084f7489e1a078d7ce093c3" category="section-title">为Trident创建自定义ONTAP角色</block>
  <block id="2c7e6d2877f857f126c24c7742e84098" category="paragraph"><block ref="c33f6523b710a03a2fd5d3e78562afa6" prefix="" category="inline-code"></block></block>
  <block id="1af6536f50b7c77854633155c6ae923a" category="paragraph"><block ref="496d78c32dd2b2752181d6346f8b0aeb" prefix="" category="inline-code"></block></block>
  <block id="80812a5ac42a9862b7d20ef498a269ce" category="paragraph"><block ref="5eb0d996baab37017dab0c8a2a171589" prefix="" category="inline-code"></block></block>
  <block id="07b434b23f63ca6490df33b213599320" category="section-title">管理 NFS 导出策略</block>
  <block id="9284d31490691a3e4c3cb7c3fa6bdb30" category="paragraph">Trident使用 NFS 导出策略来控制对其所配置卷的访问。</block>
  <block id="911e36a0e95c6a8cd786e86a3fcc313a" category="paragraph">Trident在处理出口策略时提供两种选择：</block>
  <block id="5dc1a99b61ad0584100fea35d3c77e2d" category="list-text">Trident可以动态管理导出策略本身；在这种操作模式下，存储管理员指定一个 CIDR 块列表，这些 CIDR 块代表可接受的 IP 地址。 Trident会在发布时自动将属于这些范围内的适用节点 IP 添加到导出策略中。或者，如果没有指定 CIDR，则会将发布卷的节点上找到的所有全局范围的单播 IP 添加到导出策略中。</block>
  <block id="d6f1d6cb064a0fa1dad0c21c9e750994" category="list-text">存储管理员可以创建导出策略并手动添加规则。除非在配置中指定了不同的导出策略名称，否则Trident将使用默认导出策略。</block>
  <block id="4603f08ad837f4108ff2fe7665b0b1e3" category="section-title">动态管理出口策略</block>
  <block id="9391b78a23c85c79820dc84c10db96aa" category="paragraph">Trident提供了动态管理ONTAP后端导出策略的功能。这样，存储管理员就可以指定工作节点 IP 的允许地址空间，而无需手动定义明确的规则。它大大简化了导出策略管理；对导出策略的修改不再需要对存储集群进行人工干预。此外，这有助于将对存储集群的访问限制在仅允许挂载卷且 IP 地址在指定范围内的节点上，从而支持细粒度和自动化管理。</block>
  <block id="0cd8d0588cd2b20face3a0379d38f777" category="admonition">使用动态导出策略时，请勿使用网络地址转换（NAT）。使用 NAT 时，存储控制器看到的是前端 NAT 地址而不是实际的 IP 主机地址，因此当在导出规则中找不到匹配项时，访问将被拒绝。</block>
  <block id="66cbadc48d2dbe3accb93937a8d42d1e" category="paragraph">必须使用两种配置选项。以下是一个后端定义示例：</block>
  <block id="b1c10dc35d4f2204f84dafbae3a9db72" category="admonition">使用此功能时，必须确保 SVM 中的根连接点具有先前创建的导出策略，该策略的导出规则允许节点 CIDR 块（例如默认导出策略）。始终遵循NetApp推荐的最佳实践，为Trident专用一个 SVM。</block>
  <block id="4975fc485ff51ca8f82c6ea96f927287" category="paragraph">下面以上述示例为例，解释此功能的工作原理：</block>
  <block id="891bc9d98980555712816ab85ae4a747" category="list-text"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。这表明Trident会为使用此后端配置的每个卷创建一个导出策略。<block ref="3568c00ad84b08a31b2dfadbfd8ee221" prefix=" " category="inline-code"></block>使用 SVM 处理规则的添加和删除<block ref="c108f084ab28ac46ad3787ba09ae8304" prefix=" " category="inline-code"></block>地址块。在卷连接到节点之前，该卷使用空的导出策略，没有任何规则来防止对该卷的未经授权的访问。当卷发布到节点时， Trident会创建一个导出策略，该策略的名称与包含指定 CIDR 块内节点 IP 的底层 qtree 的名称相同。这些 IP 地址也将添加到父FlexVol volume使用的导出策略中。</block>
  <block id="be5fcef35e23604f5b0fc183ca7506c7" category="list-text">后端 UUID 403b5326-8482-40db-96d0-d83fb3f4daec</block>
  <block id="28dfab96c79abedb70e1d50d710ea98b" category="list-text"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block></block>
  <block id="580cc4344cc0f2e6db295db4ab750199" category="list-text">存储前缀<block ref="47cb44be55a0dffa15dfc900a4c687be" prefix=" " category="inline-code"></block></block>
  <block id="281f254b4327225d2f04f74bef468fda" category="list-text">PVC UUID a79bcf5f-7b6d-4a40-9876-e2551f159c1c</block>
  <block id="9f39168351aa064bf4add0614e72cf76" category="list-text">名为 trident_pvc_a79bcf5f_7b6d_4a40_9876_e2551f159c1c 的 qtree 为名为FlexVol的 FlexVol 创建了一个导出策略。<block ref="c39e5727ab9fde433a5c617f19a07adc" prefix=" " category="inline-code"></block> ，名为 qtree 的导出策略<block ref="a9394417b5c3be8334bc253bf0db8df0" prefix=" " category="inline-code"></block>以及一个名为“空的导出策略”的<block ref="735cc5128643b8de22e29beb94c9ccf4" prefix=" " category="inline-code"></block>在支持向量机上。 FlexVol导出策略的规则将是 qtree 导出策略中包含的任何规则的超集。任何未附加的卷都将重用空导出策略。</block>
  <block id="1ac483d2832bce598fb016d9eb24a804" category="list-text"><block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix="" category="inline-code"></block>包含地址块列表。此字段为可选字段，默认值为 ["0.0.0.0/0", "::/0"]。如果未定义， Trident会添加在工作节点上找到的所有具有发布的全局作用域的单播地址。</block>
  <block id="b2a40ed90888ed4dd5f4dce75ca437a5" category="paragraph">在这个例子中，<block ref="f2293842bd9b1febec66e01804867721" prefix=" " category="inline-code"></block>已提供地址空间。这意味着，位于此地址范围内且已发布 Kubernetes 节点 IP 的节点将被添加到Trident创建的导出策略中。当Trident注册它运行所在的节点时，它会检索该节点的 IP 地址，并将其与提供的地址块进行比对。<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>在发布时， Trident在过滤 IP 地址后，会为它要发布到的节点的客户端 IP 地址创建导出策略规则。</block>
  <block id="4646f167a1fb9819f41f28d5ab11c1fa" category="paragraph">您可以更新<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>和<block ref="b9c40fbe9daa81e40e06509d5bbd5a6c" prefix=" " category="inline-code"></block>创建后端之后，需要进行以下操作。您可以为自动管理的后端添加新的 CIDR，或者删除现有的 CIDR。删除 CIDR 时要格外小心，确保现有连接不会断开。您也可以选择禁用<block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix=" " category="inline-code"></block>对于后端，如果出现问题，则回退到手动创建的导出策略。这将需要进行设置<block ref="647ce4e5394e2e595e46b4fc50a628e9" prefix=" " category="inline-code"></block>后端配置中的参数。</block>
  <block id="7bbfd70596d4809b3a59a1d543c64933" category="paragraph">Trident创建或更新后端后，您可以使用以下命令检查后端：<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>或相应的<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block>CRD：</block>
  <block id="c21ad3c9d699da710d3d9a10d356f72d" category="paragraph">当一个节点被移除时， Trident会检查所有导出策略，以移除与该节点对应的访问规则。通过从受管后端导出策略中移除此节点 IP， Trident可以防止恶意挂载，除非集群中的新节点重新使用此 IP。</block>
  <block id="560093aa674b397879f076b8f8a64fb1" category="paragraph">对于先前存在的后端，使用以下方式更新后端：<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>确保Trident自动管理出口策略。这样，当需要时，就会创建两个以后端 UUID 和 qtree 名称命名的新导出策略。后端存在的卷在卸载并重新挂载后，将使用新创建的导出策略。</block>
  <block id="de1d1f6b64a5c5b6890c313888b290b7" category="admonition">删除具有自动管理导出策略的后端将删除动态创建的导出策略。如果后端被重新创建，它将被视为一个新的后端，并将导致创建一个新的导出策略。</block>
  <block id="5be86c6240034dbc77f8dad4eae132b0" category="paragraph">如果运行中的节点的 IP 地址更新，则必须重启该节点上的Trident pod。  Trident随后将更新其管理的后端的导出策略，以反映此 IP 变更。</block>
  <block id="fc4e16be02eac62a40d8ba5714cbeda1" category="section-title">准备配置SMB卷</block>
  <block id="e5fdb627c170dc14e3873b3da32f3aa5" category="paragraph">稍作准备，您就可以使用以下方式配置 SMB 卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>司机。</block>
  <block id="ce3bd20884ed2b4f4a604d922dbb0dd9" category="admonition">您必须在 SVM 上同时配置 NFS 和 SMB/CIFS 协议才能创建<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>适用于ONTAP本地集群的 SMB 卷。如果未能配置这些协议中的任何一个，都会导致 SMB 卷创建失败。</block>
  <block id="3c84638211d81849fc9b0b95216d1afa" category="admonition"><block ref="323e871cfe2e70ead9c713e8f3164f8f" prefix="" category="inline-code"></block>不支持 SMB 卷。</block>
  <block id="8de0a7910b914d44521684fe2a3a28c6" category="paragraph">在配置 SMB 卷之前，您必须具备以下条件。</block>
  <block id="072a79a382792fdaa71cab41d1340dae" category="list-text">至少有一个包含您的 Active Directory 凭据的Trident密钥。生成秘密<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>：</block>
  <block id="f05dd4ff0ba35f59e465466148e57015" category="list-text">对于本地部署的ONTAP，您可以选择创建 SMB 共享，或者Trident可以为您创建一个。</block>
  <block id="6a402202521e2168a911181e81c72faf" category="admonition">Amazon FSx for ONTAP需要 SMB 共享。</block>
  <block id="d98f239eeb5789a80cb4b247e5be144d" category="inline-link-macro">Microsoft 管理控制台</block>
  <block id="7f7041fc0ca0e00f3d3e39e4ce4a5149" category="paragraph">您可以通过以下两种方式之一创建 SMB 管理共享：<block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block>共享文件夹管理单元或使用ONTAP CLI。使用ONTAP CLI 创建 SMB 共享：</block>
  <block id="c9e9c2bb32e43693c4687ec082488811" category="list-text">如有必要，请创建共享的目录路径结构。</block>
  <block id="8a19300a396203718795b4620552b59c" category="paragraph">这<block ref="293a1aaca0a542f4f1b1dc1a3ad95728" prefix=" " category="inline-code"></block>该命令检查在创建共享时 -path 选项中指定的路径。如果指定的路径不存在，则命令执行失败。</block>
  <block id="a968d0620b250ca44da661cadac02e42" category="list-text">创建与指定 SVM 关联的 SMB 共享：</block>
  <block id="e172e0c83051eb537305571585af294a" category="list-text">确认共享已创建：</block>
  <block id="a6e62ff657f01a7df2d91d1ea0d3e76c" category="inline-link-macro">创建 SMB 共享</block>
  <block id="39026ea2687a8de2a318f8245aceb992" category="admonition">请参阅<block ref="2b8c6fb4597e9bb000d4d88db3769c9a" category="inline-link-macro-rx"></block>了解详细信息。</block>
  <block id="e4f84f59067aa8e22119bf499379385a" category="inline-link-macro">FSx for ONTAP配置选项和示例</block>
  <block id="ca088cbb36bbab4b23e57d63d95a628c" category="list-text">创建后端时，必须配置以下内容以指定 SMB 卷。有关所有 FSx for ONTAP后端配置选项，请参阅<block ref="dd05fa371cf4b2c8377b8b4b261a8edd" category="inline-link-macro-rx"></block>。</block>
  <block id="3b84c7b88317953423192c633a83db9f" category="cell">*必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>.*如果为空，则默认为空。<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block> 。</block>
  <block id="767b06b78582b463da02281e05c82e45" category="cell"><block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix="" category="inline-code"></block></block>
  <block id="11d7f0efe30199fc66cbc43c427e147d" category="cell">新卷的安全样式。  *必须设置为<block ref="68e98b83f5bd746f1468dff89f529d1b" prefix=" " category="inline-code"></block>或者<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>适用于 SMB 卷。*</block>
  <block id="e76ea7f2be658dc914f9c95fe8d14fcf" category="cell"><block ref="68e98b83f5bd746f1468dff89f529d1b" prefix="" category="inline-code"></block>或者<block ref="1d770934d44de09b0d24f04fd01708ba" prefix=" " category="inline-code"></block>适用于 SMB 卷</block>
  <block id="1928bae58ae496b53ef1a163c3dbeeb4" category="cell">新卷模式。  *对于 SMB 卷，此项必须留空。*</block>
  <block id="353061699a2e052736b77ea68a2871e3" category="paragraph">从 25.06 版本开始， NetApp Trident支持使用以下方式安全配置创建的 SMB 卷：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>后端。启用安全 SMB 后，您可以使用访问控制列表 (ACL) 为 Active Directory (AD) 用户和用户组提供对 SMB 共享的受控访问。</block>
  <block id="fad725216d945a6443f15949ae73b316" category="list-title">需要记住的要点</block>
  <block id="fc531b442f38e267ff561d8bd20a3d71" category="list-text">输入<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>不支持卷。</block>
  <block id="ae588b4a9791f58d2c577c52692f45d9" category="list-text">仅支持只读克隆<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>卷。</block>
  <block id="250a0cf82016b0cf28e3072852df48ed" category="list-text">如果启用了安全 SMB， Trident将忽略后端提到的 SMB 共享。</block>
  <block id="87275c5e346f7178346f0399a6ceb9de" category="list-text">更新 PVC 注解、存储类注解和后端字段不会更新 SMB 共享 ACL。</block>
  <block id="972efd467b8594821be7b5680a32c911" category="list-text">克隆 PVC 注释中指定的 SMB 共享 ACL 将优先于源 PVC 中的 ACL。</block>
  <block id="a3a338c1a9eb99aaf1ddaad940b0c906" category="list-text">启用安全 SMB 时，请确保提供有效的 AD 用户。无效用户将不会被添加到访问控制列表 (ACL) 中。</block>
  <block id="4dcf9ab5a157e5be3f0891588273273e" category="list-text">如果在后端、存储类和 PVC 中为同一个 AD 用户提供不同的权限，则权限优先级为：PVC、存储类，然后是后端。</block>
  <block id="e56268d5a3bb9869b9e76613edc53128" category="list-text">支持安全 SMB<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>仅适用于托管卷导入，不适用于非托管卷导入。</block>
  <block id="315910c69a0b41f8011b0ed2cbf00430" category="list-text">在 TridentBackendConfig 中指定 adAdminUser，如下例所示：</block>
  <block id="73f6ef8943a1983b789b024c7bfecf20" category="list-text">在存储类中添加注解。</block>
  <block id="f89369f9c30ff9c8236b833fb1b96aef" category="paragraph">添加<block ref="b85be3102972ffc22dfe9101b510b6f3" prefix=" " category="inline-code"></block>对存储类进行注解，以启用安全可靠的 SMB 连接。用户为注释指定的值<block ref="b85be3102972ffc22dfe9101b510b6f3" prefix=" " category="inline-code"></block>应该与指定的用户名相同<block ref="e47a193687dde960f6b6f80d394142a3" prefix=" " category="inline-code"></block>秘密。您可以从以下选项中选择一项<block ref="5fd754a88e37f6a57427226bb237f59b" prefix=" " category="inline-code"></block>：<block ref="f28185d762af16471070289c69f72331" prefix=" " category="inline-code"></block> ，<block ref="eb399bcaca686f8609137153307eecf1" prefix=" " category="inline-code"></block> ， 或者<block ref="ecae13117d6f0584c25a9da6c8f8415e" prefix=" " category="inline-code"></block>。默认权限是<block ref="f28185d762af16471070289c69f72331" prefix=" " category="inline-code"></block>。</block>
  <block id="79731e026bd64a3983c4d0a2b46c0516" category="list-text">创建 PVC。</block>
  <block id="151c5a9798f5c6d94a52ac5bce7f9436" category="paragraph">以下示例创建PVC：</block>
  <block id="24ca391029d6df294c5d5b8f1fe5b4eb" category="summary">了解如何使用ONTAP NAS 驱动程序配置ONTAP后端。</block>
  <block id="ddbd2735bfb88c5da807f77f6fe5f6c8" category="doc">ONTAP NAS 驱动程序概述</block>
  <block id="4d80e2460d711b841338dfbeea2ca8c1" category="paragraph">了解如何使用ONTAP和Cloud Volumes ONTAP NAS 驱动程序配置ONTAP后端。</block>
  <block id="8198f2a0f41303e214bcb5ab7d9e9ef4" category="section-title">ONTAP NAS 驱动程序详情</block>
  <block id="c267535828cc965ba3fe4e10913f7285" category="paragraph">Trident提供以下 NAS 存储驱动程序，用于与ONTAP集群通信。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="2b5fc47d5a68b6070472f3a239fc77f3" category="paragraph">"，<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block> ，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block></block>
  <block id="57154d2dcf591aaa3d4dcbfbba196075" category="inline-link-macro">支持的ONTAP容量限制</block>
  <block id="7fe76f1189ac93d41118f7ba3e36e3ab" category="list-text">使用<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>仅当预计持续卷使用量高于……时<block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block>。</block>
  <block id="a6b18abf4de4d534121b0cca3b164d74" category="list-text">使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>仅当预计持续卷使用量高于……时<block ref="e5997a58d747f862af8a862cd1b54e31" category="inline-link-macro-rx"></block>以及<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>驱动程序无法使用。</block>
  <block id="df7dec428425115b59101028bbebe58c" category="list-text">请勿使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>如果您预计需要数据保护、灾难恢复或移动办公。</block>
  <block id="0ca34892a0e67f37b07d196ec272007d" category="list-text">NetApp不建议在所有ONTAP驱动程序中使用 Flexvol 自动增长，ontap-san 除外。作为一种变通方法， Trident支持使用快照储备，并相应地调整 Flexvol 容量。</block>
  <block id="ce8828fc10a926c196951c9bdd0d534d" category="section-title">用户权限</block>
  <block id="f993941dc62990aa70d883be7a386ea7" category="paragraph">Trident预期以ONTAP或 SVM 管理员身份运行，通常使用以下方式：<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>集群用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>SVM 用户，或者具有相同角色但名称不同的用户。</block>
  <block id="fed5cc1d933ad528f364a438a22f2465" category="paragraph">对于Amazon FSx for NetApp ONTAP部署， Trident需要以ONTAP或 SVM 管理员身份运行，并使用集群。<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>SVM 用户，或者具有相同角色但名称不同的用户。这<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户是集群管理员用户的有限替代品。</block>
  <block id="6e82d09aa274380adf21d56aaa3b0413" category="admonition">如果你使用<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>需要参数和集群管理员权限。当使用Amazon FSx for NetApp ONTAP和Trident时，<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>参数将无法与<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>和<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户账户。如果指定此参数，配置操作将失败。</block>
  <block id="7d159230ccaa721872f31bf9be31afeb" category="paragraph">虽然可以在ONTAP中创建一个Trident驱动程序可以使用的限制性更强的角色，但我们不建议这样做。  Trident的大多数新版本都会调用额外的 API，这些 API 必须加以考虑，这使得升级变得困难且容易出错。</block>
  <block id="8dbaef294ecadfe828f5bab1ae097d46" category="summary">了解如何在Trident安装中创建和使用ONTAP SAN 驱动程序。本节提供后端配置示例以及如何将后端映射到 StorageClasses 的详细信息。</block>
  <block id="55fd4fb7ce66d950d3136fb6613ab770" category="paragraph">了解如何在Trident安装中创建和使用ONTAP SAN 驱动程序。本节提供后端配置示例以及将后端映射到 StorageClasses 的详细信息。</block>
  <block id="fde1abb5537b55c34521d414267b3f70" category="inline-link-macro">ASA r2 系统</block>
  <block id="3cc22aeaf9742834647a32871fcf9142" category="inline-link-macro">了解更多关于ASA r2 系统与其他ONTAP系统之间的区别</block>
  <block id="1fb5039067c7374148ef72425e995a96" category="paragraph"><block ref="9f40590ca1185cea7261c2a60fc922ea" category="inline-link-macro-rx"></block>与其他ONTAP系统（ASA、 AFF和FAS）在存储层的实现上有所不同。这些变化会影响某些参数的使用，如注释中所述。<block ref="54401c26bff345016bccb2761388f645" category="inline-link-macro-rx"></block>。</block>
  <block id="e6a4a47ba933fc66b26212913912ce7d" category="admonition">只有<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>ASA r2 系统支持驱动程序（支持 iSCSI 和 NVMe/TCP 协议）。</block>
  <block id="c8863c7edb3430d82345fb2d429904cc" category="paragraph">在Trident后端配置中，无需指定您的系统是ASA r2。当您选择<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>作为<block ref="d45aebe724c55b101f2ae8924ba3d486" prefix=" " category="inline-code"></block>Trident可自动检测ASA r2 或传统的ONTAP系统。如下表所示，某些后端配置参数不适用于ASA r2 系统。</block>
  <block id="b6de3e094a7f00742b82e2ac02d7d167" category="cell"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>或者<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="b42a873c5558eb05b643cf896aa6e1a4" category="paragraph">集群或 SVM 管理 LIF 的 IP 地址。</block>
  <block id="3dba01512ea96ad84a108f0fc949477a" category="paragraph">可以指定一个完全限定域名（FQDN）。</block>
  <block id="fcc539559cb740199f02074f11b246c3" category="paragraph">如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。  IPv6 地址必须用方括号定义，例如：<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block> 。</block>
  <block id="3b4dab2ec7635dde859482b32c23ab9f" category="paragraph">为了实现MetroCluster 的无缝切换，请参阅<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="1925cd490b13f25205214eccfe51fccd" category="admonition">如果您使用的是“vsadmin”凭据，<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>必须是SVM的凭据；如果使用“admin”凭据，<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>必须是集群的那个。</block>
  <block id="2c8c9fb51502e9a1b2d2539b4d21a27b" category="cell">LIF协议的IP地址。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。  IPv6 地址必须用方括号定义，例如：<block ref="33e9328e92e3ef05629093b4693b3925" prefix=" " category="inline-code"></block> 。 *请勿指定使用 iSCSI。*Trident的使用<block ref="2de2f329c45219df280af5a70ed7a17c" category="inline-link-macro-rx"></block>发现建立多路径会话所需的 iSCSI LIF。如果出现以下情况，则会生成警告：<block ref="ea76b2438eb5996eb2c347e7341ed59a" prefix=" " category="inline-code"></block>已明确定义。 *Metrocluster 除外。*查看<block ref="41195e18a4a81a05f5c5a6be365a5602" category="inline-xref-macro-rx"></block>。</block>
  <block id="3418e818bbbe397a49b7096a5ed87929" category="cell">由支持向量机导出</block>
  <block id="ab4ce1634362493e6de248d103136787" category="cell"><block ref="099cb468880f266cba40b49391fa46bc" prefix="" category="inline-code"></block></block>
  <block id="ad622c65f52f8bde8780fec7bcab74a6" category="cell">使用 CHAP 对ONTAP SAN 驱动程序的 iSCSI 进行身份验证 [布尔值]。设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>让Trident配置并使用双向 CHAP 作为后端给定 SVM 的默认身份验证。参考 <block ref="866e591dc2a03ecc454dad25a664ca86" category="inline-link-macro-rx"></block> 了解详情。  *不支持FCP或NVMe/TCP协议。*</block>
  <block id="7c6b65d42434282f1555f13b40e9fd25" category="cell"><block ref="f9d0dc78b203f2c1106dc0c7d58a5397" prefix="" category="inline-code"></block></block>
  <block id="c8a7a6136447a56280ecf99e3ed87d65" category="cell">CHAP 发起者密钥。如果是必填项<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block></block>
  <block id="948938ec6491061ccf17c7ae8eafbd26" category="cell"><block ref="4ab84a55744951d967033db9b64f6b27" prefix="" category="inline-code"></block></block>
  <block id="48db71efc42dda989b98744160575f4f" category="cell">CHAP 目标发起者密钥。如果是必填项<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block></block>
  <block id="28687fafefb2992ff7856dcfd2c29e1f" category="cell"><block ref="039e9d80fa53ba861c06b590ba3f9d34" prefix="" category="inline-code"></block></block>
  <block id="e3f84c141fd3f4682dfb31e0d71c7f5f" category="cell">入站用户名。如果是必填项<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block></block>
  <block id="62fbbf4cfd0cc0a82f953199d14a61e3" category="cell"><block ref="2ebe107bb3bc9551fbb0e5033046931c" prefix="" category="inline-code"></block></block>
  <block id="a379a576b788ab047d5e6405ff4f3511" category="cell">目标用户名。如果是必填项<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block></block>
  <block id="2da9f60cc5b99a5987580c38e6db0842" category="cell">受信任 CA 证书的 Base64 编码值。可选。用于基于证书的身份验证。</block>
  <block id="50d0e6e4ea5256d25a55581de47b2a0f" category="cell">与ONTAP集群通信所需的用户名。用于基于凭证的身份验证。有关 Active Directory 身份验证，请参阅 <block ref="c266761f957eda011224921a8539eded" category="inline-link-macro-rx"></block>。</block>
  <block id="dece0a70145f48ad3b540f19d6ed5df8" category="cell">与ONTAP集群通信所需的密码。用于基于凭证的身份验证。有关 Active Directory 身份验证，请参阅 <block ref="c266761f957eda011224921a8539eded" category="inline-link-macro-rx"></block>。</block>
  <block id="972abf48cbbadbcd573754140d35e19a" category="cell">使用的存储虚拟机</block>
  <block id="a0de2cc0c77c388210e1f48423eea29c" category="cell">在 SVM 中配置新卷时使用的前缀。之后无法修改。要更新此参数，您需要创建一个新的后端。</block>
  <block id="56d1e7863190cbf5e7689e2821d0959e" category="cell"><block ref="47cb44be55a0dffa15dfc900a4c687be" prefix="" category="inline-code"></block></block>
  <block id="8ecd39a3ee998e2e8b3b033dc8756c23" category="paragraph">*请勿指定用于ASA r2 系统*。</block>
  <block id="e35a87c3115267331b4387f1e07a5e0a" category="cell">如果使用率超过此百分比，则配置失败。如果您使用的是Amazon FSx for NetApp ONTAP后端，请勿指定<block ref="d57551b1efacf8a7be84b4d10c5a6e99" prefix=" " category="inline-code"></block>。提供的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>不包含检索汇总使用情况和使用Trident限制它所需的权限。  *请勿指定用于ASA r2 系统*。</block>
  <block id="bc78339d85241498c635b61d8f201ef9" category="cell">如果请求的卷大小大于此值，则配置失败。同时限制其管理的 LUN 卷的最大大小。</block>
  <block id="c9a303edbc714d051896c3a678e59a8a" category="cell"><block ref="10c2308c62a9c0c2c33bcb4ad2f72be1" prefix="" category="inline-code"></block></block>
  <block id="79892588cbecd0b88729ea1a55b2a3a4" category="cell">每个 Flexvol 的最大 LUN 数量必须在 [50, 200] 范围内</block>
  <block id="3bc2d9079510db6d0570883494bc5984" category="cell"><block ref="f899139df5e1059396431415e770c6dd" prefix="" category="inline-code"></block></block>
  <block id="3eeb940d8060411516e1578a9fd70a15" category="cell">故障排除时要使用的调试标志。例如，{"api":false, "method":true} 除非您正在进行故障排除并且需要详细的日志转储，否则请勿使用此方法。</block>
  <block id="51e6d748c5af856ade589011dc2c7e85" category="cell"><block ref="37a6259cc0c1dae299a7866489dff0bd" prefix="" category="inline-code"></block></block>
  <block id="f928067a28069be4d1f767db45a657cb" category="paragraph">使用ONTAP REST API 的布尔参数。</block>
  <block id="19d6e9263401c68c1dd92f3647e19255" category="paragraph"><block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix="" category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident使用ONTAP REST API 与后端通信；当设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>Trident使用 ONTAPI (ZAPI) 调用与后端通信。此功能需要ONTAP 9.11.1 及更高版本。此外，所使用的ONTAP登录角色必须具有访问权限。<block ref="045ed0306c61104cb0777ccd31ce648b" prefix=" " category="inline-code"></block>应用。预定义项满足了这一点。<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>和<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block>角色。从Trident 24.06 版本和ONTAP 9.15.1 或更高版本开始，<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>默认；更改<block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix=" " category="inline-code"></block>到<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>使用 ONTAPI (ZAPI) 调用。</block>
  <block id="39a2e6c36a2ad2c2884bcd5d8f474fbb" category="paragraph"><block ref="14d839191d1ecf387a15b5b0c802a8ae" prefix="" category="inline-code"></block>完全符合 NVMe/TCP 标准。</block>
  <block id="6f95f26584cb2bbbc9c25ed197bf9234" category="admonition">NVMe 仅支持ONTAP REST API，不支持 ONTAPI (ZAPI)。</block>
  <block id="32653402e1251f3e6f9db04a67492d01" category="paragraph">*如果指定，则始终设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于ASA r2 系统*。</block>
  <block id="1f5f7f2866fe3a2c557b2ea38e4c2137" category="cell">用于选择<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>对于 iSCSI，<block ref="eac89e2640666fd1076a776e4b748fae" prefix=" " category="inline-code"></block>适用于 NVMe/TCP 或<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block>用于光纤通道 (FC) 上的 SCSI。</block>
  <block id="c59bb4e25695c195dbaa360d34c9795e" category="cell"><block ref="ef225248e79c14501d51a4941b5ae5d1" prefix="" category="inline-code"></block></block>
  <block id="091b358e8a9ea5e6b1137fbd4c18372f" category="paragraph">使用<block ref="ef225248e79c14501d51a4941b5ae5d1" prefix=" " category="inline-code"></block>为以下情况指定命令行参数<block ref="899da842f7d2c1db0e3f8c88ad72507f" prefix=" " category="inline-code"></block>该命令将在每次格式化卷时应用。这样您就可以根据自己的喜好格式化音量。请确保指定与 mkfs 命令选项类似的 formatOptions，但不包括设备路径。例如：“-E nodiscard”</block>
  <block id="3964653e783e46fb3a1ae3dc4aaa54ad" category="paragraph">*支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>支持 iSCSI 协议的驱动程序。*  *此外，在使用 iSCSI 和 NVMe/TCP 协议时， ASA r2 系统也受支持。*</block>
  <block id="d981d675ba14b9478a2c2da5c7df780b" category="cell">在 ontap-san-economy 后端中使用 LUN 时可请求的最大FlexVol大小。</block>
  <block id="a5b88f2b14a5b0fa1aa2bbed9eb87602" category="cell">限制<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>后端创建新的FlexVol卷来包含它们的 LUN。只有预先存在的 Flexvol 才能用于配置新的 PV。</block>
  <block id="18eb1633594b2436e83e73071958b960" category="section-title">使用 formatOptions 的建议</block>
  <block id="d9ec468a8922eca17349404c59b7659c" category="paragraph">Trident建议采用以下选项来加快格式化过程：</block>
  <block id="ee8d7eb9cc1e43184ed6a64abb3255f6" category="paragraph">*-E nodiscard:*</block>
  <block id="788fe8d661645297ab41d7c9235dcbb8" category="list-text">保留，不要在执行 mkfs 时尝试丢弃块（最初丢弃块对固态设备和稀疏/精简配置存储很有用）。这取代了已弃用的选项“-K”，并且适用于所有文件系统（xfs、ext3 和 ext4）。</block>
  <block id="27e5aeb0225e5a43e4c8c17f706a0a14" category="inline-link-macro">在ONTAP中配置 Active Directory 域控制器访问</block>
  <block id="2d6f3231a7f0c1252294552c9ce9c1e0" category="paragraph">您可以配置Trident以使用 Active Directory (AD) 凭据对后端 SVM 进行身份验证。在 AD 帐户可以访问 SVM 之前，您必须配置 AD 域控制器对集群或 SVM 的访问权限。对于使用 AD 帐户进行集群管理，您必须创建域隧道。参考 <block ref="affb415ae65d1b8ff6d4848fb0c01200" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="fca3ffea6534176432f58b5a22ed22e1" category="list-title">步骤</block>
  <block id="fa349cdbbc85b9c18e91508e377f8475" category="list-text">为后端 SVM 配置域名系统 (DNS) 设置：</block>
  <block id="1ffd05fea44ee961865d2fb5edc44bed" category="paragraph"><block ref="c3a0bdbd7b81f16edc3a67d3fbf4564b" prefix="" category="inline-code"></block></block>
  <block id="c1ddcdee488a34a4b44c78f926dfee75" category="list-text">运行以下命令在 Active Directory 中为 SVM 创建计算机帐户：</block>
  <block id="1e1b13ed7ccf639907d02e773fed43f5" category="paragraph"><block ref="c53a082488a948b7a70806546ba7211d" prefix="" category="inline-code"></block></block>
  <block id="34dd5efc5c883d290ed743abcc3fccb1" category="list-text">使用此命令创建 AD 用户或组来管理集群或 SVM</block>
  <block id="82a5f11771bfe77a499bcb96a45ce13f" category="paragraph"><block ref="22ec37652eb447176b3d5645ac4a7dbb" prefix="" category="inline-code"></block></block>
  <block id="743fda998716813dc210d0fd0c3f2b65" category="list-text">在Trident后端配置文件中，设置<block ref="14c4b06b824ec593239362517f538b29" prefix=" " category="inline-code"></block> 和<block ref="5f4dcc3b5aa765d61d8327deb882cf99" prefix=" " category="inline-code"></block> 参数分别为 AD 用户或组名称和密码。</block>
  <block id="26161d08a960162cd8633d0e23058aed" category="cell">LUN 的空间分配</block>
  <block id="bf1a2c4f1b2b258c38cce886d156e3c6" category="cell">“true” *如果指定，则设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于ASA r2 系统*。</block>
  <block id="4ff68efad333313447b8808c20a63224" category="cell">空间预留模式；“无”（细）或“大量”（粗）。  *设置为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>适用于ASA r2* 系统。</block>
  <block id="d5ff78b8f84bf2feac9559d3c4a5d31c" category="cell">要使用的快照策略。  *设置为<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>适用于ASA r2 系统*。</block>
  <block id="f1e8c049fa2ad08b8d1a332e2d26163e" category="cell">要为创建的卷分配的 QoS 策略组。每个存储池/后端选择 qosPolicy 或 adaptiveQosPolicy 之一。将 QoS 策略组与Trident结合使用需要ONTAP 9.8 或更高版本。您应该使用非共享的 QoS 策略组，并确保该策略组单独应用于每个成员。共享的 QoS 策略组强制规定所有工作负载的总吞吐量上限。</block>
  <block id="036c0eabd455d8a92d350429f2f5747e" category="cell">要为创建的卷分配的自适应 QoS 策略组。每个存储池/后端选择 qosPolicy 或 adaptiveQosPolicy 之一</block>
  <block id="a75bcbe76d1f50305372e9c85d59b73c" category="cell">为快照预留的卷百分比。  *请勿指定用于ASA r2 系统*。</block>
  <block id="c2ae626eaa4dcf2be1d158758d5f789a" category="cell">“false” *如果指定，则设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>适用于ASA r2 系统*。</block>
  <block id="b8ae61dc50cf8e8b79e68bc4a8d36393" category="cell"><block ref="0f179ba2bc32ab5d8f60692f5b800c86" prefix="" category="inline-code"></block></block>
  <block id="a56dcba8eacdac67fb510e1434d560d8" category="inline-link-macro">使用 Linux 统一密钥设置 (LUKS)</block>
  <block id="b71ccf1062cee8c376a7eb37e3c42603" category="cell">启用LUKS加密。参考<block ref="569f9f91cdcc19909b8acbf6f423daf7" category="inline-link-macro-rx"></block>。</block>
  <block id="317afded0cc22ff8de16ceec60d3e0ed" category="cell">*设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>适用于ASA r2 系统*。</block>
  <block id="d716a23a6e731bf750989a45cf32a804" category="cell">分层策略使用“无” *请勿为ASA r2 系统指定* 。</block>
  <block id="e78c177a9e5dfcf995756c1f03c48529" category="admonition">对于使用以下方式创建的所有卷<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序Trident为FlexVol增加了 10% 的额外容量，以容纳 LUN 元数据。  LUN 将按照用户在 PVC 中请求的确切大小进行配置。 Trident使FlexVol增加 10%（在ONTAP中显示为可用尺寸）。用户现在将获得他们所申请的可用容量。此项更改还可以防止 LUN 在可用空间未完全利用之前变为只读。这不适用于 ontap-san-economy。</block>
  <block id="2d4fda186ee0e99d76ee82d9cd36b908" category="paragraph">对于定义后端<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>Trident计算体积大小的方法如下：</block>
  <block id="d3b60a0dd59d810307a1e694f1de96a1" category="paragraph">1.1 是Trident为容纳 LUN 元数据而额外添加到FlexVol 的10%。为了<block ref="bb0d75280f9b683f2f1f0767fd0aff9b" prefix=" " category="inline-code"></block>= 5%，PVC 请求 = 5 GiB，总体积大小为 5.79 GiB，可用大小为 5.5 GiB。这<block ref="0c5606ed319753bb2d86a485f23c8f6d" prefix=" " category="inline-code"></block>该命令应显示与此示例类似的结果：</block>
  <block id="e6e049b4753c744e95db32b0eeed8d5c" category="paragraph">目前，调整大小是将新计算方法应用于现有体积的唯一途径。</block>
  <block id="b1b6ee25d859768bce6271cfb4265c37" category="admonition">如果您在NetApp ONTAP上使用Amazon FSx和Trident， NetApp建议您为 LIF 指定 DNS 名称而不是 IP 地址。</block>
  <block id="4930386ddaad825d64732ee9ec5e65b8" category="example-title">ONTAP SAN 示例</block>
  <block id="cd5dd52b9f0bba70b1336e13afe05818" category="paragraph">这是使用以下方法的基本配置：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>司机。</block>
  <block id="d5be4c1bab384a780d2912d10b295308" category="paragraph">为了实现无缝切换和切换回，请指定 SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>并省略<block ref="924ff83ff1e671bacfb07ff12b845703" prefix=" " category="inline-code"></block>参数。例如：</block>
  <block id="8a10ba8eb41944c10648f18ba7e16239" category="example-title">ONTAP SAN 经济示例</block>
  <block id="60eac39d4383fedcc1df436a2d0e856d" category="paragraph">在这个基本配置示例中<block ref="79fffaff4013c1e8c508e76646eca77b" prefix=" " category="inline-code"></block>，<block ref="19dce7ac7f5290fc8fa218ad0c858df5" prefix=" " category="inline-code"></block> ， 和<block ref="8468461bca00a47ab5ddba2afc45f52c" prefix=" " category="inline-code"></block>（如果使用受信任的 CA，则为可选）<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>分别取客户端证书、私钥和受信任 CA 证书的 base64 编码值。</block>
  <block id="31089bb4131b18ca65c3d384cdd49644" category="example-title">双向 CHAP 示例</block>
  <block id="17baa03e9287aee400bc2e606d247156" category="paragraph">这些示例创建了一个后端。<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="7a4c6868ec70d1fbee3cb3a7483e21d0" category="listing-title">ONTAP SAN CHAP 示例</block>
  <block id="a0c1c7f21916f2a4fb0f0d56732adc90" category="listing-title">ONTAP SAN 经济 CHAP 示例</block>
  <block id="a242dbcec09373d25c5fb582f9f2cfc6" category="example-title">NVMe/TCP 示例</block>
  <block id="3a3347de03ef37c1eb5eb525619ff905" category="paragraph">您的ONTAP后端必须配置有使用 NVMe 的 SVM。这是 NVMe/TCP 的基本后端配置。</block>
  <block id="c905ec8a79a58aa12ad3c7ae35e3127d" category="example-title">SCSI over FC (FCP) 示例</block>
  <block id="aecb281656d93e34b85fc03341498ff2" category="paragraph">您的ONTAP后端必须配置有 FC 的 SVM。这是 FC 的基本后端配置。</block>
  <block id="d502f4db20ef2dbccab335781e870976" category="example-title">ontap-san-economy 驱动程序的 formatOptions 示例</block>
  <block id="6b743d9085f7f94d7a334c4386fbe239" category="paragraph">在这些示例后端定义文件中，所有存储池都设置了特定的默认值，例如：<block ref="cae77b049bf504af7afc43b99b6c5213" prefix=" " category="inline-code"></block>没有，<block ref="45922ba6ba8428764f22ed06f814c762" prefix=" " category="inline-code"></block>为假，并且<block ref="5bdf74912a51c34815f11e9a3d20b609" prefix=" " category="inline-code"></block>为假。虚拟池在存储部分中定义。</block>
  <block id="54ed52257df13a4cb85caecc569dfeff" category="paragraph">Trident在“备注”字段中设置配置标签。在FlexVol volume上设置注释。Trident 在配置时Trident虚拟池上存在的所有标签复制到存储卷。为了方便起见，存储管理员可以为每个虚拟池定义标签，并按标签对卷进行分组。</block>
  <block id="50543d5d423c4c1a0b4fdd41383189e5" category="paragraph">以下 StorageClass 定义指的是<block ref="d690aebda44a37b8ae9c2c6f1918cb30" category="inline-xref-macro-rx"></block>。使用<block ref="bed471c4a88e25ac9a7e4a7b980700a8" prefix=" " category="inline-code"></block>字段中，每个 StorageClass 都会指出哪些虚拟池可用于托管卷。卷将具有所选虚拟池中定义的各个方面。</block>
  <block id="514e71168790374132badc1258ee5136" category="list-text">这<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block>StorageClass 将映射到第一个虚拟池。<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>后端。这是唯一提供黄金级保护的泳池。</block>
  <block id="a9c41ef671a6da4ed0f439f86683b714" category="list-text">这<block ref="afbfe298fa275e5fff1aca9b2f213d9a" prefix=" " category="inline-code"></block>StorageClass 将映射到第二个和第三个虚拟池。<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>后端。除了黄金级别之外，只有这些金池提供其他级别的保护。</block>
  <block id="910ed65246d7ee240ec166f94b1fd5c9" category="list-text">这<block ref="65846755494383158592c748f74421ec" prefix=" " category="inline-code"></block>StorageClass 将映射到第三个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>后端。这是唯一一个为mysqldb类型应用程序提供存储池配置的存储池。</block>
  <block id="fa03c7de8b1b7b7061bb536c211f3aaf" category="list-text">这<block ref="2e63b2ff91d4aeb88b54db5c90b71443" prefix=" " category="inline-code"></block>StorageClass 将映射到第二个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>后端。这是唯一提供银级保护和 20000 积分的彩池。</block>
  <block id="ac996ac8e4442d8a2791ba8b1e301a02" category="list-text">这<block ref="a96bee9dd30f3ea0af93b4c64ca1e4a4" prefix=" " category="inline-code"></block>StorageClass 将映射到第三个虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>后端和第四个虚拟池<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>后端。这是唯一提供 5000 积分的彩池产品。</block>
  <block id="1b931baab9ca74be94af72763666c941" category="list-text">这<block ref="33aacad9b122abfdfadc06e3e7fa5f59" prefix=" " category="inline-code"></block>StorageClass 将映射到<block ref="11e89beb13d19bf6e3ab7ed65673b27d" prefix=" " category="inline-code"></block>虚拟池<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>司机<block ref="6fa083b88d05083e680071073d06c3af" prefix=" " category="inline-code"></block>。这是唯一一家提供泳池的公司<block ref="5ca85ebb1d881fde490deaa5817c4ca5" prefix=" " category="inline-code"></block>。</block>
  <block id="8f828c7344e7fe65d66237a25193068b" category="summary">了解如何准备配置带有ONTAP SAN 驱动程序的ONTAP后端。</block>
  <block id="37a679c38162162811d93d22ba8f5b4a" category="paragraph">了解配置ONTAP后端和ONTAP SAN 驱动程序的要求和身份验证选项。</block>
  <block id="9e925e9341b490bfd3b4c4ca3b0c1ef2" category="inline-link-macro">这</block>
  <block id="5a401de4946c2175a17ad6fda3a04781" category="admonition"><block ref="9f40590ca1185cea7261c2a60fc922ea" category="inline-link-macro-rx"></block>与其他ONTAP系统（ASA、 AFF和FAS）在存储层的实现上有所不同。在ASA r2 系统中，使用存储可用区而不是聚合。请参阅<block ref="261295ed43e7c9d663fb0a84ba5b2157" category="inline-link-macro-rx"></block>知识库文章，介绍如何在ASA r2 系统中将聚合分配给 SVM。</block>
  <block id="5475028f502d04bc17cdfdf613d28cbf" category="paragraph">请记住，您还可以运行多个驱动程序，并创建指向其中一个或另一个驱动程序的存储类。例如，您可以配置一个<block ref="a4803fbb1a1ed00b47f0b526d515d172" prefix=" " category="inline-code"></block>使用类<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>司机和<block ref="cc765df73da51962d9d46e6fbe9d1131" prefix=" " category="inline-code"></block>使用类<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>一。</block>
  <block id="beee3e754bb36e7321f32ad13d4ac60a" category="paragraph">所有 Kubernetes 工作节点都必须安装相应的 iSCSI 工具。参考 <block ref="9e8cf70fcb465bf1907b585f74e9e1a6" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="00cbc0e7ed0014813b07fc8452f60df1" category="list-text">基于凭证：具有所需权限的ONTAP用户的用户名和密码。建议使用预定义的安全登录角色，例如：<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>或者<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>确保与ONTAP版本最大程度兼容。</block>
  <block id="83e850c97b7044397eba3d214682be5b" category="list-text">基于证书： Trident还可以使用安装在后端的证书与ONTAP集群通信。此处，后端定义必须包含客户端证书、密钥和受信任 CA 证书（如果使用，建议使用）的 Base64 编码值。</block>
  <block id="7ac6994e44af62a9075fd956e72ee6fb" category="paragraph">请注意，后端定义是唯一以纯文本形式存储凭据的地方。后端创建完成后，用户名/密码将使用 Base64 进行编码，并存储为 Kubernetes 密钥。只有创建或更新后端时才需要了解凭据。因此，这是一项仅限管理员执行的操作，由 Kubernetes/存储管理员执行。</block>
  <block id="7fbe6e40125b7d1b2f5c5c05044e7526" category="section-title">启用基于证书的身份验证</block>
  <block id="ea3bf76b270384627e7bcfb197ddb17b" category="list-text">使用生成的证书进行身份验证。请将 &lt; ONTAP管理 LIF&gt; 和 &lt;vserver 名称&gt; 替换为管理 LIF IP 地址和 SVM 名称。</block>
  <block id="6adbf3424e5de1b4e2baad3b4d632c4a" category="paragraph">您可以更新现有后端，以使用不同的身份验证方法或轮换其凭据。这种方法是双向的：使用用户名/密码的后端可以更新为使用证书；使用证书的后端可以更新为基于用户名/密码的后端。为此，您必须删除现有的身份验证方法并添加新的身份验证方法。然后使用包含所需参数的更新后的 backend.json 文件来执行<block ref="ad782b779edfd8199198bed41b3e3b6b" prefix=" " category="inline-code"></block>。</block>
  <block id="42f93278b0d15c8d0f6613813bf586d5" category="section-title">使用双向 CHAP 验证连接</block>
  <block id="14bc1b6d66d79a6242106075078d6a75" category="paragraph">Trident可以使用双向 CHAP 对 iSCSI 会话进行身份验证。<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block>司机。这需要启用<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>在后端定义中添加选项。设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident将 SVM 的默认发起程序安全配置为双向 CHAP，并从后端文件中设置用户名和密钥。 NetApp建议使用双向 CHAP 协议对连接进行身份验证。请参见以下示例配置：</block>
  <block id="12dd7bfa072b5a1eecf975f6a5a6eaa7" category="admonition">这<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>该参数是一个布尔选项，只能配置一次。默认值为 false。一旦将其设置为 true，就无法再将其设置为 false。</block>
  <block id="bc601528678aeeb582101ed205a054bc" category="paragraph">此外<block ref="68978ccf4ed83900c8dd27558ca5ec18" prefix=" " category="inline-code"></block>， 这<block ref="f9d0dc78b203f2c1106dc0c7d58a5397" prefix=" " category="inline-code"></block>，<block ref="4ab84a55744951d967033db9b64f6b27" prefix=" " category="inline-code"></block> ，<block ref="2ebe107bb3bc9551fbb0e5033046931c" prefix=" " category="inline-code"></block> ， 和<block ref="039e9d80fa53ba861c06b590ba3f9d34" prefix=" " category="inline-code"></block>字段必须包含在后端定义中。创建后端后，可以通过运行以下命令来更改密钥：<block ref="2849e93e1b3790bcd408a4f7ea580dbb" prefix=" " category="inline-code"></block> 。</block>
  <block id="9ffdb95250e26c7a6b468126ac7c75b0" category="section-title">工作原理</block>
  <block id="a3101deed09a2c98e2dc3f8d302ef2ec" category="paragraph">通过设置<block ref="099cb468880f266cba40b49391fa46bc" prefix=" " category="inline-code"></block>如果设置为 true，则存储管理员指示Trident在存储后端配置 CHAP。其中包括以下内容：</block>
  <block id="29b4db879e4cc96a6b71bc763367624b" category="list-text">在SVM上设置CHAP：</block>
  <block id="8a8d93d572194f00b71a710946af762d" category="list-text">如果 SVM 的默认启动器安全类型为“无”（默认设置）*并且*卷中不存在任何预先存在的 LUN，Trident会将默认安全类型设置为“无”。<block ref="9ef2bbb12ff72558472202561a25058d" prefix=" " category="inline-code"></block>然后继续配置 CHAP 发起程序和目标用户名及密钥。</block>
  <block id="1938c188012d6b3e1bb2a8ab1d30ed4b" category="list-text">如果 SVM 包含 LUN， Trident将不会在 SVM 上启用 CHAP。这样可以确保对 SVM 上已存在的 LUN 的访问不受限制。</block>
  <block id="13e0c564d5e1fbd33279fb276166653d" category="list-text">配置 CHAP 发起程序和目标用户名和密钥；这些选项必须在后端配置中指定（如上所示）。</block>
  <block id="6aee28036e0c3cf4a8792451108bdab1" category="paragraph">后端创建完成后， Trident会创建一个相应的实例。<block ref="18d388723371b89385366f93f0fbbbc6" prefix=" " category="inline-code"></block> CRD 并将 CHAP 密钥和用户名存储为 Kubernetes 密钥。  Trident在此后端创建的所有 PV 都将通过 CHAP 进行安装和连接。</block>
  <block id="81f2df0265026a1a04bda5484798a10d" category="section-title">轮换凭证并更新后端</block>
  <block id="a7fe005c9f49619f4438aac8932fb361" category="paragraph">您可以通过更新 CHAP 参数来更新 CHAP 凭据。<block ref="9c15d32711e9ef8c6f76deda35452e13" prefix=" " category="inline-code"></block>文件。这将需要更新 CHAP 密钥并使用<block ref="2849e93e1b3790bcd408a4f7ea580dbb" prefix=" " category="inline-code"></block>命令反映这些更改。</block>
  <block id="684e3a49585228dba75783996b7b6fe7" category="admonition">更新后端 CHAP 密钥时，必须使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>更新后端。请勿使用ONTAP CLI 或ONTAP系统管理器更新存储集群上的凭据，因为Trident将无法检测到这些更改。</block>
  <block id="efa0e2d045a35ff3060322078634f115" category="paragraph">现有连接将不受影响；如果Trident在 SVM 上更新凭据，则这些连接将继续保持活动状态。新连接使用更新后的凭据，现有连接将继续保持活动状态。断开并重新连接旧的PV将使它们使用更新后的凭据。</block>
  <block id="ef1161058705470bb877fbce688eea9e" category="summary">了解如何使用ONTAP SAN 驱动程序配置ONTAP后端。</block>
  <block id="5cc1e28c0d7b6c40ca94aacb554b31ca" category="doc">ONTAP SAN 驱动程序概述</block>
  <block id="133184f8c608809bdc057abf1397d10d" category="paragraph">了解如何使用ONTAP和Cloud Volumes ONTAP SAN 驱动程序配置ONTAP后端。</block>
  <block id="a493eb50acc1b5a276034b914c4ce10d" category="section-title">ONTAP SAN 驱动程序详情</block>
  <block id="b5ab1040103dff58a29ac4bd0e6ce111" category="paragraph">Trident提供以下 SAN 存储驱动程序，用于与ONTAP集群通信。支持的访问模式有：_ReadWriteOnce_ (RWO)、_ReadOnlyMany_ (ROX)、_ReadWriteMany_ (RWX)、_ReadWriteOncePod_ (RWOP)。</block>
  <block id="1f04e6944e16311a300b742aa0cfb55c" category="paragraph">iSCSI 通过光纤通道提供 SCSI 服务</block>
  <block id="28c142639a9bbdd526b8eb986c13907d" category="paragraph">无文件系统；原始块设备</block>
  <block id="94188b3f68e7baf5ef4a1f721857e77c" category="paragraph">ROX 和 RWX 在文件系统卷模式下不可用。</block>
  <block id="8b7c42123642e2e4ea7dd426aeb2de58" category="paragraph">NVMe/TCP</block>
  <block id="2ee381348973cd50c3668eadbccdc328" category="paragraph">参考<block ref="2d7d4515af7fd5f414df696a804f30f7" category="inline-xref-macro-rx"></block>。</block>
  <block id="e5981541c0e608f7fb860a1ba0443a18" category="paragraph">Trident预期以ONTAP或 SVM 管理员身份运行，通常使用以下方式：<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>集群用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>SVM 用户，或者具有相同角色但名称不同的用户。对于Amazon FSx for NetApp ONTAP部署， Trident需要以ONTAP或 SVM 管理员身份运行，并使用集群。<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>SVM 用户，或者具有相同角色但名称不同的用户。这<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>用户是集群管理员用户的有限替代品。</block>
  <block id="15486153db4ff26b2d984b22c9eb7ace" category="section-title">NVMe/TCP 的其他注意事项</block>
  <block id="03f5e10eafb756dac410015b29a6d0e0" category="paragraph">Trident支持使用非易失性存储器高速接口 (NVMe) 协议<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序包括：</block>
  <block id="fdb7cb8f657426e7c409bfd6d1a36ce4" category="list-text">IPv6</block>
  <block id="a2a1cb8bb035902e151c429dda457eb0" category="list-text">NVMe卷的快照和克隆</block>
  <block id="b007331c632038b88752b849045335eb" category="list-text">调整 NVMe 卷的大小</block>
  <block id="8102a8aaee21f7594331faa6a31ceeb6" category="list-text">导入在Trident外部创建的 NVMe 卷，以便Trident可以管理其生命周期。</block>
  <block id="86f6f50234041fd09b320314dc781273" category="list-text">NVMe原生多路径</block>
  <block id="f1b9eac8c1d92956d7734db32c5e55d9" category="list-text">K8s节点的优雅关闭或非优雅关闭（24.06）</block>
  <block id="54211a2d289b1fa18afc99aab9e27892" category="paragraph">Trident不支持：</block>
  <block id="e1b6f2a617a63649b238c99a6557a915" category="list-text">NVMe 原生支持的 DH-HMAC-CHAP</block>
  <block id="6c1177e2fd33f2482514b2156d1e62b6" category="list-text">设备映射器 (DM) 多路径</block>
  <block id="fa633dab256a2884e7cd048147d7171c" category="list-text">LUKS 加密</block>
  <block id="acb2e9160652c3e412ead9e870d11c9b" category="summary">将Trident EKS 插件添加到 Kubernetes 集群。</block>
  <block id="a2aa5421f278a17c32520d5a0b59edb2" category="doc">在 EKS 集群上配置Trident EKS 插件</block>
  <block id="c4a27aca3b599e184c25bae01c45a9ec" category="paragraph">NetApp Trident简化了 Kubernetes 中Amazon FSx for NetApp ONTAP存储管理，使您的开发人员和管理员能够专注于应用程序部署。  NetApp Trident EKS 插件包含最新的安全补丁和错误修复，并经过 AWS 验证，可与 Amazon EKS 配合使用。  EKS 插件使您能够持续确保您的 Amazon EKS 集群安全稳定，并减少安装、配置和更新插件所需的工作量。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="73a8d79444c307e1446b60eb6a9ba8f1" category="paragraph">在为 AWS EKS 配置Trident插件之前，请确保您已具备以下条件：</block>
  <block id="1ed7790b15234cd5e801f2adf2a3dcd8" category="inline-link-macro">Amazon EKS 附加组件</block>
  <block id="cf83ec5a1f7760b5f6841c88c08cd788" category="list-text">具有使用插件权限的 Amazon EKS 集群账户。参考<block ref="40db0d27bd24093e06ae540834459d19" category="inline-link-macro-rx"></block>。</block>
  <block id="3f597c2b0d86deed94c99ef3d5fa4932" category="list-text">AWS 对 AWS Marketplace 的权限：<block ref="8047af5c1ca81290342558a545113f6e" prefix=" " category="inline-code"></block></block>
  <block id="8ac2d15830983d69c7c62c4d8a69266c" category="list-text">AMI 类型：Amazon Linux 2 (AL2_x86_64) 或 Amazon Linux 2 Arm (AL2_ARM_64)</block>
  <block id="68437d1104a05b71c1c25548a95ad946" category="list-text">节点类型：AMD 或ARM</block>
  <block id="63ac2242cb63194d25dd17c30c89f80d" category="list-text">现有的Amazon FSx for NetApp ONTAP文件系统</block>
  <block id="f477db05998ad8420119de646e2ff290" category="inline-link-macro">创建 IAM 角色和 AWS Secret</block>
  <block id="1264c0dc5af1ae65d165b02064fb48da" category="list-text">请务必创建 IAM 角色和 AWS 密钥，以使 EKS pod 能够访问 AWS 资源。有关说明，请参阅<block ref="0243716974e666f2f8c61577b454990b" category="inline-link-macro-rx"></block>。</block>
  <block id="5125c17a3f7aca891b87dc6ad4b9aa93" category="list-text">在 EKS Kubernetes 集群上，导航到“附加组件”选项卡。</block>
  <block id="46fd403fb7788c53f0de4aa06ccc89d9" category="image-alt">aws eks 01</block>
  <block id="153bbcd55aded817c5a331d5acae54eb" category="list-text">前往 *AWS Marketplace 插件*，然后选择 _storage_ 类别。</block>
  <block id="2b1131719d4d8198515b53a0132411fb" category="image-alt">aws eks 02</block>
  <block id="07a5364a7a995818398d39d8d5f84d64" category="list-text">找到 * NetApp Trident*，选中Trident插件的复选框，然后单击 *下一步*。</block>
  <block id="5bab8196b750f3260d005a4548bc5de0" category="list-text">选择所需的插件版本。</block>
  <block id="92f63954b2feb520d9a85c6ac6087ad8" category="image-alt">aws eks 03</block>
  <block id="65f1acff2714c57d7d22160c1e0604ae" category="list-text">配置所需的附加组件设置。</block>
  <block id="b64079b8570f34f88bca59be352b20e2" category="image-alt">aws eks 04</block>
  <block id="a77e64d999da7477c22c11d171944968" category="list-text">如果您使用的是 IRSA（服务帐户的 IAM 角色），请参阅其他配置步骤。<block ref="75a5fb22d89ca2450e7a1cb8fb11e3d1" category="inline-link-macro-rx"></block> 。</block>
  <block id="bf18811faac9b8e4fcaebab51afd1113" category="list-text">选择“*创建*”。</block>
  <block id="fa883f8fcd252ea2995457cd82515d03" category="list-text">确认插件状态为_Active_。</block>
  <block id="2af6474930eac7fe47a45b3658bef5bf" category="image-alt">aws eks 05</block>
  <block id="7f3424d52d579a5a23fa5102f22de8bd" category="list-text">运行以下命令以验证Trident是否已正确安装在集群上：</block>
  <block id="23e0e5bfdd7b1fef2ab4d932aae742e5" category="inline-link-macro">配置存储后端</block>
  <block id="5b06ec175e810e88c7f4e485931d2ce9" category="list-text">继续进行设置并配置存储后端。有关信息，请参阅<block ref="a2c0b79bf795dfa2b95204a4216320db" category="inline-link-macro-rx"></block>。</block>
  <block id="5c48b2cb013af0c5d292d6bc5659074c" category="section-title">使用 CLI 安装/卸载Trident EKS 插件</block>
  <block id="2f3961a883aa613983c8f34a8add7695" category="paragraph-title">使用 CLI 安装NetApp Trident EKS 插件：</block>
  <block id="9509f036573c9b78acc044938588f7c4" category="paragraph">以下示例命令安装Trident EKS 插件：<block ref="f235325f054788c50b512241d68cb329" prefix=" " category="inline-code"></block> （另有专用版本）</block>
  <block id="fa1234b3e3fcccb885405485ab5cbefb" category="paragraph-title">使用 CLI 卸载NetApp Trident EKS 插件：</block>
  <block id="aa8e98bf63904518342c90bd49a9ea9c" category="paragraph">以下命令卸载Trident EKS 插件：</block>
  <block id="76b4586b7207f884c66397194b773e14" category="summary">了解Amazon FSx for ONTAP的后端配置选项。本节提供后端配置示例。</block>
  <block id="533a7baf9026dddae6baef47ea605b08" category="doc">部署示例应用程序</block>
  <block id="a346cffc17b34fc56f3020d8b33d30c3" category="paragraph">创建存储等级和 PVC 后，即可将光伏组件安装到舱体上。本节列出了将 PV 连接到 pod 的示例命令和配置。</block>
  <block id="6a308a8072d1cf8c73629852d7f0b1af" category="list-text">将音量旋钮安装在一个音控器中。</block>
  <block id="c09ee63e688125cf9517a66bb5a0a5a6" category="paragraph">以下示例展示了将PVC连接到舱体的基本配置：*基本配置*：</block>
  <block id="b5450caedb9c7aa352b9fb0427aee784" category="admonition">您可以使用以下方式监控进度<block ref="6abdceb61753f298491e021c4da24ddd" prefix=" " category="inline-code"></block>。</block>
  <block id="8118780a1733b73d43c1042889af94bd" category="list-text">确认卷已挂载到<block ref="9f5298598b1aa26f257834220853cb05" prefix=" " category="inline-code"></block>。</block>
  <block id="6604c85c599768bb970b37e590ef79fe" category="paragraph">现在您可以删除该 Pod 了。  Pod 应用将不复存在，但卷将保留。</block>
  <block id="37225474f75e9da42c0f924ba87b113a" category="cell"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block></block>
  <block id="efd6bf14511b7506d1d5a1575d817027" category="cell">集群或 SVM 管理 LIF 的 IP 地址可以指定完全限定域名 (FQDN)。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。  IPv6 地址必须用方括号定义，例如 [28e8:d9fb:a825:b7bf:69a8:d02f:9e7b:3555]。</block>
  <block id="a2b356ce90145d5d188d7705a9797bc1" category="cell">LIF协议的IP地址。 * ONTAP NAS 驱动程序*： NetApp建议指定 dataLIF。如果未提供， Trident将从 SVM 获取 dataLIF。您可以指定一个完全限定域名 (FQDN) 用于 NFS 挂载操作，从而创建轮询 DNS 以在多个 dataLIF 之间进行负载均衡。初始设置后可以更改。参考<block ref="b2c939cb81e81d99a25f4be74f517f2f" category="inline-xref-macro-rx"></block>。  * ONTAP SAN 驱动程序*：不要为 iSCSI 指定。 Trident使用ONTAP选择性 LUN 映射来发现建立多路径会话所需的 iSCI LIF。如果显式定义了 dataLIF，则会生成警告。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。  IPv6 地址必须用方括号定义，例如 [28e8:d9fb:a825:b7bf:69a8:d02f:9e7b:3555]。</block>
  <block id="470fa5f00d398bad1d1874a9b4d59d7b" category="cell">"["0.0.0.0/0", "::/0"]"</block>
  <block id="b8c7e19ba614c29878588409008e29c6" category="cell">连接到集群或 SVM 的用户名。用于基于凭证的身份验证。例如，vsadmin。</block>
  <block id="9a2486a943ad2a4c99f2797d6984f3d0" category="cell">连接集群或SVM的密码。用于基于凭证的身份验证。</block>
  <block id="6018b4c39d938c6589decae81b54c6f0" category="cell">如果指定了 SVM 管理 LIF，则派生出该 LIF。</block>
  <block id="4cba35e041b22828be7c835295ee9102" category="cell">在 SVM 中配置新卷时使用的前缀。创建后无法修改。要更新此参数，您需要创建一个新的后端。</block>
  <block id="900a97d43b0d89ff1f26477ad38cc3bc" category="cell">*请勿指定用于Amazon FSx for NetApp ONTAP。*提供的<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>和<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>不包含检索汇总使用情况和使用Trident限制它所需的权限。</block>
  <block id="86f4c9647fe8f4c500055c772753cc6f" category="cell">请勿使用。</block>
  <block id="e462cafda39f4eb6d1800486fc401348" category="cell">如果请求的卷大小大于此值，则配置失败。此外，它还限制了其管理的 qtree 和 LUN 卷的最大大小，以及<block ref="8b08152c170e621ffcc8bfac7c4d6785" prefix=" " category="inline-code"></block>此选项允许自定义每个FlexVol volume的最大 qtree 数量。</block>
  <block id="bd4c4a75acd87c86694e9aca1e4050e2" category="cell">每个 Flexvol 的最大 LUN 数必须在 [50, 200] 范围内。仅限SAN。</block>
  <block id="e939be085c2babe4ff0f08e09d0cdfd2" category="cell">配置 NFS 或 SMB 卷的创建。选项有<block ref="2521ef5d58fc027d3121662b7d8f9ac2" prefix=" " category="inline-code"></block>，<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>或空值。 *必须设置为<block ref="79e0f325804dafbdaef73b3b17c0fd8d" prefix=" " category="inline-code"></block>适用于 SMB 卷。*设置为 null 则默认使用 NFS 卷。</block>
  <block id="06daeb0fdb584c4694891d290310e1ed" category="cell"><block ref="3644a684f98ea8fe223c713b77189a77" prefix="" category="inline-code"></block></block>
  <block id="df2f5c3ad0d6cdf07a86704a8dfcef06" category="cell">您可以指定以下名称之一：使用 Microsoft 管理控制台或ONTAP CLI 创建的 SMB 共享的名称，或者允许Trident创建 SMB 共享的名称。此参数是Amazon FSx for ONTAP后端所必需的。</block>
  <block id="5d8ab765262318f7f87e5cd620d93290" category="cell"><block ref="ac68bbf921d953d1cfab916cb6120864" prefix="" category="inline-code"></block></block>
  <block id="294c3bfe0dc32c17126646089c93a92b" category="cell">您可以在 AWS FSx for ONTAP的配置文件中指定以下内容： -<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block> ：指定 AWS FSx 文件系统的 ID。  -<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block> AWS API 区域名称。  -<block ref="9af4d8381781baccb0f915e554f8798d" prefix=" " category="inline-code"></block> AWS API 密钥。  -<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block> AWS 密钥。</block>
  <block id="5e68d0f0226c4c9d8020f95ced71ffab" category="cell"><block ref="68b329da9893e34099c7d8ad5cb9c940" prefix="" category="inline-code"></block> <block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block><block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block><block ref="9d4568c009d203ab10e33ea9953a0264" prefix=" " category="inline-code"></block></block>
  <block id="81b346d529f22abdfcb669de82986dfd" category="cell"><block ref="d3ed68f7315b7e72b8d886b2278fcac3" prefix="" category="inline-code"></block></block>
  <block id="c5a638166e3b5bb902803f0060f0d2dd" category="inline-link-macro">创建 AWS Secrets Manager 密钥</block>
  <block id="3b19f031abb1ee1e70a3d19640060ff8" category="cell">指定要存储在 AWS Secrets Manager 中的 FSx SVM 凭证。  -<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block> ：包含 SVM 凭证的密钥的 Amazon 资源名称 (ARN)。 -<block ref="599dcce2998a6b40b1e38e8c6006cb0a" prefix=" " category="inline-code"></block>设置为<block ref="eb301fdabb7b8996ba898845d5546121" prefix=" " category="inline-code"></block>。请参阅<block ref="e10af1024bf046058eef4c68dff3462a" category="inline-link-macro-rx"></block>了解更多信息。</block>
  <block id="4f124386f4b1bb06c61bcf1c73aff529" category="cell">要为创建的卷分配的 QoS 策略组。每个存储池或后端选择 qosPolicy 或 adaptiveQosPolicy 之一。将 QoS 策略组与Trident结合使用需要ONTAP 9.8 或更高版本。您应该使用非共享的 QoS 策略组，并确保该策略组单独应用于每个成员。共享的 QoS 策略组强制规定所有工作负载的总吞吐量上限。</block>
  <block id="a8fe789c9febc6b76736fb83c90df2b7" category="cell">要为创建的卷分配的自适应 QoS 策略组。每个存储池或后端选择 qosPolicy 或 adaptiveQosPolicy 之一。  ontap-nas-economy 不支持此功能。</block>
  <block id="1e8d899088cef4cd1758075ac2b63721" category="cell">为快照“0”预留的卷百分比</block>
  <block id="d8d01124b8b3fe614b475ad96fca4635" category="cell">如果<block ref="0a236e7685e50a59df980d0a30929d6c" prefix=" " category="inline-code"></block>是<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block>，<block ref="2954e92a9b4d0e998fe4893f8141649a" prefix=" " category="inline-code"></block> “”</block>
  <block id="8336fb38c3b943161d5d6e73af8f4a12" category="cell">启用LUKS加密。参考<block ref="3646c7a69a11bdd94c010bf856bda313" category="inline-link-macro-rx"></block>。仅限SAN。</block>
  <block id="58c09f2c9581bc7c58c32116266b6d8f" category="cell">分层策略的使用<block ref="334c4a4c42fdb79d7ebc3e73b517e6f8" prefix=" " category="inline-code"></block></block>
  <block id="8ba802b52dc84f4e82bfbbf2e2d4a807" category="cell">新卷模式。  *SMB卷请留空。*</block>
  <block id="484067c59b1fa950e362a90fd416c89e" category="example-title">SMB卷的存储类配置</block>
  <block id="88b0b88c998957f004af42563d5e5b40" category="paragraph">使用<block ref="296026821ada2ab8aebcf13547a63df5" prefix=" " category="inline-code"></block>，<block ref="e12fdd044232e643620eed06bf33c7af" prefix=" " category="inline-code"></block> ， 和<block ref="1ad68a6a046942b7c1666aed825df70a" prefix=" " category="inline-code"></block>您可以指定 SMB 卷并提供所需的 Active Directory 凭据。使用以下方式支持 SMB 卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>仅限司机。</block>
  <block id="f62b661d066f6d5a24622ec3438e051b" category="example-title">使用 Secrets Manager 配置 AWS FSx for ONTAP</block>
  <block id="e5bbe1a57bb9d1fa8056d28e0a96a518" category="summary">通过将Trident与Amazon FSx for NetApp ONTAP结合使用，您可以确保在 Amazon Elastic Kubernetes Service (EKS) 中运行的 Kubernetes 集群可以配置由ONTAP支持的块和文件持久卷。</block>
  <block id="98c3c9acd444d11890d48438db3c165e" category="paragraph">您可以配置 Kubernetes pod 以通过 AWS IAM 角色进行身份验证来访问 AWS 资源，而不是提供显式的 AWS 凭证。</block>
  <block id="3f566b5ded6e7ac8c26dd3c07a2ea056" category="admonition">要使用 AWS IAM 角色进行身份验证，您必须拥有一个使用 EKS 部署的 Kubernetes 集群。</block>
  <block id="88f9965484e8785ad82e1b99cdae3ab3" category="section-title">创建 AWS Secrets Manager 密钥</block>
  <block id="646ed389b399156cbfb4923c9d8fbf95" category="paragraph">由于Trident将向 FSx 虚拟服务器发出 API 来为您管理存储，因此它需要凭据才能执行此操作。传递这些凭证的安全方法是通过 AWS Secrets Manager 密钥。因此，如果您还没有 AWS Secrets Manager 密钥，则需要创建一个包含 vsadmin 帐户凭证的密钥。</block>
  <block id="360f6e9d45a33dadfdb2b47fa3a32110" category="paragraph">此示例创建一个 AWS Secrets Manager 密钥来存储Trident CSI 凭证：</block>
  <block id="3926fdac6344d565c95f560468946335" category="section-title">创建 IAM 策略</block>
  <block id="1cb68d4d58173447ddb7517b51d352a9" category="paragraph">Trident也需要 AWS 权限才能正常运行。因此，您需要创建一个策略，赋予Trident所需的权限。</block>
  <block id="78edc229f8df1c5e0840f6469bc28454" category="paragraph">以下示例使用 AWS CLI 创建 IAM 策略：</block>
  <block id="e992eb9afeef39efec8f68b68ffade1d" category="paragraph">*策略 JSON 示例*：</block>
  <block id="b2b0186a010875b0d453752a8aa06a4c" category="section-title">创建 Pod 身份或 IAM 角色以关联服务帐户 (IRSA)</block>
  <block id="152bceec6d4e34c053208d61763334bc" category="paragraph">您可以配置 Kubernetes 服务账户，使其承担 AWS Identity and Access Management (IAM) 角色（使用 EKS Pod Identity 或 IAM 角色进行服务账户关联）(IRSA)。任何配置为使用该服务账户的 Pod 都可以访问该角色有权访问的任何 AWS 服务。</block>
  <block id="0522426ad683048758e710700760f5a9" category="open-title">Pod 身份</block>
  <block id="acbe8cfddfd64fba35512f543affb372" category="paragraph">Amazon EKS Pod 身份关联允许您管理应用程序的凭证，类似于 Amazon EC2 实例配置文件向 Amazon EC2 实例提供凭证的方式。</block>
  <block id="870d5f69e46397da39e4d5bc6a55edc4" category="paragraph">*在 EKS 集群上安装 Pod Identity*：</block>
  <block id="3a735289083f3ebf5b12bf1252f47e70" category="paragraph">您可以通过 AWS 控制台创建 Pod 标识，也可以使用以下 AWS CLI 命令：</block>
  <block id="6b12dab36e102678866ee1a9295bf251" category="inline-link-macro">设置 Amazon EKS Pod 身份代理</block>
  <block id="f0e49b3188e2241a1fd992e7697df37f" category="paragraph">更多信息请参阅<block ref="223f02a97a1894440d2727b156e834b6" category="inline-link-macro-rx"></block>。</block>
  <block id="4fcddd38c3384849e906ff198dca9a35" category="paragraph">*创建 trust-relationship.json 文件*：</block>
  <block id="9eaa0d9301ed8e0e6ec8d359da513e09" category="paragraph">创建 trust-relationship.json 文件，使 EKS 服务主体能够承担 Pod 身份的此角色。然后使用以下信任策略创建角色：</block>
  <block id="c256d9b106d5b83ccc940e1c11d40213" category="paragraph">*trust-relationship.json 文件*：</block>
  <block id="d5bcbf5d17aa3658058051153a3abb49" category="paragraph">*将角色策略附加到 IAM 角色*：</block>
  <block id="5855de3e8f302cffda094dad3434d14d" category="paragraph">将上一步创建的角色策略附加到已创建的 IAM 角色：</block>
  <block id="ae33daeae7be898405819838f197197f" category="paragraph">*创建 Pod 身份关联*：</block>
  <block id="bfb2fc1510ac240a94b2b84a57023dfd" category="paragraph">在 IAM 角色和Trident服务帐户 (trident-controller) 之间创建 Pod 身份关联</block>
  <block id="37d9be75a57d7c290f4624befaf41cba" category="open-title">服务帐户关联 (IRSA) 的 IAM 角色</block>
  <block id="58b24f910cf7a97cc3ea8486155b2ee3" category="paragraph">*使用 AWS CLI*：</block>
  <block id="54fe765490f6a1e88df34666a34bd7de" category="paragraph">*trust-relationship.json 文件：*</block>
  <block id="383e53c41c71ed73661ac56b250f6ba3" category="paragraph">更新以下值<block ref="d19984a25b3e536a13a6bc3036325ffd" prefix=" " category="inline-code"></block>文件：</block>
  <block id="e6fd9d7b1a119dcc259f2b06b2a2168c" category="list-text">*&lt;account_id&gt;* - 您的 AWS 账户 ID</block>
  <block id="799fd029d6ab8a846f662458a1f8df55" category="list-text">*&lt;oidc_provider&gt;* - 您的 EKS 集群的 OIDC。您可以通过运行以下命令获取oidc_provider：</block>
  <block id="053db598e2fbb7aa26ff7edbf6139941" category="paragraph">*将 IAM 角色与 IAM 策略关联*：</block>
  <block id="069097b4881e6034a743e694f616726d" category="paragraph">角色创建完成后，使用以下命令将策略（在上一步中创建的策略）附加到该角色：</block>
  <block id="02b550dde0cf971ab3461242774691c7" category="paragraph">*请核实 OICD 提供商是否已关联*：</block>
  <block id="25c5ea267b4be122e562399076209238" category="paragraph">请确认您的 OIDC 提供程序已与您的集群关联。您可以使用以下命令进行验证：</block>
  <block id="49512d524988e02360eaf4f4bb2ad8f3" category="paragraph">如果输出为空，请使用以下命令将 IAM OIDC 关联到您的集群：</block>
  <block id="4411692a55eac3faa65c355f682424c8" category="paragraph">*如果您使用的是 eksctl*，请使用以下示例在 EKS 中为服务帐户创建 IAM 角色：</block>
  <block id="1095f7331744c1accf45762c2da50a60" category="paragraph">Trident简化了 Kubernetes 中Amazon FSx for NetApp ONTAP存储管理，使您的开发人员和管理员能够专注于应用程序部署。</block>
  <block id="bc04665b1c712547a7dcc87033ae7152" category="paragraph">您可以使用以下方法之一安装Trident ：</block>
  <block id="77f6e3db9b70538186091595d9c8c9e8" category="list-text">EKS 附加组件</block>
  <block id="a01b2c45a64c7d0c2a2aa3ce418eaa04" category="inline-link-macro">为CSI卷启用快照功能</block>
  <block id="9adc02aa546c3838bddb73a67ebaa4e2" category="paragraph">如果要使用快照功能，请安装 CSI 快照控制器插件。请参阅<block ref="d2fce68a585fb4c517040885fb7393e9" category="inline-link-macro-rx"></block>了解更多信息。</block>
  <block id="aa9c9ff1836c624104eb3a256a7b8b69" category="section-title">通过 Helm 安装Trident。</block>
  <block id="de756da101866f0bf66d3cfdb32b337b" category="list-text">请按照以下示例安装Trident ：</block>
  <block id="c198f49680a4c22b6d731cdd7d7b513a" category="paragraph">您可以使用<block ref="cd4140d3de30b520500459331d08d2bf" prefix=" " category="inline-code"></block>查看安装详细信息的命令，例如名称、命名空间、图表、状态、应用程序版本和修订号。</block>
  <block id="3840ce271260ab4b489b1664491a7ae0" category="open-title">服务账户协会（IRSA）</block>
  <block id="682fae06c762bb51c348b65f07930993" category="list-text">设置*云提供商*和*云身份*的值：</block>
  <block id="eff2bb231132a96a28f9d538ef100a34" category="paragraph">如果您计划使用 iSCSI，请确保您的客户端计算机上已启用 iSCSI。如果您使用的是 AL2023 工作节点操作系统，可以通过在 Helm 安装中添加节点准备参数来自动安装 iSCSI 客户端：</block>
  <block id="b0e9da2f71a439472cddf0553ae43edc" category="section-title">通过 EKS 插件安装Trident</block>
  <block id="03023c37f6d85929cf0151fe858d3183" category="paragraph">Trident EKS 插件包含最新的安全补丁和错误修复，并经过 AWS 验证，可与 Amazon EKS 配合使用。  EKS 插件使您能够持续确保您的 Amazon EKS 集群安全稳定，并减少安装、配置和更新插件所需的工作量。</block>
  <block id="56ae1c25c84da104d5678975802dd9b7" category="list-text">带有附加订阅的 Amazon EKS 集群帐户</block>
  <block id="16a9eb0d1ef7d37ab7459bc9a67a8102" category="section-title">启用适用于 AWS 的Trident插件</block>
  <block id="e477faed39be08642267684bb501d931" category="open-title">管理控制台</block>
  <block id="e8d532dbf6904e2793dbda6fd0d03818" category="list-text">打开 Amazon EKS 控制台<block ref="c4765fcd1a0f97cf67c0365ddc45d563" category="inline-link-rx"></block>。</block>
  <block id="89fb75fa5ae260c326092b78970469ed" category="list-text">在左侧导航窗格中，选择“集群”。</block>
  <block id="abdaa0762abc2037a71287c94bceae14" category="list-text">选择要为其配置NetApp Trident CSI 插件的集群名称。</block>
  <block id="691da62871e09bf9c944f36b9de07889" category="list-text">选择“附加组件”，然后选择“获取更多附加组件”。</block>
  <block id="586ac0fdd530431245eb98eb3aa882f4" category="list-text">请按照以下步骤选择插件：</block>
  <block id="b2bd1d3671dec54e9318ab4475e27324" category="list-text">向下滚动到“AWS Marketplace 附加组件”部分，然后在搜索框中输入“Trident”。</block>
  <block id="93883402b9e962f4416b72849cb667c9" category="list-text">选中“Trident by NetApp”框右上角的复选框。</block>
  <block id="e6cd86d61f4639c8a27006c6c29b3e9f" category="list-text">选择“下一步”。</block>
  <block id="cacc1ddf612923b1c73b0a9a76659f42" category="list-text">在“配置所选插件”设置页面上，执行以下操作：</block>
  <block id="b2a83c40e86c786c07c31acad2909e42" category="admonition">*如果您使用 Pod Identity 关联，请跳过这些步骤。*</block>
  <block id="149e81257342cd05b0256d010b0b4a37" category="list-text">请选择您要使用的*版本*。</block>
  <block id="77b0a7753de002b03ddc52594a9208ee" category="list-text">如果您使用IRSA身份验证，请确保设置可选配置设置中提供的配置值：</block>
  <block id="4881bf2869ec064993ab03177d502022" category="list-text">按照*附加组件配置方案*进行操作，并将*配置值*部分中的*configurationValues*参数设置为您在上一步创建的角色 ARN（值应采用以下格式）：</block>
  <block id="f8c91efdaebc08b292c83903943a18c8" category="paragraph">如果选择“覆盖”作为冲突解决方法，则现有插件的一个或多个设置可能会被 Amazon EKS 插件设置覆盖。如果您不启用此选项，并且与您现有的设置存在冲突，则操作将失败。您可以使用生成的错误信息来排查冲突问题。在选择此选项之前，请确保 Amazon EKS 插件不会管理您需要自行管理的设置。</block>
  <block id="dfe4bfc5bd8b8d180411468fbdbb4033" category="list-text">选择“下一步”。</block>
  <block id="fbadf292f84bef20d7678936dbe4c4ce" category="list-text">在“审核和添加”页面上，选择“创建”。</block>
  <block id="46bfc11fb8f185d278ea910b0052a317" category="paragraph">插件安装完成后，您将看到已安装的插件。</block>
  <block id="7820fdb5d8b3ebe0c69c86cf8bd2d0cf" category="open-title">AWS CLI</block>
  <block id="7347242fe06ebf43402a11cc7e289da8" category="paragraph">*1.创建<block ref="feef18acfb11dc53b7100577c6d640c4" prefix=" " category="inline-code"></block>文件*：</block>
  <block id="ac85dba04837be45d97d83025fa9bef9" category="paragraph">*对于 Pod 标识，请使用以下格式*：</block>
  <block id="08ec33a477c6b216472cd10065483760" category="paragraph">*对于IRSA认证，请使用以下格式*：</block>
  <block id="fa1c8065dc4d2b862bfba881472c0aac" category="admonition">代替<block ref="2befb7722283d545949c6220c6548fe4" prefix=" " category="inline-code"></block>使用上一步创建的角色的 ARN。</block>
  <block id="895c408250687425783cbd96dd25276d" category="paragraph">*2.安装Trident EKS 插件。*</block>
  <block id="7c3f89bd6bb66984ef17d4765bf1f65a" category="open-title">eksctl</block>
  <block id="df5baf46554bffd06bf1e8e9ae5e6b52" category="paragraph">以下示例命令安装Trident EKS 插件：</block>
  <block id="1d5144e260d8c4ece3c5d47a77d84c11" category="section-title">更新Trident EKS 插件</block>
  <block id="b0c6845b636be8c810182f985c930fed" category="list-text">打开 Amazon EKS 控制台<block ref="c4765fcd1a0f97cf67c0365ddc45d563" category="inline-link-rx"></block>。</block>
  <block id="ce7f62393ec7cbcc106793e2c9ab41e8" category="list-text">选择要为其更新NetApp Trident CSI 插件的集群名称。</block>
  <block id="f90a2b79ab21cae46f34d96bb4501334" category="list-text">选择“附加组件”选项卡。</block>
  <block id="38b15bc2ab2d3588a9a19b123eaec1b5" category="list-text">选择“ NetApp Trident ”，然后选择“编辑”。</block>
  <block id="87d54c3153674640af4f36dd72f8953a" category="list-text">在“配置NetApp Trident ”页面上，执行以下操作：</block>
  <block id="effa92215c770083617150adc291c130" category="list-text">展开“可选配置设置”，并根据需要进行修改。</block>
  <block id="302ef561e28f7d7cd13d1042cece78e1" category="list-text">选择“保存更改”。</block>
  <block id="5f06738a5749e735a4681f5c09e2bafc" category="paragraph">以下示例更新 EKS 插件：</block>
  <block id="44308ffe82692c268b99d3caefca907e" category="list-text">请检查您的 FSxN Trident CSI 插件的当前版本。代替<block ref="e2eb89f0ffaf521a0d2eeaffca04d117" prefix=" " category="inline-code"></block>使用您的集群名称。</block>
  <block id="a1dc4a2136ed260b34021d64aaa6980a" category="list-text">将插件更新到上一步输出中“UPDATE AVAILABLE”下返回的版本。</block>
  <block id="b3f252777a69b110667756babe83a98f" category="inline-link-macro">插件</block>
  <block id="25626757a73152ece7fdadb90ede4b7c" category="inline-link-macro">Kubernetes 字段管理</block>
  <block id="751f793ade8de1ed590e0f90ac05d8e1" category="paragraph">如果你移除<block ref="c23ab3adaec8ca15ff3ffd0971be6152" prefix=" " category="inline-code"></block>如果选项和任何 Amazon EKS 插件设置与您现有的设置冲突，则更新 Amazon EKS 插件将失败；您将收到一条错误消息，以帮助您解决冲突。在指定此选项之前，请确保 Amazon EKS 插件不会管理您需要管理的设置，因为此选项会覆盖这些设置。有关此设置的其他选项的更多信息，请参阅<block ref="aea621f0e078efb8367c5d5e894674cd" category="inline-link-macro-rx"></block>。有关 Amazon EKS Kubernetes 字段管理的更多信息，请参阅<block ref="97bdcfd76d2ff3e4855f6b36ebad236e" category="inline-link-macro-rx"></block>。</block>
  <block id="ccab466451ff5a867710cce1b28c33a0" category="section-title">卸载/移除Trident EKS 插件</block>
  <block id="d8c918c170a0768203b4c2a6218e22bf" category="paragraph">您可以通过两种方式移除 Amazon EKS 插件：</block>
  <block id="d43d72969793ea80734b71e9c2406b2a" category="list-text">*保留集群上的附加软件* – 此选项移除 Amazon EKS 对所有设置的管理。它还取消了 Amazon EKS 通知您更新以及在您启动更新后自动更新 Amazon EKS 插件的功能。但是，它可以保留集群上的附加软件。此选项使插件成为自管理安装，而不是 Amazon EKS 插件。选择此选项，插件不会出现停机时间。保留<block ref="4b4ac0f998920a46fd2015e11d01d3e7" prefix=" " category="inline-code"></block>命令中的选项用于保留插件。</block>
  <block id="7d91a8c58620fc2b878600d5ab834bda" category="list-text">*从集群中完全移除附加软件* – NetApp建议，仅当集群中没有任何资源依赖于 Amazon EKS 附加组件时，才从集群中移除该附加组件。移除<block ref="4b4ac0f998920a46fd2015e11d01d3e7" prefix=" " category="inline-code"></block>选项<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>移除插件的命令。</block>
  <block id="577a7d77fb14f745abf0c5ee04b72879" category="admonition">如果插件关联了 IAM 帐户，则不会删除该 IAM 帐户。</block>
  <block id="b7cd6be51eaf277b357ed1c976d66d06" category="list-text">在左侧导航窗格中，选择“集群”。</block>
  <block id="1ca28d22337393f531c7c8028230ed76" category="list-text">选择要从中移除NetApp Trident CSI 插件的集群名称。</block>
  <block id="85f27397ddcaf9ec996f312d1d89ecf9" category="list-text">选择“附加组件”选项卡，然后选择“ NetApp Trident ”。</block>
  <block id="6f99fa9b2e1f4893851a8aeb82d171f9" category="list-text">选择*删除*。</block>
  <block id="c8e9b5ea2470965edac225c56a879d07" category="list-text">在“移除 netapp_trident-operator 确认”对话框中，执行以下操作：</block>
  <block id="10aba138eb518a0cc15662934a1f6e18" category="list-text">如果您希望 Amazon EKS 停止管理插件的设置，请选择“在集群上保留”。如果您希望在集群上保留附加软件，以便您可以自行管理附加软件的所有设置，请执行此操作。</block>
  <block id="ecca191ac54751ba8120816fbe45777e" category="list-text">输入 *netapp_trident-operator*。</block>
  <block id="bb7c6bde1fc26965ada02923bac65350" category="paragraph">代替<block ref="e2eb89f0ffaf521a0d2eeaffca04d117" prefix=" " category="inline-code"></block>输入集群名称，然后运行以下命令。</block>
  <block id="9303b8f40cf82f5e37702c7a6387e725" category="section-title">ONTAP SAN 和 NAS 驱动程序集成</block>
  <block id="996d0bc5ff30cfbcef97caeaf2c6b353" category="paragraph">要创建存储后端，您需要创建 JSON 或 YAML 格式的配置文件。该文件需要指定您想要的存储类型（NAS 或 SAN）、文件系统、要从中获取存储的 SVM 以及如何对其进行身份验证。以下示例展示了如何定义基于 NAS 的存储，以及如何使用 AWS Secret 来存储要使用的 SVM 的凭证：</block>
  <block id="301909df91f724e7a48b15a1b5d05fa2" category="paragraph">运行以下命令以创建和验证Trident后端配置 (TBC)：</block>
  <block id="d072ff8aa34f8a629a86f50ed8e738e5" category="list-text">从 yaml 文件创建 Trident 后端配置 (TBC)，并运行以下命令：</block>
  <block id="f695eae3342584490d4ff28ac968bd5b" category="list-text">验证 Trident 后端配置 (TBC) 是否已成功创建：</block>
  <block id="42f3b65b98b18c792b7b5534e40d2646" category="section-title">FSx 适用于ONTAP驱动程序的详细信息</block>
  <block id="a2e4c75efdd834198ec30de5256aa938" category="paragraph">您可以使用以下驱动程序将Trident与Amazon FSx for NetApp ONTAP集成：</block>
  <block id="c3e86b30fe8148143701324ae1595af8" category="list-text"><block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix="" category="inline-code"></block>每个已配置的 PV 都是其自身Amazon FSx for NetApp ONTAP卷中的一个 LUN。推荐用于块存储。</block>
  <block id="3878a0c92e55dbd3cdd9458330c2f1c3" category="list-text"><block ref="8321592ce24c8a122ecf26a63cfca407" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个完整的Amazon FSx for NetApp ONTAP卷。推荐用于NFS和SMB。</block>
  <block id="b8f98ceeb9b158e8af3527fce91e9e57" category="list-text"><block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个 LUN，每个Amazon FSx for NetApp ONTAP卷可配置 LUN 的数量。</block>
  <block id="94a834f420b7c21f3a1053e6dc705a31" category="list-text"><block ref="caafdf62a2c609bfa5316118231a1007" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个 qtree，每个Amazon FSx for NetApp ONTAP卷可以配置 qtree 的数量。</block>
  <block id="e42b07a9f050ef51ea1211004a50f223" category="list-text"><block ref="844e84da8e822b4a33c4d8188da97937" prefix="" category="inline-code"></block>每个已配置的 PV 都是一个完整的Amazon FSx for NetApp ONTAP FlexGroup卷。</block>
  <block id="f5aa1832e32f2b8d7a7f22d8e36a4617" category="inline-link-macro">NAS驱动程序</block>
  <block id="de9e7e8f2c463ef15bebdbf8d2d1aa6d" category="inline-link-macro">SAN驱动程序</block>
  <block id="fa4eb54eedf6fea69ec183c4e2199a4d" category="paragraph">有关司机详情，请参阅<block ref="4093b6d0ce8cf414637a02002d2b0376" category="inline-link-macro-rx"></block>和<block ref="276422a40a581e9842304216329765d5" category="inline-link-macro-rx"></block>。</block>
  <block id="1189a90ab4944cc8e995186943355be8" category="paragraph">配置文件创建完成后，运行以下命令将其创建在 EKS 中：</block>
  <block id="91997590df030f7b1753ee07ed8a9857" category="paragraph">要验证状态，请运行以下命令：</block>
  <block id="eadd7f9188e84053efc871a14d0d3bd6" category="section-title">后端高级配置和示例</block>
  <block id="b67b129bb636d36f948ca02b68bfa9bc" category="cell">集群或 SVM 管理 LIF 的 IP 地址可以指定完全限定域名 (FQDN)。如果Trident安装时使用了 IPv6 标志，则可以设置为使用 IPv6 地址。 IPv6 地址必须用方括号定义，例如 [28e8:d9fb:a825:b7bf:69a8:d02f:9e7b:3555]。如果您提供<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block>在<block ref="ac68bbf921d953d1cfab916cb6120864" prefix=" " category="inline-code"></block>字段中，您无需提供<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>因为Trident可以检索 SVM<block ref="a6ea6092cb7b9c5f31909eb4be8fa5ea" prefix=" " category="inline-code"></block>来自 AWS 的信息。因此，您必须提供 SVM 下用户的凭据（例如：vsadmin），并且该用户必须拥有以下权限：<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>角色。</block>
  <block id="2001e2e03a90bd5c85ca8982c01a0500" category="cell">每个 Flexvol 卷的最大 LUN 数必须在 [50, 200] 范围内。仅限SAN。</block>
  <block id="ab2e083df601e1b7c7346487158ab13f" category="cell">“`100`”</block>
  <block id="14ed525d625786e77d722ce4d08ee599" category="cell">每个FlexVol volume的最大 Qtree 数量必须在 [50, 300] 范围内</block>
  <block id="7a5bbb3c815084605b780e0cd6e810fd" category="cell"><block ref="89ffa293e05655bd6be9d422345be38a" prefix="" category="inline-code"></block></block>
  <block id="9a30deaecbfde403e36a8a700d09e3e1" category="cell">使用ONTAP REST API 的布尔参数。设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>Trident将使用ONTAP REST API 与后端进行通信。此功能需要ONTAP 9.11.1 及更高版本。此外，所使用的ONTAP登录角色必须具有访问权限。<block ref="a9ba4dc88fa11d44cc7c0c918d174778" prefix=" " category="inline-code"></block>应用。预定义项满足了这一点。<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>和<block ref="fdb6ba311fad29ec53069808f10ebef4" prefix=" " category="inline-code"></block>角色。</block>
  <block id="fbf3304d2358758ea71475804b2cbeae" category="paragraph">您可以使用以下方式配置 SMB 卷：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>司机。在你完成之前<block ref="24f26185e00986318dc562523d4edbf6" category="inline-xref-macro-rx"></block>请完成以下步骤。</block>
  <block id="f55c34459cf261d1102750bcbde548d8" category="paragraph">在使用以下方式配置 SMB 卷之前：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>驾驶员，您必须具备以下条件。</block>
  <block id="52934bc714f29a2f1d7b732705cd3bc3" category="list-text">一个 Kubernetes 集群，包含一个 Linux 控制器节点和至少一个运行 Windows Server 2019 的 Windows 工作节点。  Trident仅支持挂载到运行在 Windows 节点上的 pod 的 SMB 卷。</block>
  <block id="8e6249724e4eef8026e47829f03f9e67" category="list-text">创建SMB共享。您可以通过以下两种方式之一创建 SMB 管理共享：<block ref="364bc251e9c8cfbf6ce258767d17d682" category="inline-link-macro-rx"></block>共享文件夹管理单元或使用ONTAP CLI。使用ONTAP CLI 创建 SMB 共享：</block>
  <block id="9817ca035dba7bc4123be2c0bf280d66" category="doc">配置存储等级和PVC</block>
  <block id="06034bca671a3028021f1a722aac7b41" category="paragraph">配置 Kubernetes StorageClass 对象并创建存储类，以指示Trident如何配置卷。创建一个使用已配置的 Kubernetes StorageClass 的 PersistentVolumeClaim (PVC) 来请求访问 PV。然后您可以将光伏组件安装到支架上。</block>
  <block id="346a92db06c8942d8b2bd2e2de5c2796" category="paragraph">这<block ref="da3f7f170e13df7f56e057fc4226aa85" category="inline-link-rx"></block>该对象将Trident标识为该类使用的配置器，并指示Trident如何配置卷。使用此示例为使用 NFS 的卷设置 Storageclass（有关属性的完整列表，请参阅下面的Trident属性部分）：</block>
  <block id="7cb76a35f0ca09eacd7393285baf81df" category="paragraph">使用此示例为使用 iSCSI 的卷设置 Storageclass：</block>
  <block id="43d8d272a15eda3f1fbfcedc2408b697" category="paragraph">要在 AWS Bottlerocket 上配置 NFSv3 卷，请添加所需的<block ref="e1d3d66c5926aa7fbc3186da8f9b476b" prefix=" " category="inline-code"></block>到存储类：</block>
  <block id="a305c8fb2137d8a4a767905590079e89" category="section-title">制作PVC管</block>
  <block id="2d63b64b84c821bc810927f7ca7fa993" category="inline-link">_PersistentVolumeClaim_</block>
  <block id="f79367bddbaecd3962f7c740a1b2178f" category="paragraph">一个<block ref="b1b93f46fc69df9fe663c091f4d6c2b4" category="inline-link-rx"></block>（PVC）是对集群上持久卷的访问请求。</block>
  <block id="d948cda211eadd3a86a406b43ee0d5fa" category="paragraph">PVC 可以配置为请求存储特定尺寸或访问模式。使用关联的 StorageClass，集群管理员可以控制的不仅仅是 PersistentVolume 的大小和访问模式，还可以控制性能或服务级别。</block>
  <block id="5de805965faeb85a54098223ea3a3334" category="paragraph">制作好 PVC 后，就可以将容积安装到舱体中。</block>
  <block id="35e98ba80f6254a33de7a37ab113316e" category="section-title">样品清单</block>
  <block id="569dfd7a9483b050d1e076a318f0fccc" category="example-title">PersistentVolumeClaim 样本清单</block>
  <block id="526596809db1b7644a7637cfa05fcf8a" category="paragraph">这些示例展示了PVC的基本配置选项。</block>
  <block id="2b00559f1e8a052e6ec27fd2da2fc0ef" category="paragraph-title">带RWX接口的PVC</block>
  <block id="c3d2188822ac025c91b768888f8af01e" category="paragraph">此示例展示了一个具有 RWX 访问权限的基本 PVC，它与一个名为 StorageClass 的 StorageClass 相关联。<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block> 。</block>
  <block id="4789829a93714df585353f631620ef1d" category="paragraph-title">使用 iSCSI 示例的 PVC</block>
  <block id="325b282cbc15cc9dcde1a69271472526" category="paragraph">此示例展示了一个与名为 StorageClass 的存储类关联的、具有 RWO 访问权限的 iSCSI 基本 PVC。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> 。</block>
  <block id="4aac510e801e497da3b150682838f5f7" category="section-title">创建 PVC</block>
  <block id="e1f83bd8f580cc9a48311142d551b3cf" category="list-text">创建 PVC。</block>
  <block id="150f6f248f009f461b84862124e2b499" category="list-text">核实PVC状态。</block>
  <block id="456166bed74a8ee84892a1778e8485a7" category="section-title">Trident属性</block>
  <block id="0b62778604e11f72525f5a82bbd26c6a" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block>是一项完全托管的 AWS 服务，使客户能够启动和运行由NetApp ONTAP存储操作系统支持的文件系统。  FSx for ONTAP使您能够利用您熟悉的NetApp功能、性能和管理能力，同时享受在 AWS 上存储数据的简单性、敏捷性、安全性和可扩展性。  FSx for ONTAP支持ONTAP文件系统功能和管理 API。</block>
  <block id="0a6a0f274bdb2256373050bb5155f62f" category="paragraph">您可以将Amazon FSx for NetApp ONTAP文件系统与Trident集成，以确保在 Amazon Elastic Kubernetes Service (EKS) 中运行的 Kubernetes 集群可以配置由ONTAP支持的块和文件持久卷。</block>
  <block id="627d563f4445675e960fd39150a292ba" category="paragraph">文件系统是Amazon FSx中的主要资源，类似于本地的ONTAP集群。在每个 SVM 中，您可以创建一个或多个卷，这些卷是用于存储文件系统中的文件和文件夹的数据容器。 Amazon FSx for NetApp ONTAP将作为云端托管文件系统提供。新的文件系统类型称为 * NetApp ONTAP*。</block>
  <block id="e22cd0725c5dbd58b894af3d4584607c" category="paragraph">通过将Trident与Amazon FSx for NetApp ONTAP结合使用，您可以确保在 Amazon Elastic Kubernetes Service (EKS) 中运行的 Kubernetes 集群可以配置由ONTAP支持的块和文件持久卷。</block>
  <block id="0ad999be0dea6cdee2afca2bcb6da8b1" category="paragraph">此外<block ref="6004af307fc2eed554c42ebaa4be8446" category="inline-link-macro-rx"></block>要将 FSx for ONTAP与Trident集成，您需要：</block>
  <block id="80d13d3dbe137e8fb646193f275eceeb" category="list-text">现有的 Amazon EKS 集群或自管理 Kubernetes 集群<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>已安装。</block>
  <block id="9b800ce65251b771d0eb86610e11f6b0" category="list-text">集群工作节点可访问的现有Amazon FSx for NetApp ONTAP文件系统和存储虚拟机 (SVM)。</block>
  <block id="288b1cbb87d08c32abf3084c28636e5c" category="inline-link-macro">NFS 或 iSCSI</block>
  <block id="d7481875afa061fb651628b2597d52ec" category="list-text">已准备好的工作节点<block ref="966ed3bab2d39ae1014ad2eb34527e0f" category="inline-link-macro-rx"></block>。</block>
  <block id="fe914214000491758957f04647f8da36" category="inline-link">亚马逊机器图像</block>
  <block id="d0341760d873a30f82a310a6eab0ba9c" category="admonition">请务必按照 Amazon Linux 和 Ubuntu 所需的节点准备步骤进行操作。<block ref="70013ee128d5437b3d9579d66ece4066" category="inline-link-rx"></block> （AMI）取决于您的 EKS AMI 类型。</block>
  <block id="9b85b10750f4b0e98b7853ee468d8bd5" category="list-text">SMB 卷：</block>
  <block id="cf201a9e802aa6e35997590206919b1a" category="list-text">使用以下方式支持 SMB 卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>仅限司机。</block>
  <block id="6bb2a5c441a4e421f26e835928b68f1f" category="list-text">Trident EKS 插件不支持 SMB 卷。</block>
  <block id="910bc8aad96dce304454db69330c4c1c" category="list-text">Trident仅支持挂载到运行在 Windows 节点上的 pod 的 SMB 卷。参考 <block ref="5d9770278862f1ca4af19e761a5fa655" category="inline-link-macro-rx"></block> 了解详情。</block>
  <block id="3111c4c842496dcfcddb5de6e9f7ec11" category="list-text">在Trident 24.02 之前，在Amazon FSx文件系统上创建的、启用了自动备份的卷无法被Trident删除。为防止在Trident 24.02 或更高版本中出现此问题，请指定<block ref="d731d2fecb66f9c4a30253bd316a220f" prefix=" " category="inline-code"></block>，AWS<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block> ，AWS<block ref="9af4d8381781baccb0f915e554f8798d" prefix=" " category="inline-code"></block>以及 AWS<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block>在 AWS FSx for ONTAP的后端配置文件中。</block>
  <block id="9f953e6f7a1bf75b24ad7c1f72aeda22" category="admonition">如果您要为Trident指定 IAM 角色，则可以省略指定以下内容：<block ref="1e9c0fd1beef5ff8ed3bef2ae3b7e560" prefix=" " category="inline-code"></block> ，<block ref="c9ff119073ea2567730fb42e3a4fe805" prefix=" " category="inline-code"></block> ， 和<block ref="ce656850400574e9f9cffb285ee8abc0" prefix=" " category="inline-code"></block>明确地将字段传递给Trident 。更多信息，请参阅<block ref="d3e98810edf44af02b30486ed13bd043" category="inline-link-macro-rx"></block>。</block>
  <block id="6b37510d663e6eea4cd2d594f41e9e80" category="section-title">同时使用Trident SAN/iSCSI 和 EBS-CSI 驱动程序</block>
  <block id="dd601ed3d730aa713757843173c1c8c5" category="paragraph">如果您计划将 ontap-san 驱动程序（例如 iSCSI）与 AWS（EKS、ROSA、EC2 或任何其他实例）一起使用，则节点上所需的多路径配置可能会与 Amazon Elastic Block Store (EBS) CSI 驱动程序冲突。为了确保多路径功能不会干扰同一节点上的 EBS 磁盘，您需要在多路径设置中排除 EBS。这个例子展示了<block ref="9ac80d53ede05256c28cf9e043eb423c" prefix=" " category="inline-code"></block>包含所需Trident设置但排除 EBS 磁盘进行多路径配置的文件：</block>
  <block id="c75f7811d70d17dbcd88e9d03752cbed" category="section-title">身份验证</block>
  <block id="7b53d57c2eba03d6610dce9feca9a586" category="paragraph">Trident提供两种身份验证方式。</block>
  <block id="8067a6840467d2024a341120a4e2440e" category="list-text">基于凭证（推荐）：将凭证安全地存储在 AWS Secrets Manager 中。您可以使用<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>文件系统的用户或<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>用户已配置到您的 SVM。</block>
  <block id="954d503a6b34d7989c109f6cb0bfac8d" category="admonition">Trident预计将以……的形式运营<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>SVM 用户，或者使用具有相同角色但名称不同的用户。 Amazon FSx for NetApp ONTAP具有<block ref="679500f227997b45be97e3ca8115c678" prefix=" " category="inline-code"></block>该用户是ONTAP的有限替代品<block ref="21232f297a57a5a743894a0e4a801fc3" prefix=" " category="inline-code"></block>集群用户。我们强烈建议使用<block ref="6173aa5206484b5224450952747c7148" prefix=" " category="inline-code"></block>用Trident。</block>
  <block id="e4cd0c6f3c2ade8eef84039005a10f36" category="list-text">基于证书： Trident将使用安装在 SVM 上的证书与 FSx 文件系统上的 SVM 进行通信。</block>
  <block id="994eaa47aad78cae857818e1655e2800" category="paragraph">有关启用身份验证的详细信息，请参阅您的驱动程序类型的身份验证说明：</block>
  <block id="57e00ef3eabad47fc79d0ef1319f989c" category="inline-link-macro">ONTAP NAS 认证</block>
  <block id="840db27e4fe9967e908b8b101ca72198" category="list-text"><block ref="840db27e4fe9967e908b8b101ca72198" category="inline-link-macro-rx"></block></block>
  <block id="562276ffa617658595d5e6df35ef971c" category="inline-link-macro">ONTAP SAN 身份验证</block>
  <block id="4a5e4254b1862ddbff7f81ed84e87125" category="list-text"><block ref="4a5e4254b1862ddbff7f81ed84e87125" category="inline-link-macro-rx"></block></block>
  <block id="e5fd3b07dfde2732fc5e3a9d4e7c5370" category="section-title">已测试的亚马逊机器映像 (AMI)</block>
  <block id="3cec1ada82beb8b8e724d5114558490c" category="paragraph">EKS 集群支持各种操作系统，但 AWS 针对容器和 EKS 优化了某些 Amazon Machine Image (AMI)。以下 AMI 已使用NetApp Trident 25.02 进行测试。</block>
  <block id="af2fcef81914e3ce8b2cbe1ab832c879" category="cell">急性心肌梗死</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="12b1f0215cde9ea0ca4aac0c3ade3a96" category="cell">NAS经济</block>
  <block id="cedb5a7bb4fc5e3e014ce0b58a3d5095" category="cell">iSCSI经济型</block>
  <block id="b2f628a87c3b04816210b608f76d5fa0" category="cell">AL2023_x86_64_STANDARD</block>
  <block id="c1dfeb2129506a6914b9c6c3c0cdb647" category="cell">AL2_x86_64</block>
  <block id="01a9a3b8d0fcae3055dc91935e8ec6c6" category="cell">是的*</block>
  <block id="e732f4cda23726735e2b2cf9bc3ba76f" category="cell">BOTTLEROCKET_x86_64</block>
  <block id="9cfc5bb3d7caf552b74c3e5295bb5f11" category="cell">是的**</block>
  <block id="382b0f5185773fa0f67a8ed8056c7759" category="cell">不适用</block>
  <block id="1566bc91a0bfa1dbeba46107fc54f756" category="cell">AL2023_ARM_64_STANDARD</block>
  <block id="e3b9c2e4d8176e1074a9511b580d6396" category="cell">AL2_ARM_64</block>
  <block id="a28322bc0e8a38770a1af7cc1d4a9ad9" category="cell">BOTTLEROCKET_ARM_64</block>
  <block id="27a75f24043645e5e4d2b91bad951706" category="list-text">* 如果不重启节点，则无法删除 PV</block>
  <block id="029fec6571d8c4d36438994c07941953" category="list-text">** 不适用于Trident版本 25.02 的 NFSv3。</block>
  <block id="e5d0cb04635aeb2a6f06f54da8303683" category="admonition">如果您所需的 AMI 未在此处列出，并不意味着它不受支持；这仅仅意味着它尚未经过测试。此列表可作为 AMI 已知可用系统的指南。</block>
  <block id="07e5351dce8b6c8e3f72745762bac773" category="paragraph">*使用以下工具进行测试：*</block>
  <block id="87e881298a8d8cc2b3ffd068da55a0c1" category="list-text">EKS版本：1.32</block>
  <block id="38ec877f215b7bc2eb836f279c3374c5" category="list-text">安装方法：Helm 25.06 和 AWS 附加组件 25.06</block>
  <block id="583a5d19bce672251a82cb390b576d1a" category="list-text">对于 NAS，NFSv3 和 NFSv4.1 都进行了测试。</block>
  <block id="8dba245dcac3bf8acf6067e0d62d01cb" category="list-text">SAN 仅测试了 iSCSI，未测试 NVMe-oF。</block>
  <block id="6eee4bc92cc38369e7271225ec488e82" category="paragraph">*已执行测试*：</block>
  <block id="0524d900ed906479235e99cfc10e1cb6" category="list-text">创建：存储类、PVC、Pod</block>
  <block id="12dbb8a3d281738c9cc213bc80fa2343" category="list-text">删除：pod、pvc（常规、qtree/lun – 经济型、带 AWS 备份的 NAS）</block>
  <block id="cc788b7e72b2a734dd0985bd1e0e9fe3" category="inline-link">Amazon FSx for NetApp ONTAP文档</block>
  <block id="fd570b75466e2daca21a032e6fd5981c" category="list-text"><block ref="fd570b75466e2daca21a032e6fd5981c" category="inline-link-rx"></block></block>
  <block id="0ef79cb4bb284d3ca9c3e95489919301" category="inline-link">关于Amazon FSx for NetApp ONTAP的博客文章</block>
  <block id="3b94214fe5975bca8da92b72f8926be2" category="list-text"><block ref="3b94214fe5975bca8da92b72f8926be2" category="inline-link-rx"></block></block>
  <block id="c50cb71bc70d27f0ecf850ff18d11479" category="summary">使用Trident，您可以利用同一 K8s 集群中不同命名空间内的现有卷或卷快照创建新卷。</block>
  <block id="fc61af20b92225aae2a169587940eb14" category="doc">跨命名空间克隆卷</block>
  <block id="7d3b4ba16dd9908f0a9572976f62cb92" category="paragraph">使用Trident，您可以利用同一 Kubernetes 集群中不同命名空间内的现有卷或卷快照创建新卷。</block>
  <block id="12bf911acc3865647e24aa6cc61fad9d" category="paragraph">克隆卷之前，请确保源后端和目标后端是同一类型，并且具有相同的存储类别。</block>
  <block id="2094195fd55afe126d43ae0e716d1274" category="admonition">跨命名空间克隆仅支持以下情况：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>和<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>存储驱动程序。不支持只读克隆。</block>
  <block id="06ad314b340900d226b1196e1fe289e9" category="section-title">快速启动</block>
  <block id="88f2acec92adfdf94ffec73a8fda60a6" category="paragraph">只需几个步骤即可设置卷克隆。</block>
  <block id="9e556d1188a1d7d3f911546d9c8f70f1" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>配置源 PVC 以克隆卷</block>
  <block id="88b05b42d60719619c24f6101bcd381a" category="paragraph">源命名空间所有者授予访问源 PVC 中数据的权限。</block>
  <block id="82a9b6c32a91a1f4a714d648f5d3260f" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block>授予在目标命名空间中创建 CR 的权限</block>
  <block id="7037976663710169f00563675ffd3f91" category="paragraph">集群管理员授予目标命名空间的所有者创建 TridentVolumeReference CR 的权限。</block>
  <block id="311a877e773f97b1e237db665a868dd9" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block>在目标命名空间中创建 TridentVolumeReference</block>
  <block id="46374486db0641fa4a3fc8e9c73766ed" category="paragraph">目标命名空间的所有者创建 TridentVolumeReference CR 以引用源 PVC。</block>
  <block id="4f371bbe8ba542b2ca00eb9f3a3a2716" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block>在目标命名空间中创建克隆 PVC</block>
  <block id="a77fe76c8980416f14767484ab56a324" category="paragraph">目标命名空间的所有者创建 PVC 以克隆源命名空间中的 PVC。</block>
  <block id="7238deab481379c03df561ea7c9b0e2e" category="section-title">配置源命名空间和目标命名空间</block>
  <block id="b739008e44cdaf094f62931a68086bb5" category="paragraph">为确保安全，跨命名空间克隆卷需要源命名空间所有者、集群管理员和目标命名空间所有者的协作和操作。用户角色在每个步骤中都会被指定。</block>
  <block id="6558f904ce916da3190d62209965d0ee" category="list-text">*源命名空间所有者：* 创建PVC<block ref="30520f4f96804df83914260b79f55962" prefix="(" category="inline-code"></block> ）在源命名空间中<block ref="612897f0683dd83be850731b14801182" prefix="(" category="inline-code"></block>授予与目标命名空间共享的权限<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>) 使用<block ref="176dbae9b2594398063073fa2462e819" prefix=" " category="inline-code"></block>注解。</block>
  <block id="e44a637a848aa60ef27cfc477d692412" category="paragraph">Trident创建 PV 及其后端存储卷。</block>
  <block id="848c08c0dad8da2f2f28ca678bbfbf1f" category="list-text">您可以使用逗号分隔的列表将 PVC 共享给多个命名空间。例如，<block ref="01066aa74fe32f5dae708937da0fdc6f" prefix=" " category="inline-code"></block> 。</block>
  <block id="e49c2aab2a070ab6ebb8b78acc7d3685" category="list-text">您可以使用以下方式共享到所有命名空间<block ref="3389dae361af79b04c9c8e7057f60cc6" prefix=" " category="inline-code"></block>。例如，<block ref="b50a7cdb2a6c7bc49cf0ac66428e8a33" prefix=" " category="inline-code"></block></block>
  <block id="6844c666d46d26f14f45880c3b8cd2ec" category="list-text">您可以更新PVC以包含<block ref="176dbae9b2594398063073fa2462e819" prefix=" " category="inline-code"></block>随时可以添加注释。</block>
  <block id="b3d3f9a2121425d368b2e48af67d611a" category="list-text">*集群管理员：* 确保已配置正确的基于角色的访问控制 (RBAC)，以授予目标命名空间所有者在目标命名空间中创建 TridentVolumeReference CR 的权限。<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block> ）。</block>
  <block id="5f560764a361bf1159f8a6c8cbd15dad" category="list-text">*目标命名空间所有者：* 在目标命名空间中创建一个指向源命名空间的 TridentVolumeReference CR。<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block> 。</block>
  <block id="b49d0358b75283a3c4f7a2e7229fc097" category="list-text">*目标命名空间所有者：* 创建PVC<block ref="3f6857fc20ae2372499a71869ac3fe7e" prefix="(" category="inline-code"></block> ）在目标命名空间<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>) 使用<block ref="77167d63af133b47bca3bbacd580fa44" prefix=" " category="inline-code"></block>或者<block ref="bfd2f3d7d043509924eaac702957a99d" prefix=" " category="inline-code"></block>， 和<block ref="2413b30c8869ee9ac5b416f44004a212" prefix=" " category="inline-code"></block>用于指定源PVC的注释。</block>
  <block id="188811e4b8b33253d84403cd9a1fcfa9" category="list-text">对于使用 ontap-nas-economy 驱动程序配置的 PVC，不支持只读克隆。</block>
  <block id="f8abfe6b352de2fd0e868bcaf6f3e7f7" category="summary">Trident支持为创建的卷分配有意义的名称和标签，以便更容易识别、监控和管理卷，并轻松地将卷映射到相应的 Kubernetes 资源（PVC）。</block>
  <block id="3c49604e542827bab74a3fdc9c521379" category="doc">自定义卷名和标签</block>
  <block id="ba7c9f4d567a323afc79746f519e415b" category="paragraph">使用Trident，您可以为创建的卷分配有意义的名称和标签。这可以帮助您识别卷并将其轻松映射到各自的 Kubernetes 资源（PVC）。您还可以在后端级别定义模板，以创建自定义卷名称和自定义标签；您创建、导入或克隆的任何卷都将遵循这些模板。</block>
  <block id="52929ef06c83a3071dc677c6076f8eb3" category="paragraph">支持自定义卷名称和标签：</block>
  <block id="ba7ad86bd3d0a50a4a04306d941e6c28" category="list-text">卷创建、导入和克隆操作。</block>
  <block id="174a7026faf4af3e1ec0eeec9d35af81" category="list-text">对于 ontap-nas-economy 驱动程序，只有 Qtree 卷的名称符合名称模板。</block>
  <block id="12df52676a1d1f4040501d3a804b1a4b" category="list-text">对于 ontap-san-economy 驱动程序，只有 LUN 名称符合名称模板。</block>
  <block id="0ee903e586aac760f5cdfb2c770f936b" category="list-text">可自定义卷名称仅与ONTAP本地驱动程序兼容。</block>
  <block id="b3c7ca4cfca79f517812064c1b9b0ef3" category="list-text">可自定义的卷名称不适用于现有卷。</block>
  <block id="4c71628145ace597229ccf6ca6fdc8bf" category="section-title">可自定义卷名称的关键行为</block>
  <block id="a5a284fe1356005dc517f157bef35adc" category="list-text">如果由于名称模板中的语法无效而导致失败，则后端创建将失败。但是，如果模板应用失败，则卷将按照现有的命名约定命名。</block>
  <block id="d654edd1d54bb9458ddce1a8e82a2733" category="list-text">当使用后端配置中的名称模板命名卷时，存储前缀不适用。可以直接在模板中添加任何所需的前缀值。</block>
  <block id="7a4b723467d577190f5e83269d9c620a" category="section-title">后端配置示例，包含名称模板和标签</block>
  <block id="c08c19c0fe3a67a5a218b1aa469e05ad" category="paragraph">可以在根级别和/或池级别定义自定义名称模板。</block>
  <block id="12f281b150c6774b77a875b26e355bfc" category="listing-title">根级别示例</block>
  <block id="93a53c76d697da9fb40dcf5571309b51" category="listing-title">池级示例</block>
  <block id="c9181e8d9effc5e3fff6e681bc43f9bb" category="section-title">名称模板示例</block>
  <block id="6834f2805b2a45680a7ae789728955a4" category="paragraph">*示例 1*：</block>
  <block id="c0fa2da2f469c0dff06ceac7e749b20d" category="paragraph">*示例 2*：</block>
  <block id="e1a1ba8a7f91a9affe2c95b795610ca0" category="list-text">对于卷导入，只有当现有卷具有特定格式的标签时，才会更新标签。例如：<block ref="ac1133297b5ec16017c28f04387bb5c9" prefix=" " category="inline-code"></block> 。</block>
  <block id="feddffabbdd5254f9975a1a26a73d651" category="list-text">对于托管卷导入，卷名称遵循后端定义根级别定义的名称模板。</block>
  <block id="97c781efba117c0e1d5363fc4b25ca4d" category="list-text">Trident不支持将切片运算符与存储前缀一起使用。</block>
  <block id="d30011d07380d694abaa3a0701445be9" category="list-text">如果模板无法生成唯一的卷名称， Trident将添加一些随机字符来创建唯一的卷名称。</block>
  <block id="67b2f0b2bd7da526ee1d031a8d146585" category="list-text">如果 NAS 经济型卷的自定义名称长度超过 64 个字符， Trident将按照现有的命名约定命名这些卷。对于所有其他ONTAP驱动程序，如果卷名称超过名称限制，则卷创建过程将失败。</block>
  <block id="18554a6310d1d501f5fdbbbc7a0cd7c6" category="summary">Trident为 Kubernetes 用户提供了在创建卷后扩展卷的能力。查找有关扩展 iSCSI、FC 和 NFS 卷所需的配置信息。</block>
  <block id="996b8601627b0cb893a41930ccbbeb4b" category="paragraph">Trident为 Kubernetes 用户提供了在创建卷后扩展卷的能力。查找有关扩展 iSCSI、NFS、SMB、NVMe/TCP 和 FC 卷所需的配置的信息。</block>
  <block id="15d79b565b148caa23e6f2b53813413d" category="section-title">扩展 iSCSI 卷</block>
  <block id="0b981ab19df55a28a02578aa5f326db8" category="paragraph">您可以使用 CSI 配置程序扩展 iSCSI 持久卷 (PV)。</block>
  <block id="f8f338469c62eb8604f5304af08466ba" category="admonition">iSCSI 卷扩展受以下方式支持：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>驱动程序需要 Kubernetes 1.16 及更高版本。</block>
  <block id="fe9ee1935ea7894fe4fd2f600993cd7d" category="section-title">步骤 1：配置 StorageClass 以支持卷扩展</block>
  <block id="ff87ac5778183437377f5f963a3dccac" category="paragraph">编辑 StorageClass 定义以进行设置<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block>田野<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="c83b8171dcc233263cf7eeaef8da6a4d" category="paragraph">对于已存在的 StorageClass，对其进行编辑以包含以下内容：<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block>范围。</block>
  <block id="59973fd7be015512b53fe121a13d5580" category="section-title">步骤 2：使用您创建的 StorageClass 创建 PVC。</block>
  <block id="efe0663b3e4eed08a4a1b30c3f3a2aac" category="paragraph">编辑PVC定义并更新<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block>为了反映新的所需尺寸，该尺寸必须大于原始尺寸。</block>
  <block id="e784d9ded1cce64694895e336ef35234" category="paragraph">Trident创建一个持久销量 (PV) 并将其与此持久销量声明 (PVC) 关联起来。</block>
  <block id="8dacc1d7fdb5bfd3f8a4daedf3ccdd88" category="section-title">步骤 3：定义一个连接 PVC 的舱体</block>
  <block id="9d384cd22f1c9bc6a23136fe35d2a51c" category="paragraph">将光伏组件连接到舱体上，以便调整其尺寸。调整 iSCSI PV 大小时有两种情况：</block>
  <block id="c97c2c03f174086fc1172be741226250" category="list-text">如果 PV 连接到 pod， Trident会扩展存储后端上的卷，重新扫描设备，并调整文件系统的大小。</block>
  <block id="8870cc012f196366d720ebdad2f5632f" category="list-text">尝试调整未连接的 PV 的大小时， Trident会在存储后端扩展卷。  PVC 与 pod 绑定后， Trident会重新扫描设备并调整文件系统的大小。  Kubernetes 会在扩展​​操作成功完成后更新 PVC 大小。</block>
  <block id="85f5dec267aa48cff82ccaf993019e6d" category="paragraph">在这个例子中，创建了一个使用以下功能的 pod：<block ref="51288ffe0d65faa0df02b71bfa104041" prefix=" " category="inline-code"></block> 。</block>
  <block id="ebae1958b6002fb43077a474d845284c" category="section-title">步骤 4：展开 PV</block>
  <block id="63188b171689bcd93b1ca818b3a2ab9c" category="paragraph">要将已创建的 PV 从 1Gi 调整为 2Gi，请编辑 PVC 定义并更新。<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block>至 2Gi。</block>
  <block id="eabf614ed44fe1c3e78cb2300949eb63" category="section-title">步骤 5：验证扩展</block>
  <block id="026f69e8eb7faab2f07a68365843746d" category="paragraph">您可以通过检查PVC、PV和Trident的体积来验证扩容是否正确：</block>
  <block id="1dea918d41199b513b961287c6579f4f" category="section-title">扩大 FC 体积</block>
  <block id="213524ddd0b0daf2a171ee47c3596e00" category="paragraph">您可以使用 CSI 配置程序扩展 FC 持久卷 (PV)。</block>
  <block id="7ff05a6f045c4cd794027d9a80f2ee93" category="admonition">FC体积扩张得到了以下方面的支持：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>驱动程序需要 Kubernetes 1.16 及更高版本。</block>
  <block id="7e60a488a5dff73b203319b9ad63006e" category="paragraph">将光伏组件连接到舱体上，以便调整其尺寸。调整燃料电池光伏组件容量时有两种情况：</block>
  <block id="75b8249751a8ea5869a0b5a8e465efc1" category="section-title">扩展 NFS 卷</block>
  <block id="d8fc21061998f01679cbbabd9102ec8c" category="paragraph">Trident支持为已配置的 NFS PV 扩展容量。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ， 和<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>后端。</block>
  <block id="578f10bb7cad2abad1cbbcb9a9a732f9" category="paragraph">要调整 NFS PV 的大小，管理员首先需要配置存储类以允许卷扩展，方法是设置以下参数：<block ref="6add71a247c8f4513060920be14857bc" prefix=" " category="inline-code"></block>田野<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>：</block>
  <block id="27b4a9ed8609e35526601aa8d8be1ab9" category="paragraph">如果您已经创建了一个没有此选项的存储类，则可以通过使用以下命令直接编辑现有存储类：<block ref="04e7749715e986f27d9cb67434b65b72" prefix=" " category="inline-code"></block>允许体积膨胀。</block>
  <block id="d16fccbbd08210b8ff7b8b31329268bb" category="paragraph">Trident应该为该 PVC 创建一个 20 MiB 的 NFS PV：</block>
  <block id="3b16cea25bd4a9aaf5a9c3dcc13ea7eb" category="section-title">步骤 3：展开 PV</block>
  <block id="59dd268b21bd1a23faa29555b52ba22b" category="paragraph">要将新建的 20 MiB PV 调整为 1 GiB，请编辑 PVC 并进行设置<block ref="02b011e6fe36e26e5f7365ba08bf5a48" prefix=" " category="inline-code"></block>到 1 GiB：</block>
  <block id="4a59ce1bc63fd7e6333968fb4bbd9d45" category="section-title">步骤 4：验证扩展</block>
  <block id="36941664e357e5e47a63d528d3ff49b5" category="paragraph">您可以通过检查 PVC、PV 和Trident体积的大小来验证调整大小是否正确：</block>
  <block id="bf320e716fd5e77836a28acbf01fd5f2" category="summary">Kubernetes 持久卷 (PV) 的卷快照可以创建卷的某个时间点副本。您可以创建使用Trident创建的卷的快照，导入在Trident之外创建的快照，从现有快照创建新卷，以及从快照恢复卷数据。</block>
  <block id="6fddcf0bbb95fe4fb7de4f5f2e53ee74" category="paragraph">NetApp Trident提供了创建多个卷（一组卷快照）快照的功能，可用于创建持久卷 (PV) 的 Kubernetes 卷组快照。此卷组快照表示在同一时间点从多个卷中获取的副本。</block>
  <block id="54100cbc57b96027d8dd74891c09bf53" category="section-title">创建卷组快照</block>
  <block id="e5c9406711c4a7cf7784d95bdf1a2d03" category="paragraph">卷组快照受支持<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>该驱动程序仅适用于 iSCSI 协议，尚不支持光纤通道 (FCP) 或 NVMe/TCP。开始之前</block>
  <block id="5b01a9092d1abd7706608bb162c6b8b5" category="list-text">请确保您的 Kubernetes 版本为 K8s 1.32 或更高版本。</block>
  <block id="c1ec7161e63fe862aeb30466f8f3f3b8" category="list-text">要使用快照，您必须拥有外部快照控制器和自定义资源定义 (CRD)。这是 Kubernetes 编排器（例如：Kubeadm、GKE、OpenShift）的职责。</block>
  <block id="16a63a09f76aeddeabaee67b10b15b73" category="paragraph">如果您的 Kubernetes 发行版不包含外部快照控制器和 CRD，请参阅<block ref="048c22f74eff12037af96b48becdf135" category="inline-xref-macro-rx"></block>。</block>
  <block id="1f8b4b5fe121a8bf806f02d7e43e97b5" category="admonition">如果在 GKE 环境中创建按需卷组快照，则不要创建快照控制器。  GKE 使用内置的隐藏快照控制器。</block>
  <block id="651dc2c39783e984f4c34a8de9e5bdf1" category="list-text">在快照控制器 YAML 中，设置<block ref="ba99addb5e4a87e02dbb279026aee6f0" prefix=" " category="inline-code"></block>将功能门设置为“true”，以确保启用卷组快照。</block>
  <block id="8a30cbf1912a9801e2b44d7e46629b37" category="list-text">在创建卷组快照之前，请先创建所需的卷组快照类。</block>
  <block id="044fa4af347bac1f72b867321db43dc5" category="list-text">确保所有 PVC/卷都在同一 SVM 上，以便能够创建 VolumeGroupSnapshot。</block>
  <block id="b05416d74805ad470e82fbd185a80f60" category="inline-link-macro">卷组快照类</block>
  <block id="4142b8b09dc7a34d6ec584224ea12401" category="list-text">在创建 VolumeGroupSnapshot 之前，请先创建 VolumeGroupSnapshotClass。更多信息，请参阅<block ref="4379abd46d192befbb8bdad98f8a5d59" category="inline-link-macro-rx"></block>。</block>
  <block id="62db7d93a1dcd7da96e447092fe6fc94" category="list-text">使用现有的存储类别创建带有所需标签的 PVC，或者将这些标签添加到现有的 PVC。</block>
  <block id="e7593a56264dced725b58e1dcee9feba" category="paragraph">以下示例使用以下方法创建 PVC：<block ref="75b2ada4942bd6bef7c0a52dd98f7481" prefix=" " category="inline-code"></block>作为数据源和标签<block ref="976d0352c3b3c8881b2f195b2b26322b" prefix=" " category="inline-code"></block>。根据您的需求定义标签的键和值。</block>
  <block id="88ee2eefee7a24d49764bba2f82da06c" category="list-text">创建具有相同标签的卷组快照<block ref="976d0352c3b3c8881b2f195b2b26322b" prefix="(" category="inline-code"></block>）在PVC中规定。</block>
  <block id="9d802b9a265ada16030457d797e599c4" category="paragraph">此示例创建卷组快照：</block>
  <block id="52d80f524a1f3e7aa3025bacef197f8a" category="section-title">使用组快照恢复卷数据</block>
  <block id="ee9a128a343c337cf14116c1aecbb76c" category="paragraph">您可以使用作为卷组快照一部分创建的各个快照来恢复各个持久卷。您无法将卷组快照作为一个整体恢复。</block>
  <block id="8f580d002ee0bbc67930846839d50dbe" category="paragraph">使用卷快照恢复ONTAP CLI 将卷恢复到先前快照中记录的状态。</block>
  <block id="f84dc17e0595ca9097097e70b9b927e1" category="admonition">恢复快照副本时，现有卷配置将被覆盖。创建快照副本后对卷数据所做的更改将会丢失。</block>
  <block id="1738a6ff1f0b418ce16cf74aabdceff1" category="section-title">从快照进行原地体积恢复</block>
  <block id="f29961e077241efec95d259658aa48f1" category="paragraph">Trident利用快照提供快速、原位体积恢复功能<block ref="2aabb3b01d0d54317a9eeef910e001f6" prefix=" " category="inline-code"></block>（TASR）CR。此 CR 作为一项强制性 Kubernetes 操作，在操作完成后不会持久保存。</block>
  <block id="76716637a3c3927e6595526c04493e52" category="paragraph">有关详细信息，请参阅 <block ref="614ee046be6d137fe1c3eadbaba6d9fe" category="inline-link-macro-rx"></block>。</block>
  <block id="8b278511419cd00303a31bff3e658d7b" category="section-title">删除包含关联组快照的 PV</block>
  <block id="3f0f9a5202405094b6d608bca6feef12" category="paragraph">删除组卷快照时：</block>
  <block id="24c108ca3f67c96a3a0fc4a98ab3f465" category="list-text">您可以删除整个 VolumeGroupSnapshots，而不是删除组中的单个快照。</block>
  <block id="f3a07fd55b2a15dd2fe4a64f0a2e01e1" category="list-text">如果在持久卷存在快照的情况下删除该持久卷， Trident会将该卷移至“正在删除”状态，因为必须先删除快照才能安全地删除该卷。</block>
  <block id="982deda5497c5c5a268ba1212d419648" category="list-text">如果使用分组快照创建了克隆，然后要删除该组，则会开始在克隆时进行拆分操作，并且在拆分完成之前无法删除该组。</block>
  <block id="b1bc7c11251b98a19ba1fc0ad08275ed" category="section-title">部署卷快照控制器</block>
  <block id="9c87569b835a8f66b7490390d350d9a4" category="paragraph">如果您的 Kubernetes 发行版不包含快照控制器和 CRD，您可以按如下方式部署它们。</block>
  <block id="469f7ca16938508b5dcb777767828b70" category="list-text">创建卷快照 CRD。</block>
  <block id="a571dbb3887a364b4b4dcb82a5fa6ec9" category="list-text">创建快照控制器。</block>
  <block id="ae3ba2e438847d5fb2abc16b3c73ccab" category="admonition">如有必要，打开<block ref="31a2c725707ce238c3eb4dd82c7e3af9" prefix=" " category="inline-code"></block>并更新<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block>添加到您的命名空间。</block>
  <block id="f6bd0d7447ff66cc6b859603a88fbde9" category="section-title">相关链接</block>
  <block id="4379abd46d192befbb8bdad98f8a5d59" category="list-text"><block ref="4379abd46d192befbb8bdad98f8a5d59" category="inline-link-macro-rx"></block></block>
  <block id="35aa4a2a819e526c2e930e487df8d423" category="list-text"><block ref="35aa4a2a819e526c2e930e487df8d423" category="inline-link-macro-rx"></block></block>
  <block id="cf13ba16f33b5f6772614929649be6c2" category="summary">您可以使用以下方式将现有存储卷导入为 Kubernetes PV：<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block> 。</block>
  <block id="5f48c343984786005c9830d96c6fca87" category="doc">进口量</block>
  <block id="2e77d5277311f3a9232a73cdbbcd754b" category="section-title">概述和注意事项</block>
  <block id="822f23137373a7a374fd33ef3863c2de" category="paragraph">您可以将卷导入Trident以执行以下操作：</block>
  <block id="88541191ec5fe50ba0d21b4300401b85" category="list-text">将应用程序容器化并重用其现有数据集</block>
  <block id="77d782125cafbbf0fe1c5c95755d143f" category="list-text">为临时应用程序使用数据集的克隆版本</block>
  <block id="d265b515faaf05e2c32727d8b9742a78" category="list-text">重建失败的 Kubernetes 集群</block>
  <block id="6766ef9d5b11abf03ee72b55c5745f4b" category="list-text">在灾难恢复期间迁移应用程序数据</block>
  <block id="4c321a56c9c030449cd3315863de525b" category="paragraph">导入卷之前，请考虑以下事项。</block>
  <block id="15309597fffd67488a7a5dde3591144d" category="list-text">Trident只能导入 RW（读写）类型的ONTAP卷。 DP（数据保护）类型卷是SnapMirror目标卷。在将卷导入Trident之前，应该先断开镜像关系。</block>
  <block id="e47be4dcc849b534107f57afd92f801f" category="list-text">我们建议导入没有活动连接的卷。要导入正在使用的卷，请克隆该卷，然后执行导入操作。</block>
  <block id="e4618ea9b1ae23e5ed30f6f19e6a77e8" category="admonition">这对于块卷来说尤其重要，因为 Kubernetes 不知道之前的连接，很容易将活动卷附加到 pod 上。这可能导致数据损坏。</block>
  <block id="349d29de1123e1836103914780ffb39b" category="list-text">尽管<block ref="e1e2a331ab1d8dccfea06fc8e04e2f5d" prefix=" " category="inline-code"></block>必须在 PVC 上指定， Trident在导入过程中不使用此参数。在创建卷时，会使用存储类根据存储特性从可用存储池中进行选择。由于卷已存在，因此导入时无需选择存储池。因此，即使卷存在于与 PVC 中指定的存储类不匹配的后端或池中，导入也不会失败。</block>
  <block id="a31db9efd829f01dd21fdc97db2d29e4" category="list-text">现有容积尺寸在PVC中确定和设定。卷被存储驱动程序导入后，PV 会创建，并带有指向 PVC 的 ClaimRef。</block>
  <block id="604eea1f3df98285b6887ff059258827" category="list-text">回收策略初始设置为<block ref="16d79ff80feadcf2f52096f073f2b94a" prefix=" " category="inline-code"></block>在PV中。  Kubernetes 成功绑定 PVC 和 PV 后，回收策略会更新为与存储类的回收策略相匹配。</block>
  <block id="5d24684cf5054f53b1e945be75b37f69" category="list-text">如果存储类的回收策略是<block ref="099af53f601532dbd31e0ea99ffdeb64" prefix=" " category="inline-code"></block>当 PV 被删除时，存储卷也会被删除。</block>
  <block id="3edd5ccaa0382772ccb1cc5a409488a8" category="list-text">默认情况下， Trident管理 PVC，并在后端重命名FlexVol volume和 LUN。你可以通过<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>导入非托管卷的标志。如果你使用<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>在对象的生命周期内， Trident不会对 PVC 或 PV 执行任何额外的操作。删除 PV 时，存储卷不会被删除，其他操作（如卷克隆和卷调整大小）也会被忽略。</block>
  <block id="be303acf01bc566d5d211f228131bee4" category="admonition">如果您想使用 Kubernetes 来管理容器化工作负载，但又想在 Kubernetes 之外管理存储卷的生命周期，则此选项非常有用。</block>
  <block id="76057e180d7b3edcebaa935c7ccab687" category="list-text">在 PVC 和 PV 中添加注释，其作用有两个：一是指示卷已导入，二是指示 PVC 和 PV 是否已管理。此注释不应修改或删除。</block>
  <block id="db31dcd83fd57b294fb0340ea975015f" category="section-title">导入卷</block>
  <block id="61a1adebea5e6a017b4bd4b405ae4f52" category="paragraph">您可以使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block>导入卷。</block>
  <block id="8feb5f647cb423db7fa8a957ae4ef075" category="list-text">创建持久卷声明 (PVC) 文件（例如，<block ref="88bf8ee4d993e535425148da6a64c1c2" prefix=" " category="inline-code"></block> ) 将用于制造PVC。  PVC文件应包含<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>，<block ref="89801e9e98979062e84647433a8ed3e9" prefix=" " category="inline-code"></block> ，<block ref="1963d17f24888bdf1f22d7ea7f72f607" prefix=" " category="inline-code"></block> ， 和<block ref="ee822781a3bd0ae0f8f6331dc4865d9c" prefix=" " category="inline-code"></block>。  （可选）您可以指定<block ref="c005e78d4bd808038335c32dd84cf7da" prefix=" " category="inline-code"></block>在你的PVC定义中。</block>
  <block id="7f745c89a2e8fd59353bab523e12eb77" category="paragraph">以下是一个最低规格示例：</block>
  <block id="a9e31569460a0b133fdd97c5f482c04e" category="admonition">不要包含其他参数，例如 PV 名称或体积大小。这可能会导致导入命令失败。</block>
  <block id="7a06039f2c19a8797457cd811e999229" category="list-text">使用<block ref="a768f5449e3a83ac56f2fb8ab4562339" prefix=" " category="inline-code"></block>用于指定包含卷的Trident后端名称以及唯一标识存储上卷的名称的命令（例如： ONTAP FlexVol、Element Volume、 Cloud Volumes Service路径）。这<block ref="5338b151154663bac9980b0f044518f2" prefix=" " category="inline-code"></block>需要提供参数来指定PVC文件的路径。</block>
  <block id="37c0e0081d2fa3ebdf688df7e37ecd7a" category="paragraph">请查看以下卷导入示例，了解支持的驱动程序。</block>
  <block id="b8cd11aae04b2508e6cf401f43cdb4f9" category="section-title">ONTAP NAS 和ONTAP NAS FlexGroup</block>
  <block id="f610f3c991a9fe41a30dec78ba76caa8" category="paragraph">Trident支持使用以下方式导入卷：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>司机。</block>
  <block id="e214c4610b9128a251097b5d36c60e8b" category="list-text">Trident不支持使用<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> 司机。</block>
  <block id="15f21f5d1f84f4b986a4db037c57333d" category="list-text">这<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>驱动程序不允许重复的卷名称。</block>
  <block id="82ffd98bd5aacd62bc72d8aca0f53528" category="paragraph">每卷都是用以下方式创建的<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>driver 是ONTAP集群上的FlexVol volume。使用以下方式导入FlexVol卷<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>驱动程序的工作原理相同。已存在于ONTAP集群上的FlexVol卷可以作为卷导入。<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> PVC。同样， FlexGroup卷也可以导入为<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block>PVC。</block>
  <block id="3fa3bc64b029b88f42b842bb7dc4e52d" category="paragraph-title">ONTAP NAS 示例</block>
  <block id="77fe25c67ee05760d58e91a98e3ff055" category="paragraph">下面展示了托管卷和非托管卷导入的示例。</block>
  <block id="865c1a701e3847de9fbff4a375ac7177" category="open-title">托管卷</block>
  <block id="9baac1fff2f93c6aa6f2205921fe6b32" category="paragraph">以下示例导入一个名为“<block ref="b61fdc0d7fc5d08e674f3891a91d3116" prefix=" " category="inline-code"></block>在名为<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block>：</block>
  <block id="ed12f17a6dc2e65dfdf289eb64d258ae" category="open-title">未托管卷</block>
  <block id="2bde530216fea43a4e556d3bba5dce11" category="paragraph">使用时<block ref="e2b9359adf7cdd62fc784b5090c3c452" prefix=" " category="inline-code"></block>理由是， Trident不会重命名卷。</block>
  <block id="30690ec57cb4844d007f7d2e2c9393a2" category="paragraph">以下示例导入<block ref="60d9e6d88af815fe67aed90572f53184" prefix=" " category="inline-code"></block>在<block ref="b0253ee501e433d48faea12f8e40ef28" prefix=" " category="inline-code"></block>后端：</block>
  <block id="548fedaf4074fe2826e3c53dfd92a19e" category="section-title">ONTAP SAN</block>
  <block id="1b4288d16f58084404fbffe338e680fb" category="paragraph">Trident支持使用卷导入<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> （iSCSI、NVMe/TCP 和 FC）和<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 司机。</block>
  <block id="19cfd1d1df86c48cee153f9fbaa31f0f" category="paragraph">Trident可以导入包含单个 LUN 的ONTAP SAN FlexVol卷。这与<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> 驱动程序，它为每个 PVC 创建一个FlexVol volume，并在FlexVol volume内创建一个 LUN。Trident导入FlexVol volume并将其与 PVC 定义关联。Trident可以导入<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> 包含多个 LUN 的卷。</block>
  <block id="854d516b7e1eddbead5cbea0b17dac88" category="paragraph-title">ONTAP SAN 示例</block>
  <block id="76f6a2d1bd679fa4c1b485fed91cd412" category="paragraph">对于托管卷， Trident会将FlexVol volume重命名为<block ref="b1a57c8f543d163276a264ab84f98485" prefix=" " category="inline-code"></block>FlexVol volume中的 LUN 格式<block ref="1793051c27c3288cfb3a1c86e4e41b41" prefix=" " category="inline-code"></block>。</block>
  <block id="4e0dca66d693b4377c93d787e9d5176a" category="paragraph">以下示例导入了<block ref="9c263b72b293041bdc16e8711bb55a99" prefix=" " category="inline-code"></block>FlexVol volume存在于<block ref="5461c7e570fd7b4318a37f0dceb291c1" prefix=" " category="inline-code"></block>后端：</block>
  <block id="d172829ee06c1c52828b60f0544b2f06" category="paragraph">以下示例导入<block ref="a5c0fa75ec8cf92d22eadab558660dda" prefix=" " category="inline-code"></block>在<block ref="2dec4fe0d108047546d031f48f4073f7" prefix=" " category="inline-code"></block>后端：</block>
  <block id="58f7692a8b6ce5b3fa31b6daec3259fe" category="paragraph">如果将 LUN 映射到与 Kubernetes 节点 IQN 共享同一 IQN 的 igroup，如下例所示，则会收到以下错误：<block ref="4524d417d10c9cf90c4a674da76c4964" prefix=" " category="inline-code"></block> 。您需要移除启动器或取消映射 LUN 才能导入卷。</block>
  <block id="5ccef908ed30c9dac1afd0a7f3dc5e7f" category="inline-image-macro">LUNS 映射到 iqn 和聚类 iqn 的图像。</block>
  <block id="81238a539b4fc11fb20c6d27db1e5d33" category="paragraph"><block ref="81238a539b4fc11fb20c6d27db1e5d33" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df1e93e323319db2375e3d3dad7fb9cc" category="paragraph">Trident支持使用NetApp Element软件和NetApp HCI卷导入<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>司机。</block>
  <block id="49fdf43d32dad9fda984acfedf0be04f" category="admonition">Element驱动程序支持重复的卷名​​称。但是，如果卷名称重复， Trident会返回错误。作为一种变通方法，克隆卷，提供一个唯一的卷名称，然后导入克隆的卷。</block>
  <block id="d12ef9e4a047861afd11513bde147f35" category="paragraph-title">元素示例</block>
  <block id="e91134286ebcca5f894ca859ce6e6527" category="paragraph">以下示例导入一个<block ref="ce9d6be888db333d9f15ad3ca22aab5c" prefix=" " category="inline-code"></block>后端容量<block ref="54034d50b7e92e0dd9d45b9be754d7bd" prefix=" " category="inline-code"></block>。</block>
  <block id="5c9ef0d871938dccceb29ee63fad8ddb" category="section-title">Google Cloud Platform</block>
  <block id="13bad29adee620ad0bb1075fdf0e45b0" category="paragraph">Trident支持使用以下方式导入卷：<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>司机。</block>
  <block id="b83141d187ef372685e66e6dfe4cabd9" category="admonition">要将由NetApp Cloud Volumes Service支持的卷导入 Google Cloud Platform，请通过卷路径识别该卷。卷路径是卷导出路径中位于以下位置之后的部分：<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block> 。例如，如果导出路径是<block ref="3bbe8dafc880d124219c1e4f73d41cf9" prefix=" " category="inline-code"></block>体积路径为<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="9dfa04a9ad04eba811811f2fbd0f5f0e" category="paragraph-title">Google Cloud Platform 示例</block>
  <block id="dd8d0b5581c0eb32a23d802032124024" category="paragraph">以下示例导入一个<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block>后端容量<block ref="b242744397b7d8bc9391b3e836628c5e" prefix=" " category="inline-code"></block>具有体积路径<block ref="8886a1ac9f5b94f2fb54d752c304777f" prefix=" " category="inline-code"></block>。</block>
  <block id="781d7167559669ccd02b24925b4be62e" category="paragraph">Trident支持使用以下方式导入卷：<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>司机。</block>
  <block id="7501988e9549daa8c2fcd13e55b9fc78" category="admonition">要导入Azure NetApp Files卷，请通过卷路径识别该卷。卷路径是卷导出路径中位于以下位置之后的部分：<block ref="fb256b96ee496724e4579987e5a6e4da" prefix=" " category="inline-code"></block> 。例如，如果挂载路径是<block ref="a88065dde27cea3a008a18172c5a9c9e" prefix=" " category="inline-code"></block>体积路径为<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="1cfd9b4e20d41cdca62f758d3b0cb58b" category="paragraph-title">Azure NetApp Files示例</block>
  <block id="bd46b0a8c2c4c89a60ee85052ad2dd0e" category="paragraph">以下示例导入一个<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block>后端容量<block ref="d8dd89ab9d39f5487714722f9becb468" prefix=" " category="inline-code"></block>体积路径<block ref="062b749476713f7b5bbc675159e90bad" prefix=" " category="inline-code"></block>。</block>
  <block id="aa39e6a781613c350b8408df39aa0171" category="paragraph">Trident支持使用以下方式导入卷：<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>司机。</block>
  <block id="89df083c083e8cfa84ef1517f2b9e609" category="paragraph-title">Google Cloud NetApp Volumes示例</block>
  <block id="3312627a317726be3901705d655e8582" category="paragraph">以下示例导入一个<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>后端容量<block ref="c082d32d434314708cccf35dd974ac32" prefix=" " category="inline-code"></block>音量<block ref="acdf8df0c694db089171ecaf51f80166" prefix=" " category="inline-code"></block>。</block>
  <block id="94154cfb6a6056267c34a431cd1a4224" category="paragraph">以下示例导入一个<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>当两个体积存在于同一区域时，体积为：</block>
  <block id="91df12d96329d2a5cdfb509205e68b38" category="summary">Trident提供了多种卷管理​​功能。了解Trident在大批量处理方面所能提供的功能。</block>
  <block id="b42cbc6e68075c106b9faa27e4931091" category="doc">执行批量操作</block>
  <block id="3f21653d19d6382928f806e17a3ab1c4" category="paragraph">了解Trident提供的卷管理功能。</block>
  <block id="690b3c7311638da5eef87f5e07aa1258" category="section-title">管理容量</block>
  <block id="ca5acbb90042e065e5dd4eb793ef320c" category="paragraph">请参考以下内容，了解如何使用Trident管理您的卷。</block>
  <block id="9e325272e7aed7c7bd6c28ff6fa4a90f" category="list-text"><block ref="9e325272e7aed7c7bd6c28ff6fa4a90f" category="inline-link-macro-rx"></block></block>
  <block id="e5879288a130fbd8d0b8682cfc375c4f" category="inline-link-macro">使用快照</block>
  <block id="c499fa59a1c9a0f6da195782a581f2e3" category="list-text"><block ref="c499fa59a1c9a0f6da195782a581f2e3" category="inline-link-macro-rx"></block></block>
  <block id="56661e701892ff873e44b62ffeec85e5" category="list-text"><block ref="56661e701892ff873e44b62ffeec85e5" category="inline-link-macro-rx"></block></block>
  <block id="c0417f5bbd54c5dc1c3704d6b566fcf3" category="list-text"><block ref="c0417f5bbd54c5dc1c3704d6b566fcf3" category="inline-link-macro-rx"></block></block>
  <block id="022571ee546e1a953d857961a8cd0442" category="paragraph">创建一个使用已配置的 Kubernetes StorageClass 的 PersistentVolumeClaim (PVC) 来请求访问 PV。然后您可以将光伏组件安装到支架上。</block>
  <block id="79a251ee7369fdcdb0847d35254afcf8" category="paragraph">制作好PVC管后，就可以将管体安装到管座中。</block>
  <block id="992728eeb1163799bd688cfe5e57035b" category="paragraph-title">PVC管材，带RWO通道</block>
  <block id="cdeec5159e0548de993d76d7d1dcc992" category="paragraph">此示例展示了一个具有 RWO 访问权限的基本 PVC，它与一个名为 StorageClass 的 StorageClass 相关联。<block ref="1c62ceba602064183a6346b85fe26c96" prefix=" " category="inline-code"></block> 。</block>
  <block id="75c7c68d9eb17c22ec8df28a1e23f275" category="paragraph-title">PVC 和 NVMe/TCP</block>
  <block id="ed463de3671571836f800949d75f3af8" category="paragraph">此示例展示了一个与名为 StorageClass 的 StorageClass 关联的、具有 RWO 访问权限的 NVMe/TCP 基本 PVC。<block ref="63f9100803e1f67a5e33cbd5da9dbb33" prefix=" " category="inline-code"></block> 。</block>
  <block id="973fab696ba8e345f617c87c4de97607" category="example-title">Pod清单示例</block>
  <block id="15f15289009d52be4af3e9951853eee5" category="paragraph">这些示例展示了将 PVC 连接到舱体的基本配置。</block>
  <block id="416206518e27ed2ec8b8e0876078af35" category="listing-title">基本配置</block>
  <block id="b9fa7c201e2dc76fe12c8bb436c212ee" category="listing-title">基本 NVMe/TCP 配置</block>
  <block id="fb72ca78c839cefc52d39ebcecaf6827" category="paragraph">卷快照受支持<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> ， 和<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block>司机。</block>
  <block id="d0838c5cbd45cca11f4f53eb773d017d" category="paragraph">如果您的 Kubernetes 发行版不包含快照控制器和 CRD，请参阅<block ref="048c22f74eff12037af96b48becdf135" category="inline-xref-macro-rx"></block>。</block>
  <block id="0b8ca2be5f4fe564fb8e843cbc53703d" category="admonition">如果在 GKE 环境中创建按需卷快照，则不要创建快照控制器。  GKE 使用内置的隐藏快照控制器。</block>
  <block id="c4f5303a406f47eb87bf815d986165ee" category="section-title">创建卷快照</block>
  <block id="19476662cd814e0aa085eca121de89b8" category="inline-link-macro">卷快照类</block>
  <block id="86690b5147c7d6867042b834d17ef28b" category="list-text">创建一个<block ref="19476662cd814e0aa085eca121de89b8" prefix=" " category="inline-code"></block>更多信息，请参阅……<block ref="0ad6a602adca2b32136ef84f7518b131" category="inline-link-macro-rx"></block> 。</block>
  <block id="27aa53a8adee533e027b5b2a725716da" category="list-text">这<block ref="e2d45d57c7e2941b65c6ccd64af4223e" prefix=" " category="inline-code"></block>指向Trident CSI 驱动程序。</block>
  <block id="eea37fbd5872936b77e1e2e8a4af0cea" category="list-text"><block ref="98e7d6463271d7848db255ae6467817a" prefix="" category="inline-code"></block>可以<block ref="f2a6c498fb90ee345d997f888fce3b18" prefix=" " category="inline-code"></block>或者<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>。设置为<block ref="afece4245269582cb2f1009d4fb52047" prefix=" " category="inline-code"></block>即使发生以下情况，存储集群上的底层物理快照仍会被保留：<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>对象已被删除。</block>
  <block id="0c9cf2ac15a6b5c5324b08e91b840fa4" category="list-text">创建现有PVC的快照。</block>
  <block id="a599393b295f7ad56a8c7f1d327290de" category="list-text">此示例创建现有 PVC 的快照。</block>
  <block id="8f72fd9aa081cd83550f8e13086b8967" category="list-text">此示例为名为“<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>快照名称设置为<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block>。  VolumeSnapshot 类似于 PVC，并且与某个 PVC 相关联。<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>代表实际快照的对象。</block>
  <block id="4a2834678b378c24001efcc2f1ca5238" category="list-text">你可以识别出<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>对象为<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block>通过描述来获取卷快照。这<block ref="25fb031d6a134e0fb5a240d6d4c12b01" prefix=" " category="inline-code"></block>标识提供此快照的 VolumeSnapshotContent 对象。这<block ref="a701d928aada0f89c8ad0abc16ccdfcc" prefix=" " category="inline-code"></block>该参数表明快照可用于创建新的 PVC。</block>
  <block id="a7fab4013a8993c3310ee07c7e101fc1" category="section-title">从卷快照创建PVC</block>
  <block id="698ebb07855a850e7bcbd189f9322e21" category="paragraph">您可以使用<block ref="d9d448f70687a1aa1f12b2f5ddaa4977" prefix=" " category="inline-code"></block>使用名为 VolumeSnapshot 的 VolumeSnapshot 创建 PVC<block ref="38741d2dca753415660b08a54f8ad3a9" prefix=" " category="inline-code"></block>作为数据来源。  PVC管制作完成后，可以将其连接到舱体上，并像其他PVC管一样使用。</block>
  <block id="475fb21c20bb54ea8ac6cb1756aba565" category="inline-link-macro">知识库：无法在备用后端从Trident PVC 快照创建 PVC。</block>
  <block id="18051638f30f342b517379b11f0442f9" category="admonition">PVC 将在与源卷相同的后端创建。参考<block ref="0d4d7e7a69b413699039bc9b916a37d5" category="inline-link-macro-rx"></block>。</block>
  <block id="8d9f716dc04d23bb9af0a64fef3bbbd9" category="paragraph">以下示例使用以下方法创建 PVC：<block ref="2599ab7993e15386327b6345bc1cc4e1" prefix=" " category="inline-code"></block>作为数据源。</block>
  <block id="c2d480d58505386b1609d69c842aaf44" category="section-title">导入卷快照</block>
  <block id="868f2cc6f424bbd531c3ac4f053a8125" category="inline-link-macro">Kubernetes 预配置快照流程</block>
  <block id="443fed0e44021bc800c6840b6a2c8191" category="paragraph">Trident支持<block ref="a3174ff04e144786ca73f65ec9b76f58" category="inline-link-macro-rx"></block>使集群管理员能够创建<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>在Trident之外创建的对象和导入快照。</block>
  <block id="5de65a931e7f0117030dde1d54eff5f4" category="paragraph">Trident肯定创建或导入了快照的父卷。</block>
  <block id="a06ecac9b140cf61cd5d4a82c88c488a" category="list-text">*集群管理员：* 创建一个<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>引用后端快照的对象。这将启动Trident中的快照工作流程。</block>
  <block id="44ce6c838becb17913e38bbe2b0096fe" category="list-text">指定后端快照的名称<block ref="4ab6864fc58ecd8b598ee10dfe2ac311" prefix=" " category="inline-code"></block>作为<block ref="d42b3f1355513faa92e8e6b438dffc73" prefix=" " category="inline-code"></block>。</block>
  <block id="d480294e263bd9916f014824428ddbca" category="list-text">指定<block ref="62c99546614b1610927a47ea682b6d63" prefix=" " category="inline-code"></block>在<block ref="39133e4ee9648ecb1a2dae934a22788a" prefix=" " category="inline-code"></block>这是外部快照程序提供给Trident的唯一信息。<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block>称呼。</block>
  <block id="e0668acdd6b1e131a130998184f4f7fc" category="admonition">这<block ref="8773ea16ee304585aa1da2afd8f25434" prefix=" " category="inline-code"></block>由于 CR 命名限制，有时无法与后端快照名称完全匹配。</block>
  <block id="90a9b62f2d9107ff002b3ffcff75c334" category="paragraph">以下示例创建了一个<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>引用后端快照的对象<block ref="82645407d5a235bd775551b0a8455cd1" prefix=" " category="inline-code"></block>。</block>
  <block id="b385a638aafc60dc851702d7207b1460" category="list-text">*集群管理员：* 创建<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>引用 CR<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>目的。这是对使用权限的请求<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>在给定的命名空间中。</block>
  <block id="4fd027fecd2883c25a41ecd68536b1d6" category="paragraph">以下示例创建了一个<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>CR命名<block ref="117b36cc8905f43e1ffd580e8b17723b" prefix=" " category="inline-code"></block>指的是<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>命名<block ref="ae79a6ea6405531b451963557819c96a" prefix=" " category="inline-code"></block>。</block>
  <block id="3e36f7927fcc85da94d36bcb51457a89" category="list-text">*内部处理（无需操作）：* 外部快照程序识别新创建的内容<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>并运行<block ref="b4dfa9524f461a609ad4726f69b847e9" prefix=" " category="inline-code"></block>称呼。Trident创造了<block ref="9a303ae09fee10afe60e5fd9e00e5e45" prefix=" " category="inline-code"></block>。</block>
  <block id="92aa04a2cf75f40187ef422ef48baa9f" category="list-text">外部快照程序设置<block ref="d6a1ae997b76c43d7aaf3b22e620401e" prefix=" " category="inline-code"></block>到<block ref="bdc3aa73b1bbfc0b0212a8f6a8bb2077" prefix=" " category="inline-code"></block>以及<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>到<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。</block>
  <block id="f6e6b6f8bbabf2b4d61efaa16f96f7c7" category="list-text">Trident回归<block ref="0253f5e864e2646df8eab03ca4f066ee" prefix=" " category="inline-code"></block>。</block>
  <block id="2fae3f8997b56adf73a63fcf9e10a75d" category="list-text">*任何用户：* 创建一个<block ref="2b3f8e4d49589c4452db0a07d619d824" prefix=" " category="inline-code"></block>参考新的<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>，其中<block ref="be455c19a1930c91806853db05c277d9" prefix=" " category="inline-code"></block>（或者<block ref="43cbd4bd62b601d2f5e0b618220b0f44" prefix=" " category="inline-code"></block>名称是<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>姓名。</block>
  <block id="5581736d9cc57d1f1193e52f799c03b2" category="paragraph">以下示例创建一个引用 PVC 的<block ref="310a3378435f31620fbc3e7831ac7286" prefix=" " category="inline-code"></block>命名<block ref="117b36cc8905f43e1ffd580e8b17723b" prefix=" " category="inline-code"></block>。</block>
  <block id="c48edc45b9266a1f0d1869ac35615605" category="section-title">使用快照恢复卷数据</block>
  <block id="4714f3cf4c41291cc2dae88a7150cbe5" category="paragraph">默认情况下，快照目录是隐藏的，以确保使用以下方式配置的卷的最大兼容性：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block>和<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block>司机。启用<block ref="a15da8cecb1f1192c4d913b8ba676121" prefix=" " category="inline-code"></block>直接从快照恢复数据的目录。</block>
  <block id="0219777660eb822cd45c74808c60e5e6" category="paragraph">Trident支持快照恢复<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> ，<block ref="94594b2ccbc8e0d220ad37504461650b" prefix=" " category="inline-code"></block> ， 和<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>司机。</block>
  <block id="e0bc0596a7d966cd8dab3ee0e924c9b5" category="paragraph">您必须拥有已绑定的PVC和可用的卷快照。</block>
  <block id="d785d18f53979794a4ef9e08d186e3c4" category="list-text">确认PVC状态是否已绑定。</block>
  <block id="d0f2b7254060d8a37c98c1eb4289586d" category="list-text">确认卷快照已准备就绪。</block>
  <block id="da6aadede1bc870c9042c660fdf93f25" category="list-text">创建 TASR CR。此示例为PVC创建CR。<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>和卷快照<block ref="06f2874897d3ec8426ec85e0ffda5544" prefix=" " category="inline-code"></block>。</block>
  <block id="68fb76b60d3c1f9302a04ef3eb761c08" category="admonition">TASR CR 必须位于 PVC 和 VS 存在的命名空间中。</block>
  <block id="0c9991859e53bf37c58a2fd1233eb478" category="list-text">应用 CR 从快照恢复。此示例从快照恢复<block ref="30520f4f96804df83914260b79f55962" prefix=" " category="inline-code"></block>。</block>
  <block id="5a71b77feca506fc8eba218b4e65048b" category="paragraph">Trident从快照中恢复数据。您可以验证快照恢复状态：</block>
  <block id="91f853f4fc1dc83a1a2f28c65af59d28" category="list-text">大多数情况下， Trident不会在操作失败后自动重试。您需要再次执行此操作。</block>
  <block id="c83b74c2020dd836f5b401ecda0da78c" category="list-text">没有管理员权限的 Kubernetes 用户可能需要管理员授予权限才能在其应用程序命名空间中创建 TASR CR。</block>
  <block id="35d57da577b5f55299f7644e8b2de091" category="section-title">删除包含关联快照的 PV</block>
  <block id="9d577c00c4cbb5d99e7a8a6589113669" category="paragraph">删除具有关联快照的持久卷时，相应的Trident卷将更新为“正在删除”状态。删除卷快照以删除Trident卷。</block>
  <block id="d63cadc96caf4b05f8fa532b08e889da" category="list-text"><block ref="d63cadc96caf4b05f8fa532b08e889da" category="inline-link-macro-rx"></block></block>
  <block id="cff310c77e35cf2f693ebbb39c78e89f" category="summary">Trident支持在源卷和目标卷之间创建镜像关系，以复制卷进行灾难恢复。</block>
  <block id="d075b47d76ffc95cce31e3ff1a3bf887" category="paragraph">Trident支持一个集群上的源卷与对等集群上的目标卷之间的镜像关系，用于复制数据以实现灾难恢复。  您可以使用名为Trident镜像关系 (TMR) 的命名空间自定义资源定义 (CRD) 来执行以下操作：</block>
  <block id="a682d8ef86abcae6c5a1db6186c5f02b" category="list-text">在体积（PVC）之间建立镜像关系</block>
  <block id="31a8f98d3378661a5b8abf15438f0bca" category="list-text">移除卷之间的镜像关系</block>
  <block id="a6349012892be516e5729d501a9649a7" category="list-text">打破镜像关系</block>
  <block id="2597cb6d27f572bb6d7d2fd15f414795" category="list-text">在灾难情况下（故障转移）提升备用卷的可用性</block>
  <block id="40f7c55be912a395aed2502927d3fcfa" category="list-text">在计划内故障转移或迁移期间，实现应用程序在集群间的无损迁移。</block>
  <block id="d193cd9a2432eca22e5cf0d06dcee1e6" category="section-title">复制的前提条件</block>
  <block id="55be807bf2be012ff44a04449cc5e8a8" category="paragraph">开始之前，请确保满足以下先决条件：</block>
  <block id="3404cce75db90acf6a9d52860721a139" category="list-title">ONTAP集群</block>
  <block id="fbcc2a3b7506e5e36eb6f61b69bb75da" category="list-text">* Trident *：使用ONTAP作为后端的源 Kubernetes 集群和目标 Kubernetes 集群上必须存在Trident版本 22.10 或更高版本。</block>
  <block id="5cc8ada79224d850ecd22fd22e550c47" category="list-title">对等</block>
  <block id="02b05cdd8f0a8c426f307085cc1004f7" category="list-text">*集群和 SVM*： ONTAP存储后端必须相互连接。请参阅<block ref="60333a598df416e49fbceb5a88dce370" category="inline-link-rx"></block>了解更多信息。</block>
  <block id="792f00dfd96560df18fe1c6b56861893" category="list-text">* Trident和 SVM*：对等远程 SVM 必须可供目标集群上的Trident使用。</block>
  <block id="0c5e1b5bc54261ccadd2a72af1047ded" category="paragraph-title">支持的驱动程序</block>
  <block id="2d78d4f2531b53f3a4980133900540f7" category="paragraph">NetApp Trident支持使用NetApp SnapMirror技术进行卷复制，该技术使用以下驱动程序支持的存储类：**<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ：NFS **<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ：iSCSI **<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ：FC **<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ：NVMe/TCP（最低要求ONTAP版本 9.15.1）</block>
  <block id="a6d2a1b8501003e74309a1ac77e249d4" category="admonition">ASA r2 系统不支持使用SnapMirror进行卷复制。有关ASA r2 系统的信息，请参阅<block ref="40f055dd42976ff294174231df35e37e" category="inline-link-macro-rx"></block>。</block>
  <block id="3ce5b83f8896ef0d2e356d3972ec8898" category="section-title">制作镜面PVC</block>
  <block id="427a1ab7f39ee4f2dd7a0b7e35f572da" category="paragraph">按照这些步骤，并使用 CRD 示例，在主卷和辅助卷之间创建镜像关系。</block>
  <block id="4dc69f665f0d76c17a577a352dd15b25" category="list-text">在主 Kubernetes 集群上执行以下步骤：</block>
  <block id="cffc5263be00a76539edeeff72190d54" category="list-text">使用以下方式创建一个 StorageClass 对象<block ref="23041ca302bab724a5a0a4ee923c745d" prefix=" " category="inline-code"></block>范围。</block>
  <block id="f1fe26832c26eb686c85bd72da8a62f1" category="list-text">使用先前创建的 StorageClass 创建 PVC。</block>
  <block id="a306778c7affcc4dd2329c7f1e9a6389" category="list-text">使用本地信息创建镜像关系变更请求。</block>
  <block id="12551ccb4392cf7715384812c34ff7dc" category="paragraph">Trident获取卷的内部信息和卷的当前数据保护 (DP) 状态，然后填充 MirrorRelationship 的状态字段。</block>
  <block id="7e36329a511f28054ceb0cb2aba7de3a" category="list-text">获取 TridentMirrorRelationship CR 以获取 PVC 的内部名称和 SVM。</block>
  <block id="ce01c03f932076e82348fc5aaefacc7d" category="list-text">在辅助 Kubernetes 集群上执行以下步骤：</block>
  <block id="dbe7fac150e57be9bc0d8e046792f4c3" category="list-text">创建一个 StorageClass，并设置 trident.netapp.io/replication: true 参数。</block>
  <block id="01d68e0f9630c032dc8a33358e46e65b" category="list-text">创建包含目标和源信息的镜像关系 CR。</block>
  <block id="b4dcd7f617380594be36d544e6823841" category="paragraph">Trident将使用配置的关系策略名称（或ONTAP的默认值）创建SnapMirror关系并对其进行初始化。</block>
  <block id="4ba5d2a91c95149a7ad924ebd0d9503d" category="list-text">创建一个 PVC，使用先前创建的 StorageClass 作为辅助存储类（SnapMirror目标）。</block>
  <block id="14c271d9e62dcf6baaab0fde456f080f" category="paragraph">Trident将检查 TridentMirrorRelationship CRD，如果该关系不存在，则创建卷失败。如果存在此关系， Trident将确保将新的FlexVol volume放置在与 MirrorRelationship 中定义的远程 SVM 对等的 SVM 上。</block>
  <block id="e71d1a5cbaac30e63ed507e4b62c705f" category="section-title">卷复制状态</block>
  <block id="d802b3b47bb3c6b52714c9817598fcb8" category="paragraph">Trident镜像关系 (TMR) 是一种 CRD，它表示 PVC 之间复制关系的一端。目标 TMR 具有一个状态，该状态告诉Trident期望的状态是什么。目的地 TMR 具有以下状态：</block>
  <block id="546afd3b22376f948ae8d790e441d7da" category="list-text">*已建立*：本地 PVC 是镜像关系的目标量，这是一个新的关系。</block>
  <block id="724cfb5ec8bac42a80699bb79c4eccb9" category="list-text">*已推广*：本地 PVC 可读写且可安装，目前没有镜像关系。</block>
  <block id="d323366aa32e60d08a0f93bda543af47" category="list-text">*重新建立*：本地 PVC 是镜像关系的目标量，并且之前也处于该镜像关系中。</block>
  <block id="4c3cd5b62a43e82e03fffa6b238ed918" category="list-text">如果目标卷曾经与源卷存在关联，则必须使用重新建立的状态，因为它会覆盖目标卷的内容。</block>
  <block id="b2e7dc07859cd924ca5706b299986e57" category="list-text">如果卷之前未与源建立关系，则重新建立状态将失败。</block>
  <block id="93f9c6ccc7d85e709509db31891ae5eb" category="section-title">在计划外故障切换期间促进辅助PVC的运行</block>
  <block id="4a76c8d930ec18b5aedc26b5d8e5246f" category="paragraph">在辅助 Kubernetes 集群上执行以下步骤：</block>
  <block id="78ac02218b5a9367bdcb4881538477cc" category="list-text">将 TridentMirrorRelationship 的 _spec.state_ 字段更新为<block ref="1fe57d6202c7cfbb0ee344b1e0a6fb37" prefix=" " category="inline-code"></block>。</block>
  <block id="ffe4cfc202d643b50342b93a4a11a82f" category="section-title">在计划故障切换期间推广备用PVC</block>
  <block id="1d60b89a076d7f30b8efdef50e842f68" category="paragraph">在计划故障转移（迁移）期间，执行以下步骤以提升辅助 PVC：</block>
  <block id="3310d9a60c164accb7c262ab6e9fbc65" category="list-text">在主 Kubernetes 集群上，创建 PVC 的快照，并等待快照创建完成。</block>
  <block id="8b17b79902950942165541a8ab704363" category="list-text">在主 Kubernetes 集群上，创建 SnapshotInfo CR 以获取内部详细信息。</block>
  <block id="678346d79faaa65b2da52e6d7ddce845" category="list-text">在辅助 Kubernetes 集群上，将 _TridentMirrorRelationship_ CR 的 _spec.state_ 字段更新为 _promoted_，并将 _spec.promotedSnapshotHandle_ 更新为快照的内部名称。</block>
  <block id="7b007b14980acd66e9301e02a5670f47" category="list-text">在辅助 Kubernetes 集群上，确认 TridentMirrorRelationship 的状态（status.state 字段）是否已提升。</block>
  <block id="f69101c0107c4bbf8f0ccc9141beb68b" category="section-title">故障转移后恢复镜像关系</block>
  <block id="9a023cbe1d3be933d8edb6228f9901ce" category="paragraph">在恢复镜像关系之前，选择你想作为新主要方的那一方。</block>
  <block id="1c7011adbcc0afa258396aff4f10266b" category="list-text">在辅助 Kubernetes 集群上，确保 TridentMirrorRelationship 上的 _spec.remoteVolumeHandle_ 字段的值已更新。</block>
  <block id="ffb25f01fda2538ae98bc0c4b4d465a6" category="list-text">在辅助 Kubernetes 集群上，将 TridentMirrorRelationship 的 _spec.mirror_ 字段更新为<block ref="036bbe13de7250844b100bc381b59214" prefix=" " category="inline-code"></block>。</block>
  <block id="41a593c0bede63aac2726a18e4599087" category="section-title">附加手术</block>
  <block id="567147b40ff26562a6dfcddbde29e62e" category="paragraph">Trident支持对主卷和辅助卷执行以下操作：</block>
  <block id="253093d00b66ff2357df5085c04b2758" category="section-title">将主PVC复制到新的辅助PVC</block>
  <block id="301dcece9e67241c29ebbbac8a94274e" category="paragraph">请确保您已备有主PVC管和备用PVC管。</block>
  <block id="7f1c32cba6b98d1db7f3dfda1df76189" category="list-text">从已建立的辅助（目标）集群中删除 PersistentVolumeClaim 和 TridentMirrorRelationship CRD。</block>
  <block id="e655fd5342cff178f54ae5f5b2a3b7b6" category="list-text">从主（源）集群中删除 TridentMirrorRelationship CRD。</block>
  <block id="3eb69a135044d3f308d140dccb1dbe5e" category="list-text">在主（源）集群上为要建立的新辅助（目标）PVC 创建一个新的 TridentMirrorRelationship CRD。</block>
  <block id="92c650dfb6284b5d24ed0e83a2338fa0" category="section-title">调整镜像、主或次级PVC的尺寸</block>
  <block id="66990a43216d28b5b6818b021d397574" category="paragraph">PVC 可以像往常一样调整大小，如果数据量超过当前大小， ONTAP将自动扩展任何目标 flevxols。</block>
  <block id="4e2626fed5da19a4be8255f16a331609" category="section-title">从 PVC 中移除复制</block>
  <block id="e1abf7fa65d845d34c33d593ed070453" category="paragraph">要移除复制，请对当前辅助卷执行以下操作之一：</block>
  <block id="b3dd2c563dffb09f03c72bc16a72be62" category="list-text">删除辅助 PVC 上的镜像关系。这会破坏复制关系。</block>
  <block id="413ab8e64d0d4ccb3f08ef2a8653a525" category="list-text">或者，将 spec.state 字段更新为 _promoted_。</block>
  <block id="c00cff9971607d7a0409066a0ecc3bcd" category="section-title">删除一个PVC（之前已镜像）</block>
  <block id="e52ffc7f9894586bbf7c4260d92073c4" category="paragraph">Trident会检查是否存在复制的 PVC，并在尝试删除卷之前释放复制关系。</block>
  <block id="8ec9c60105332c1be8facc42b496e14b" category="section-title">删除 TMR</block>
  <block id="a956a14d229badbbde1032651b3586fd" category="paragraph">删除镜像关系一侧的 TMR 会导致剩余的 TMR 在Trident完成删除之前转换为 _promoted_ 状态。如果选择删除的 TMR 已处于 _promoted_ 状态，则不存在镜像关系，TMR 将被删除， Trident会将本地 PVC 提升为 _ReadWrite_。此删除操作会释放ONTAP中本地卷的SnapMirror元数据。如果将来要将此卷用于镜像关系，则在创建新的镜像关系时，必须使用具有 _established_ 卷复制状态的新 TMR。</block>
  <block id="d41660149eb8930ad76a1dfe3dc5f2e3" category="section-title">ONTAP在线时，更新镜像关系</block>
  <block id="7079164c5ba86439b0719782591106dd" category="paragraph">镜像关系建立后可以随时更新。您可以使用<block ref="abb3a949c6d70e3e5d92f4ad2bf143a3" prefix=" " category="inline-code"></block>或者<block ref="ff0b4e3d4dfe8f6074b6943947345d4d" prefix=" " category="inline-code"></block>用于更新关系的字段。将目标卷提升为常规读写卷时，可以使用 _promotedSnapshotHandle_ 指定要将当前卷还原到的特定快照。</block>
  <block id="4eecab048a7c90cfb92e0f04884686e8" category="section-title">ONTAP离线时更新镜像关系</block>
  <block id="e782fcb9f3e7e8fa8b5ccdb3169c0e42" category="paragraph">您可以使用 CRD 执行SnapMirror更新，而无需Trident与ONTAP集群直接连接。请参考以下 TridentActionMirrorUpdate 的示例格式：</block>
  <block id="bc08468157c4a9e3a30eed7ba64cc309" category="paragraph"><block ref="1f9dfae8a369525bce4996df40963532" prefix="" category="inline-code"></block>反映 TridentActionMirrorUpdate CRD 的状态。它可以取值 _成功_、_进行中_或_失败_。</block>
  <block id="c179bf71b229cad4b31c8b19407ab978" category="summary">使用Trident，您可以在主命名空间中创建卷，并在一个或多个辅助命名空间中共享该卷。</block>
  <block id="19eb1a22d8687def5fb4904d3402728a" category="doc">跨命名空间共享 NFS 卷</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="section-title">功能</block>
  <block id="eeef56d54787b9aa6bd579f2e856b658" category="paragraph">TridentVolumeReference CR 允许您在一个或多个 Kubernetes 命名空间之间安全地共享 ReadWriteMany (RWX) NFS 卷。这种 Kubernetes 原生解决方案具有以下优点：</block>
  <block id="6b456f0abe4c4d2f0beb62e5985136cf" category="list-text">多级访问控制以确保安全性</block>
  <block id="6e5d93bf8e8aaaa4795a50f012bc8fea" category="list-text">适用于所有Trident NFS 卷驱动程序</block>
  <block id="0ece56dd58b5aabac15e0d0a30553bc0" category="list-text">不依赖 tridentctl 或任何其他非原生 Kubernetes 功能</block>
  <block id="b6fcfcfd30bda2a77ebc74f23270f581" category="paragraph">此图展示了跨两个 Kubernetes 命名空间的 NFS 卷共享。</block>
  <block id="45208a2cac11f33c3e6af84d444ac7c5" category="image-alt">跨命名空间共享的概念图。</block>
  <block id="f5b36cc36c8381e7577788dd4db2019d" category="paragraph">只需几个步骤即可设置NFS卷共享。</block>
  <block id="32ec9b4824220f8ae03a723da009cd54" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>配置源PVC以共享体积</block>
  <block id="fb16fc9d34d26a8e74ba1a7180766513" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block>在目标命名空间中创建从属 PVC</block>
  <block id="33fefc8d535df49d886c4bc78a08e3e5" category="paragraph">目标命名空间的所有者创建从属 PVC，以使用源 PVC 中的数据源。</block>
  <block id="b23d212300860aa39d44f8fad02636a1" category="paragraph">为确保安全，跨命名空间共享需要源命名空间所有者、集群管理员和目标命名空间所有者的协作和行动。用户角色在每个步骤中都会被指定。</block>
  <block id="aae019fccb9b3ffee1ee77e9e5f2377a" category="list-text">*源命名空间所有者：* 创建PVC<block ref="30520f4f96804df83914260b79f55962" prefix="(" category="inline-code"></block> ）在源命名空间中，授予与目标命名空间共享的权限<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>) 使用<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block>注解。</block>
  <block id="00315912b48f10a3906def68b6887f6c" category="paragraph">Trident创建 PV 及其后端 NFS 存储卷。</block>
  <block id="365b452a5b5d2d01e1f193fc8bd9bf2c" category="list-text">您可以使用逗号分隔的列表将 PVC 共享给多个命名空间。例如，<block ref="6b31015528f67fe4ce10b7c81957f601" prefix=" " category="inline-code"></block> 。</block>
  <block id="fefd0d1f7e80bb8a4657265696b66694" category="list-text">您可以使用以下方式共享到所有命名空间<block ref="3389dae361af79b04c9c8e7057f60cc6" prefix=" " category="inline-code"></block>。例如，<block ref="e06421e15aa316addc52dd6c697027b7" prefix=" " category="inline-code"></block></block>
  <block id="bac5e1b9773b73b6702dfe25c8a61a05" category="list-text">您可以更新PVC以包含<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block>随时可以添加注释。</block>
  <block id="74e502e81d780e5b5d204969a0d44635" category="list-text">*集群管理员：*确保已建立适当的 RBAC，以授予目标命名空间所有者在目标命名空间中创建 TridentVolumeReference CR 的权限。</block>
  <block id="d9bb6497cda089fc4a386c685a97cffa" category="list-text">*目标命名空间所有者：* 创建PVC<block ref="3f6857fc20ae2372499a71869ac3fe7e" prefix="(" category="inline-code"></block> ）在目标命名空间<block ref="6fde1ba4470caca933058264dbfdea2e" prefix="(" category="inline-code"></block>) 使用<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block>注释以指定来源 PVC。</block>
  <block id="e22f320aefbf1cdb3ccd68c26b050060" category="admonition">目标PVC管的尺寸必须小于或等于源PVC管的尺寸。</block>
  <block id="7f2c8022cfb81e20fa274d1e20f4ae7b" category="paragraph">Trident读取<block ref="57c54cbee1c6ed3d5902aa1d8cd1e55a" prefix=" " category="inline-code"></block>在目标 PVC 上添加注释，并将目标 PV 创建为没有自身存储资源的从属卷，该卷指向源 PV 并共享源 PV 存储资源。目的地 PVC 和 PV 看起来已正常绑定。</block>
  <block id="a5ddf1dcee266e65795efb120a45d2cb" category="section-title">删除共享卷</block>
  <block id="a5b25f7f8c74c644f3484c2182ea8a25" category="paragraph">您可以删除跨多个命名空间共享的卷。 Trident将移除对源命名空间中该卷的访问权限，并保留对共享该卷的其他命名空间的访问权限。当所有引用该卷的命名空间都被删除后， Trident会删除该卷。</block>
  <block id="3f8e335666124e3b7f5db07f03fef0b1" category="section-title">使用<block ref="fed7609223e8cae53e079facb24f3426" prefix=" " category="inline-code"></block>查询子卷</block>
  <block id="9f2f83b0c97d84774c1d61107283bb68" category="paragraph">使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>实用程序，您可以运行<block ref="b5eda0a74558a342cf659187f06f746f" prefix=" " category="inline-code"></block>获取子卷的命令。更多信息，请参阅链接：../trident-reference/tridentctl.html<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix="[" category="inline-code"></block>命令和选项]。</block>
  <block id="1c90ba5cf3791b6148c7887a696911ec" category="paragraph">标志：</block>
  <block id="b1cc54ad6906d5f41516543bae01e46f" category="list-text"><block ref="490aa9b616d8535386ddf1c7037f79a0" prefix="" category="inline-code"></block>：有关卷的帮助。</block>
  <block id="20668f390d13376c8d13ab4b20a53b5d" category="list-text"><block ref="e3bbbed29599d3e6e29ae22829ad7f13" prefix="" category="inline-code"></block>：将查询限制在子源卷上。</block>
  <block id="92c22bb3853554f94f513a2d2f36e8ef" category="list-text"><block ref="aed2a4a749284f757648f1057abf44cd" prefix="" category="inline-code"></block>：将查询限制在卷的下级。</block>
  <block id="39e92ae6d270535c1cad298373650560" category="list-text">Trident无法阻止目标命名空间写入共享卷。您应该使用文件锁定或其他方法来防止覆盖共享卷数据。</block>
  <block id="87a522ecb9df14bf978f6f1da8a654a8" category="list-text">您无法通过移除源PVC来撤销对源PVC的访问权限。<block ref="287f26e3328f9ac0f3f4da2cdaddd3e2" prefix=" " category="inline-code"></block>或者<block ref="11650d25d20af47978d85fd6e19c89aa" prefix=" " category="inline-code"></block>注释或删除<block ref="d6995f631b22fb3f8e94aad1b40d1280" prefix=" " category="inline-code"></block>CR。要撤销访问权限，必须删除从属 PVC。</block>
  <block id="3908892c437778f8b161a2ca006782cd" category="list-text">从属卷无法进行快照、克隆和镜像操作。</block>
  <block id="8ff961668c6784e84b25c265cbb629d7" category="paragraph">要了解有关跨命名空间卷访问的更多信息：</block>
  <block id="f1cfea5f1444de607dfa549b3aa57010" category="inline-link-macro">在命名空间之间共享卷：迎接跨命名空间卷访问</block>
  <block id="2780f690b7670efc296ac19ef3029d0c" category="list-text">访问<block ref="b0d29f1b2abb2cc552e4cc47177582ef" category="inline-link-macro-rx"></block>。</block>
  <block id="96e1384807331548bf745acde0fe1b73" category="inline-link-macro">NetAppTV</block>
  <block id="5ff83dbc70e496ea22b38ea61bb69f05" category="list-text">观看演示<block ref="c27441bbbe62adf51ae6ecec41fde8bd" category="inline-link-macro-rx"></block>。</block>
  <block id="821b0ad941ad2559ef18eb8de56a470e" category="summary">Kubernetes 集群中的所有工作节点都需要能够挂载您为 Pod 配置的卷。如果您的后端使用了 ontap-nas、ontap-nas-economy 或 ontap-nas-flexgroup 驱动程序，则您的工作节点需要 NFS 工具。否则，他们需要 iSCSI 工具。</block>
  <block id="553ac32ac6bcab84d5384eda7468d415" category="paragraph">Kubernetes 集群中的所有工作节点都必须能够挂载您为 Pod 配置的卷。要准备工作节点，您必须根据所选驱动程序安装 NFS、iSCSI、NVMe/TCP 或 FC 工具。</block>
  <block id="262309361fe5b6dcda3a2eae08a48c2d" category="section-title">选择合适的工具</block>
  <block id="de6d7aa94730ba882f7284ac8e07a0d1" category="paragraph">如果您使用的是多种驱动程序，则应安装所有驱动程序所需的工具。最新版本的 Red Hat Enterprise Linux CoreOS (RHCOS) 默认安装了这些工具。</block>
  <block id="33176aeb27c41088051f460946356423" category="inline-link-macro">安装 NFS 工具</block>
  <block id="a0b90bbc60c78003c8f066892446e127" category="paragraph"><block ref="5dac8bb8705e3a30615e678be90a7f1d" category="inline-link-macro-rx"></block>如果您正在使用：<block ref="8321592ce24c8a122ecf26a63cfca407" prefix=" " category="inline-code"></block> ，<block ref="caafdf62a2c609bfa5316118231a1007" prefix=" " category="inline-code"></block> ，<block ref="844e84da8e822b4a33c4d8188da97937" prefix=" " category="inline-code"></block> ，<block ref="bc5779a2d33eeb1304bae57f15920cfc" prefix=" " category="inline-code"></block> ，<block ref="5935ea92cdd7d975b4e764b429f21c01" prefix=" " category="inline-code"></block> 。</block>
  <block id="15ffa30c3d1ab6322e5ff52935a86a50" category="inline-link-macro">安装 iSCSI 工具</block>
  <block id="dd1774ab705fcc0738f7d5cfa8176115" category="paragraph"><block ref="918981963bb555a1b3a006c12fd13637" category="inline-link-macro-rx"></block>如果您正在使用：<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block> ，<block ref="3016c12c1db45f14c80c9c1731b9c26a" prefix=" " category="inline-code"></block> ，<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block> 。</block>
  <block id="e007fb329975dfac9458f3defd0f7fc1" category="inline-link-macro">安装 NVMe 工具</block>
  <block id="fd7af40a7e3f81bfb0a51eac257dc730" category="paragraph"><block ref="8ac92b41418caf5b4c74c2a77a0c349a" category="inline-link-macro-rx"></block>如果你正在使用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>用于基于 TCP 的非易失性存储器高速接口 (NVMe) (NVMe/TCP) 协议。</block>
  <block id="93c5b0ed9261693ca8644540ac8a1cd9" category="admonition">NetApp建议 NVMe/TCP 使用ONTAP 9.12 或更高版本。</block>
  <block id="b709b82e3d76fa5433fd3117387424b7" category="paragraph-title">通过光纤通道 (FC) 进行 SCSI 的工具</block>
  <block id="867cf4bbcb92ecc7017612aafa765813" category="inline-link-macro">配置 FC 和 FC-NVMe SAN 主机的方法</block>
  <block id="67ed8fb72dc668ae9c7c1114df8f02ed" category="paragraph">请参阅<block ref="ee9d56c9130a1d3814c95b35eb7c82a4" category="inline-link-macro-rx"></block>有关配置 FC 和 FC-NVMe SAN 主机的更多信息。</block>
  <block id="36b37761159ed00a729b4f6fab9a0f02" category="inline-link-macro">安装 FC 工具</block>
  <block id="00ea3f7016d7b9a4ad023b106cc1e6d3" category="paragraph"><block ref="7e7b7908484dc2cebc13ec93d8042bd0" category="inline-link-macro-rx"></block>如果你正在使用<block ref="73a3350a1b91aeb6e2836fdf5975672c" prefix=" " category="inline-code"></block>使用 sanType<block ref="0f64d0456878c73cbec1ccea842a6f14" prefix=" " category="inline-code"></block> （通过光纤通道进行 SCSI 通信）。</block>
  <block id="1b9fede0aad66dda6d8b01b66280fff4" category="paragraph">*需要考虑的要点*：* OpenShift 和 KubeVirt 环境支持通过 FC 进行 SCSI 通信。  * Docker 不支持通过 FC 传输 SCSI。  * iSCSI 自愈功能不适用于基于 FC 的 SCSI。</block>
  <block id="d1914bc190cdc3bc9eee6db0c81021bc" category="section-title">节点服务发现</block>
  <block id="16649adc62ed952ba4dac811c548cbfb" category="paragraph">Trident会尝试自动检测节点是否可以运行 iSCSI 或 NFS 服务。</block>
  <block id="2b6ab5193160f5eaca51526b15f27e3a" category="admonition">节点服务发现功能可以识别已发现的服务，但不能保证服务配置正确。反之，未发现服务并不保证卷挂载一定会失败。</block>
  <block id="6a9c3f120f628091afbdc5343cbbe0e1" category="paragraph-title">回顾事件</block>
  <block id="ff577472362d5ec5388791cc868e283e" category="paragraph">Trident会为节点创建事件，以识别已发现的服务。要查看这些事件，请运行：</block>
  <block id="70db3e5b82bc8c7ce4389fe8a025df28" category="paragraph-title">查看已发现的服务</block>
  <block id="e0dbb340725a054b795eaa2c5ce9925a" category="paragraph">Trident识别Trident节点 CR 上每个节点启用的服务。要查看已发现的服务，请运行：</block>
  <block id="b7a66d04a41292979004906785008ca9" category="section-title">NFS卷</block>
  <block id="eeacf148d8ecc80cfae337218dd81f43" category="paragraph">使用适用于您操作系统的命令安装 NFS 工具。确保NFS服务在启动时启动。</block>
  <block id="29ba980a9e9adedc9414ea868c74ebd5" category="section-title">iSCSI 卷</block>
  <block id="5a89f68b37546fc775b3e4fdbaa83f86" category="paragraph">Trident可以自动建立 iSCSI 会话、扫描 LUN、发现多路径设备、格式化设备并将其挂载到 pod 中。</block>
  <block id="e81b5ef34c686914f0cc58204241cace" category="section-title">iSCSI自愈能力</block>
  <block id="f31ad49d6d434380feb4017e7e67844c" category="paragraph">对于ONTAP系统， Trident每五分钟运行一次 iSCSI 自愈程序，以：</block>
  <block id="432fa9215202553559f7b2d4d10ef5ee" category="list-text">*确定*所需的 iSCSI 会话状态和当前的 iSCSI 会话状态。</block>
  <block id="88857aef34da03584f9873d9ae451f35" category="list-text">将理想状态与当前状态进行比较，以确定需要进行的维修。  Trident确定维修优先级以及何时进行抢修。</block>
  <block id="587fcf25ecbc5ff7cf19f7b1a159b5e9" category="list-text">*执行必要的修复*，使当前的 iSCSI 会话状态恢复到所需的 iSCSI 会话状态。</block>
  <block id="43b7f6020acce94258b8cd6f49d039e9" category="admonition">自愈活动的日志位于……<block ref="7883e3d8f80ff24d70c49bd975fb3f75" prefix=" " category="inline-code"></block>相应 Daemonset pod 上的容器。要查看日志，您必须已设置<block ref="ad42f6697b035b7580e4fef93be20b4d" prefix=" " category="inline-code"></block>在Trident安装过程中设置为“true”。</block>
  <block id="575a6c9926e4c10d0f01f5a7b5ae5af7" category="paragraph">Trident iSCSI 的自愈功能可以帮助预防：</block>
  <block id="dc5ea7c62b923ea94fb050bf49982b18" category="list-text">网络连接问题后可能出现过期或不健康的 iSCSI 会话。如果会话已过期， Trident会等待七分钟，然后注销并重新与门户建立连接。</block>
  <block id="39460cb84da78b4a87c2014972b2f901" category="admonition">例如，如果存储控制器上轮换了 CHAP 密钥，并且网络失去连接，则旧的（过时的）CHAP 密钥可能会保留下来。自愈功能可以识别这一点，并自动重新建立会话以应用更新后的 CHAP 密钥。</block>
  <block id="9e9d382760025434fdf113f91e894cf4" category="list-text">缺少 iSCSI 会话</block>
  <block id="3f7bf0ef305a15c68efdc95a50750bd0" category="list-text">缺少 LUN</block>
  <block id="eb80be396693610ba21c23b6b222bb73" category="paragraph">*升级Trident之前需要考虑的要点*</block>
  <block id="b100864b32a36993557470c9854e7e3a" category="list-text">如果仅使用每个节点的 igroup（在 23.04+ 中引入），则 iSCSI 自愈功能将启动 SCSI 总线上所有设备的 SCSI 重新扫描。</block>
  <block id="284bb2f9d2596017aa72985df760fdb3" category="list-text">如果仅使用后端范围的 igroup（自 23.04 版本起已弃用），则 iSCSI 自愈功能将启动 SCSI 重新扫描，以查找 SCSI 总线上的确切 LUN ID。</block>
  <block id="0d6cf1de077f00140ee25c03f94e4805" category="list-text">如果同时使用节点级 igroup 和后端级 igroup，iSCSI 自愈功能将启动 SCSI 重新扫描，以查找 SCSI 总线上的精确 LUN ID。</block>
  <block id="12fe03bf2457cc4e4e90af10a2f7092f" category="list-text">Kubernetes 集群中的每个节点都必须有一个唯一的 IQN。这是必要的前提条件。</block>
  <block id="5eb07a7cb7d445ef6bbb17270c65cf52" category="list-text">如果使用 RHCOS 4.5 或更高版本，或其他与 RHEL 兼容的 Linux 发行版，则需要执行以下操作：<block ref="c0d2a793e71b152662b3e8cd2da00620" prefix=" " category="inline-code"></block>对于驱动程序和Element OS 12.5 或更早版本，请确保将 CHAP 身份验证算法设置为 MD5。<block ref="104f48adc29dc1e1d7c9bbe7b5dd3f8d" prefix=" " category="inline-code"></block> Element 12.7 提供符合 FIPS 标准的 CHAP 安全算法 SHA1、SHA-256 和 SHA3-256。</block>
  <block id="ce557c2f93da665463decf7b19e61b7b" category="list-text">当使用运行 RHEL/Red Hat Enterprise Linux CoreOS (RHCOS) 且带有 iSCSI PV 的工作节点时，请指定<block ref="70f68bb2f748b85de6526bfe236ea1e9" prefix=" " category="inline-code"></block>StorageClass 中的 mountOption 用于执行内联空间回收。参考<block ref="65c95aeda8cb0b26307f9839dd3fefbf" category="inline-link-rx"></block>。</block>
  <block id="ef46cb32ba76d79fbc7bfb7586fff578" category="list-text">请确保您已升级到最新版本。<block ref="452b142235e718663e27bc4f162c14ca" prefix=" " category="inline-code"></block> 。</block>
  <block id="5e6c49c79d451ce5d17472c430c69454" category="admonition">确保<block ref="dd5ff67ba72768d33f75e645aa2b8e56" prefix=" " category="inline-code"></block>包含<block ref="2a81b35478c9ccb4f9392dcc40edb8e6" prefix=" " category="inline-code"></block>在下面<block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block>。</block>
  <block id="1b757fe9c8a149de349a32b8d21feb54" category="admonition">对于 Ubuntu 18.04，您必须使用以下命令发现目标端口：<block ref="f88921f58beaaae5bcb9dffac54bf5ad" prefix=" " category="inline-code"></block>开始之前<block ref="356cb36dc1c54ae3f8a7c332c76d7edd" prefix=" " category="inline-code"></block>启动 iSCSI 守护进程。您也可以修改<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>服务启动<block ref="3fe4dc8de876aca2c78fa0cd9c6d0b65" prefix=" " category="inline-code"></block>自动地。</block>
  <block id="d03a790fb20fccc8b27cff74c7a10709" category="section-title">配置或禁用 iSCSI 自愈</block>
  <block id="35a7465f650e4e342879c89b19aab955" category="paragraph">您可以配置以下Trident iSCSI 自愈设置来修复过期的会话：</block>
  <block id="160cc91d68e6399b864fe236e7a6d11e" category="list-text">*iSCSI 自愈间隔*：确定 iSCSI 自愈的调用频率（默认值：5 分钟）。你可以通过设置较小的数字来增加运行频率，或者通过设置较大的数字来降低运行频率。</block>
  <block id="af6999fe88eb0d5f3cf5f3c7570bf014" category="paragraph">将 iSCSI 自愈间隔设置为 0 将完全停止 iSCSI 自愈功能。我们不建议禁用 iSCSI 自愈功能；只有在 iSCSI 自愈功能无法按预期工作或出于调试目的时，才应禁用该功能。</block>
  <block id="fe240a869a7a9e3bdc68d460aa116db2" category="list-text">*iSCSI 自愈等待时间*：确定 iSCSI 自愈在注销不健康的会话并尝试再次登录之前等待的时间（默认值：7 分钟）。您可以将其配置为更大的数字，以便将识别为不健康的会话在注销之前等待更长时间，然后再尝试重新登录；或者配置为更小的数字，以便更快地注销和登录。</block>
  <block id="7c3dfaf40c8f6c1208932661e70ca6b2" category="paragraph">要配置或更改 iSCSI 自愈设置，请传递以下参数：<block ref="a1edaea62dbed344534369e9668223b1" prefix=" " category="inline-code"></block>和<block ref="85fc372a514da766ce84a222668f8e62" prefix=" " category="inline-code"></block>Helm 安装或 Helm 更新期间的参数。</block>
  <block id="ba53a946a5e7dedfdc75a569107f3a66" category="paragraph">以下示例将 iSCSI 自愈间隔设置为 3 分钟，自愈等待时间设置为 6 分钟：</block>
  <block id="c67fd1b99934afa248dfeb285a9a4191" category="open-title">三叉戟</block>
  <block id="03c688458c87383f238f17223a52f7bd" category="paragraph">要配置或更改 iSCSI 自愈设置，请传递以下参数：<block ref="95df96489cc6481c74d24c1397e3edd9" prefix=" " category="inline-code"></block>和<block ref="4ad3b66813348b71002bd232a403581c" prefix=" " category="inline-code"></block>tridentctl 安装或更新期间的参数。</block>
  <block id="4771a9c521a7d39c2dcf6ee71d0ef032" category="section-title">NVMe/TCP 卷</block>
  <block id="b15a013c4977a2a96afedafe316664b2" category="section-title">验证安装</block>
  <block id="d777ba5e4b1ff43d3668b14ef7200bad" category="paragraph">安装完成后，使用以下命令验证 Kubernetes 集群中的每个节点是否都具有唯一的 NQN：</block>
  <block id="37ed104d69b44253f63f811d2ac61b38" category="admonition">Trident修改了<block ref="f0523c4334dbbc70205de4279475561a" prefix=" " category="inline-code"></block>确保 NVMe 在路径中断时不会放弃路径的值。请勿更改此设置。</block>
  <block id="d019fe86b16ae6b783603693309fb4c6" category="section-title">通过 FC 卷进行 SCSI 连接</block>
  <block id="51d8fa0a5eb3f269bad2a2a47a660a2d" category="paragraph">现在您可以使用光纤通道 (FC) 协议和Trident在ONTAP系统上配置和管理存储资源。</block>
  <block id="822b1839c387749c78601eebc94c8d7d" category="paragraph">配置 FC 所需的网络和节点设置。</block>
  <block id="f508b22c8fc4486b19fee39d5ded3841" category="section-title">网络设置</block>
  <block id="16fdd92def5a71313d6535c74ef67b81" category="inline-link">network interface show</block>
  <block id="e132245ad28668c6b32dee21fb8a3820" category="list-text">获取目标接口的 WWPN。请参阅<block ref="92fd8fd0370792cd397ea6fdc3c8edb0" category="inline-link-rx"></block>了解更多信息。</block>
  <block id="cc7e69899d736126df9787634ad41870" category="list-text">获取发起方（主机）上接口的 WWPN。</block>
  <block id="1089b965cabd19cfee7f3ef855fbd63d" category="paragraph">请参考相应的主机操作系统实用程序。</block>
  <block id="6f58745fc3a341adae0772d30d9e508c" category="list-text">使用主机和目标的 WWPN 在 FC 交换机上配置区域。</block>
  <block id="54336aa51b161faac4d0ebb1b76b1536" category="paragraph">有关信息，请参阅相应交换机供应商的文档。</block>
  <block id="299f2e1a529559eb06c9dfbe12ccdea9" category="paragraph">详情请参阅以下ONTAP文档：</block>
  <block id="d7281ba358054b30594dcd34819057a1" category="inline-link">光纤通道和FCoE分区概述</block>
  <block id="bce9f24194c15bbf6b5ad6cd1d8d1899" category="list-text"><block ref="bce9f24194c15bbf6b5ad6cd1d8d1899" category="inline-link-rx"></block></block>
  <block id="9b9db0b6f6df6361aa97412feea7ae07" category="list-text"><block ref="1a83c479258a4b0e250085c944bae4de" category="inline-link-rx"></block></block>
  <block id="49c51de1f7ef1bb1a3f7996dce0bd162" category="summary">使用此处提供的提示来解决您在安装和使用Trident时可能遇到的问题。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="ce3d3f85c4d1d4dd7826863d9428b4e5" category="admonition">如需Trident的帮助，请使用以下命令创建支持包<block ref="1d41e2024c69110ad6054ffc785ca8e0" prefix=" " category="inline-code"></block>然后将其发送给NetApp支持部门。</block>
  <block id="163fb9eb00818e2c7109900db1a3cc82" category="section-title">常规故障排除</block>
  <block id="f504c27d1ad305a988958b64f34468cb" category="list-text">如果Trident舱无法正常升空（例如，当Trident舱卡在……中时<block ref="8627ca3ad23f4fb9adc6ba05047004c6" prefix=" " category="inline-code"></block>阶段（准备容器少于两个）运行<block ref="d8ff0b6a743c3e367651a5670557e628" prefix=" " category="inline-code"></block>和<block ref="a4b328a3b4da8017033a2fedd18d09fa" prefix=" " category="inline-code"></block>可以提供更多见解。获取 kubelet 日志（例如，通过<block ref="15860ae6633dd5eb60d2266c2a6fc03f" prefix=" " category="inline-code"></block>）也可能有所帮助。</block>
  <block id="05d68d1b7214c73141ed12aaed0c2ab5" category="list-text">如果Trident日志中的信息不足，您可以尝试通过传递参数来启用Trident的调试模式。<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix=" " category="inline-code"></block>根据您的安装选项，向安装参数添加标志。</block>
  <block id="bc6de9cad530a57dba08ff711f4a6b5f" category="paragraph">然后确认调试模式已设置<block ref="84c78f6343bea2c18a8ded36d1ac1572" prefix=" " category="inline-code"></block>并正在寻找<block ref="53df56868ef061c403e1b925399eeac6" prefix=" " category="inline-code"></block>在日志中。</block>
  <block id="8e95ae46f32b05cf983c93e608530e36" category="list-text">已安装操作员</block>
  <block id="94912f7fb206038e8527957b44dfbf25" category="paragraph">这将重启所有Trident pod，这可能需要几秒钟时间。您可以通过观察输出结果中的“AGE”列来验证这一点。<block ref="ae7c84a6e027b78ae530cc1b0b98ac3c" prefix=" " category="inline-code"></block> 。</block>
  <block id="ff880370a59a3edf263703cf427ef61b" category="paragraph">适用于Trident 20.07 和 20.10 版本<block ref="5d50f02b16b5f3c834b39c00b5adcf4f" prefix=" " category="inline-code"></block>代替<block ref="b9b2e8f293392f4f25fc8a59b9522d84" prefix=" " category="inline-code"></block>。</block>
  <block id="79b91d0489c081de6794796638793787" category="list-text">使用 Helm 安装</block>
  <block id="d356d628089d439d75e3f85564372658" category="list-text">使用 tridentctl 安装</block>
  <block id="27e9bd9989c090489f69126b9910d7d8" category="list-text">您还可以通过添加以下命令来获取每个后端的调试日志。<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>在您的后端定义中。例如，包括<block ref="825a719baa5b5b7445c98535815fac39" prefix=" " category="inline-code"></block>获取Trident日志中的 API 调用和方法遍历。现有后端可以有<block ref="effa2d809c72dcb6cce15a1e0b040e63" prefix=" " category="inline-code"></block>配置为<block ref="ad782b779edfd8199198bed41b3e3b6b" prefix=" " category="inline-code"></block>。</block>
  <block id="3992b498f2510c20f4dc0df9804e6038" category="list-text">使用 Red Hat Enterprise Linux CoreOS (RHCOS) 时，请确保：<block ref="3fe4dc8de876aca2c78fa0cd9c6d0b65" prefix=" " category="inline-code"></block>在工作节点上已启用，并且默认情况下已启动。这可以通过使用 OpenShift MachineConfigs 或修改 Ignition 模板来实现。</block>
  <block id="154244be43a4ba50080a256f5657b29a" category="list-text">使用Trident时可能会遇到的常见问题是……<block ref="4568986ef6397d7c901269fc0e190ede" category="inline-link-rx"></block>指的是租户和客户端密钥来自权限不足的应用程序注册。有关Trident要求的完整列表，请参阅<block ref="afedf4ee56554ea6e6b54e6aa206680c" category="inline-link-macro-rx"></block>配置。</block>
  <block id="7f0ecdfa510b31b01d331c2760643b83" category="list-text">如果将光伏系统安装到集装箱上遇到问题，请确保：<block ref="7a31649dd02ecf0349542b72f9d5ef54" prefix=" " category="inline-code"></block>已安装并正在运行。使用主机操作系统所需的软件包管理器并检查是否<block ref="7a31649dd02ecf0349542b72f9d5ef54" prefix=" " category="inline-code"></block>正在运行。您可以查看以下状态：<block ref="7a31649dd02ecf0349542b72f9d5ef54" prefix=" " category="inline-code"></block>通过运行服务<block ref="461bc51ac38341d1d2fdae2e84bc6e47" prefix=" " category="inline-code"></block>或其等效物。</block>
  <block id="78aeadc89feb4cf244398a7d35a0d656" category="list-text">如果Trident后端报告它处于<block ref="26934eb377001f66e37289a5c93fe284" prefix=" " category="inline-code"></block>尽管之前运行正常，但当前状态可能是由于更改了与后端关联的 SVM/管理员凭据所致。使用以下方式更新后端信息<block ref="defd1e55f93269ac9278afc086951ba8" prefix=" " category="inline-code"></block>或者晃动一下Trident烟囱就能解决这个问题。</block>
  <block id="b851cfc28cd6e5cb9aaf87bdb59a68aa" category="list-text">如果在使用 Docker 作为容器运行时安装Trident时遇到权限问题，请尝试使用以下方式安装Trident：<block ref="acbc9344b624715d4749280f7e4a5b49" prefix=" " category="inline-code"></block>旗帜。这样就不会使用安装程序 pod，从而避免因以下原因导致的权限问题：<block ref="c84ef67352bb6783ff2881f9f2821c2a" prefix=" " category="inline-code"></block>用户。</block>
  <block id="6f7d49547ff47cfaf1fd93d134b603be" category="list-text">使用<block ref="9a259632da28fe06c1ce5125984d3597" prefix=" " category="inline-code"></block>用于清理运行失败后的残局。默认情况下，该脚本不会删除Trident创建的 CRD，因此即使在运行的部署中，卸载和重新安装也是安全的。</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="inline-link">Trident版</block>
  <block id="629ac35dda697ad18f8fef7094213871" category="list-text">如果您想降级到早期版本的Trident，请先运行以下命令：<block ref="ac8650577d1b744589a6a11b60ac38c7" prefix=" " category="inline-code"></block>移除Trident的命令。下载所需文件<block ref="f3d78353f8dac3e49bbefeb5f6a2383b" category="inline-link-rx"></block>并使用以下方式安装<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block>命令。</block>
  <block id="51748ba3d16ecfd8c45c7ebf2043b738" category="list-text">安装成功后，如果PVC管卡在……<block ref="2d13df6f8b5e4c5af9f87e0dc39df69d" prefix=" " category="inline-code"></block>阶段，运行<block ref="703698f580eb41aee04574750a78238d" prefix=" " category="inline-code"></block>可以提供更多关于Trident为何未能为此PVC配置PV的信息。</block>
  <block id="c966bdf80a661ce3909786b6f622340b" category="section-title">使用操作员部署Trident失败</block>
  <block id="0e89989064bf4afdc37fd5a7be4f607d" category="paragraph">如果您使用 Operator 部署Trident ，则状态为：<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>变化来自<block ref="2763f33c904a183bd0ef06f9c4fb4403" prefix=" " category="inline-code"></block>到<block ref="98dd43dfae05b11befe1f140e0ec787a" prefix=" " category="inline-code"></block>。如果你观察<block ref="d7c8c85bf79bbe1b7188497c32c3b0ca" prefix=" " category="inline-code"></block>如果操作员处于异常状态且无法自行恢复，则应运行以下命令检查操作员的日志：</block>
  <block id="df9771dbb13da45493e576499910c0b4" category="paragraph">追踪 trident-operator 容器的日志可以指出问题所在。例如，在与外界隔离的环境中，可能无法从上游镜像仓库拉取所需的容器镜像。</block>
  <block id="0fd4c6187c561958bc76052df7774593" category="paragraph">要了解为什么Trident安装失败，您应该查看以下内容：<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>地位。</block>
  <block id="1e054f4c292a5388d6318461fe73d749" category="paragraph">此错误表明已存在<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>用于安装Trident 的程序。由于每个 Kubernetes 集群只能有一个Trident实例，因此 Operator 会确保在任何给定时间都只有一个活跃的 Trident 实例。<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>它能够创造。</block>
  <block id="568fcf9beb0dbd37c57dff251a3164ed" category="paragraph">此外，观察Trident舱的状态通常可以表明是否存在异常情况。</block>
  <block id="f89c17ddb9f8bdaf5c95a466d5f6a500" category="paragraph">您可以清楚地看到，由于一个或多个容器镜像未获取，因此 pod 无法完全初始化。</block>
  <block id="d57d1a6de03b2ddf3ee54f680152e2b6" category="paragraph">要解决这个问题，你应该编辑<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>CR。或者，您可以删除<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>并根据修改后的准确定义创建一个新的定义。</block>
  <block id="ccfca578972ee86c982797bc2898fe5b" category="section-title">使用Trident部署失败<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="021e9ae5361eb14975bf9a30f99770f5" category="paragraph">为了帮助找出出错的原因，您可以再次运行安装程序：<block ref="9b017020b9d48d433ec90c548e6b5c70" prefix="" category="inline-code"></block>使用该参数将开启调试模式，帮助您了解问题所在：</block>
  <block id="01539f4f1fd20792cbbae6bb0506cc20" category="paragraph">解决问题后，您可以按以下步骤清理安装，然后运行：<block ref="430bf77bee6c59d385d4194f84c21b16" prefix=" " category="inline-code"></block>再次执行命令：</block>
  <block id="f61e7737805bc6c31f70cc744f0be580" category="paragraph">您可以完全移除Trident以及所有创建的 CRD 和相关的自定义资源。</block>
  <block id="bf33d5f4492b83e480e02a87c13bea8f" category="admonition">此操作无法撤消。除非你想全新安装Trident，否则不要这样做。要在不删除 CRD 的情况下卸载Trident ，请参阅<block ref="09e567d3102352bdd3a5975f49a136db" category="inline-link-macro-rx"></block>。</block>
  <block id="7e8fc4df4a520d5e63be7a3cceaf49b6" category="paragraph">要卸载Trident并使用Trident操作符彻底删除 CRD，请执行以下操作：</block>
  <block id="48402172a8740f09fa3a5295a3c776f2" category="paragraph">使用 Helm 卸载Trident并彻底删除 CRD：</block>
  <block id="fca562606bcefc58d4a718783c1b96d2" category="paragraph">卸载Trident后，要彻底删除 CRD，请使用<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block></block>
  <block id="35f748582b65670a3f27a7f93c685560" category="section-title">Kubernetes 1.26 版本中，使用 RWX 原始块命名空间时，NVMe 节点卸载失败</block>
  <block id="02c0c037ba3f051d21fbf3a2f370eb72" category="paragraph">如果您运行的是 Kubernetes 1.26，则在使用 NVMe/TCP 和 RWX 原始块命名空间时，节点取消暂存可能会失败。以下方案提供了应对此故障的变通方法。或者，您可以将 Kubernetes 升级到 1.27 版本。</block>
  <block id="14b443235c9f911289e8e2d0bad3eaf2" category="section-title">删除了命名空间和 pod。</block>
  <block id="4432cfcacafa1abcedd4043a54b77f9f" category="paragraph">设想这样一种场景：你将一个Trident管理的命名空间（NVMe 持久卷）附加到一个 pod 上。如果直接从ONTAP后端删除命名空间，则在尝试删除 pod 后，取消暂存过程会卡住。此情况不会影响 Kubernetes 集群或其他功能。</block>
  <block id="31accf88e60e15e200ac055e6344c912" category="paragraph">从相应的节点卸载持久卷（与该命名空间对应），并将其删除。</block>
  <block id="5d84bf099896e3a304a067d7c5f71db1" category="section-title">阻塞数据LIF</block>
  <block id="e80aabfb35c98e66a71baf6a3c90a7df" category="paragraph">启动 dataLIFS 以恢复全部功能。</block>
  <block id="5afe86ac983ac04ac6d9268beb2bc024" category="section-title">已删除命名空间映射</block>
  <block id="9b0dbff182f270b33423b281f92bddc2" category="paragraph">添加<block ref="a564a902c12941efa27c1d2ea4a19f8e" prefix=" " category="inline-code"></block>返回子系统。</block>
  <block id="ed323fee394548d260c31d933876b771" category="section-title">当预期启用“v4.2-xattrs”时，NFSv4.2 客户端在升级ONTAP后报告“无效参数”</block>
  <block id="b9785b666a04771c63b539840201a4db" category="paragraph">升级ONTAP后，NFSv4.2 客户端在尝试挂载 NFSv4.2 导出时可能会报告“无效参数”错误。当<block ref="5a54626559918ca9ebb6414eebaa97bf" prefix=" " category="inline-code"></block> SVM 上未启用该选项。.解决方法启用<block ref="5a54626559918ca9ebb6414eebaa97bf" prefix=" " category="inline-code"></block> 选项或升级到ONTAP 9.12.1 或更高版本，默认情况下此选项处于启用状态。</block>
  <block id="65edeac74973a1ff99e0e74473ca1ac5" category="sidebar">Trident是由NetApp维护的开源存储配置器和编排器。它允许您为由 Docker 和 Kubernetes 管理的容器化应用程序创建存储卷。</block>
  <block id="7d0ee6fed10d3d4e5c9ee496729ab519" category="sidebar">发行说明</block>
  <block id="93168a8084b3e838d2932c4734bd234e" category="sidebar">早期版本</block>
  <block id="312b0dc38b01ff32c1b2f5f81ee1ab2d" category="sidebar">使用Trident操作员进行部署</block>
  <block id="e0e3d7f1aacdf4a8196132549709430c" category="sidebar">使用 tridentctl 进行部署</block>
  <block id="386307d41b3f4169a1e6e046a727cdd2" category="sidebar">使用Trident运营商进行升级</block>
  <block id="c2be0dce836d12b399a864c7019c6c72" category="sidebar">使用Trident</block>
  <block id="a2d3ef10e2d8aae09270e11f8faea2d2" category="sidebar">高级数据管理和保护</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">演示和教程</block>
  <block id="c2cad626583e84ad7681ff1f879baed0" category="sidebar">Trident视频</block>
  <block id="813011e2103649bb71f124adedcc10ea" category="sidebar">博客和社区</block>
  <block id="d59c00abbeaf33a9a094b3a69c563405" category="sidebar">NetApp</block>
  <block id="8f5cc6430613f1c12f36965050bb7197" category="sidebar">不和谐</block>
  <block id="19cd85517cccf8e142cb03b4a1b778b8" category="sidebar">Trident文件</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">什么是新的</block>
  <block id="47edbb9e6d6e6e874eb40c274a0e2e0f" category="sidebar">博客文章</block>
  <block id="0adc03eac86772ad2c75c8f140be417e" category="sidebar">知识和支持</block>
  <block id="483a5da192f46e3cfe8391d3ef234fc4" category="sidebar">常见问题解答</block>
  <block id="fabfc25ef8996fd90836e58a4c0b26b6" category="sidebar">获取帮助</block>
  <block id="cbe339e53da479584b62fcdaed7006c1" category="sidebar">Trident概述</block>
  <block id="0460583622f03a52d7693094d6fa2452" category="sidebar">概念</block>
  <block id="46921a75e8534ad7d1c379a9e3aec033" category="sidebar">安装概述</block>
  <block id="3183dc3907c0b67930b221a316c94cb2" category="sidebar">使用Trident操作员进行安装</block>
  <block id="ca19905e19a036badc8a33897130382d" category="sidebar">手动部署Trident操作员（标准）</block>
  <block id="ef39c7f15f2671234f3264999cce5679" category="sidebar">手动部署Trident操作员（离线）</block>
  <block id="0f441bb0252fa34f85fc82a08f2db0c7" category="sidebar">使用Trident头盔图表（标准）</block>
  <block id="70eb578fbddf25c465d8f4886be750b7" category="sidebar">使用Trident Helm Chart（离线）</block>
  <block id="0e9e7400617f4a815b5ec92f2030b580" category="sidebar">使用 OpenShift 认证操作员进行安装</block>
  <block id="93e4eff1c01241084bfc9427074bacea" category="sidebar">使用 OpenShift OperatorHub 安装Trident</block>
  <block id="c9e3d6c8fc80db4773cf69e205f2b571" category="sidebar">从Trident社区操作员切换到 OpenShift 认证操作员</block>
  <block id="c95d3f2a880ad1b81926c3a78c2294ed" category="sidebar">管理和监控Trident</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="sidebar">升级概述</block>
  <block id="5ff3faebb0ff710340bdbee89a4667ad" category="sidebar">通过运营商进行升级</block>
  <block id="3f94255d3ae6517615821f8939ba6230" category="sidebar">管理授权和访问控制</block>
  <block id="1ae067a03c56065918252f36c73024d1" category="sidebar">管理和保护应用程序</block>
  <block id="618ce5e44021c1c57c9655e5e3846eda" category="sidebar">使用 AppVault 对象管理存储桶</block>
  <block id="80b940e5c68d020c06f9dc2f188d2169" category="sidebar">定义一个管理应用程序</block>
  <block id="ca73b42f56baa81e1c83e31ee5c53d42" category="sidebar">保护应用程序</block>
  <block id="ff29014f3961a30f52557df7142d1a65" category="sidebar">恢复应用程序</block>
  <block id="27f5153068cecd37b6fa4a136586658d" category="sidebar">使用高级设置</block>
  <block id="73ff2f0e4c750901167edccad459407d" category="sidebar">使用NetApp SnapMirror复制应用程序</block>
  <block id="5d23a9c0c55a80ece74daa65c04f1d66" category="sidebar">迁移应用程序</block>
  <block id="a20f982d79c3dd66d244ffe0f7d940ee" category="sidebar">最佳实践和建议</block>
  <block id="4182ceafe6e7afa67be49e639a8fa3a9" category="sidebar">Trident集成</block>
  <block id="301ebdf8067a213d5a55c65fbb488290" category="sidebar">安全建议</block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="sidebar">参考</block>
  <block id="5248a0897439d95866d14416e307c927" category="sidebar">配置和管理后端</block>
  <block id="58834b137fd6fa7a9ca23468a5c91fd6" category="sidebar">准备配置</block>
  <block id="19ce3b2e7823907e5153f00fe04f64f7" category="sidebar">配置选项和示例</block>
  <block id="6fc0b7515ecca271c88eae4a685da613" category="sidebar">NetApp HCI或SolidFire</block>
  <block id="53f64465dc89ebfc8f426b3cdf4d1614" category="sidebar">创建 IAM 角色和 AWS Secret</block>
  <block id="0a3c6c3b1b9418c792ec73b934ca8fdd" category="sidebar">配置存储后端</block>
  <block id="50399b7d6597b32502708277dd2be03c" category="sidebar">配置存储等级和PVC</block>
  <block id="e41a00202d1138f85f18e0c7afdb0955" category="sidebar">在 EKS 集群上配置Trident EKS 插件</block>
  <block id="af5d3eba040f5bcf3d3f037b574766c8" category="sidebar">管理后端</block>
  <block id="bcca457a84376733a80b2dfad749e939" category="sidebar">使用 kubectl 管理后端</block>
  <block id="e9e5f94eb04c1889f891ad75fd929b4b" category="sidebar">使用 tridentctl 管理后端</block>
  <block id="95408f23568d6e604d1f49a1bf3ff238" category="sidebar">创建和管理存储类</block>
  <block id="76114b40ddbaf2bf18e9aee694563b40" category="sidebar">配置和管理卷</block>
  <block id="e8ce47501426b8525633fc30daf17d7a" category="sidebar">自定义卷名称</block>
  <block id="f18a50f02f48551895d57b81dd288142" category="sidebar">跨命名空间共享 NFS 卷</block>
  <block id="62486fa65fc31c383ace8989549632ad" category="sidebar">使用快照</block>
  <block id="30e52f4e46178e20ec0172d136f6e964" category="list-text">（可选）在源集群上，对源应用程序进行快照。此快照将用作目标集群上应用程序的基础。如果跳过此步骤，则需要等待下一次计划快照运行，以便获得最新的快照。要创建按需快照，请参阅 <block ref="359fb751a7b652662d6f4f859ab7278e" category="inline-link-macro-rx"></block>。</block>
  <block id="5c24c4abf654732ea864deb8dfd27900" category="list-text">在源集群上，创建复制计划 CR：</block>
  <block id="7f3cf5a508f65aafe24cfcbde532a846" category="open-title">使用 CR 创建复制计划</block>
  <block id="7228f7e08042915e251a683bfff18231" category="list-text">*spec.appVaultRef*: (_必需_) 此值必须与源应用程序的 AppVault 的 metadata.name 字段匹配。</block>
  <block id="2845cbe42176f1140d5d897aaf3abea8" category="list-text">*spec.applicationRef*: (_必需_) 此值必须与源应用程序 CR 的 metadata.name 字段匹配。</block>
  <block id="4cd94b75213793150ad247d75cd897e9" category="open-title">使用 CLI 创建复制计划</block>
  <block id="3de5f07029546bc00c37d9c9edf9cc20" category="list-text">创建复制计划，并将括号中的值替换为您环境中的信息：</block>
  <block id="7749c9ae56691a1f3a933f4d23d038e3" category="list-text">*spec.sourceApplicationUID*: （必需）此值必须与您在源应用程序 CR 中定义的源应用程序的 UID 匹配。</block>
  <block id="3d684c1e0271c67148a368e61c2e954e" category="list-text">*spec.storageClassName*: (_可选_) 选择集群上有效的存储类的名称。存储类必须链接到与源环境建立对等连接的ONTAP存储 VM。如果未提供存储类，则默认使用集群上的默认存储类。</block>
  <block id="c97418e1743694adcebfb4447351b629" category="list-text">创建并应用 AppMirrorRelationship 对象，并将括号中的值替换为您环境中的信息：</block>
  <block id="deca7f5d5c734fc5db3590b2dbe431b8" category="paragraph">Trident Protect 24.10 和 24.10.1 及更高版本在保护运行在 KubeVirt VM 上的应用程序时，行为有所不同。对于这两个版本，您都可以在数据保护操作期间启用或禁用文件系统冻结和解冻结。</block>
  <block id="ea7f18044a9efb2ea47bdd370e5870f3" category="paragraph-title">Trident Protect 24.10</block>
  <block id="98d3ce5c789124fc9207b48d4d1e8fc7" category="paragraph">Trident Protect 24.10 在数据保护操作期间不会自动确保 KubeVirt VM 文件系统的一致性状态。如果您想使用Trident Protect 24.10 保护您的 KubeVirt VM 数据，则需要在执行数据保护操作之前手动启用文件系统的冻结/解冻功能。这样可以确保文件系统处于一致状态。</block>
  <block id="5ea5c247812e1dca5ff02ca853f05032" category="paragraph">您可以配置Trident Protect 24.10 来管理数据保护操作期间 VM 文件系统的冻结和解冻。<block ref="e0dd4c4b8aa16596df6c3f5cb36d3cdc" category="inline-link-macro-rx"></block>然后使用以下命令：</block>
  <block id="d9add54d9d6181f1b39ad4d1bc6451d0" category="paragraph-title">Trident Protect 24.10.1 及更高版本</block>
  <block id="a099f4b5b32bb2a3c98bf39fd2eada0d" category="paragraph">从Trident Protect 24.10.1 开始， Trident Protect 会在数据保护操作期间自动冻结和解冻 KubeVirt 文件系统。您也可以使用以下命令禁用此自动行为：</block>
  <block id="d65eac563b898cb7e41b8853a4fe1a3c" category="paragraph">如果您使用 Helm 安装了源应用程序，<block ref="cc1f5c1d16e33b8463c9ee27295cd5df" prefix=" " category="inline-code"></block>国旗，给予特殊待遇<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>标签键。在恢复或故障转移过程中， Trident Protect 会将此标签复制到目标命名空间，但如果源命名空间的值与源命名空间的值匹配，则会将值更新为目标命名空间的值。如果此值与源命名空间不匹配，则会将其复制到目标命名空间，而不做任何更改。</block>
  <block id="2cb1c3616d5b69db8670e7040d8b858f" category="admonition">Trident Protect 会自动选择一些资源，因为它们与您选择的资源存在关联。例如，如果您选择持久卷声明资源并且它有一个关联的 pod， Trident Protect 还会恢复关联的 pod。</block>
  <block id="17c507c96af0d4930d7ac2524e3a8acd" category="summary">您可以找到一些很棒的NetApp Trident和Trident Protect 博客。</block>
  <block id="5a2bfc6e50f399c48eab6faf10a936b5" category="doc">Trident和Trident Protect 博客</block>
  <block id="a379165e52bcf191b35cd8f667084f8b" category="paragraph">您可以在这里找到一些很棒的NetApp Trident和Trident Protect 博客：</block>
  <block id="578bed20f2bcf30122be983c8ce6db25" category="section-title">Trident Protect博客</block>
  <block id="824b24caca137b6e7945137aa9d8f586" category="inline-link-macro">利用Trident Protect 的恢复后钩子实现注册表故障转移的自动化，以进行灾难恢复</block>
  <block id="6d36c1f345cef80083542e771027df24" category="list-text">2025年5月16日：<block ref="222214dff1838a6a01ed98ff4a8282b3" category="inline-link-macro-rx"></block></block>
  <block id="0fab9671fe897fb9ef3bdbca36b49c71" category="inline-link-macro">使用Trident Protect 备份和恢复进行存储类迁移</block>
  <block id="b3ffb1f04461024c29e35bb953531d81" category="list-text">2025年5月13日：<block ref="735f3c24f5b29e94acabd21a58785df0" category="inline-link-macro-rx"></block></block>
  <block id="50b1e99149398e4544ef6941270243a2" category="inline-link-macro">使用Trident Protect 恢复后钩子重新扩展 Kubernetes 应用程序</block>
  <block id="4d3f50a0bb8d0aa06198251d243a610f" category="list-text">2025年5月9日：<block ref="8bf4497e25dfb1d363a51c8a1225e8b2" category="inline-link-macro-rx"></block></block>
  <block id="51cbce14d33c240dcce6264e624cc50c" category="inline-link-macro">隆重推出Trident Protect 基于角色的访问控制</block>
  <block id="6160324dcfbbd61773bc180e8a31deb7" category="list-text">2025年1月15日：<block ref="081a62f4f9eb4d3386a2721283573d9c" category="inline-link-macro-rx"></block></block>
  <block id="182ea97ce927399855cdcfbb500fd3b5" category="inline-link">隆重推出 tridentctl protect： Trident Protect 的强大命令行界面</block>
  <block id="8e71d16338d786f6825af5e4b954c0cc" category="list-text">2024年11月11日：<block ref="b1b53e288de7dce6fe2cc1c6406062ed" category="inline-link-rx"></block></block>
  <block id="9f2c55992b2b50b1d922c2d01e878ff7" category="inline-link-macro">Kubernetes驱动的数据管理： Trident Protect开启新时代</block>
  <block id="0e7954c659c3ab1217994a58581a985d" category="list-text">2024年11月11日：<block ref="a4680749fd618f0f08eaefc023a6637d" category="inline-link-macro-rx"></block></block>
  <block id="3e08b68951a9cc47f14998b092350bbb" category="inline-link">使用Trident Protect 保护应用程序</block>
  <block id="a12844efcfbf8005da28d423b66fbc21" category="paragraph">从使用 Restic 创建的 Amazon S3 备份中恢复 30GB 或更大的文件时，恢复操作可能会失败。作为变通方法，可以使用 Kopia 作为数据移动工具备份数据（Kopia 是备份的默认数据移动工具）。请参阅<block ref="8ad9bc2d5e7eb4a82f2f28b944c3ba3a" category="inline-link-rx"></block>以获取说明。</block>
  <block id="186ed0696d9f28961b696fce39a1ab04" category="summary">Trident Protect 使您能够使用Trident保护您的应用程序和应用程序数据。</block>
  <block id="a1fc1c89153021eb03a34941e90a9ac8" category="doc">了解Trident Protect</block>
  <block id="8e5dd4e5adac56cea1dc2d33ce1fb16d" category="paragraph">NetApp Trident Protect 提供高级应用程序数据管理功能，增强了由NetApp ONTAP存储系统和NetApp Trident CSI 存储供应器支持的有状态 Kubernetes 应用程序的功能和可用性。Trident Protect 简化了跨公有云和本地环境的容器化工作负载的管理、保护和迁移。它还通过其 API 和 CLI 提供自动化功能。</block>
  <block id="f8c19139074cb59a75b44d606c717f8c" category="paragraph">您可以通过创建自定义资源 (CR) 或使用Trident Protect CLI 来使用Trident Protect 保护应用程序。</block>
  <block id="f75cefaa6253f6baec3b37a877190d58" category="paragraph">您可以先了解Trident Protect 的相关要求，然后再进行安装：</block>
  <block id="a36c33156a01492f882621b3d9439e19" category="inline-link-macro">Trident保护要求</block>
  <block id="e729e17d911612e1e8443312aeca41bc" category="list-text"><block ref="e729e17d911612e1e8443312aeca41bc" category="inline-link-macro-rx"></block></block>
  <block id="9576ee16383bba42a76a1c5c4fba3610" category="summary">Trident Protect 使用 Kubernetes 的基于角色的访问控制 (RBAC) 模型。您可以使用Trident Protect RBAC 功能来更精细地控制对资源的访问。</block>
  <block id="ed335c13bb78e208d86e5f041a062d77" category="doc">管理Trident Protect 授权和访问控制</block>
  <block id="53f246f5b6c5c9527af81e004a5465cb" category="paragraph">Trident Protect 使用 Kubernetes 的基于角色的访问控制 (RBAC) 模型。默认情况下， Trident Protect 提供一个系统命名空间及其关联的默认服务帐户。如果您的组织拥有众多用户或特定的安全需求，则可以使用Trident Protect 的 RBAC 功能来更精细地控制对资源和命名空间的访问。</block>
  <block id="35f04ac444c4730f0b010b0b00905ab3" category="paragraph">只有管​​理员才能访问具有特权的Trident Protect 自定义资源对象，其中包括：</block>
  <block id="1ebe16955ececaae67d3cf58803335d2" category="list-text">*AutoSupportBundle*：收集指标、日志和其他敏感的Trident Protect数据</block>
  <block id="f5b0d8e5ea0bcbbfdb4c2b59f377ab84" category="paragraph">安装Trident Protect 时会创建一个默认的 ClusterRole 对象。您可以通过创建和应用 RoleBinding 对象将此 ClusterRole 绑定到服务帐户。</block>
  <block id="e7602722404dc8ff90221b60a1300a2e" category="summary">您可以使用 kube-state-metrics 和 Prometheus 监控Trident Protect 资源的状态。这可以为您提供有关部署、节点和 Pod 的运行状况信息。</block>
  <block id="8d4bffa6f29dbf7808f048c4d63753cb" category="doc">监控Trident保护资源</block>
  <block id="049debaeac5a21b1b9a5b2a67f704d77" category="paragraph">您可以使用 kube-state-metrics、Prometheus 和 Alertmanager 开源工具来监控Trident Protect 保护的资源的健康状况。</block>
  <block id="2afaaad3ea4a6b79522c2166bf833518" category="paragraph">kube-state-metrics 服务从 Kubernetes API 通信生成指标。将其与Trident Protect 结合使用，可以显示有关环境中资源状态的有用信息。</block>
  <block id="5ceeae4af4fbba7b6c3f23860e93d3cf" category="paragraph">Prometheus 是一个工具包，它可以接收 kube-state-metrics 生成的数据，并将其呈现为关于这些对象的易于阅读的信息。kube-state-metrics 和 Prometheus 共同提供了一种方法，让您可以监控使用Trident Protect 管理的资源的健康状况和状态。</block>
  <block id="12bdb359a24d5856fe76fb568abcf8d1" category="paragraph">要在Trident Protect 中启用资源监控，您需要安装和配置 kube-state-metrics、Promethus 和 Alertmanager。</block>
  <block id="3b15ac971d514086584c073fc7b9ebda" category="list-text">按照以下说明配置 kube-state-metrics，以生成Trident Protect 使用的自定义资源的指标：<block ref="0c2d96c77ebc80eb4f9df846c2904f4c" category="inline-link-rx"></block> 。</block>
  <block id="bc13327772f75ed0280d75f548627918" category="summary">Trident Protect 的存储桶自定义资源 (CR) 被称为 AppVault。AppVault 是存储桶的声明式 Kubernetes 工作流表示。</block>
  <block id="36232457f4c28ae76f2c98b665ead40c" category="doc">使用Trident Protect AppVault 对象来管理存储桶。</block>
  <block id="32b7058b3107bb8f17c6bba2e35a930c" category="paragraph">Trident Protect 的存储桶自定义资源 (CR) 被称为 AppVault。AppVault 对象是存储桶的声明性 Kubernetes 工作流表示。AppVault CR 包含存储桶在保护操作（例如备份、快照、恢复操作和SnapMirror复制）中使用的必要配置。只有管​​理员才能创建应用保险库。</block>
  <block id="07d57f7af53f2cdc1c56d31f616d6057" category="admonition">确保 AppVault CR 位于安装了Trident Protect 的集群上。如果 AppVault CR 不存在或您无法访问，命令行会显示错误。</block>
  <block id="14de1852089ccb2c36bf8405a90d3638" category="paragraph">当您使用 CR 或Trident Protect CLI 插件创建 AppVault 对象时，您可以为 Restic 和 Kopia 加密指定带有自定义密码的 Kubernetes 密钥。如果您不指定密钥， Trident Protect 将使用默认密码。</block>
  <block id="184a14468493ef937883ca0199fa55f7" category="list-text">使用Trident Protect CLI 创建 AppVault 对象时，请使用<block ref="66f22eb4f5e5b0147ea7521212b07044" prefix=" " category="inline-code"></block>用于指定密钥的参数。</block>
  <block id="c378872ba7a56053ab0f374a666d9c47" category="paragraph">请参考以下示例创建密码密钥。创建 AppVault 对象时，您可以指示Trident Protect 使用此密钥向数据移动器存储库进行身份验证。</block>
  <block id="53a277b8ef7ee43319013252fa21a97f" category="paragraph">当您访问与 S3 兼容的存储（例如 Amazon S3、通用 S3）时，<block ref="3d0b4c23d9ed62ec7d7cd16273ca2521" category="inline-link-rx"></block> ， 或者<block ref="3a31dfad8c316380b9a5542d694c5833" category="inline-link-rx"></block>使用Trident Protect 时，您需要确保提供的用户凭据具有访问存储桶的必要权限。以下是授予使用Trident Protect 进行访问所需的最低权限的策略示例。您可以将此策略应用于管理 S3 兼容存储桶策略的用户。</block>
  <block id="2705dcfef9ccf6a8c26498407937a932" category="paragraph">Trident Protect 支持 Kopia 数据移动器操作的 EKS Pod Identity。此功能可实现对 S3 存储桶的安全访问，而无需将 AWS 凭证存储在 Kubernetes 机密中。</block>
  <block id="bd004a975dcd0eeb8250e5a3d1f916ec" category="paragraph">*EKS Pod Identity 与Trident Protect 的要求*</block>
  <block id="2742f64f70d5b90bad2b1c898bdd9e64" category="paragraph">在将 EKS Pod Identity 与Trident Protect 结合使用之前，请确保以下事项：</block>
  <block id="035fe729cd4f67810a3ad8b8885b21de" category="list-text">IAM 角色与以下Trident Protect 服务帐户关联：</block>
  <block id="53c26e1b5abeebc0a5a45f5e687bfe0f" category="section-title">使用Trident Protect CLI 创建 AppVault 的示例</block>
  <block id="52cc98f9773d08c7e457aaa84d987801" category="paragraph">您可以使用Trident Protect CLI 插件查看有关您在集群上创建的 AppVault 对象的信息。</block>
  <block id="f34b73c5ce560d484c593f257864bcd3" category="paragraph">只有在Trident Protect helm 安装中指定了集群名称时，表格第一列中的集群名称才可用。例如：<block ref="b84d46473a6782105f40ea4fa2bc2964" prefix=" " category="inline-code"></block> 。</block>
  <block id="77123d25e78bd4b317b645c0cff492ef" category="open-title">使用Trident Protect CLI 删除 AppVault</block>
  <block id="3ad8f6db77e9b2740fd2b74265655e2b" category="summary">您可以使用 protectctl 命令创建和操作Trident Protect 自定义资源。</block>
  <block id="66296c0c4ab3568f7a50dfabb1fc57f9" category="doc">安装Trident Protect CLI 插件</block>
  <block id="8c5e021776b8d89478d1d4645a6666ea" category="paragraph">您可以使用Trident Protect 命令行插件，它是Trident的一个扩展。<block ref="c67fd1b99934afa248dfeb285a9a4191" prefix=" " category="inline-code"></block>用于创建和与Trident Protect 自定义资源 (CR) 交互的实用程序。</block>
  <block id="484622e8e21f4638a10f4d7275c68e17" category="list-text">下载Trident Protect CLI 插件：</block>
  <block id="10bb2ae2f693aa79b853c34cee633de3" category="paragraph">安装Trident Protect CLI 插件后，您可以为某些命令启用自动补全功能。</block>
  <block id="adcca0736eb3cb85bbcdcd2f589d5afc" category="summary">自定义Trident Protect 的默认设置，以满足您的特定需求。</block>
  <block id="595f82e1719f05918ecd1cb485230563" category="doc">定制Trident Protect 安装</block>
  <block id="5242c478ae9d3b671857964b152e827c" category="paragraph">您可以自定义Trident Protect 的默认配置，以满足您环境的特定要求。</block>
  <block id="10475501fb85172a1ecd467e858af547" category="section-title">指定Trident Protect 容器资源限制</block>
  <block id="ee382d151f8b137775f9a254da6b324a" category="paragraph">安装Trident Protect 后，您可以使用配置文件来指定Trident Protect 容器的资源限制。设置资源限制可以控制Trident Protect 操作消耗集群资源的程度。</block>
  <block id="355fc5f48551b9e07ed405860fbb4dd9" category="list-text">根据您的环境需求，在文件中填充Trident Protect 容器的资源限制选项。</block>
  <block id="b15f0b7b98832ccb49e56c94f9c03998" category="paragraph">安装Trident Protect 后，您可以使用配置文件来修改Trident Protect 容器的 OpenShift 安全上下文约束 (SCC)。这些约束定义了 Red Hat OpenShift 集群中 pod 的安全限制。</block>
  <block id="59f713e31282fe744caf06335d891f9a" category="section-title">配置其他Trident Protect 舵图设置</block>
  <block id="d26749521d8080b03797c2031c1405b1" category="cell">启用或禁用每日Trident Protect AutoSupport捆绑包上传。设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>每日定时上传功能已禁用，但您仍然可以手动生成支持包。（默认：<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> ）</block>
  <block id="da0ff93953189c1e21b7a1961b08303a" category="section-title">将Trident Protect Pod 限制在特定节点上</block>
  <block id="e327b7f51898edd8d6ac0b8e1eba09ec" category="paragraph">您可以使用 Kubernetes nodeSelector 节点选择约束，根据节点标签来控制哪些节点有资格运行Trident Protect pod。默认情况下， Trident Protect 仅限于运行 Linux 的节点。您可以根据需要进一步自定义这些限制条件。</block>
  <block id="8f02039b35e4022a5708ae80cf91e165" category="summary">Trident Protect 使管理员能够生成包含对NetApp支持有用的信息的捆绑包，包括有关受管理集群和应用程序的日志、指标和拓扑信息。如果您已连接到互联网，则可以使用自定义资源 (CR) 文件将支持包上传到NetApp支持站点 (NSS)。</block>
  <block id="d50e081382e6d63e2af634e643be98d8" category="doc">生成Trident Protect 支持包</block>
  <block id="9306c15f97b8ab2e0bc6aa8047e9e027" category="paragraph">Trident Protect 使管理员能够生成包含对NetApp支持有用的信息的捆绑包，包括有关受管理集群和应用程序的日志、指标和拓扑信息。如果您已连接到互联网，则可以使用自定义资源 (CR) 文件将支持包上传到NetApp支持站点 (NSS)。</block>
  <block id="c2429ddfa24a45055e7502efac364217" category="summary">如果您的环境符合要求，您可以按照以下步骤安装Trident Protect。</block>
  <block id="845b43fa08ae2a42cfeb159e5fc1366c" category="doc">安装并配置Trident Protect</block>
  <block id="bb50add256acfe3f6c958f2b4e018fce" category="paragraph">如果您的环境满足Trident Protect 的要求，您可以按照以下步骤在集群上安装Trident Protect。您可以从NetApp获取Trident Protect，或者从您自己的私有注册表中安装它。如果您的集群无法访问互联网，从私有注册表安装会很有帮助。</block>
  <block id="9a660681c53f773fd48d7ad58cd48d53" category="section-title">安装Trident Protect</block>
  <block id="e0efc186d85cb700edf5d19dd5bc9496" category="open-title">从NetApp安装Trident Protect</block>
  <block id="2110ce9dfcad630240ac9194e30801ad" category="list-text">使用 Helm 安装Trident Protect。代替<block ref="ecc79c99c4f86f0db5cc7f200415205f" prefix=" " category="inline-code"></block>集群名称将分配给集群，并用于标识集群的备份和快照：</block>
  <block id="272a3e0fc5f097dfcb8f549a6577a5f6" category="open-title">从私有注册表安装Trident Protect</block>
  <block id="357de3657314f9b2b3abd151f9d483ee" category="paragraph">如果您的 Kubernetes 集群无法访问互联网，您可以从私有镜像仓库安装Trident Protect。在这些示例中，请将括号中的值替换为您环境中的信息：</block>
  <block id="8bb72cea6536be6ef0764dfc1d24b096" category="list-text">创建Trident Protect 系统命名空间：</block>
  <block id="35931b526a6c0c04f0b248e331cfa12f" category="list-text">创建一个名为的文件<block ref="5744e710490761bdd5b4603b9b0487a7" prefix=" " category="inline-code"></block>。请确保其中包含以下Trident Protect 设置：</block>
  <block id="f5e4366841de053f79f8471bf881e87f" category="list-text">使用 Helm 安装Trident Protect。代替<block ref="b90b2ffedb63ca3bd8795caf4397715e" prefix=" " category="inline-code"></block>集群名称将分配给集群，并用于标识集群的备份和快照：</block>
  <block id="859907c8f7f3b8fee4686d91f3ff3a95" category="summary">您可以通过创建应用程序 CR 和关联的 AppVault CR，让Trident Protect 了解您要管理的应用程序。</block>
  <block id="bb6a1031786570f5efbd120022930c4d" category="doc">使用Trident Protect 定义管理应用程序</block>
  <block id="dd9087d2ada9f483d5993ca38f424ddd" category="paragraph">您可以通过创建应用程序 CR 和关联的 AppVault CR 来定义要使用Trident Protect 管理的应用程序。</block>
  <block id="6b351bf9a90179c1bf4dfb635cae7f8b" category="paragraph">您需要创建一个 AppVault CR，该 CR 将在对应用程序执行数据保护操作时使用，并且 AppVault CR 需要位于安装了Trident Protect 的集群上。AppVault CR 是针对您的特定环境的；有关 AppVault CR 的示例，请参阅：<block ref="7e7838343a821a01b97d2b866c568a54" category="inline-link-macro-rx"></block></block>
  <block id="3127b137b318ecdc790653543934571a" category="paragraph">您需要定义要使用Trident Protect 管理的每个应用程序。您可以通过手动创建应用程序 CR 或使用Trident Protect CLI 来定义要管理的应用程序。</block>
  <block id="5430617017ab73aa9ca4784c693f46cc" category="inline-link-macro">全球Trident Protect 冷冻设置</block>
  <block id="56338ad00ada44f147efc5a5dc486f6a" category="list-text">*metadata.annotations.protect.trident.netapp.io/skip-vm-freeze*: (_可选_) 此注解仅适用于从虚拟机定义的应用程序，例如 KubeVirt 环境，其中文件系统冻结发生在快照之前。指定此应用程序在快照期间是否可以写入文件系统。如果设置为 true，应用程序将忽略全局设置，并且可以在快照期间写入文件系统。如果设置为 false，应用程序将忽略全局设置，并且在快照期间文件系统将被冻结。如果指定了注解，但应用程序定义中没有虚拟机，则忽略该注解。如未特别说明，则申请流程如下：<block ref="cad6f4c0cd851207bf49fc0535bd1989" category="inline-link-macro-rx"></block> 。</block>
  <block id="5a0d81ce3f20a64549a2b409b49fca24" category="paragraph">创建应用时，您可以选择使用注解来指定应用在快照期间是否可以写入文件系统。这仅适用于从虚拟机定义的应用程序，例如 KubeVirt 环境，其中文件系统冻结发生在快照之前。如果您将注释设置为<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>该应用程序忽略全局设置，可以在快照期间写入文件系统。如果你把它设置为<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>该应用程序忽略全局设置，导致文件系统在快照期间冻结。如果使用了注解，但应用程序定义中没有虚拟机，则该注解将被忽略。如果您不使用注解，应用程序将遵循以下规则：<block ref="cad6f4c0cd851207bf49fc0535bd1989" category="inline-link-macro-rx"></block> 。</block>
  <block id="02d146964c2600f14f867b6e899ac16c" category="doc">使用Trident Protect 迁移应用程序</block>
  <block id="7cd0f85b8ff8c4b060bfcc24f7beb69a" category="paragraph">要将应用程序克隆到不同的集群（执行跨集群克隆），请在源集群上创建备份，然后将备份还原到不同的集群。请确保目标集群上已安装Trident Protect。</block>
  <block id="d075d7bb863ffe0aa757603d564ca090" category="paragraph">您可以使用自动保护策略或临时保护策略，通过拍摄快照和备份来保护Trident Protect 管理的所有应用程序。</block>
  <block id="b69d0d4c17b9b5532a7bf67b14c342c2" category="inline-link-macro">了解更多关于使用Trident Protect 配置文件系统冻结的信息</block>
  <block id="7927b4fc176662e1023887f00f7cc92f" category="admonition">您可以配置Trident Protect 在数据保护操作期间冻结和解冻文件系统。<block ref="e019680d5fc80a6a772db1153dfe4d66" category="inline-link-macro-rx"></block>。</block>
  <block id="f93e5c10e8a9e3890ef855e7e7b53b42" category="paragraph">如果您已安装Trident Protect，则可以为使用 azure-netapp-files 存储类且在Trident 24.06 之前创建的存储后端启用节省空间的备份和还原功能。此功能适用于 NFSv4 卷，并且不会占用容量池中的额外空间。</block>
  <block id="7f9574de510184fa4984256b9bd52f9e" category="list-text">您已安装Trident Protect。</block>
  <block id="5c988e5008390b9a3e9eec9ccb6b7275" category="list-text">您已在Trident Protect中定义了一个应用程序。在您完成此步骤之前，此应用程序的保护功能将受到限制。</block>
  <block id="8090cb32b029f72e55f999a436014ec6" category="paragraph">如果未启用快照目录，则选择常规备份功能，该功能在备份过程中会暂时占用容量池中的空间。在这种情况下，请确保容量池中有足够的空间来创建与被备份卷大小相同的临时卷。</block>
  <block id="fc53c460fa3679942307a868cb86ce5f" category="paragraph">该应用程序已准备好使用Trident Protect 进行备份和恢复。每个 PVC 也可供其他应用程序用于备份和恢复。</block>
  <block id="c792e8472de999b9df658a1202580532" category="summary">首先，请验证您的运行环境、应用程序集群、应用程序和许可证是否准备就绪。确保您的环境满足部署和运行Trident Protect 的这些要求。</block>
  <block id="dad76a1d38d59b472a3143f23d633d9b" category="section-title">Trident Protect Kubernetes 集群兼容性</block>
  <block id="fd3bd2fcfeedfca19073cae4b15b6d58" category="paragraph">Trident Protect 与各种完全托管和自托管的 Kubernetes 产品兼容，包括：</block>
  <block id="cff79812dcd5fbc00814225da6e01321" category="list-text">Trident Protect备份仅支持Linux计算节点。Windows 计算节点不支持备份操作。</block>
  <block id="9ac14e26b678482e730c473a2182b3cd" category="list-text">确保安装Trident Protect 的集群已配置运行中的快照控制器和相关的 CRD。要安装快照控制器，请参阅<block ref="5d66944a2971d1b9b5f332812a6e737b" category="inline-link-rx"></block>。</block>
  <block id="d1aeab176ad80dc54e61f7c70cd3ae3b" category="section-title">Trident Protect 存储后端兼容性</block>
  <block id="5599f02aecfd2b4e31e0c79404170afe" category="paragraph">Trident Protect 支持以下存储后端：</block>
  <block id="e8cdc937e4fea4b9dbba5e00d7662548" category="list-text">创建您计划用于应用程序或应用程序数据管理操作的任何应用程序命名空间。Trident Protect 不会为您创建这些命名空间；如果您在自定义资源中指定了不存在的命名空间，则操作将失败。</block>
  <block id="1045d62a7b99460399e0346f2ae30b23" category="paragraph">Trident Protect 支持对 nas-economy 卷进行备份和恢复操作。目前不支持将快照、克隆和SnapMirror复制到 nas-economy 卷。您需要为计划与Trident Protect 一起使用的每个 nas-economy 卷启用快照目录。</block>
  <block id="d24e3ecca2966126e528f3b9e614e910" category="paragraph">NetApp SnapMirror复制功能可与Trident Protect 配合使用，适用于以下ONTAP解决方案：</block>
  <block id="42612b6fec9e12698f24e329a0057ea3" category="list-text">* NetApp Trident *：使用ONTAP作为后端服务的源 Kubernetes 集群和目标 Kubernetes 集群上都必须存在NetApp Trident 。Trident Protect 支持使用NetApp SnapMirror技术进行复制，该技术使用以下驱动程序支持的存储类：</block>
  <block id="fd061cf50a47c913ada57ca992823154" category="list-text">*托管后端*：您需要在Trident Protect 中添加和管理ONTAP存储后端，以创建复制关系。</block>
  <block id="ee9dbfe472a4404175c214c5bc3503d6" category="paragraph">Trident Protect 要求您至少配置一个支持源集群和目标集群复制的存储后端。如果源集群和目标集群相同，为了获得最佳弹性，目标应用程序应该使用与源应用程序不同的存储后端。</block>
  <block id="e91e1786215e817bc20eba0859e44992" category="summary">您可以使用Trident Protect 从快照或备份中恢复您的应用程序。将应用程序恢复到同一集群时，从现有快照恢复速度会更快。</block>
  <block id="2f17c2ec082854ce1f49ed1f47122369" category="doc">使用Trident Protect 恢复应用程序</block>
  <block id="a70d8da6dfd6ff156b493e11162ca857" category="inline-link-macro">使用高级Trident Protect 恢复设置</block>
  <block id="24faeee2994b42f760a5f4868305d167" category="list-text">您可以使用高级设置来自定义恢复操作。欲了解更多信息，请参阅 <block ref="f411630dc75b0837a55c8046f65149cf" category="inline-link-macro-rx"></block>。</block>
  <block id="1c6eace91e0dc01cf9008fefb2dab254" category="paragraph">当您使用 BackupRestore CR 将备份还原到不同的命名空间时， Trident Protect 会在新的命名空间中还原应用程序，并为还原的应用程序创建一个应用程序 CR。为了保护已恢复的应用程序，可以创建按需备份或快照，或者制定保护计划。</block>
  <block id="a893520b03c95dde2af0c5ccef82b6fd" category="admonition">当您使用 Kopia 作为数据移动器恢复备份时，您可以选择在 CR 中指定注释或使用 CLI 来控制 Kopia 使用的临时存储的行为。请参阅<block ref="08f67cdc0555f043586a8a4182d9187b" category="inline-link-rx"></block>有关您可以配置的选项的更多信息。使用<block ref="26d4326deff4a9a34c8bff3eaf4ad7fc" prefix=" " category="inline-code"></block>有关使用Trident Protect CLI 指定注释的更多信息，请参阅命令。</block>
  <block id="e23fef665fca7137c4d6ee6b9a9ec06a" category="list-text">目标集群已安装Trident Protect。</block>
  <block id="a9f49426447e0464bef483c17509fd98" category="list-text">确保在运行 AppVault CR 时，本地环境可以连接到 AppVault CR 中定义的对象存储桶。<block ref="f9adf231483d5dde9cfc10a610b748d3" prefix=" " category="inline-code"></block>命令。如果网络限制阻止访问，请改为从目标集群上的 pod 内运行Trident Protect CLI。</block>
  <block id="cfb3749b52f4ce0c21dcdc3a9fce80f2" category="list-text">使用Trident Protect CLI 插件检查目标集群上 AppVault CR 的可用性：</block>
  <block id="00a11b317e9c8f9d94e106859445f95b" category="paragraph">您可以使用自定义资源 (CR) 文件从快照恢复数据，恢复到不同的命名空间或原始源命名空间。当您使用 SnapshotRestore CR 将快照还原到不同的命名空间时， Trident Protect 会在新的命名空间中还原应用程序，并为还原的应用程序创建一个应用程序 CR。为了保护已恢复的应用程序，可以创建按需备份或快照，或者制定保护计划。</block>
  <block id="f493357e2629878fdea1bf9f7073c82d" category="summary">您可以使用注释、命名空间设置和存储选项来自定义Trident Protect 恢复操作。</block>
  <block id="b3cc398bcb7f536fcb9416eb16f4fff6" category="summary">如果您要从试用版升级到完整版产品，可能需要移除Trident Protect 组件。</block>
  <block id="dd28e2f5a84c48ae81ab3d88858e28ee" category="doc">卸载Trident Protect</block>
  <block id="cb38bfec92928c82db030cfdce9bccdf" category="paragraph">要移除Trident Protect，请执行以下步骤。</block>
  <block id="2e5c0707a785908014e16ab0cbf18366" category="list-text">删除Trident Protect CR 文件：</block>
  <block id="776420d2a523398306e23e8ddde41835" category="list-text">移除Trident保护：</block>
  <block id="4ddbb510a6a83f944b61747e65e231af" category="list-text">移除Trident Protect 命名空间：</block>
  <block id="cde61ef6aff0f74c93f975b94c538c81" category="summary">您可以将Trident Protect 升级到最新版本，以享受新功能或修复错误。</block>
  <block id="516ee22feede3bac94e552d7d7d47c7a" category="doc">升级Trident保护</block>
  <block id="af256125ca711d0e16dc4c173930116f" category="paragraph">要升级Trident Protect，请执行以下步骤。</block>
  <block id="578bfdcecd0a48c1dad189ec9d70204a" category="list-text">升级Trident Protect CRD：</block>
  <block id="814a37dc29d2671dd3cdbf3982ee4a85" category="admonition">如果您是从 25.06 之前的版本升级，则需要执行此步骤，因为 CRD 现在已包含在Trident Protect Helm 图表中。</block>
  <block id="e9234397b7137bc49ace1f1229a5a982" category="list-text">升级Trident保护：</block>
  <block id="6f8a1c340d72b735b7cd3b6957d814e3" category="summary">您可以使用Trident Protect 为应用程序创建自定义执行钩子。您需要拥有所有者、管理员或成员权限才能创建执行钩子。</block>
  <block id="c8032c002085d9b42031ec80a534e894" category="doc">管理Trident Protect 执行钩子</block>
  <block id="ba45cbc00acdb40a749e6b9a5bf95eff" category="paragraph">Trident Protect 支持以下几种执行钩子类型，具体取决于它们的运行时机：</block>
  <block id="019c0400e3d10bda84f61aadf4d88474" category="list-text">如果适用，则会发生文件系统冻结。<block ref="e019680d5fc80a6a772db1153dfe4d66" category="inline-link-macro-rx"></block>。</block>
  <block id="1f3ffd6698226c67c537c364eaf041be" category="list-text">Trident Protect 要求执行钩子使用的脚本以可执行 shell 脚本的格式编写。</block>
  <block id="5f751924fb5492c94aa54485264a30e9" category="list-text">Trident Protect 使用执行钩子设置和任何匹配条件来确定哪些钩子适用于快照、备份或恢复操作。</block>
  <block id="d46485186a1153a2fbf335ff2db190f4" category="paragraph">添加到执行挂钩的每个过滤器都使用正则表达式来匹配集群中的容器。当钩子与容器匹配时，钩子将在该容器上运行其关联的脚本。过滤器的正则表达式使用正则表达式 2 (RE2) 语法，该语法不支持创建从匹配列表中排除容器的过滤器。有关Trident Protect 在执行钩子过滤器中支持的正则表达式语法的详细信息，请参阅<block ref="d4d0dd655d04b2dc5b031206e1febd50" category="inline-link-rx"></block>。</block>
  <block id="993c1145381cfb36c2a9263555019c2a" category="paragraph">您可以使用以下方法为应用程序创建自定义执行钩子。您需要拥有所有者、管理员或成员权限才能创建执行钩子。</block>
  <block id="d7fe96269d51ee2db54db3f582053bbc" category="list-text">配置以下属性以匹配您的Trident Protect 环境和集群配置：</block>
  <block id="7614dc1d9f60c2a1a41782cd8da64d6a" category="summary">使用Trident Protect，您可以利用NetApp SnapMirror技术的异步复制功能，将数据和应用程序更改从一个存储后端复制到另一个存储后端，无论是在同一集群内还是在不同集群之间。</block>
  <block id="752b9530af53850991ee625c360b5886" category="doc">使用NetApp SnapMirror和Trident Protect 复制应用程序</block>
  <block id="372808e5f5197d8bced21ed6beef8221" category="paragraph">要了解有关执行钩子的更多信息，请参阅<block ref="81ec01a9d0e5d60206e703bc5aa140b4" category="inline-link-macro-rx"></block>。</block>
  <block id="e7278dfae13b6c5f2e23e4b66378889e" category="list-text">选择Trident Protect 拍摄应用程序快照的频率（包括应用程序的 Kubernetes 资源以及应用程序每个卷的卷快照）。</block>
  <block id="b89f2db2cb82925801d5b1149de27c17" category="paragraph">使用Trident Protect，您可以将复制的应用程序故障转移到目标集群。此过程会停止复制关系，并将应用程序在目标集群上联机。如果源集群上的应用程序正在运行， Trident Protect 不会停止该应用程序。</block>
  <block id="b65e765544fa343d7e8889398daebb9c" category="paragraph">当您反转复制方向时， Trident Protect 会将应用程序移动到目标存储后端，同时继续复制回原始源存储后端。Trident Protect 会停止源应用程序并将数据复制到目标位置，然后再故障转移到目标应用程序。</block>
  <block id="61295c8685fb78b94f9c72b204443888" category="paragraph">使用Trident Protect，您可以通过以下步骤序列在故障转移操作后实现“故障恢复”。在此恢复原始复制方向的工作流程中， Trident Protect 会将任何应用程序更改复制（重新同步）回原始源应用程序，然后再反转复制方向。</block>
  <block id="b7a5625966d39ef3d8e28034faa1bd0a" category="paragraph">“新增功能”摘要提供了有关Trident和Trident Protect 版本增强功能、修复程序和弃用项的详细信息。</block>
  <block id="9b6a034e6854c5f27feb3ac185829f8d" category="section-title">Trident保护</block>
  <block id="dcf5f26cacbeeaa8161c0edfd64677e8" category="paragraph">NetApp Trident Protect 提供高级应用程序数据管理功能，增强了由NetApp ONTAP存储系统和NetApp Trident CSI 存储供应器支持的有状态 Kubernetes 应用程序的功能和可用性。</block>
  <block id="e1291fe029973ec93a54b63b382dcf15" category="paragraph">从Trident 25.02 开始，“新增功能”摘要提供了Trident和Trident Protect 版本的增强功能、修复和弃用详情。</block>
  <block id="b3ede630079275ba568ae0ecd38dd1b8" category="list-text">为 KubeVirt / OpenShift 虚拟化虚拟机添加了备份和恢复支持，支持 volumeMode: File 和 volumeMode: Block（原始设备）存储。此支持与所有Trident驱动程序兼容，并且在使用NetApp SnapMirror和Trident Protect 复制存储时增强了现有的保护功能。</block>
  <block id="0ca0fb71ff9be8f3e574ccbd272e9df8" category="list-text">增加了在Trident Protect 安装过程中配置安全上下文约束 (SCC) 的功能。</block>
  <block id="0585ebe3e3fa33ee030cab4d8f843c2b" category="list-text">增加了在Trident Protect 安装过程中配置 nodeSelector 的支持。</block>
  <block id="f2492ecd5d283ce85dae0f4a9ee08a0a" category="inline-link-macro">了解更多关于Trident Protect的信息</block>
  <block id="fcea491f131646a6f887b5a13212cd84" category="paragraph"><block ref="30e9c40051e05c72dc744ea1f1015e1f" category="inline-link-macro-rx"></block>。</block>
  <block id="bb74735100fa22a9878799bf2d21623f" category="sidebar">使用Trident Protect 实现高级数据保护</block>
  <block id="77cc7f8867b1ad1e9856bcd26c8ecff3" category="sidebar">部署Trident保护</block>
  <block id="70568f333da28442c152ac2e1f71e1a0" category="sidebar">使用Trident Protect 保护应用程序</block>
  <block id="8545a0d7cdafff8da2dece1a851630dc" category="sidebar">管理Trident Protect</block>
  <block id="83ff2dd2ff6a9ee85daa1b0fefef4019" category="sidebar">使用Trident Protect 管理执行钩子</block>
  <block id="01a2f6f3fc3712c00aaaff540b7187f3" category="list-text">OpenShift 容器平台在 AMD64 和 ARM64 架构上支持的 Red Hat Enterprise Linux CoreOS (RHCOS) 版本</block>
  <block id="1c93bd59e1abbbe543685399acba3c3b" category="list-text">Red Hat Enterprise Linux (RHEL) 8 或更高版本，支持 AMD64 和 ARM64 架构</block>
  <block id="d79b838675f4d040c12110c1c22fcf32" category="list-text">Ubuntu 22.04 LTS 或更高版本，支持 AMD64 和 ARM64 架构</block>
  <block id="02869471b3c4ac5c57fb8c2e1d4355dd" category="list-text">SUSE Linux Enterprise Server (SLES) 15 或更高版本</block>
</blocks>